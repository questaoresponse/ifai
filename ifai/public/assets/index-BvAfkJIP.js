var $O=Object.defineProperty;var KO=(n,e,t)=>e in n?$O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var N_=(n,e,t)=>KO(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var k_={exports:{}},ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function QO(){if(Ow)return ku;Ow=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var d in s)d!=="key"&&(a[d]=s[d])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:a}}return ku.Fragment=e,ku.jsx=t,ku.jsxs=t,ku}var Dw;function YO(){return Dw||(Dw=1,k_.exports=QO()),k_.exports}var E=YO(),O_={exports:{}},Ou={},D_={exports:{}},M_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function WO(){return Mw||(Mw=1,function(n){function e(se,Te){var xe=se.length;se.push(Te);e:for(;0<xe;){var rt=xe-1>>>1,j=se[rt];if(0<s(j,Te))se[rt]=Te,se[xe]=j,xe=rt;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var Te=se[0],xe=se.pop();if(xe!==Te){se[0]=xe;e:for(var rt=0,j=se.length,ue=j>>>1;rt<ue;){var re=2*(rt+1)-1,H=se[re],ge=re+1,_e=se[ge];if(0>s(H,xe))ge<j&&0>s(_e,H)?(se[rt]=_e,se[ge]=xe,rt=ge):(se[rt]=H,se[re]=xe,rt=re);else if(ge<j&&0>s(_e,xe))se[rt]=_e,se[ge]=xe,rt=ge;else break e}}return Te}function s(se,Te){var xe=se.sortIndex-Te.sortIndex;return xe!==0?xe:se.id-Te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],p=[],_=1,v=null,T=3,R=!1,S=!1,D=!1,k=!1,L=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function K(se){for(var Te=t(p);Te!==null;){if(Te.callback===null)i(p);else if(Te.startTime<=se)i(p),Te.sortIndex=Te.expirationTime,e(f,Te);else break;Te=t(p)}}function te(se){if(D=!1,K(se),!S)if(t(f)!==null)S=!0,pe||(pe=!0,q());else{var Te=t(p);Te!==null&&_t(te,Te.startTime-se)}}var pe=!1,N=-1,A=5,x=-1;function O(){return k?!0:!(n.unstable_now()-x<A)}function U(){if(k=!1,pe){var se=n.unstable_now();x=se;var Te=!0;try{e:{S=!1,D&&(D=!1,B(N),N=-1),R=!0;var xe=T;try{t:{for(K(se),v=t(f);v!==null&&!(v.expirationTime>se&&O());){var rt=v.callback;if(typeof rt=="function"){v.callback=null,T=v.priorityLevel;var j=rt(v.expirationTime<=se);if(se=n.unstable_now(),typeof j=="function"){v.callback=j,K(se),Te=!0;break t}v===t(f)&&i(f),K(se)}else i(f);v=t(f)}if(v!==null)Te=!0;else{var ue=t(p);ue!==null&&_t(te,ue.startTime-se),Te=!1}}break e}finally{v=null,T=xe,R=!1}Te=void 0}}finally{Te?q():pe=!1}}}var q;if(typeof z=="function")q=function(){z(U)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,it=M.port2;M.port1.onmessage=U,q=function(){it.postMessage(null)}}else q=function(){L(U,0)};function _t(se,Te){N=L(function(){se(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(se){switch(T){case 1:case 2:case 3:var Te=3;break;default:Te=T}var xe=T;T=Te;try{return se()}finally{T=xe}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(se,Te){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var xe=T;T=se;try{return Te()}finally{T=xe}},n.unstable_scheduleCallback=function(se,Te,xe){var rt=n.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?rt+xe:rt):xe=rt,se){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=xe+j,se={id:_++,callback:Te,priorityLevel:se,startTime:xe,expirationTime:j,sortIndex:-1},xe>rt?(se.sortIndex=xe,e(p,se),t(f)===null&&se===t(p)&&(D?(B(N),N=-1):D=!0,_t(te,xe-rt))):(se.sortIndex=j,e(f,se),S||R||(S=!0,pe||(pe=!0,q()))),se},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(se){var Te=T;return function(){var xe=T;T=Te;try{return se.apply(this,arguments)}finally{T=xe}}}}(M_)),M_}var Pw;function XO(){return Pw||(Pw=1,D_.exports=WO()),D_.exports}var P_={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function JO(){if(Lw)return Qe;Lw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function T(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function k(j,ue,re){this.props=j,this.context=ue,this.refs=D,this.updater=re||R}k.prototype.isReactComponent={},k.prototype.setState=function(j,ue){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ue,"setState")},k.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function L(){}L.prototype=k.prototype;function B(j,ue,re){this.props=j,this.context=ue,this.refs=D,this.updater=re||R}var z=B.prototype=new L;z.constructor=B,S(z,k.prototype),z.isPureReactComponent=!0;var K=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function N(j,ue,re,H,ge,_e){return re=_e.ref,{$$typeof:n,type:j,key:ue,ref:re!==void 0?re:null,props:_e}}function A(j,ue){return N(j.type,ue,void 0,void 0,void 0,j.props)}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function O(j){var ue={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(re){return ue[re]})}var U=/\/+/g;function q(j,ue){return typeof j=="object"&&j!==null&&j.key!=null?O(""+j.key):ue.toString(36)}function M(){}function it(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(M,M):(j.status="pending",j.then(function(ue){j.status==="pending"&&(j.status="fulfilled",j.value=ue)},function(ue){j.status==="pending"&&(j.status="rejected",j.reason=ue)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function _t(j,ue,re,H,ge){var _e=typeof j;(_e==="undefined"||_e==="boolean")&&(j=null);var Z=!1;if(j===null)Z=!0;else switch(_e){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(j.$$typeof){case n:case e:Z=!0;break;case _:return Z=j._init,_t(Z(j._payload),ue,re,H,ge)}}if(Z)return ge=ge(j),Z=H===""?"."+q(j,0):H,K(ge)?(re="",Z!=null&&(re=Z.replace(U,"$&/")+"/"),_t(ge,ue,re,"",function(be){return be})):ge!=null&&(x(ge)&&(ge=A(ge,re+(ge.key==null||j&&j.key===ge.key?"":(""+ge.key).replace(U,"$&/")+"/")+Z)),ue.push(ge)),1;Z=0;var ce=H===""?".":H+":";if(K(j))for(var ae=0;ae<j.length;ae++)H=j[ae],_e=ce+q(H,ae),Z+=_t(H,ue,re,_e,ge);else if(ae=T(j),typeof ae=="function")for(j=ae.call(j),ae=0;!(H=j.next()).done;)H=H.value,_e=ce+q(H,ae++),Z+=_t(H,ue,re,_e,ge);else if(_e==="object"){if(typeof j.then=="function")return _t(it(j),ue,re,H,ge);throw ue=String(j),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Z}function se(j,ue,re){if(j==null)return j;var H=[],ge=0;return _t(j,H,"","",function(_e){return ue.call(re,_e,ge++)}),H}function Te(j){if(j._status===-1){var ue=j._result;ue=ue(),ue.then(function(re){(j._status===0||j._status===-1)&&(j._status=1,j._result=re)},function(re){(j._status===0||j._status===-1)&&(j._status=2,j._result=re)}),j._status===-1&&(j._status=0,j._result=ue)}if(j._status===1)return j._result.default;throw j._result}var xe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function rt(){}return Qe.Children={map:se,forEach:function(j,ue,re){se(j,function(){ue.apply(this,arguments)},re)},count:function(j){var ue=0;return se(j,function(){ue++}),ue},toArray:function(j){return se(j,function(ue){return ue})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Qe.Component=k,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=B,Qe.StrictMode=i,Qe.Suspense=f,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return te.H.useMemoCache(j)}},Qe.cache=function(j){return function(){return j.apply(null,arguments)}},Qe.cloneElement=function(j,ue,re){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var H=S({},j.props),ge=j.key,_e=void 0;if(ue!=null)for(Z in ue.ref!==void 0&&(_e=void 0),ue.key!==void 0&&(ge=""+ue.key),ue)!pe.call(ue,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&ue.ref===void 0||(H[Z]=ue[Z]);var Z=arguments.length-2;if(Z===1)H.children=re;else if(1<Z){for(var ce=Array(Z),ae=0;ae<Z;ae++)ce[ae]=arguments[ae+2];H.children=ce}return N(j.type,ge,void 0,void 0,_e,H)},Qe.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},Qe.createElement=function(j,ue,re){var H,ge={},_e=null;if(ue!=null)for(H in ue.key!==void 0&&(_e=""+ue.key),ue)pe.call(ue,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(ge[H]=ue[H]);var Z=arguments.length-2;if(Z===1)ge.children=re;else if(1<Z){for(var ce=Array(Z),ae=0;ae<Z;ae++)ce[ae]=arguments[ae+2];ge.children=ce}if(j&&j.defaultProps)for(H in Z=j.defaultProps,Z)ge[H]===void 0&&(ge[H]=Z[H]);return N(j,_e,void 0,void 0,null,ge)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(j){return{$$typeof:d,render:j}},Qe.isValidElement=x,Qe.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Te}},Qe.memo=function(j,ue){return{$$typeof:p,type:j,compare:ue===void 0?null:ue}},Qe.startTransition=function(j){var ue=te.T,re={};te.T=re;try{var H=j(),ge=te.S;ge!==null&&ge(re,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(rt,xe)}catch(_e){xe(_e)}finally{te.T=ue}},Qe.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Qe.use=function(j){return te.H.use(j)},Qe.useActionState=function(j,ue,re){return te.H.useActionState(j,ue,re)},Qe.useCallback=function(j,ue){return te.H.useCallback(j,ue)},Qe.useContext=function(j){return te.H.useContext(j)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(j,ue){return te.H.useDeferredValue(j,ue)},Qe.useEffect=function(j,ue,re){var H=te.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(j,ue)},Qe.useId=function(){return te.H.useId()},Qe.useImperativeHandle=function(j,ue,re){return te.H.useImperativeHandle(j,ue,re)},Qe.useInsertionEffect=function(j,ue){return te.H.useInsertionEffect(j,ue)},Qe.useLayoutEffect=function(j,ue){return te.H.useLayoutEffect(j,ue)},Qe.useMemo=function(j,ue){return te.H.useMemo(j,ue)},Qe.useOptimistic=function(j,ue){return te.H.useOptimistic(j,ue)},Qe.useReducer=function(j,ue,re){return te.H.useReducer(j,ue,re)},Qe.useRef=function(j){return te.H.useRef(j)},Qe.useState=function(j){return te.H.useState(j)},Qe.useSyncExternalStore=function(j,ue,re){return te.H.useSyncExternalStore(j,ue,re)},Qe.useTransition=function(){return te.H.useTransition()},Qe.version="19.1.0",Qe}var Uw;function Sv(){return Uw||(Uw=1,P_.exports=JO()),P_.exports}var L_={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function ZO(){if(Vw)return qn;Vw=1;var n=Sv();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,p,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:p,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qn.createPortal=function(f,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(f,p,null,_)},qn.flushSync=function(f){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=_,i.d.f()}},qn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},qn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},qn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var _=p.as,v=d(_,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:R}):_==="script"&&i.d.X(f,{crossOrigin:v,integrity:T,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},qn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},qn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,v=d(_,p.crossOrigin);i.d.L(f,_,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},qn.preloadModule=function(f,p){if(typeof f=="string")if(p){var _=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},qn.requestFormReset=function(f){i.d.r(f)},qn.unstable_batchedUpdates=function(f,p){return f(p)},qn.useFormState=function(f,p,_){return c.H.useFormState(f,p,_)},qn.useFormStatus=function(){return c.H.useHostTransitionStatus()},qn.version="19.1.0",qn}var jw;function eD(){if(jw)return L_.exports;jw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),L_.exports=ZO(),L_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function tD(){if(Bw)return Ou;Bw=1;var n=XO(),e=Sv(),t=eD();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function f(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,u=o;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return d(m),r;if(g===u)return d(m),o;g=g.sibling}throw Error(i(188))}if(l.return!==u.return)l=m,u=g;else{for(var w=!1,C=m.child;C;){if(C===l){w=!0,l=m,u=g;break}if(C===u){w=!0,u=m,l=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===l){w=!0,l=g,u=m;break}if(C===u){w=!0,u=g,l=m;break}C=C.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function p(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=p(r),o!==null)return o;r=r.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),z=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function it(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case k:return"Profiler";case D:return"StrictMode";case te:return"Suspense";case pe:return"SuspenseList";case x:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case z:return(r.displayName||"Context")+".Provider";case B:return(r._context.displayName||"Context")+".Consumer";case K:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return o=r.displayName||null,o!==null?o:it(r.type)||"Memo";case A:o=r._payload,r=r._init;try{return it(r(o))}catch{}}return null}var _t=Array.isArray,se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},rt=[],j=-1;function ue(r){return{current:r}}function re(r){0>j||(r.current=rt[j],rt[j]=null,j--)}function H(r,o){j++,rt[j]=r.current,r.current=o}var ge=ue(null),_e=ue(null),Z=ue(null),ce=ue(null);function ae(r,o){switch(H(Z,o),H(_e,r),H(ge,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?ow(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=ow(o),r=aw(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(ge),H(ge,r)}function be(){re(ge),re(_e),re(Z)}function Xe(r){r.memoizedState!==null&&H(ce,r);var o=ge.current,l=aw(o,r.type);o!==l&&(H(_e,r),H(ge,l))}function ct(r){_e.current===r&&(re(ge),re(_e)),ce.current===r&&(re(ce),Au._currentValue=xe)}var xn=Object.prototype.hasOwnProperty,oi=n.unstable_scheduleCallback,Ji=n.unstable_cancelCallback,gr=n.unstable_shouldYield,ai=n.unstable_requestPaint,li=n.unstable_now,kc=n.unstable_getCurrentPriorityLevel,Ho=n.unstable_ImmediatePriority,Bs=n.unstable_UserBlockingPriority,$r=n.unstable_NormalPriority,J=n.unstable_LowPriority,G=n.unstable_IdlePriority,Se=n.log,Ce=n.unstable_setDisableYieldValue,we=null,ve=null;function me(r){if(typeof Se=="function"&&Ce(r),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(we,r)}catch{}}var Ae=Math.clz32?Math.clz32:Je,yt=Math.log,mt=Math.LN2;function Je(r){return r>>>=0,r===0?32:31-(yt(r)/mt|0)|0}var Zi=256,_r=4194304;function Rt(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ki(r,o,l){var u=r.pendingLanes;if(u===0)return 0;var m=0,g=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=Rt(u):(w&=C,w!==0?m=Rt(w):l||(l=C&~r,l!==0&&(m=Rt(l))))):(C=u&~g,C!==0?m=Rt(C):w!==0?m=Rt(w):l||(l=u&~r,l!==0&&(m=Rt(l)))),m===0?0:o!==0&&o!==m&&(o&g)===0&&(g=m&-m,l=o&-o,g>=l||g===32&&(l&4194048)!==0)?o:m}function ci(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function wt(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pt(){var r=Zi;return Zi<<=1,(Zi&4194048)===0&&(Zi=256),r}function He(){var r=_r;return _r<<=1,(_r&62914560)===0&&(_r=4194304),r}function Et(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Me(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ge(r,o,l,u,m,g){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var C=r.entanglements,P=r.expirationTimes,W=r.hiddenUpdates;for(l=w&~l;0<l;){var oe=31-Ae(l),de=1<<oe;C[oe]=0,P[oe]=-1;var X=W[oe];if(X!==null)for(W[oe]=null,oe=0;oe<X.length;oe++){var ee=X[oe];ee!==null&&(ee.lane&=-536870913)}l&=~de}u!==0&&Ke(r,u,0),g!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=g&~(w&~o))}function Ke(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var u=31-Ae(o);r.entangledLanes|=o,r.entanglements[u]=r.entanglements[u]|1073741824|l&4194090}function Lt(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var u=31-Ae(l),m=1<<u;m&o|r[u]&o&&(r[u]|=o),l&=~m}}function on(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Xn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function an(){var r=Te.p;return r!==0?r:(r=window.event,r===void 0?32:Aw(r.type))}function Go(r,o){var l=Te.p;try{return Te.p=r,o()}finally{Te.p=l}}var Ut=Math.random().toString(36).slice(2),en="__reactFiber$"+Ut,Wt="__reactProps$"+Ut,Tn="__reactContainer$"+Ut,er="__reactEvents$"+Ut,Wa="__reactListeners$"+Ut,Kr="__reactHandles$"+Ut,Xa="__reactResources$"+Ut,$o="__reactMarker$"+Ut;function Fs(r){delete r[en],delete r[Wt],delete r[er],delete r[Wa],delete r[Kr]}function Qr(r){var o=r[en];if(o)return o;for(var l=r.parentNode;l;){if(o=l[Tn]||l[en]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=dw(r);r!==null;){if(l=r[en])return l;r=dw(r)}return o}r=l,l=r.parentNode}return null}function yr(r){if(r=r[en]||r[Tn]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function vr(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Jn(r){var o=r[Xa];return o||(o=r[Xa]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function tn(r){r[$o]=!0}var Oc=new Set,Ja={};function tr(r,o){Yr(r,o),Yr(r+"Capture",o)}function Yr(r,o){for(Ja[r]=o,r=0;r<o.length;r++)Oc.add(o[r])}var th=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nh={},Ko={};function ih(r){return xn.call(Ko,r)?!0:xn.call(nh,r)?!1:th.test(r)?Ko[r]=!0:(nh[r]=!0,!1)}function zs(r,o,l){if(ih(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function Er(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function Nn(r,o,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+u)}}var Qo,rh;function Wr(r){if(Qo===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Qo=o&&o[1]||"",rh=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qo+r+rh}var Za=!1;function el(r,o){if(!r||Za)return"";Za=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ee){var X=ee}Reflect.construct(r,[],de)}else{try{de.call()}catch(ee){X=ee}r.call(de.prototype)}}else{try{throw Error()}catch(ee){X=ee}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],C=g[1];if(w&&C){var P=w.split(`
`),W=C.split(`
`);for(m=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;if(u===P.length||m===W.length)for(u=P.length-1,m=W.length-1;1<=u&&0<=m&&P[u]!==W[m];)m--;for(;1<=u&&0<=m;u--,m--)if(P[u]!==W[m]){if(u!==1||m!==1)do if(u--,m--,0>m||P[u]!==W[m]){var oe=`
`+P[u].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=u&&0<=m);break}}}finally{Za=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Wr(l):""}function Dc(r){switch(r.tag){case 26:case 27:case 5:return Wr(r.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return el(r.type,!1);case 11:return el(r.type.render,!1);case 1:return el(r.type,!0);case 31:return Wr("Activity");default:return""}}function tl(r){try{var o="";do o+=Dc(r),r=r.return;while(r);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Zn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Mc(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Mp(r){var o=Mc(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),u=""+r[o];if(!r.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return m.call(this)},set:function(w){u=""+w,g.call(this,w)}}),Object.defineProperty(r,o,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function nl(r){r._valueTracker||(r._valueTracker=Mp(r))}function Pc(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),u="";return r&&(u=Mc(r)?r.checked?"true":"false":r.value),r=u,r!==l?(o.setValue(r),!0):!1}function Yo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Pp=/[\n"\\]/g;function ln(r){return r.replace(Pp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function vi(r,o,l,u,m,g,w,C){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),o!=null?w==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Zn(o)):r.value!==""+Zn(o)&&(r.value=""+Zn(o)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),o!=null?qs(r,w,Zn(o)):l!=null?qs(r,w,Zn(l)):u!=null&&r.removeAttribute("value"),m==null&&g!=null&&(r.defaultChecked=!!g),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Zn(C):r.removeAttribute("name")}function Wo(r,o,l,u,m,g,w,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),o!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||o!=null))return;l=l!=null?""+Zn(l):"",o=o!=null?""+Zn(o):l,C||o===r.value||(r.value=o),r.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function qs(r,o,l){o==="number"&&Yo(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Xr(r,o,l,u){if(r=r.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=o.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&u&&(r[l].defaultSelected=!0)}else{for(l=""+Zn(l),o=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}o!==null||r[m].disabled||(o=r[m])}o!==null&&(o.selected=!0)}}function It(r,o,l){if(o!=null&&(o=""+Zn(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+Zn(l):""}function Xo(r,o,l,u){if(o==null){if(u!=null){if(l!=null)throw Error(i(92));if(_t(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),o=l}l=Zn(o),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u)}function Oi(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sh(r,o,l){var u=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":u?r.setProperty(o,l):typeof l!="number"||l===0||Jo.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function Lc(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&l[m]!==u&&sh(r,m,u)}else for(var g in o)o.hasOwnProperty(g)&&sh(r,g,o[g])}function Uc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Up=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(r){return Up.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Jr=null;function Di(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Zr=null,es=null;function Vc(r){var o=yr(r);if(o&&(r=o.stateNode)){var l=r[Wt]||null;e:switch(r=o.stateNode,o.type){case"input":if(vi(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ln(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var u=l[o];if(u!==r&&u.form===r.form){var m=u[Wt]||null;if(!m)throw Error(i(90));vi(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<l.length;o++)u=l[o],u.form===r.form&&Pc(u)}break e;case"textarea":It(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Xr(r,!!l.multiple,o,!1)}}}var Tr=!1;function oh(r,o,l){if(Tr)return r(o,l);Tr=!0;try{var u=r(o);return u}finally{if(Tr=!1,(Zr!==null||es!==null)&&(Zh(),Zr&&(o=Zr,r=es,es=Zr=null,Vc(o),r)))for(o=0;o<r.length;o++)Vc(r[o])}}function Zo(r,o){var l=r.stateNode;if(l===null)return null;var u=l[Wt]||null;if(u===null)return null;l=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mi=!1;if(nr)try{var ea={};Object.defineProperty(ea,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",ea,ea),window.removeEventListener("test",ea,ea)}catch{Mi=!1}var br=null,Hs=null,ts=null;function jc(){if(ts)return ts;var r,o=Hs,l=o.length,u,m="value"in br?br.value:br.textContent,g=m.length;for(r=0;r<l&&o[r]===m[r];r++);var w=l-r;for(u=1;u<=w&&o[l-u]===m[g-u];u++);return ts=m.slice(r,1<u?1-u:void 0)}function wr(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Sr(){return!0}function Bc(){return!1}function bn(r){function o(l,u,m,g,w){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Sr:Bc,this.isPropagationStopped=Bc,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),o}var Tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=bn(Tt),ta=_({},Tt,{view:0,detail:0}),ah=bn(ta),sl,ol,Cr,na=_({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cr&&(Cr&&r.type==="mousemove"?(sl=r.screenX-Cr.screenX,ol=r.screenY-Cr.screenY):ol=sl=0,Cr=r),sl)},movementY:function(r){return"movementY"in r?r.movementY:ol}}),Pi=bn(na),lh=_({},na,{dataTransfer:0}),Vp=bn(lh),ia=_({},ta,{relatedTarget:0}),al=bn(ia),Fc=_({},Tt,{animationName:0,elapsedTime:0,pseudoElement:0}),ll=bn(Fc),ch=_({},Tt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),cl=bn(ch),jp=_({},Tt,{data:0}),zc=bn(jp),ra={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=dh[r])?!!o[r]:!1}function sa(){return qc}var hh=_({},ta,{key:function(r){if(r.key){var o=ra[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=wr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?uh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sa,charCode:function(r){return r.type==="keypress"?wr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?wr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ul=bn(hh),fh=_({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hc=bn(fh),ns=_({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sa}),mh=bn(ns),ph=_({},Tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),gh=bn(ph),_h=_({},na,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),dl=bn(_h),ei=_({},Tt,{newState:0,oldState:0}),yh=bn(ei),vh=[9,13,27,32],Ar=nr&&"CompositionEvent"in window,h=null;nr&&"documentMode"in document&&(h=document.documentMode);var y=nr&&"TextEvent"in window&&!h,b=nr&&(!Ar||h&&8<h&&11>=h),I=" ",Q=!1;function ne(r,o){switch(r){case"keyup":return vh.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ee(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ut=!1;function fn(r,o){switch(r){case"compositionend":return Ee(o);case"keypress":return o.which!==32?null:(Q=!0,I);case"textInput":return r=o.data,r===I&&Q?null:r;default:return null}}function dt(r,o){if(ut)return r==="compositionend"||!Ar&&ne(r,o)?(r=jc(),ts=Hs=br=null,ut=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return b&&o.locale!=="ko"?null:o.data;default:return null}}var wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mn(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!wn[r.type]:o==="textarea"}function is(r,o,l,u){Zr?es?es.push(u):es=[u]:Zr=u,o=of(o,"onChange"),0<o.length&&(l=new rl("onChange","change",null,l,u),r.push({event:l,listeners:o}))}var kn=null,Rr=null;function Gc(r){tw(r,0)}function Eh(r){var o=vr(r);if(Pc(o))return r}function b0(r,o){if(r==="change")return o}var w0=!1;if(nr){var Bp;if(nr){var Fp="oninput"in document;if(!Fp){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),Fp=typeof S0.oninput=="function"}Bp=Fp}else Bp=!1;w0=Bp&&(!document.documentMode||9<document.documentMode)}function C0(){kn&&(kn.detachEvent("onpropertychange",A0),Rr=kn=null)}function A0(r){if(r.propertyName==="value"&&Eh(Rr)){var o=[];is(o,Rr,r,Di(r)),oh(Gc,o)}}function bk(r,o,l){r==="focusin"?(C0(),kn=o,Rr=l,kn.attachEvent("onpropertychange",A0)):r==="focusout"&&C0()}function wk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Eh(Rr)}function Sk(r,o){if(r==="click")return Eh(o)}function Ck(r,o){if(r==="input"||r==="change")return Eh(o)}function Ak(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Ei=typeof Object.is=="function"?Object.is:Ak;function $c(r,o){if(Ei(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),u=Object.keys(o);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!xn.call(o,m)||!Ei(r[m],o[m]))return!1}return!0}function R0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function I0(r,o){var l=R0(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=o&&u>=o)return{node:l,offset:o-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=R0(l)}}function x0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?x0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function N0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Yo(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=Yo(r.document)}return o}function zp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var Rk=nr&&"documentMode"in document&&11>=document.documentMode,hl=null,qp=null,Kc=null,Hp=!1;function k0(r,o,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hp||hl==null||hl!==Yo(u)||(u=hl,"selectionStart"in u&&zp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Kc&&$c(Kc,u)||(Kc=u,u=of(qp,"onSelect"),0<u.length&&(o=new rl("onSelect","select",null,o,l),r.push({event:o,listeners:u}),o.target=hl)))}function oa(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var fl={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},Gp={},O0={};nr&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function aa(r){if(Gp[r])return Gp[r];if(!fl[r])return r;var o=fl[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in O0)return Gp[r]=o[l];return r}var D0=aa("animationend"),M0=aa("animationiteration"),P0=aa("animationstart"),Ik=aa("transitionrun"),xk=aa("transitionstart"),Nk=aa("transitioncancel"),L0=aa("transitionend"),U0=new Map,$p="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$p.push("scrollEnd");function ir(r,o){U0.set(r,o),tr(o,[r])}var V0=new WeakMap;function Li(r,o){if(typeof r=="object"&&r!==null){var l=V0.get(r);return l!==void 0?l:(o={value:r,source:o,stack:tl(o)},V0.set(r,o),o)}return{value:r,source:o,stack:tl(o)}}var Ui=[],ml=0,Kp=0;function Th(){for(var r=ml,o=Kp=ml=0;o<r;){var l=Ui[o];Ui[o++]=null;var u=Ui[o];Ui[o++]=null;var m=Ui[o];Ui[o++]=null;var g=Ui[o];if(Ui[o++]=null,u!==null&&m!==null){var w=u.pending;w===null?m.next=m:(m.next=w.next,w.next=m),u.pending=m}g!==0&&j0(l,m,g)}}function bh(r,o,l,u){Ui[ml++]=r,Ui[ml++]=o,Ui[ml++]=l,Ui[ml++]=u,Kp|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Qp(r,o,l,u){return bh(r,o,l,u),wh(r)}function pl(r,o){return bh(r,null,null,o),wh(r)}function j0(r,o,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var m=!1,g=r.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(m=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,m&&o!==null&&(m=31-Ae(l),r=g.hiddenUpdates,u=r[m],u===null?r[m]=[o]:u.push(o),o.lane=l|536870912),g):null}function wh(r){if(50<yu)throw yu=0,e_=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var gl={};function kk(r,o,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(r,o,l,u){return new kk(r,o,l,u)}function Yp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rs(r,o){var l=r.alternate;return l===null?(l=Ti(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function B0(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Sh(r,o,l,u,m,g){var w=0;if(u=r,typeof r=="function")Yp(r)&&(w=1);else if(typeof r=="string")w=DO(r,l,ge.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case x:return r=Ti(31,l,o,m),r.elementType=x,r.lanes=g,r;case S:return la(l.children,m,g,o);case D:w=8,m|=24;break;case k:return r=Ti(12,l,o,m|2),r.elementType=k,r.lanes=g,r;case te:return r=Ti(13,l,o,m),r.elementType=te,r.lanes=g,r;case pe:return r=Ti(19,l,o,m),r.elementType=pe,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:case z:w=10;break e;case B:w=9;break e;case K:w=11;break e;case N:w=14;break e;case A:w=16,u=null;break e}w=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return o=Ti(w,l,o,m),o.elementType=r,o.type=u,o.lanes=g,o}function la(r,o,l,u){return r=Ti(7,r,u,o),r.lanes=l,r}function Wp(r,o,l){return r=Ti(6,r,null,o),r.lanes=l,r}function Xp(r,o,l){return o=Ti(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var _l=[],yl=0,Ch=null,Ah=0,Vi=[],ji=0,ca=null,ss=1,os="";function ua(r,o){_l[yl++]=Ah,_l[yl++]=Ch,Ch=r,Ah=o}function F0(r,o,l){Vi[ji++]=ss,Vi[ji++]=os,Vi[ji++]=ca,ca=r;var u=ss;r=os;var m=32-Ae(u)-1;u&=~(1<<m),l+=1;var g=32-Ae(o)+m;if(30<g){var w=m-m%5;g=(u&(1<<w)-1).toString(32),u>>=w,m-=w,ss=1<<32-Ae(o)+m|l<<m|u,os=g+r}else ss=1<<g|l<<m|u,os=r}function Jp(r){r.return!==null&&(ua(r,1),F0(r,1,0))}function Zp(r){for(;r===Ch;)Ch=_l[--yl],_l[yl]=null,Ah=_l[--yl],_l[yl]=null;for(;r===ca;)ca=Vi[--ji],Vi[ji]=null,os=Vi[--ji],Vi[ji]=null,ss=Vi[--ji],Vi[ji]=null}var ti=null,Xt=null,vt=!1,da=null,Ir=!1,eg=Error(i(519));function ha(r){var o=Error(i(418,""));throw Wc(Li(o,r)),eg}function z0(r){var o=r.stateNode,l=r.type,u=r.memoizedProps;switch(o[en]=r,o[Wt]=u,l){case"dialog":ot("cancel",o),ot("close",o);break;case"iframe":case"object":case"embed":ot("load",o);break;case"video":case"audio":for(l=0;l<Eu.length;l++)ot(Eu[l],o);break;case"source":ot("error",o);break;case"img":case"image":case"link":ot("error",o),ot("load",o);break;case"details":ot("toggle",o);break;case"input":ot("invalid",o),Wo(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),nl(o);break;case"select":ot("invalid",o);break;case"textarea":ot("invalid",o),Xo(o,u.value,u.defaultValue,u.children),nl(o)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||u.suppressHydrationWarning===!0||sw(o.textContent,l)?(u.popover!=null&&(ot("beforetoggle",o),ot("toggle",o)),u.onScroll!=null&&ot("scroll",o),u.onScrollEnd!=null&&ot("scrollend",o),u.onClick!=null&&(o.onclick=af),o=!0):o=!1,o||ha(r)}function q0(r){for(ti=r.return;ti;)switch(ti.tag){case 5:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:ti=ti.return}}function Qc(r){if(r!==ti)return!1;if(!vt)return q0(r),vt=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||g_(r.type,r.memoizedProps)),l=!l),l&&Xt&&ha(r),q0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(o===0){Xt=sr(r.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;r=r.nextSibling}Xt=null}}else o===27?(o=Xt,oo(r.type)?(r=E_,E_=null,Xt=r):Xt=o):Xt=ti?sr(r.stateNode.nextSibling):null;return!0}function Yc(){Xt=ti=null,vt=!1}function H0(){var r=da;return r!==null&&(hi===null?hi=r:hi.push.apply(hi,r),da=null),r}function Wc(r){da===null?da=[r]:da.push(r)}var tg=ue(null),fa=null,as=null;function Gs(r,o,l){H(tg,o._currentValue),o._currentValue=l}function ls(r){r._currentValue=tg.current,re(tg)}function ng(r,o,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),r===l)break;r=r.return}}function ig(r,o,l,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var g=m.dependencies;if(g!==null){var w=m.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=m;for(var P=0;P<o.length;P++)if(C.context===o[P]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),ng(g.return,l,r),u||(w=null);break e}g=C.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(i(341));w.lanes|=l,g=w.alternate,g!==null&&(g.lanes|=l),ng(w,l,r),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===r){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function Xc(r,o,l,u){r=null;for(var m=o,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var C=m.type;Ei(m.pendingProps.value,w.value)||(r!==null?r.push(C):r=[C])}}else if(m===ce.current){if(w=m.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Au):r=[Au])}m=m.return}r!==null&&ig(o,r,l,u),o.flags|=262144}function Rh(r){for(r=r.firstContext;r!==null;){if(!Ei(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ma(r){fa=r,as=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function zn(r){return G0(fa,r)}function Ih(r,o){return fa===null&&ma(r),G0(r,o)}function G0(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},as===null){if(r===null)throw Error(i(308));as=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else as=as.next=o;return l}var Ok=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},Dk=n.unstable_scheduleCallback,Mk=n.unstable_NormalPriority,pn={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rg(){return{controller:new Ok,data:new Map,refCount:0}}function Jc(r){r.refCount--,r.refCount===0&&Dk(Mk,function(){r.controller.abort()})}var Zc=null,sg=0,vl=0,El=null;function Pk(r,o){if(Zc===null){var l=Zc=[];sg=0,vl=a_(),El={status:"pending",value:void 0,then:function(u){l.push(u)}}}return sg++,o.then($0,$0),o}function $0(){if(--sg===0&&Zc!==null){El!==null&&(El.status="fulfilled");var r=Zc;Zc=null,vl=0,El=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Lk(r,o){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return r.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<l.length;m++)(0,l[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var K0=se.S;se.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Pk(r,o),K0!==null&&K0(r,o)};var pa=ue(null);function og(){var r=pa.current;return r!==null?r:Vt.pooledCache}function xh(r,o){o===null?H(pa,pa.current):H(pa,o.pool)}function Q0(){var r=og();return r===null?null:{parent:pn._currentValue,pool:r}}var eu=Error(i(460)),Y0=Error(i(474)),Nh=Error(i(542)),ag={then:function(){}};function W0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function kh(){}function X0(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(kh,kh),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Z0(r),r;default:if(typeof o.status=="string")o.then(kh,kh);else{if(r=Vt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Z0(r),r}throw tu=o,eu}}var tu=null;function J0(){if(tu===null)throw Error(i(459));var r=tu;return tu=null,r}function Z0(r){if(r===eu||r===Nh)throw Error(i(483))}var $s=!1;function lg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cg(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ks(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Qs(r,o,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(St&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=wh(r),j0(r,null,l),o}return bh(r,u,o,l),wh(r)}function nu(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var u=o.lanes;u&=r.pendingLanes,l|=u,o.lanes=l,Lt(r,l)}}function ug(r,o){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?m=g=o:g=g.next=o}else m=g=o;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var dg=!1;function iu(){if(dg){var r=El;if(r!==null)throw r}}function ru(r,o,l,u){dg=!1;var m=r.updateQueue;$s=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var P=C,W=P.next;P.next=null,w===null?g=W:w.next=W,w=P;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,C=oe.lastBaseUpdate,C!==w&&(C===null?oe.firstBaseUpdate=W:C.next=W,oe.lastBaseUpdate=P))}if(g!==null){var de=m.baseState;w=0,oe=W=P=null,C=g;do{var X=C.lane&-536870913,ee=X!==C.lane;if(ee?(ht&X)===X:(u&X)===X){X!==0&&X===vl&&(dg=!0),oe!==null&&(oe=oe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Be=r,Le=C;X=o;var kt=l;switch(Le.tag){case 1:if(Be=Le.payload,typeof Be=="function"){de=Be.call(kt,de,X);break e}de=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Le.payload,X=typeof Be=="function"?Be.call(kt,de,X):Be,X==null)break e;de=_({},de,X);break e;case 2:$s=!0}}X=C.callback,X!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:C.tag,payload:C.payload,callback:C.callback,next:null},oe===null?(W=oe=ee,P=de):oe=oe.next=ee,w|=X;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;ee=C,C=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);oe===null&&(P=de),m.baseState=P,m.firstBaseUpdate=W,m.lastBaseUpdate=oe,g===null&&(m.shared.lanes=0),no|=w,r.lanes=w,r.memoizedState=de}}function eT(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function tT(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)eT(l[r],o)}var Tl=ue(null),Oh=ue(0);function nT(r,o){r=ps,H(Oh,r),H(Tl,o),ps=r|o.baseLanes}function hg(){H(Oh,ps),H(Tl,Tl.current)}function fg(){ps=Oh.current,re(Tl),re(Oh)}var Ys=0,Ye=null,xt=null,cn=null,Dh=!1,bl=!1,ga=!1,Mh=0,su=0,wl=null,Uk=0;function nn(){throw Error(i(321))}function mg(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!Ei(r[l],o[l]))return!1;return!0}function pg(r,o,l,u,m,g){return Ys=g,Ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,se.H=r===null||r.memoizedState===null?jT:BT,ga=!1,g=l(u,m),ga=!1,bl&&(g=rT(o,l,u,m)),iT(r),g}function iT(r){se.H=Bh;var o=xt!==null&&xt.next!==null;if(Ys=0,cn=xt=Ye=null,Dh=!1,su=0,wl=null,o)throw Error(i(300));r===null||Sn||(r=r.dependencies,r!==null&&Rh(r)&&(Sn=!0))}function rT(r,o,l,u){Ye=r;var m=0;do{if(bl&&(wl=null),su=0,bl=!1,25<=m)throw Error(i(301));if(m+=1,cn=xt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}se.H=Hk,g=o(l,u)}while(bl);return g}function Vk(){var r=se.H,o=r.useState()[0];return o=typeof o.then=="function"?ou(o):o,r=r.useState()[0],(xt!==null?xt.memoizedState:null)!==r&&(Ye.flags|=1024),o}function gg(){var r=Mh!==0;return Mh=0,r}function _g(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function yg(r){if(Dh){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Dh=!1}Ys=0,cn=xt=Ye=null,bl=!1,su=Mh=0,wl=null}function ui(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Ye.memoizedState=cn=r:cn=cn.next=r,cn}function un(){if(xt===null){var r=Ye.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var o=cn===null?Ye.memoizedState:cn.next;if(o!==null)cn=o,xt=r;else{if(r===null)throw Ye.alternate===null?Error(i(467)):Error(i(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},cn===null?Ye.memoizedState=cn=r:cn=cn.next=r}return cn}function vg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(r){var o=su;return su+=1,wl===null&&(wl=[]),r=X0(wl,r,o),o=Ye,(cn===null?o.memoizedState:cn.next)===null&&(o=o.alternate,se.H=o===null||o.memoizedState===null?jT:BT),r}function Ph(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ou(r);if(r.$$typeof===z)return zn(r)}throw Error(i(438,String(r)))}function Eg(r){var o=null,l=Ye.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var u=Ye.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=vg(),Ye.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),u=0;u<r;u++)l[u]=O;return o.index++,l}function cs(r,o){return typeof o=="function"?o(r):o}function Lh(r){var o=un();return Tg(o,xt,r)}function Tg(r,o,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var m=r.baseQueue,g=u.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}o.baseQueue=m=g,u.pending=null}if(g=r.baseState,m===null)r.memoizedState=g;else{o=m.next;var C=w=null,P=null,W=o,oe=!1;do{var de=W.lane&-536870913;if(de!==W.lane?(ht&de)===de:(Ys&de)===de){var X=W.revertLane;if(X===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),de===vl&&(oe=!0);else if((Ys&X)===X){W=W.next,X===vl&&(oe=!0);continue}else de={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},P===null?(C=P=de,w=g):P=P.next=de,Ye.lanes|=X,no|=X;de=W.action,ga&&l(g,de),g=W.hasEagerState?W.eagerState:l(g,de)}else X={lane:de,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},P===null?(C=P=X,w=g):P=P.next=X,Ye.lanes|=de,no|=de;W=W.next}while(W!==null&&W!==o);if(P===null?w=g:P.next=C,!Ei(g,r.memoizedState)&&(Sn=!0,oe&&(l=El,l!==null)))throw l;r.memoizedState=g,r.baseState=w,r.baseQueue=P,u.lastRenderedState=g}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function bg(r){var o=un(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,m=l.pending,g=o.memoizedState;if(m!==null){l.pending=null;var w=m=m.next;do g=r(g,w.action),w=w.next;while(w!==m);Ei(g,o.memoizedState)||(Sn=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),l.lastRenderedState=g}return[g,u]}function sT(r,o,l){var u=Ye,m=un(),g=vt;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=o();var w=!Ei((xt||m).memoizedState,l);w&&(m.memoizedState=l,Sn=!0),m=m.queue;var C=lT.bind(null,u,m,r);if(au(2048,8,C,[r]),m.getSnapshot!==o||w||cn!==null&&cn.memoizedState.tag&1){if(u.flags|=2048,Sl(9,Uh(),aT.bind(null,u,m,l,o),null),Vt===null)throw Error(i(349));g||(Ys&124)!==0||oT(u,o,l)}return l}function oT(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=Ye.updateQueue,o===null?(o=vg(),Ye.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function aT(r,o,l,u){o.value=l,o.getSnapshot=u,cT(o)&&uT(r)}function lT(r,o,l){return l(function(){cT(o)&&uT(r)})}function cT(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!Ei(r,l)}catch{return!0}}function uT(r){var o=pl(r,2);o!==null&&Ai(o,r,2)}function wg(r){var o=ui();if(typeof r=="function"){var l=r;if(r=l(),ga){me(!0);try{l()}finally{me(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:r},o}function dT(r,o,l,u){return r.baseState=l,Tg(r,xt,typeof u=="function"?u:cs)}function jk(r,o,l,u,m){if(jh(r))throw Error(i(485));if(r=o.action,r!==null){var g={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};se.T!==null?l(!0):g.isTransition=!1,u(g),l=o.pending,l===null?(g.next=o.pending=g,hT(o,g)):(g.next=l.next,o.pending=l.next=g)}}function hT(r,o){var l=o.action,u=o.payload,m=r.state;if(o.isTransition){var g=se.T,w={};se.T=w;try{var C=l(m,u),P=se.S;P!==null&&P(w,C),fT(r,o,C)}catch(W){Sg(r,o,W)}finally{se.T=g}}else try{g=l(m,u),fT(r,o,g)}catch(W){Sg(r,o,W)}}function fT(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){mT(r,o,u)},function(u){return Sg(r,o,u)}):mT(r,o,l)}function mT(r,o,l){o.status="fulfilled",o.value=l,pT(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,hT(r,l)))}function Sg(r,o,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=l,pT(o),o=o.next;while(o!==u)}r.action=null}function pT(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function gT(r,o){return o}function _T(r,o){if(vt){var l=Vt.formState;if(l!==null){e:{var u=Ye;if(vt){if(Xt){t:{for(var m=Xt,g=Ir;m.nodeType!==8;){if(!g){m=null;break t}if(m=sr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Xt=sr(m.nextSibling),u=m.data==="F!";break e}}ha(u)}u=!1}u&&(o=l[0])}}return l=ui(),l.memoizedState=l.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gT,lastRenderedState:o},l.queue=u,l=LT.bind(null,Ye,u),u.dispatch=l,u=wg(!1),g=xg.bind(null,Ye,!1,u.queue),u=ui(),m={state:o,dispatch:null,action:r,pending:null},u.queue=m,l=jk.bind(null,Ye,m,g,l),m.dispatch=l,u.memoizedState=r,[o,l,!1]}function yT(r){var o=un();return vT(o,xt,r)}function vT(r,o,l){if(o=Tg(r,o,gT)[0],r=Lh(cs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=ou(o)}catch(w){throw w===eu?Nh:w}else u=o;o=un();var m=o.queue,g=m.dispatch;return l!==o.memoizedState&&(Ye.flags|=2048,Sl(9,Uh(),Bk.bind(null,m,l),null)),[u,g,r]}function Bk(r,o){r.action=o}function ET(r){var o=un(),l=xt;if(l!==null)return vT(o,l,r);un(),o=o.memoizedState,l=un();var u=l.queue.dispatch;return l.memoizedState=r,[o,u,!1]}function Sl(r,o,l,u){return r={tag:r,create:l,deps:u,inst:o,next:null},o=Ye.updateQueue,o===null&&(o=vg(),Ye.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,o.lastEffect=r),r}function Uh(){return{destroy:void 0,resource:void 0}}function TT(){return un().memoizedState}function Vh(r,o,l,u){var m=ui();u=u===void 0?null:u,Ye.flags|=r,m.memoizedState=Sl(1|o,Uh(),l,u)}function au(r,o,l,u){var m=un();u=u===void 0?null:u;var g=m.memoizedState.inst;xt!==null&&u!==null&&mg(u,xt.memoizedState.deps)?m.memoizedState=Sl(o,g,l,u):(Ye.flags|=r,m.memoizedState=Sl(1|o,g,l,u))}function bT(r,o){Vh(8390656,8,r,o)}function wT(r,o){au(2048,8,r,o)}function ST(r,o){return au(4,2,r,o)}function CT(r,o){return au(4,4,r,o)}function AT(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function RT(r,o,l){l=l!=null?l.concat([r]):null,au(4,4,AT.bind(null,o,r),l)}function Cg(){}function IT(r,o){var l=un();o=o===void 0?null:o;var u=l.memoizedState;return o!==null&&mg(o,u[1])?u[0]:(l.memoizedState=[r,o],r)}function xT(r,o){var l=un();o=o===void 0?null:o;var u=l.memoizedState;if(o!==null&&mg(o,u[1]))return u[0];if(u=r(),ga){me(!0);try{r()}finally{me(!1)}}return l.memoizedState=[u,o],u}function Ag(r,o,l){return l===void 0||(Ys&1073741824)!==0?r.memoizedState=o:(r.memoizedState=l,r=Ob(),Ye.lanes|=r,no|=r,l)}function NT(r,o,l,u){return Ei(l,o)?l:Tl.current!==null?(r=Ag(r,l,u),Ei(r,o)||(Sn=!0),r):(Ys&42)===0?(Sn=!0,r.memoizedState=l):(r=Ob(),Ye.lanes|=r,no|=r,o)}function kT(r,o,l,u,m){var g=Te.p;Te.p=g!==0&&8>g?g:8;var w=se.T,C={};se.T=C,xg(r,!1,o,l);try{var P=m(),W=se.S;if(W!==null&&W(C,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var oe=Lk(P,u);lu(r,o,oe,Ci(r))}else lu(r,o,u,Ci(r))}catch(de){lu(r,o,{then:function(){},status:"rejected",reason:de},Ci())}finally{Te.p=g,se.T=w}}function Fk(){}function Rg(r,o,l,u){if(r.tag!==5)throw Error(i(476));var m=OT(r).queue;kT(r,m,o,xe,l===null?Fk:function(){return DT(r),l(u)})}function OT(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:xe},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function DT(r){var o=OT(r).next.queue;lu(r,o,{},Ci())}function Ig(){return zn(Au)}function MT(){return un().memoizedState}function PT(){return un().memoizedState}function zk(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Ci();r=Ks(l);var u=Qs(o,r,l);u!==null&&(Ai(u,o,l),nu(u,o,l)),o={cache:rg()},r.payload=o;return}o=o.return}}function qk(r,o,l){var u=Ci();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},jh(r)?UT(o,l):(l=Qp(r,o,l,u),l!==null&&(Ai(l,r,u),VT(l,o,u)))}function LT(r,o,l){var u=Ci();lu(r,o,l,u)}function lu(r,o,l,u){var m={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(jh(r))UT(o,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var w=o.lastRenderedState,C=g(w,l);if(m.hasEagerState=!0,m.eagerState=C,Ei(C,w))return bh(r,o,m,0),Vt===null&&Th(),!1}catch{}finally{}if(l=Qp(r,o,m,u),l!==null)return Ai(l,r,u),VT(l,o,u),!0}return!1}function xg(r,o,l,u){if(u={lane:2,revertLane:a_(),action:u,hasEagerState:!1,eagerState:null,next:null},jh(r)){if(o)throw Error(i(479))}else o=Qp(r,l,u,2),o!==null&&Ai(o,r,2)}function jh(r){var o=r.alternate;return r===Ye||o!==null&&o===Ye}function UT(r,o){bl=Dh=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function VT(r,o,l){if((l&4194048)!==0){var u=o.lanes;u&=r.pendingLanes,l|=u,o.lanes=l,Lt(r,l)}}var Bh={readContext:zn,use:Ph,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},jT={readContext:zn,use:Ph,useCallback:function(r,o){return ui().memoizedState=[r,o===void 0?null:o],r},useContext:zn,useEffect:bT,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,Vh(4194308,4,AT.bind(null,o,r),l)},useLayoutEffect:function(r,o){return Vh(4194308,4,r,o)},useInsertionEffect:function(r,o){Vh(4,2,r,o)},useMemo:function(r,o){var l=ui();o=o===void 0?null:o;var u=r();if(ga){me(!0);try{r()}finally{me(!1)}}return l.memoizedState=[u,o],u},useReducer:function(r,o,l){var u=ui();if(l!==void 0){var m=l(o);if(ga){me(!0);try{l(o)}finally{me(!1)}}}else m=o;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=qk.bind(null,Ye,r),[u.memoizedState,r]},useRef:function(r){var o=ui();return r={current:r},o.memoizedState=r},useState:function(r){r=wg(r);var o=r.queue,l=LT.bind(null,Ye,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:Cg,useDeferredValue:function(r,o){var l=ui();return Ag(l,r,o)},useTransition:function(){var r=wg(!1);return r=kT.bind(null,Ye,r.queue,!0,!1),ui().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var u=Ye,m=ui();if(vt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),Vt===null)throw Error(i(349));(ht&124)!==0||oT(u,o,l)}m.memoizedState=l;var g={value:l,getSnapshot:o};return m.queue=g,bT(lT.bind(null,u,g,r),[r]),u.flags|=2048,Sl(9,Uh(),aT.bind(null,u,g,l,o),null),l},useId:function(){var r=ui(),o=Vt.identifierPrefix;if(vt){var l=os,u=ss;l=(u&~(1<<32-Ae(u)-1)).toString(32)+l,o="«"+o+"R"+l,l=Mh++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=Uk++,o="«"+o+"r"+l.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:Ig,useFormState:_T,useActionState:_T,useOptimistic:function(r){var o=ui();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=xg.bind(null,Ye,!0,l),l.dispatch=o,[r,o]},useMemoCache:Eg,useCacheRefresh:function(){return ui().memoizedState=zk.bind(null,Ye)}},BT={readContext:zn,use:Ph,useCallback:IT,useContext:zn,useEffect:wT,useImperativeHandle:RT,useInsertionEffect:ST,useLayoutEffect:CT,useMemo:xT,useReducer:Lh,useRef:TT,useState:function(){return Lh(cs)},useDebugValue:Cg,useDeferredValue:function(r,o){var l=un();return NT(l,xt.memoizedState,r,o)},useTransition:function(){var r=Lh(cs)[0],o=un().memoizedState;return[typeof r=="boolean"?r:ou(r),o]},useSyncExternalStore:sT,useId:MT,useHostTransitionStatus:Ig,useFormState:yT,useActionState:yT,useOptimistic:function(r,o){var l=un();return dT(l,xt,r,o)},useMemoCache:Eg,useCacheRefresh:PT},Hk={readContext:zn,use:Ph,useCallback:IT,useContext:zn,useEffect:wT,useImperativeHandle:RT,useInsertionEffect:ST,useLayoutEffect:CT,useMemo:xT,useReducer:bg,useRef:TT,useState:function(){return bg(cs)},useDebugValue:Cg,useDeferredValue:function(r,o){var l=un();return xt===null?Ag(l,r,o):NT(l,xt.memoizedState,r,o)},useTransition:function(){var r=bg(cs)[0],o=un().memoizedState;return[typeof r=="boolean"?r:ou(r),o]},useSyncExternalStore:sT,useId:MT,useHostTransitionStatus:Ig,useFormState:ET,useActionState:ET,useOptimistic:function(r,o){var l=un();return xt!==null?dT(l,xt,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Eg,useCacheRefresh:PT},Cl=null,cu=0;function Fh(r){var o=cu;return cu+=1,Cl===null&&(Cl=[]),X0(Cl,r,o)}function uu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function zh(r,o){throw o.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function FT(r){var o=r._init;return o(r._payload)}function zT(r){function o($,F){if(r){var Y=$.deletions;Y===null?($.deletions=[F],$.flags|=16):Y.push(F)}}function l($,F){if(!r)return null;for(;F!==null;)o($,F),F=F.sibling;return null}function u($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function m($,F){return $=rs($,F),$.index=0,$.sibling=null,$}function g($,F,Y){return $.index=Y,r?(Y=$.alternate,Y!==null?(Y=Y.index,Y<F?($.flags|=67108866,F):Y):($.flags|=67108866,F)):($.flags|=1048576,F)}function w($){return r&&$.alternate===null&&($.flags|=67108866),$}function C($,F,Y,le){return F===null||F.tag!==6?(F=Wp(Y,$.mode,le),F.return=$,F):(F=m(F,Y),F.return=$,F)}function P($,F,Y,le){var Ie=Y.type;return Ie===S?oe($,F,Y.props.children,le,Y.key):F!==null&&(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===A&&FT(Ie)===F.type)?(F=m(F,Y.props),uu(F,Y),F.return=$,F):(F=Sh(Y.type,Y.key,Y.props,null,$.mode,le),uu(F,Y),F.return=$,F)}function W($,F,Y,le){return F===null||F.tag!==4||F.stateNode.containerInfo!==Y.containerInfo||F.stateNode.implementation!==Y.implementation?(F=Xp(Y,$.mode,le),F.return=$,F):(F=m(F,Y.children||[]),F.return=$,F)}function oe($,F,Y,le,Ie){return F===null||F.tag!==7?(F=la(Y,$.mode,le,Ie),F.return=$,F):(F=m(F,Y),F.return=$,F)}function de($,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Wp(""+F,$.mode,Y),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return Y=Sh(F.type,F.key,F.props,null,$.mode,Y),uu(Y,F),Y.return=$,Y;case R:return F=Xp(F,$.mode,Y),F.return=$,F;case A:var le=F._init;return F=le(F._payload),de($,F,Y)}if(_t(F)||q(F))return F=la(F,$.mode,Y,null),F.return=$,F;if(typeof F.then=="function")return de($,Fh(F),Y);if(F.$$typeof===z)return de($,Ih($,F),Y);zh($,F)}return null}function X($,F,Y,le){var Ie=F!==null?F.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ie!==null?null:C($,F,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return Y.key===Ie?P($,F,Y,le):null;case R:return Y.key===Ie?W($,F,Y,le):null;case A:return Ie=Y._init,Y=Ie(Y._payload),X($,F,Y,le)}if(_t(Y)||q(Y))return Ie!==null?null:oe($,F,Y,le,null);if(typeof Y.then=="function")return X($,F,Fh(Y),le);if(Y.$$typeof===z)return X($,F,Ih($,Y),le);zh($,Y)}return null}function ee($,F,Y,le,Ie){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return $=$.get(Y)||null,C(F,$,""+le,Ie);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case T:return $=$.get(le.key===null?Y:le.key)||null,P(F,$,le,Ie);case R:return $=$.get(le.key===null?Y:le.key)||null,W(F,$,le,Ie);case A:var Ze=le._init;return le=Ze(le._payload),ee($,F,Y,le,Ie)}if(_t(le)||q(le))return $=$.get(Y)||null,oe(F,$,le,Ie,null);if(typeof le.then=="function")return ee($,F,Y,Fh(le),Ie);if(le.$$typeof===z)return ee($,F,Y,Ih(F,le),Ie);zh(F,le)}return null}function Be($,F,Y,le){for(var Ie=null,Ze=null,De=F,Ue=F=0,An=null;De!==null&&Ue<Y.length;Ue++){De.index>Ue?(An=De,De=null):An=De.sibling;var pt=X($,De,Y[Ue],le);if(pt===null){De===null&&(De=An);break}r&&De&&pt.alternate===null&&o($,De),F=g(pt,F,Ue),Ze===null?Ie=pt:Ze.sibling=pt,Ze=pt,De=An}if(Ue===Y.length)return l($,De),vt&&ua($,Ue),Ie;if(De===null){for(;Ue<Y.length;Ue++)De=de($,Y[Ue],le),De!==null&&(F=g(De,F,Ue),Ze===null?Ie=De:Ze.sibling=De,Ze=De);return vt&&ua($,Ue),Ie}for(De=u(De);Ue<Y.length;Ue++)An=ee(De,$,Ue,Y[Ue],le),An!==null&&(r&&An.alternate!==null&&De.delete(An.key===null?Ue:An.key),F=g(An,F,Ue),Ze===null?Ie=An:Ze.sibling=An,Ze=An);return r&&De.forEach(function(ho){return o($,ho)}),vt&&ua($,Ue),Ie}function Le($,F,Y,le){if(Y==null)throw Error(i(151));for(var Ie=null,Ze=null,De=F,Ue=F=0,An=null,pt=Y.next();De!==null&&!pt.done;Ue++,pt=Y.next()){De.index>Ue?(An=De,De=null):An=De.sibling;var ho=X($,De,pt.value,le);if(ho===null){De===null&&(De=An);break}r&&De&&ho.alternate===null&&o($,De),F=g(ho,F,Ue),Ze===null?Ie=ho:Ze.sibling=ho,Ze=ho,De=An}if(pt.done)return l($,De),vt&&ua($,Ue),Ie;if(De===null){for(;!pt.done;Ue++,pt=Y.next())pt=de($,pt.value,le),pt!==null&&(F=g(pt,F,Ue),Ze===null?Ie=pt:Ze.sibling=pt,Ze=pt);return vt&&ua($,Ue),Ie}for(De=u(De);!pt.done;Ue++,pt=Y.next())pt=ee(De,$,Ue,pt.value,le),pt!==null&&(r&&pt.alternate!==null&&De.delete(pt.key===null?Ue:pt.key),F=g(pt,F,Ue),Ze===null?Ie=pt:Ze.sibling=pt,Ze=pt);return r&&De.forEach(function(GO){return o($,GO)}),vt&&ua($,Ue),Ie}function kt($,F,Y,le){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:e:{for(var Ie=Y.key;F!==null;){if(F.key===Ie){if(Ie=Y.type,Ie===S){if(F.tag===7){l($,F.sibling),le=m(F,Y.props.children),le.return=$,$=le;break e}}else if(F.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===A&&FT(Ie)===F.type){l($,F.sibling),le=m(F,Y.props),uu(le,Y),le.return=$,$=le;break e}l($,F);break}else o($,F);F=F.sibling}Y.type===S?(le=la(Y.props.children,$.mode,le,Y.key),le.return=$,$=le):(le=Sh(Y.type,Y.key,Y.props,null,$.mode,le),uu(le,Y),le.return=$,$=le)}return w($);case R:e:{for(Ie=Y.key;F!==null;){if(F.key===Ie)if(F.tag===4&&F.stateNode.containerInfo===Y.containerInfo&&F.stateNode.implementation===Y.implementation){l($,F.sibling),le=m(F,Y.children||[]),le.return=$,$=le;break e}else{l($,F);break}else o($,F);F=F.sibling}le=Xp(Y,$.mode,le),le.return=$,$=le}return w($);case A:return Ie=Y._init,Y=Ie(Y._payload),kt($,F,Y,le)}if(_t(Y))return Be($,F,Y,le);if(q(Y)){if(Ie=q(Y),typeof Ie!="function")throw Error(i(150));return Y=Ie.call(Y),Le($,F,Y,le)}if(typeof Y.then=="function")return kt($,F,Fh(Y),le);if(Y.$$typeof===z)return kt($,F,Ih($,Y),le);zh($,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,F!==null&&F.tag===6?(l($,F.sibling),le=m(F,Y),le.return=$,$=le):(l($,F),le=Wp(Y,$.mode,le),le.return=$,$=le),w($)):l($,F)}return function($,F,Y,le){try{cu=0;var Ie=kt($,F,Y,le);return Cl=null,Ie}catch(De){if(De===eu||De===Nh)throw De;var Ze=Ti(29,De,null,$.mode);return Ze.lanes=le,Ze.return=$,Ze}finally{}}}var Al=zT(!0),qT=zT(!1),Bi=ue(null),xr=null;function Ws(r){var o=r.alternate;H(gn,gn.current&1),H(Bi,r),xr===null&&(o===null||Tl.current!==null||o.memoizedState!==null)&&(xr=r)}function HT(r){if(r.tag===22){if(H(gn,gn.current),H(Bi,r),xr===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(xr=r)}}else Xs()}function Xs(){H(gn,gn.current),H(Bi,Bi.current)}function us(r){re(Bi),xr===r&&(xr=null),re(gn)}var gn=ue(0);function qh(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||v_(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Ng(r,o,l,u){o=r.memoizedState,l=l(u,o),l=l==null?o:_({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var kg={enqueueSetState:function(r,o,l){r=r._reactInternals;var u=Ci(),m=Ks(u);m.payload=o,l!=null&&(m.callback=l),o=Qs(r,m,u),o!==null&&(Ai(o,r,u),nu(o,r,u))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var u=Ci(),m=Ks(u);m.tag=1,m.payload=o,l!=null&&(m.callback=l),o=Qs(r,m,u),o!==null&&(Ai(o,r,u),nu(o,r,u))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Ci(),u=Ks(l);u.tag=2,o!=null&&(u.callback=o),o=Qs(r,u,l),o!==null&&(Ai(o,r,l),nu(o,r,l))}};function GT(r,o,l,u,m,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,w):o.prototype&&o.prototype.isPureReactComponent?!$c(l,u)||!$c(m,g):!0}function $T(r,o,l,u){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,u),o.state!==r&&kg.enqueueReplaceState(o,o.state,null)}function _a(r,o){var l=o;if("ref"in o){l={};for(var u in o)u!=="ref"&&(l[u]=o[u])}if(r=r.defaultProps){l===o&&(l=_({},l));for(var m in r)l[m]===void 0&&(l[m]=r[m])}return l}var Hh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function KT(r){Hh(r)}function QT(r){console.error(r)}function YT(r){Hh(r)}function Gh(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function WT(r,o,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Og(r,o,l){return l=Ks(l),l.tag=3,l.payload={element:null},l.callback=function(){Gh(r,o)},l}function XT(r){return r=Ks(r),r.tag=3,r}function JT(r,o,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;r.payload=function(){return m(g)},r.callback=function(){WT(o,l,u)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){WT(o,l,u),typeof m!="function"&&(io===null?io=new Set([this]):io.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function Gk(r,o,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=l.alternate,o!==null&&Xc(o,l,m,!0),l=Bi.current,l!==null){switch(l.tag){case 13:return xr===null?n_():l.alternate===null&&Jt===0&&(Jt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===ag?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([u]):o.add(u),r_(r,u,m)),!1;case 22:return l.flags|=65536,u===ag?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([u]):l.add(u)),r_(r,u,m)),!1}throw Error(i(435,l.tag))}return r_(r,u,m),n_(),!1}if(vt)return o=Bi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==eg&&(r=Error(i(422),{cause:u}),Wc(Li(r,l)))):(u!==eg&&(o=Error(i(423),{cause:u}),Wc(Li(o,l))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Li(u,l),m=Og(r.stateNode,u,m),ug(r,m),Jt!==4&&(Jt=2)),!1;var g=Error(i(520),{cause:u});if(g=Li(g,l),_u===null?_u=[g]:_u.push(g),Jt!==4&&(Jt=2),o===null)return!0;u=Li(u,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=m&-m,l.lanes|=r,r=Og(l.stateNode,u,r),ug(l,r),!1;case 1:if(o=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(io===null||!io.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=XT(m),JT(m,r,l,u),ug(l,m),!1}l=l.return}while(l!==null);return!1}var ZT=Error(i(461)),Sn=!1;function On(r,o,l,u){o.child=r===null?qT(o,null,l,u):Al(o,r.child,l,u)}function eb(r,o,l,u,m){l=l.render;var g=o.ref;if("ref"in u){var w={};for(var C in u)C!=="ref"&&(w[C]=u[C])}else w=u;return ma(o),u=pg(r,o,l,w,g,m),C=gg(),r!==null&&!Sn?(_g(r,o,m),ds(r,o,m)):(vt&&C&&Jp(o),o.flags|=1,On(r,o,u,m),o.child)}function tb(r,o,l,u,m){if(r===null){var g=l.type;return typeof g=="function"&&!Yp(g)&&g.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=g,nb(r,o,g,u,m)):(r=Sh(l.type,null,u,o,o.mode,m),r.ref=o.ref,r.return=o,o.child=r)}if(g=r.child,!Bg(r,m)){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:$c,l(w,u)&&r.ref===o.ref)return ds(r,o,m)}return o.flags|=1,r=rs(g,u),r.ref=o.ref,r.return=o,o.child=r}function nb(r,o,l,u,m){if(r!==null){var g=r.memoizedProps;if($c(g,u)&&r.ref===o.ref)if(Sn=!1,o.pendingProps=u=g,Bg(r,m))(r.flags&131072)!==0&&(Sn=!0);else return o.lanes=r.lanes,ds(r,o,m)}return Dg(r,o,l,u,m)}function ib(r,o,l){var u=o.pendingProps,m=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((o.flags&128)!==0){if(u=g!==null?g.baseLanes|l:l,r!==null){for(m=o.child=r.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;o.childLanes=g&~u}else o.childLanes=0,o.child=null;return rb(r,o,u,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&xh(o,g!==null?g.cachePool:null),g!==null?nT(o,g):hg(),HT(o);else return o.lanes=o.childLanes=536870912,rb(r,o,g!==null?g.baseLanes|l:l,l)}else g!==null?(xh(o,g.cachePool),nT(o,g),Xs(),o.memoizedState=null):(r!==null&&xh(o,null),hg(),Xs());return On(r,o,m,l),o.child}function rb(r,o,l,u){var m=og();return m=m===null?null:{parent:pn._currentValue,pool:m},o.memoizedState={baseLanes:l,cachePool:m},r!==null&&xh(o,null),hg(),HT(o),r!==null&&Xc(r,o,u,!0),null}function $h(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function Dg(r,o,l,u,m){return ma(o),l=pg(r,o,l,u,void 0,m),u=gg(),r!==null&&!Sn?(_g(r,o,m),ds(r,o,m)):(vt&&u&&Jp(o),o.flags|=1,On(r,o,l,m),o.child)}function sb(r,o,l,u,m,g){return ma(o),o.updateQueue=null,l=rT(o,u,l,m),iT(r),u=gg(),r!==null&&!Sn?(_g(r,o,g),ds(r,o,g)):(vt&&u&&Jp(o),o.flags|=1,On(r,o,l,g),o.child)}function ob(r,o,l,u,m){if(ma(o),o.stateNode===null){var g=gl,w=l.contextType;typeof w=="object"&&w!==null&&(g=zn(w)),g=new l(u,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=kg,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=u,g.state=o.memoizedState,g.refs={},lg(o),w=l.contextType,g.context=typeof w=="object"&&w!==null?zn(w):gl,g.state=o.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Ng(o,l,w,u),g.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&kg.enqueueReplaceState(g,g.state,null),ru(o,u,g,m),iu(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(r===null){g=o.stateNode;var C=o.memoizedProps,P=_a(l,C);g.props=P;var W=g.context,oe=l.contextType;w=gl,typeof oe=="object"&&oe!==null&&(w=zn(oe));var de=l.getDerivedStateFromProps;oe=typeof de=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=o.pendingProps!==C,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||W!==w)&&$T(o,g,u,w),$s=!1;var X=o.memoizedState;g.state=X,ru(o,u,g,m),iu(),W=o.memoizedState,C||X!==W||$s?(typeof de=="function"&&(Ng(o,l,de,u),W=o.memoizedState),(P=$s||GT(o,l,P,u,X,W,w))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=W),g.props=u,g.state=W,g.context=w,u=P):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{g=o.stateNode,cg(r,o),w=o.memoizedProps,oe=_a(l,w),g.props=oe,de=o.pendingProps,X=g.context,W=l.contextType,P=gl,typeof W=="object"&&W!==null&&(P=zn(W)),C=l.getDerivedStateFromProps,(W=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==de||X!==P)&&$T(o,g,u,P),$s=!1,X=o.memoizedState,g.state=X,ru(o,u,g,m),iu();var ee=o.memoizedState;w!==de||X!==ee||$s||r!==null&&r.dependencies!==null&&Rh(r.dependencies)?(typeof C=="function"&&(Ng(o,l,C,u),ee=o.memoizedState),(oe=$s||GT(o,l,oe,u,X,ee,P)||r!==null&&r.dependencies!==null&&Rh(r.dependencies))?(W||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,ee,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,ee,P)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&X===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&X===r.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=ee),g.props=u,g.state=ee,g.context=P,u=oe):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&X===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&X===r.memoizedState||(o.flags|=1024),u=!1)}return g=u,$h(r,o),u=(o.flags&128)!==0,g||u?(g=o.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,r!==null&&u?(o.child=Al(o,r.child,null,m),o.child=Al(o,null,l,m)):On(r,o,l,m),o.memoizedState=g.state,r=o.child):r=ds(r,o,m),r}function ab(r,o,l,u){return Yc(),o.flags|=256,On(r,o,l,u),o.child}var Mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pg(r){return{baseLanes:r,cachePool:Q0()}}function Lg(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=Fi),r}function lb(r,o,l){var u=o.pendingProps,m=!1,g=(o.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(gn.current&2)!==0),w&&(m=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,r===null){if(vt){if(m?Ws(o):Xs(),vt){var C=Xt,P;if(P=C){e:{for(P=C,C=Ir;P.nodeType!==8;){if(!C){C=null;break e}if(P=sr(P.nextSibling),P===null){C=null;break e}}C=P}C!==null?(o.memoizedState={dehydrated:C,treeContext:ca!==null?{id:ss,overflow:os}:null,retryLane:536870912,hydrationErrors:null},P=Ti(18,null,null,0),P.stateNode=C,P.return=o,o.child=P,ti=o,Xt=null,P=!0):P=!1}P||ha(o)}if(C=o.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return v_(C)?o.lanes=32:o.lanes=536870912,null;us(o)}return C=u.children,u=u.fallback,m?(Xs(),m=o.mode,C=Kh({mode:"hidden",children:C},m),u=la(u,m,l,null),C.return=o,u.return=o,C.sibling=u,o.child=C,m=o.child,m.memoizedState=Pg(l),m.childLanes=Lg(r,w,l),o.memoizedState=Mg,u):(Ws(o),Ug(o,C))}if(P=r.memoizedState,P!==null&&(C=P.dehydrated,C!==null)){if(g)o.flags&256?(Ws(o),o.flags&=-257,o=Vg(r,o,l)):o.memoizedState!==null?(Xs(),o.child=r.child,o.flags|=128,o=null):(Xs(),m=u.fallback,C=o.mode,u=Kh({mode:"visible",children:u.children},C),m=la(m,C,l,null),m.flags|=2,u.return=o,m.return=o,u.sibling=m,o.child=u,Al(o,r.child,null,l),u=o.child,u.memoizedState=Pg(l),u.childLanes=Lg(r,w,l),o.memoizedState=Mg,o=m);else if(Ws(o),v_(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var W=w.dgst;w=W,u=Error(i(419)),u.stack="",u.digest=w,Wc({value:u,source:null,stack:null}),o=Vg(r,o,l)}else if(Sn||Xc(r,o,l,!1),w=(l&r.childLanes)!==0,Sn||w){if(w=Vt,w!==null&&(u=l&-l,u=(u&42)!==0?1:on(u),u=(u&(w.suspendedLanes|l))!==0?0:u,u!==0&&u!==P.retryLane))throw P.retryLane=u,pl(r,u),Ai(w,r,u),ZT;C.data==="$?"||n_(),o=Vg(r,o,l)}else C.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=P.treeContext,Xt=sr(C.nextSibling),ti=o,vt=!0,da=null,Ir=!1,r!==null&&(Vi[ji++]=ss,Vi[ji++]=os,Vi[ji++]=ca,ss=r.id,os=r.overflow,ca=o),o=Ug(o,u.children),o.flags|=4096);return o}return m?(Xs(),m=u.fallback,C=o.mode,P=r.child,W=P.sibling,u=rs(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,W!==null?m=rs(W,m):(m=la(m,C,l,null),m.flags|=2),m.return=o,u.return=o,u.sibling=m,o.child=u,u=m,m=o.child,C=r.child.memoizedState,C===null?C=Pg(l):(P=C.cachePool,P!==null?(W=pn._currentValue,P=P.parent!==W?{parent:W,pool:W}:P):P=Q0(),C={baseLanes:C.baseLanes|l,cachePool:P}),m.memoizedState=C,m.childLanes=Lg(r,w,l),o.memoizedState=Mg,u):(Ws(o),l=r.child,r=l.sibling,l=rs(l,{mode:"visible",children:u.children}),l.return=o,l.sibling=null,r!==null&&(w=o.deletions,w===null?(o.deletions=[r],o.flags|=16):w.push(r)),o.child=l,o.memoizedState=null,l)}function Ug(r,o){return o=Kh({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Kh(r,o){return r=Ti(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Vg(r,o,l){return Al(o,r.child,null,l),r=Ug(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function cb(r,o,l){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o),ng(r.return,o,l)}function jg(r,o,l,u,m){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=m)}function ub(r,o,l){var u=o.pendingProps,m=u.revealOrder,g=u.tail;if(On(r,o,u.children,l),u=gn.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&cb(r,l,o);else if(r.tag===19)cb(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(H(gn,u),m){case"forwards":for(l=o.child,m=null;l!==null;)r=l.alternate,r!==null&&qh(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),jg(o,!1,m,l,g);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(r=m.alternate,r!==null&&qh(r)===null){o.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}jg(o,!0,l,null,g);break;case"together":jg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ds(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),no|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(Xc(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=rs(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=rs(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function Bg(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Rh(r)))}function $k(r,o,l){switch(o.tag){case 3:ae(o,o.stateNode.containerInfo),Gs(o,pn,r.memoizedState.cache),Yc();break;case 27:case 5:Xe(o);break;case 4:ae(o,o.stateNode.containerInfo);break;case 10:Gs(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Ws(o),o.flags|=128,null):(l&o.child.childLanes)!==0?lb(r,o,l):(Ws(o),r=ds(r,o,l),r!==null?r.sibling:null);Ws(o);break;case 19:var m=(r.flags&128)!==0;if(u=(l&o.childLanes)!==0,u||(Xc(r,o,l,!1),u=(l&o.childLanes)!==0),m){if(u)return ub(r,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),H(gn,gn.current),u)break;return null;case 22:case 23:return o.lanes=0,ib(r,o,l);case 24:Gs(o,pn,r.memoizedState.cache)}return ds(r,o,l)}function db(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)Sn=!0;else{if(!Bg(r,l)&&(o.flags&128)===0)return Sn=!1,$k(r,o,l);Sn=(r.flags&131072)!==0}else Sn=!1,vt&&(o.flags&1048576)!==0&&F0(o,Ah,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var u=o.elementType,m=u._init;if(u=m(u._payload),o.type=u,typeof u=="function")Yp(u)?(r=_a(u,r),o.tag=1,o=ob(null,o,u,r,l)):(o.tag=0,o=Dg(null,o,u,r,l));else{if(u!=null){if(m=u.$$typeof,m===K){o.tag=11,o=eb(null,o,u,r,l);break e}else if(m===N){o.tag=14,o=tb(null,o,u,r,l);break e}}throw o=it(u)||u,Error(i(306,o,""))}}return o;case 0:return Dg(r,o,o.type,o.pendingProps,l);case 1:return u=o.type,m=_a(u,o.pendingProps),ob(r,o,u,m,l);case 3:e:{if(ae(o,o.stateNode.containerInfo),r===null)throw Error(i(387));u=o.pendingProps;var g=o.memoizedState;m=g.element,cg(r,o),ru(o,u,null,l);var w=o.memoizedState;if(u=w.cache,Gs(o,pn,u),u!==g.cache&&ig(o,[pn],l,!0),iu(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=ab(r,o,u,l);break e}else if(u!==m){m=Li(Error(i(424)),o),Wc(m),o=ab(r,o,u,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Xt=sr(r.firstChild),ti=o,vt=!0,da=null,Ir=!0,l=qT(o,null,u,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Yc(),u===m){o=ds(r,o,l);break e}On(r,o,u,l)}o=o.child}return o;case 26:return $h(r,o),r===null?(l=pw(o.type,null,o.pendingProps,null))?o.memoizedState=l:vt||(l=o.type,r=o.pendingProps,u=lf(Z.current).createElement(l),u[en]=o,u[Wt]=r,Mn(u,l,r),tn(u),o.stateNode=u):o.memoizedState=pw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Xe(o),r===null&&vt&&(u=o.stateNode=hw(o.type,o.pendingProps,Z.current),ti=o,Ir=!0,m=Xt,oo(o.type)?(E_=m,Xt=sr(u.firstChild)):Xt=m),On(r,o,o.pendingProps.children,l),$h(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&vt&&((m=u=Xt)&&(u=EO(u,o.type,o.pendingProps,Ir),u!==null?(o.stateNode=u,ti=o,Xt=sr(u.firstChild),Ir=!1,m=!0):m=!1),m||ha(o)),Xe(o),m=o.type,g=o.pendingProps,w=r!==null?r.memoizedProps:null,u=g.children,g_(m,g)?u=null:w!==null&&g_(m,w)&&(o.flags|=32),o.memoizedState!==null&&(m=pg(r,o,Vk,null,null,l),Au._currentValue=m),$h(r,o),On(r,o,u,l),o.child;case 6:return r===null&&vt&&((r=l=Xt)&&(l=TO(l,o.pendingProps,Ir),l!==null?(o.stateNode=l,ti=o,Xt=null,r=!0):r=!1),r||ha(o)),null;case 13:return lb(r,o,l);case 4:return ae(o,o.stateNode.containerInfo),u=o.pendingProps,r===null?o.child=Al(o,null,u,l):On(r,o,u,l),o.child;case 11:return eb(r,o,o.type,o.pendingProps,l);case 7:return On(r,o,o.pendingProps,l),o.child;case 8:return On(r,o,o.pendingProps.children,l),o.child;case 12:return On(r,o,o.pendingProps.children,l),o.child;case 10:return u=o.pendingProps,Gs(o,o.type,u.value),On(r,o,u.children,l),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,ma(o),m=zn(m),u=u(m),o.flags|=1,On(r,o,u,l),o.child;case 14:return tb(r,o,o.type,o.pendingProps,l);case 15:return nb(r,o,o.type,o.pendingProps,l);case 19:return ub(r,o,l);case 31:return u=o.pendingProps,l=o.mode,u={mode:u.mode,children:u.children},r===null?(l=Kh(u,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=rs(r.child,u),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return ib(r,o,l);case 24:return ma(o),u=zn(pn),r===null?(m=og(),m===null&&(m=Vt,g=rg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),o.memoizedState={parent:u,cache:m},lg(o),Gs(o,pn,m)):((r.lanes&l)!==0&&(cg(r,o),ru(o,null,null,l),iu()),m=r.memoizedState,g=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Gs(o,pn,u)):(u=g.cache,Gs(o,pn,u),u!==m.cache&&ig(o,[pn],l,!0))),On(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function hs(r){r.flags|=4}function hb(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ew(o)){if(o=Bi.current,o!==null&&((ht&4194048)===ht?xr!==null:(ht&62914560)!==ht&&(ht&536870912)===0||o!==xr))throw tu=ag,Y0;r.flags|=8192}}function Qh(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?He():536870912,r.lanes|=o,Nl|=o)}function du(r,o){if(!vt)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Ht(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(o)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=l,o}function Kk(r,o,l){var u=o.pendingProps;switch(Zp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(o),null;case 1:return Ht(o),null;case 3:return l=o.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ls(pn),be(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Qc(o)?hs(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,H0())),Ht(o),null;case 26:return l=o.memoizedState,r===null?(hs(o),l!==null?(Ht(o),hb(o,l)):(Ht(o),o.flags&=-16777217)):l?l!==r.memoizedState?(hs(o),Ht(o),hb(o,l)):(Ht(o),o.flags&=-16777217):(r.memoizedProps!==u&&hs(o),Ht(o),o.flags&=-16777217),null;case 27:ct(o),l=Z.current;var m=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==u&&hs(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return Ht(o),null}r=ge.current,Qc(o)?z0(o):(r=hw(m,u,l),o.stateNode=r,hs(o))}return Ht(o),null;case 5:if(ct(o),l=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==u&&hs(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return Ht(o),null}if(r=ge.current,Qc(o))z0(o);else{switch(m=lf(Z.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?m.createElement(l,{is:u.is}):m.createElement(l)}}r[en]=o,r[Wt]=u;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=r;e:switch(Mn(r,l,u),l){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&hs(o)}}return Ht(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==u&&hs(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(i(166));if(r=Z.current,Qc(o)){if(r=o.stateNode,l=o.memoizedProps,u=null,m=ti,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[en]=o,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||sw(r.nodeValue,l)),r||ha(o)}else r=lf(r).createTextNode(u),r[en]=o,o.stateNode=r}return Ht(o),null;case 13:if(u=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Qc(o),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[en]=o}else Yc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ht(o),m=!1}else m=H0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(us(o),o):(us(o),null)}if(us(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=u!==null,r=r!==null&&r.memoizedState!==null,l){u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)}return l!==r&&l&&(o.child.flags|=8192),Qh(o,o.updateQueue),Ht(o),null;case 4:return be(),r===null&&d_(o.stateNode.containerInfo),Ht(o),null;case 10:return ls(o.type),Ht(o),null;case 19:if(re(gn),m=o.memoizedState,m===null)return Ht(o),null;if(u=(o.flags&128)!==0,g=m.rendering,g===null)if(u)du(m,!1);else{if(Jt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(g=qh(r),g!==null){for(o.flags|=128,du(m,!1),r=g.updateQueue,o.updateQueue=r,Qh(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)B0(l,r),l=l.sibling;return H(gn,gn.current&1|2),o.child}r=r.sibling}m.tail!==null&&li()>Xh&&(o.flags|=128,u=!0,du(m,!1),o.lanes=4194304)}else{if(!u)if(r=qh(g),r!==null){if(o.flags|=128,u=!0,r=r.updateQueue,o.updateQueue=r,Qh(o,r),du(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!vt)return Ht(o),null}else 2*li()-m.renderingStartTime>Xh&&l!==536870912&&(o.flags|=128,u=!0,du(m,!1),o.lanes=4194304);m.isBackwards?(g.sibling=o.child,o.child=g):(r=m.last,r!==null?r.sibling=g:o.child=g,m.last=g)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=li(),o.sibling=null,r=gn.current,H(gn,u?r&1|2:r&1),o):(Ht(o),null);case 22:case 23:return us(o),fg(),u=o.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(l&536870912)!==0&&(o.flags&128)===0&&(Ht(o),o.subtreeFlags&6&&(o.flags|=8192)):Ht(o),l=o.updateQueue,l!==null&&Qh(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==l&&(o.flags|=2048),r!==null&&re(pa),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ls(pn),Ht(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Qk(r,o){switch(Zp(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ls(pn),be(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ct(o),null;case 13:if(us(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Yc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return re(gn),null;case 4:return be(),null;case 10:return ls(o.type),null;case 22:case 23:return us(o),fg(),r!==null&&re(pa),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ls(pn),null;case 25:return null;default:return null}}function fb(r,o){switch(Zp(o),o.tag){case 3:ls(pn),be();break;case 26:case 27:case 5:ct(o);break;case 4:be();break;case 13:us(o);break;case 19:re(gn);break;case 10:ls(o.type);break;case 22:case 23:us(o),fg(),r!==null&&re(pa);break;case 24:ls(pn)}}function hu(r,o){try{var l=o.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&r)===r){u=void 0;var g=l.create,w=l.inst;u=g(),w.destroy=u}l=l.next}while(l!==m)}}catch(C){Dt(o,o.return,C)}}function Js(r,o,l){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&r)===r){var w=u.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,m=o;var P=l,W=C;try{W()}catch(oe){Dt(m,P,oe)}}}u=u.next}while(u!==g)}}catch(oe){Dt(o,o.return,oe)}}function mb(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{tT(o,l)}catch(u){Dt(r,r.return,u)}}}function pb(r,o,l){l.props=_a(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){Dt(r,o,u)}}function fu(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(m){Dt(r,o,m)}}function Nr(r,o){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){Dt(r,o,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Dt(r,o,m)}else l.current=null}function gb(r){var o=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){Dt(r,r.return,m)}}function Fg(r,o,l){try{var u=r.stateNode;pO(u,r.type,l,o),u[Wt]=o}catch(m){Dt(r,r.return,m)}}function _b(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&oo(r.type)||r.tag===4}function zg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||_b(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&oo(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function qg(r,o,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=af));else if(u!==4&&(u===27&&oo(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(qg(r,o,l),r=r.sibling;r!==null;)qg(r,o,l),r=r.sibling}function Yh(r,o,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(u!==4&&(u===27&&oo(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Yh(r,o,l),r=r.sibling;r!==null;)Yh(r,o,l),r=r.sibling}function yb(r){var o=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);Mn(o,u,l),o[en]=r,o[Wt]=l}catch(g){Dt(r,r.return,g)}}var fs=!1,rn=!1,Hg=!1,vb=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function Yk(r,o){if(r=r.containerInfo,m_=mf,r=N0(r),zp(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,C=-1,P=-1,W=0,oe=0,de=r,X=null;t:for(;;){for(var ee;de!==l||m!==0&&de.nodeType!==3||(C=w+m),de!==g||u!==0&&de.nodeType!==3||(P=w+u),de.nodeType===3&&(w+=de.nodeValue.length),(ee=de.firstChild)!==null;)X=de,de=ee;for(;;){if(de===r)break t;if(X===l&&++W===m&&(C=w),X===g&&++oe===u&&(P=w),(ee=de.nextSibling)!==null)break;de=X,X=de.parentNode}de=ee}l=C===-1||P===-1?null:{start:C,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(p_={focusedElem:r,selectionRange:l},mf=!1,Cn=o;Cn!==null;)if(o=Cn,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,Cn=r;else for(;Cn!==null;){switch(o=Cn,g=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=o,m=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var Be=_a(l.type,m,l.elementType===l.type);r=u.getSnapshotBeforeUpdate(Be,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(Le){Dt(l,l.return,Le)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)y_(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":y_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Cn=r;break}Cn=o.return}}function Eb(r,o,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Zs(r,l),u&4&&hu(5,l);break;case 1:if(Zs(r,l),u&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(w){Dt(l,l.return,w)}else{var m=_a(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(m,o,r.__reactInternalSnapshotBeforeUpdate)}catch(w){Dt(l,l.return,w)}}u&64&&mb(l),u&512&&fu(l,l.return);break;case 3:if(Zs(r,l),u&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{tT(r,o)}catch(w){Dt(l,l.return,w)}}break;case 27:o===null&&u&4&&yb(l);case 26:case 5:Zs(r,l),o===null&&u&4&&gb(l),u&512&&fu(l,l.return);break;case 12:Zs(r,l);break;case 13:Zs(r,l),u&4&&wb(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=rO.bind(null,l),bO(r,l))));break;case 22:if(u=l.memoizedState!==null||fs,!u){o=o!==null&&o.memoizedState!==null||rn,m=fs;var g=rn;fs=u,(rn=o)&&!g?eo(r,l,(l.subtreeFlags&8772)!==0):Zs(r,l),fs=m,rn=g}break;case 30:break;default:Zs(r,l)}}function Tb(r){var o=r.alternate;o!==null&&(r.alternate=null,Tb(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Fs(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var qt=null,di=!1;function ms(r,o,l){for(l=l.child;l!==null;)bb(r,o,l),l=l.sibling}function bb(r,o,l){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(we,l)}catch{}switch(l.tag){case 26:rn||Nr(l,o),ms(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:rn||Nr(l,o);var u=qt,m=di;oo(l.type)&&(qt=l.stateNode,di=!1),ms(r,o,l),bu(l.stateNode),qt=u,di=m;break;case 5:rn||Nr(l,o);case 6:if(u=qt,m=di,qt=null,ms(r,o,l),qt=u,di=m,qt!==null)if(di)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(l.stateNode)}catch(g){Dt(l,o,g)}else try{qt.removeChild(l.stateNode)}catch(g){Dt(l,o,g)}break;case 18:qt!==null&&(di?(r=qt,uw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Nu(r)):uw(qt,l.stateNode));break;case 4:u=qt,m=di,qt=l.stateNode.containerInfo,di=!0,ms(r,o,l),qt=u,di=m;break;case 0:case 11:case 14:case 15:rn||Js(2,l,o),rn||Js(4,l,o),ms(r,o,l);break;case 1:rn||(Nr(l,o),u=l.stateNode,typeof u.componentWillUnmount=="function"&&pb(l,o,u)),ms(r,o,l);break;case 21:ms(r,o,l);break;case 22:rn=(u=rn)||l.memoizedState!==null,ms(r,o,l),rn=u;break;default:ms(r,o,l)}}function wb(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Nu(r)}catch(l){Dt(o,o.return,l)}}function Wk(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new vb),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new vb),o;default:throw Error(i(435,r.tag))}}function Gg(r,o){var l=Wk(r);o.forEach(function(u){var m=sO.bind(null,r,u);l.has(u)||(l.add(u),u.then(m,m))})}function bi(r,o){var l=o.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],g=r,w=o,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(oo(C.type)){qt=C.stateNode,di=!1;break e}break;case 5:qt=C.stateNode,di=!1;break e;case 3:case 4:qt=C.stateNode.containerInfo,di=!0;break e}C=C.return}if(qt===null)throw Error(i(160));bb(g,w,m),qt=null,di=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Sb(o,r),o=o.sibling}var rr=null;function Sb(r,o){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:bi(o,r),wi(r),u&4&&(Js(3,r,r.return),hu(3,r),Js(5,r,r.return));break;case 1:bi(o,r),wi(r),u&512&&(rn||l===null||Nr(l,l.return)),u&64&&fs&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=rr;if(bi(o,r),wi(r),u&512&&(rn||l===null||Nr(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[$o]||g[en]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),Mn(g,u,l),g[en]=r,tn(g),u=g;break e;case"link":var w=yw("link","href",m).get(u+(l.href||""));if(w){for(var C=0;C<w.length;C++)if(g=w[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(C,1);break t}}g=m.createElement(u),Mn(g,u,l),m.head.appendChild(g);break;case"meta":if(w=yw("meta","content",m).get(u+(l.content||""))){for(C=0;C<w.length;C++)if(g=w[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(C,1);break t}}g=m.createElement(u),Mn(g,u,l),m.head.appendChild(g);break;default:throw Error(i(468,u))}g[en]=r,tn(g),u=g}r.stateNode=u}else vw(m,r.type,r.stateNode);else r.stateNode=_w(m,u,r.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?vw(m,r.type,r.stateNode):_w(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Fg(r,r.memoizedProps,l.memoizedProps)}break;case 27:bi(o,r),wi(r),u&512&&(rn||l===null||Nr(l,l.return)),l!==null&&u&4&&Fg(r,r.memoizedProps,l.memoizedProps);break;case 5:if(bi(o,r),wi(r),u&512&&(rn||l===null||Nr(l,l.return)),r.flags&32){m=r.stateNode;try{Oi(m,"")}catch(ee){Dt(r,r.return,ee)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Fg(r,m,l!==null?l.memoizedProps:m)),u&1024&&(Hg=!0);break;case 6:if(bi(o,r),wi(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(ee){Dt(r,r.return,ee)}}break;case 3:if(df=null,m=rr,rr=cf(o.containerInfo),bi(o,r),rr=m,wi(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Nu(o.containerInfo)}catch(ee){Dt(r,r.return,ee)}Hg&&(Hg=!1,Cb(r));break;case 4:u=rr,rr=cf(r.stateNode.containerInfo),bi(o,r),wi(r),rr=u;break;case 12:bi(o,r),wi(r);break;case 13:bi(o,r),wi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Xg=li()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Gg(r,u)));break;case 22:m=r.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,W=fs,oe=rn;if(fs=W||m,rn=oe||P,bi(o,r),rn=oe,fs=W,wi(r),u&8192)e:for(o=r.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(l===null||P||fs||rn||ya(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){P=l=o;try{if(g=P.stateNode,m)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=P.stateNode;var de=P.memoizedProps.style,X=de!=null&&de.hasOwnProperty("display")?de.display:null;C.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ee){Dt(P,P.return,ee)}}}else if(o.tag===6){if(l===null){P=o;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch(ee){Dt(P,P.return,ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Gg(r,l))));break;case 19:bi(o,r),wi(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Gg(r,u)));break;case 30:break;case 21:break;default:bi(o,r),wi(r)}}function wi(r){var o=r.flags;if(o&2){try{for(var l,u=r.return;u!==null;){if(_b(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,g=zg(r);Yh(r,g,m);break;case 5:var w=l.stateNode;l.flags&32&&(Oi(w,""),l.flags&=-33);var C=zg(r);Yh(r,C,w);break;case 3:case 4:var P=l.stateNode.containerInfo,W=zg(r);qg(r,W,P);break;default:throw Error(i(161))}}catch(oe){Dt(r,r.return,oe)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Cb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;Cb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Zs(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Eb(r,o.alternate,o),o=o.sibling}function ya(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Js(4,o,o.return),ya(o);break;case 1:Nr(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&pb(o,o.return,l),ya(o);break;case 27:bu(o.stateNode);case 26:case 5:Nr(o,o.return),ya(o);break;case 22:o.memoizedState===null&&ya(o);break;case 30:ya(o);break;default:ya(o)}r=r.sibling}}function eo(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=r,g=o,w=g.flags;switch(g.tag){case 0:case 11:case 15:eo(m,g,l),hu(4,g);break;case 1:if(eo(m,g,l),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(W){Dt(u,u.return,W)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)eT(P[m],C)}catch(W){Dt(u,u.return,W)}}l&&w&64&&mb(g),fu(g,g.return);break;case 27:yb(g);case 26:case 5:eo(m,g,l),l&&u===null&&w&4&&gb(g),fu(g,g.return);break;case 12:eo(m,g,l);break;case 13:eo(m,g,l),l&&w&4&&wb(m,g);break;case 22:g.memoizedState===null&&eo(m,g,l),fu(g,g.return);break;case 30:break;default:eo(m,g,l)}o=o.sibling}}function $g(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Jc(l))}function Kg(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Jc(r))}function kr(r,o,l,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ab(r,o,l,u),o=o.sibling}function Ab(r,o,l,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:kr(r,o,l,u),m&2048&&hu(9,o);break;case 1:kr(r,o,l,u);break;case 3:kr(r,o,l,u),m&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Jc(r)));break;case 12:if(m&2048){kr(r,o,l,u),r=o.stateNode;try{var g=o.memoizedProps,w=g.id,C=g.onPostCommit;typeof C=="function"&&C(w,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(P){Dt(o,o.return,P)}}else kr(r,o,l,u);break;case 13:kr(r,o,l,u);break;case 23:break;case 22:g=o.stateNode,w=o.alternate,o.memoizedState!==null?g._visibility&2?kr(r,o,l,u):mu(r,o):g._visibility&2?kr(r,o,l,u):(g._visibility|=2,Rl(r,o,l,u,(o.subtreeFlags&10256)!==0)),m&2048&&$g(w,o);break;case 24:kr(r,o,l,u),m&2048&&Kg(o.alternate,o);break;default:kr(r,o,l,u)}}function Rl(r,o,l,u,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var g=r,w=o,C=l,P=u,W=w.flags;switch(w.tag){case 0:case 11:case 15:Rl(g,w,C,P,m),hu(8,w);break;case 23:break;case 22:var oe=w.stateNode;w.memoizedState!==null?oe._visibility&2?Rl(g,w,C,P,m):mu(g,w):(oe._visibility|=2,Rl(g,w,C,P,m)),m&&W&2048&&$g(w.alternate,w);break;case 24:Rl(g,w,C,P,m),m&&W&2048&&Kg(w.alternate,w);break;default:Rl(g,w,C,P,m)}o=o.sibling}}function mu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,u=o,m=u.flags;switch(u.tag){case 22:mu(l,u),m&2048&&$g(u.alternate,u);break;case 24:mu(l,u),m&2048&&Kg(u.alternate,u);break;default:mu(l,u)}o=o.sibling}}var pu=8192;function Il(r){if(r.subtreeFlags&pu)for(r=r.child;r!==null;)Rb(r),r=r.sibling}function Rb(r){switch(r.tag){case 26:Il(r),r.flags&pu&&r.memoizedState!==null&&PO(rr,r.memoizedState,r.memoizedProps);break;case 5:Il(r);break;case 3:case 4:var o=rr;rr=cf(r.stateNode.containerInfo),Il(r),rr=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=pu,pu=16777216,Il(r),pu=o):Il(r));break;default:Il(r)}}function Ib(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function gu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];Cn=u,Nb(u,r)}Ib(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)xb(r),r=r.sibling}function xb(r){switch(r.tag){case 0:case 11:case 15:gu(r),r.flags&2048&&Js(9,r,r.return);break;case 3:gu(r);break;case 12:gu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Wh(r)):gu(r);break;default:gu(r)}}function Wh(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];Cn=u,Nb(u,r)}Ib(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Js(8,o,o.return),Wh(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Wh(o));break;default:Wh(o)}r=r.sibling}}function Nb(r,o){for(;Cn!==null;){var l=Cn;switch(l.tag){case 0:case 11:case 15:Js(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Jc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Cn=u;else e:for(l=r;Cn!==null;){u=Cn;var m=u.sibling,g=u.return;if(Tb(u),u===l){Cn=null;break e}if(m!==null){m.return=g,Cn=m;break e}Cn=g}}}var Xk={getCacheForType:function(r){var o=zn(pn),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l}},Jk=typeof WeakMap=="function"?WeakMap:Map,St=0,Vt=null,st=null,ht=0,Ct=0,Si=null,to=!1,xl=!1,Qg=!1,ps=0,Jt=0,no=0,va=0,Yg=0,Fi=0,Nl=0,_u=null,hi=null,Wg=!1,Xg=0,Xh=1/0,Jh=null,io=null,Dn=0,ro=null,kl=null,Ol=0,Jg=0,Zg=null,kb=null,yu=0,e_=null;function Ci(){if((St&2)!==0&&ht!==0)return ht&-ht;if(se.T!==null){var r=vl;return r!==0?r:a_()}return an()}function Ob(){Fi===0&&(Fi=(ht&536870912)===0||vt?Pt():536870912);var r=Bi.current;return r!==null&&(r.flags|=32),Fi}function Ai(r,o,l){(r===Vt&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)&&(Dl(r,0),so(r,ht,Fi,!1)),Me(r,l),((St&2)===0||r!==Vt)&&(r===Vt&&((St&2)===0&&(va|=l),Jt===4&&so(r,ht,Fi,!1)),Or(r))}function Db(r,o,l){if((St&6)!==0)throw Error(i(327));var u=!l&&(o&124)===0&&(o&r.expiredLanes)===0||ci(r,o),m=u?tO(r,o):i_(r,o,!0),g=u;do{if(m===0){xl&&!u&&so(r,o,0,!1);break}else{if(l=r.current.alternate,g&&!Zk(l)){m=i_(r,o,!1),g=!1;continue}if(m===2){if(g=o,r.errorRecoveryDisabledLanes&g)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var C=r;m=_u;var P=C.current.memoizedState.isDehydrated;if(P&&(Dl(C,w).flags|=256),w=i_(C,w,!1),w!==2){if(Qg&&!P){C.errorRecoveryDisabledLanes|=g,va|=g,m=4;break e}g=hi,hi=m,g!==null&&(hi===null?hi=g:hi.push.apply(hi,g))}m=w}if(g=!1,m!==2)continue}}if(m===1){Dl(r,0),so(r,o,0,!0);break}e:{switch(u=r,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:so(u,o,Fi,!to);break e;case 2:hi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(m=Xg+300-li(),10<m)){if(so(u,o,Fi,!to),ki(u,0,!0)!==0)break e;u.timeoutHandle=lw(Mb.bind(null,u,l,hi,Jh,Wg,o,Fi,va,Nl,to,g,2,-0,0),m);break e}Mb(u,l,hi,Jh,Wg,o,Fi,va,Nl,to,g,0,-0,0)}}break}while(!0);Or(r)}function Mb(r,o,l,u,m,g,w,C,P,W,oe,de,X,ee){if(r.timeoutHandle=-1,de=o.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(Cu={stylesheets:null,count:0,unsuspend:MO},Rb(o),de=LO(),de!==null)){r.cancelPendingCommit=de(Fb.bind(null,r,o,g,l,u,m,w,C,P,oe,1,X,ee)),so(r,g,w,!W);return}Fb(r,o,g,l,u,m,w,C,P)}function Zk(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],g=m.getSnapshot;m=m.value;try{if(!Ei(g(),m))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function so(r,o,l,u){o&=~Yg,o&=~va,r.suspendedLanes|=o,r.pingedLanes&=~o,u&&(r.warmLanes|=o),u=r.expirationTimes;for(var m=o;0<m;){var g=31-Ae(m),w=1<<g;u[g]=-1,m&=~w}l!==0&&Ke(r,l,o)}function Zh(){return(St&6)===0?(vu(0),!1):!0}function t_(){if(st!==null){if(Ct===0)var r=st.return;else r=st,as=fa=null,yg(r),Cl=null,cu=0,r=st;for(;r!==null;)fb(r.alternate,r),r=r.return;st=null}}function Dl(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,_O(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),t_(),Vt=r,st=l=rs(r.current,null),ht=o,Ct=0,Si=null,to=!1,xl=ci(r,o),Qg=!1,Nl=Fi=Yg=va=no=Jt=0,hi=_u=null,Wg=!1,(o&8)!==0&&(o|=o&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=o;0<u;){var m=31-Ae(u),g=1<<m;o|=r[m],u&=~g}return ps=o,Th(),l}function Pb(r,o){Ye=null,se.H=Bh,o===eu||o===Nh?(o=J0(),Ct=3):o===Y0?(o=J0(),Ct=4):Ct=o===ZT?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Si=o,st===null&&(Jt=1,Gh(r,Li(o,r.current)))}function Lb(){var r=se.H;return se.H=Bh,r===null?Bh:r}function Ub(){var r=se.A;return se.A=Xk,r}function n_(){Jt=4,to||(ht&4194048)!==ht&&Bi.current!==null||(xl=!0),(no&134217727)===0&&(va&134217727)===0||Vt===null||so(Vt,ht,Fi,!1)}function i_(r,o,l){var u=St;St|=2;var m=Lb(),g=Ub();(Vt!==r||ht!==o)&&(Jh=null,Dl(r,o)),o=!1;var w=Jt;e:do try{if(Ct!==0&&st!==null){var C=st,P=Si;switch(Ct){case 8:t_(),w=6;break e;case 3:case 2:case 9:case 6:Bi.current===null&&(o=!0);var W=Ct;if(Ct=0,Si=null,Ml(r,C,P,W),l&&xl){w=0;break e}break;default:W=Ct,Ct=0,Si=null,Ml(r,C,P,W)}}eO(),w=Jt;break}catch(oe){Pb(r,oe)}while(!0);return o&&r.shellSuspendCounter++,as=fa=null,St=u,se.H=m,se.A=g,st===null&&(Vt=null,ht=0,Th()),w}function eO(){for(;st!==null;)Vb(st)}function tO(r,o){var l=St;St|=2;var u=Lb(),m=Ub();Vt!==r||ht!==o?(Jh=null,Xh=li()+500,Dl(r,o)):xl=ci(r,o);e:do try{if(Ct!==0&&st!==null){o=st;var g=Si;t:switch(Ct){case 1:Ct=0,Si=null,Ml(r,o,g,1);break;case 2:case 9:if(W0(g)){Ct=0,Si=null,jb(o);break}o=function(){Ct!==2&&Ct!==9||Vt!==r||(Ct=7),Or(r)},g.then(o,o);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:W0(g)?(Ct=0,Si=null,jb(o)):(Ct=0,Si=null,Ml(r,o,g,7));break;case 5:var w=null;switch(st.tag){case 26:w=st.memoizedState;case 5:case 27:var C=st;if(!w||Ew(w)){Ct=0,Si=null;var P=C.sibling;if(P!==null)st=P;else{var W=C.return;W!==null?(st=W,ef(W)):st=null}break t}}Ct=0,Si=null,Ml(r,o,g,5);break;case 6:Ct=0,Si=null,Ml(r,o,g,6);break;case 8:t_(),Jt=6;break e;default:throw Error(i(462))}}nO();break}catch(oe){Pb(r,oe)}while(!0);return as=fa=null,se.H=u,se.A=m,St=l,st!==null?0:(Vt=null,ht=0,Th(),Jt)}function nO(){for(;st!==null&&!gr();)Vb(st)}function Vb(r){var o=db(r.alternate,r,ps);r.memoizedProps=r.pendingProps,o===null?ef(r):st=o}function jb(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=sb(l,o,o.pendingProps,o.type,void 0,ht);break;case 11:o=sb(l,o,o.pendingProps,o.type.render,o.ref,ht);break;case 5:yg(o);default:fb(l,o),o=st=B0(o,ps),o=db(l,o,ps)}r.memoizedProps=r.pendingProps,o===null?ef(r):st=o}function Ml(r,o,l,u){as=fa=null,yg(o),Cl=null,cu=0;var m=o.return;try{if(Gk(r,m,o,l,ht)){Jt=1,Gh(r,Li(l,r.current)),st=null;return}}catch(g){if(m!==null)throw st=m,g;Jt=1,Gh(r,Li(l,r.current)),st=null;return}o.flags&32768?(vt||u===1?r=!0:xl||(ht&536870912)!==0?r=!1:(to=r=!0,(u===2||u===9||u===3||u===6)&&(u=Bi.current,u!==null&&u.tag===13&&(u.flags|=16384))),Bb(o,r)):ef(o)}function ef(r){var o=r;do{if((o.flags&32768)!==0){Bb(o,to);return}r=o.return;var l=Kk(o.alternate,o,ps);if(l!==null){st=l;return}if(o=o.sibling,o!==null){st=o;return}st=o=r}while(o!==null);Jt===0&&(Jt=5)}function Bb(r,o){do{var l=Qk(r.alternate,r);if(l!==null){l.flags&=32767,st=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){st=r;return}st=r=l}while(r!==null);Jt=6,st=null}function Fb(r,o,l,u,m,g,w,C,P){r.cancelPendingCommit=null;do tf();while(Dn!==0);if((St&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(g=o.lanes|o.childLanes,g|=Kp,Ge(r,l,g,w,C,P),r===Vt&&(st=Vt=null,ht=0),kl=o,ro=r,Ol=l,Jg=g,Zg=m,kb=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,oO($r,function(){return $b(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=se.T,se.T=null,m=Te.p,Te.p=2,w=St,St|=4;try{Yk(r,o,l)}finally{St=w,Te.p=m,se.T=u}}Dn=1,zb(),qb(),Hb()}}function zb(){if(Dn===1){Dn=0;var r=ro,o=kl,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=se.T,se.T=null;var u=Te.p;Te.p=2;var m=St;St|=4;try{Sb(o,r);var g=p_,w=N0(r.containerInfo),C=g.focusedElem,P=g.selectionRange;if(w!==C&&C&&C.ownerDocument&&x0(C.ownerDocument.documentElement,C)){if(P!==null&&zp(C)){var W=P.start,oe=P.end;if(oe===void 0&&(oe=W),"selectionStart"in C)C.selectionStart=W,C.selectionEnd=Math.min(oe,C.value.length);else{var de=C.ownerDocument||document,X=de&&de.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Be=C.textContent.length,Le=Math.min(P.start,Be),kt=P.end===void 0?Le:Math.min(P.end,Be);!ee.extend&&Le>kt&&(w=kt,kt=Le,Le=w);var $=I0(C,Le),F=I0(C,kt);if($&&F&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==F.node||ee.focusOffset!==F.offset)){var Y=de.createRange();Y.setStart($.node,$.offset),ee.removeAllRanges(),Le>kt?(ee.addRange(Y),ee.extend(F.node,F.offset)):(Y.setEnd(F.node,F.offset),ee.addRange(Y))}}}}for(de=[],ee=C;ee=ee.parentNode;)ee.nodeType===1&&de.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<de.length;C++){var le=de[C];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}mf=!!m_,p_=m_=null}finally{St=m,Te.p=u,se.T=l}}r.current=o,Dn=2}}function qb(){if(Dn===2){Dn=0;var r=ro,o=kl,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=se.T,se.T=null;var u=Te.p;Te.p=2;var m=St;St|=4;try{Eb(r,o.alternate,o)}finally{St=m,Te.p=u,se.T=l}}Dn=3}}function Hb(){if(Dn===4||Dn===3){Dn=0,ai();var r=ro,o=kl,l=Ol,u=kb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Dn=5:(Dn=0,kl=ro=null,Gb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(io=null),Xn(l),o=o.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(we,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=se.T,m=Te.p,Te.p=2,se.T=null;try{for(var g=r.onRecoverableError,w=0;w<u.length;w++){var C=u[w];g(C.value,{componentStack:C.stack})}}finally{se.T=o,Te.p=m}}(Ol&3)!==0&&tf(),Or(r),m=r.pendingLanes,(l&4194090)!==0&&(m&42)!==0?r===e_?yu++:(yu=0,e_=r):yu=0,vu(0)}}function Gb(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Jc(o)))}function tf(r){return zb(),qb(),Hb(),$b()}function $b(){if(Dn!==5)return!1;var r=ro,o=Jg;Jg=0;var l=Xn(Ol),u=se.T,m=Te.p;try{Te.p=32>l?32:l,se.T=null,l=Zg,Zg=null;var g=ro,w=Ol;if(Dn=0,kl=ro=null,Ol=0,(St&6)!==0)throw Error(i(331));var C=St;if(St|=4,xb(g.current),Ab(g,g.current,w,l),St=C,vu(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(we,g)}catch{}return!0}finally{Te.p=m,se.T=u,Gb(r,o)}}function Kb(r,o,l){o=Li(l,o),o=Og(r.stateNode,o,2),r=Qs(r,o,2),r!==null&&(Me(r,2),Or(r))}function Dt(r,o,l){if(r.tag===3)Kb(r,r,l);else for(;o!==null;){if(o.tag===3){Kb(o,r,l);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(io===null||!io.has(u))){r=Li(l,r),l=XT(2),u=Qs(o,l,2),u!==null&&(JT(l,u,o,r),Me(u,2),Or(u));break}}o=o.return}}function r_(r,o,l){var u=r.pingCache;if(u===null){u=r.pingCache=new Jk;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(l)||(Qg=!0,m.add(l),r=iO.bind(null,r,o,l),o.then(r,r))}function iO(r,o,l){var u=r.pingCache;u!==null&&u.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,Vt===r&&(ht&l)===l&&(Jt===4||Jt===3&&(ht&62914560)===ht&&300>li()-Xg?(St&2)===0&&Dl(r,0):Yg|=l,Nl===ht&&(Nl=0)),Or(r)}function Qb(r,o){o===0&&(o=He()),r=pl(r,o),r!==null&&(Me(r,o),Or(r))}function rO(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),Qb(r,l)}function sO(r,o){var l=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(o),Qb(r,l)}function oO(r,o){return oi(r,o)}var nf=null,Pl=null,s_=!1,rf=!1,o_=!1,Ea=0;function Or(r){r!==Pl&&r.next===null&&(Pl===null?nf=Pl=r:Pl=Pl.next=r),rf=!0,s_||(s_=!0,lO())}function vu(r,o){if(!o_&&rf){o_=!0;do for(var l=!1,u=nf;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var w=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-Ae(42|r)+1)-1,g&=m&~(w&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Jb(u,g))}else g=ht,g=ki(u,u===Vt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ci(u,g)||(l=!0,Jb(u,g));u=u.next}while(l);o_=!1}}function aO(){Yb()}function Yb(){rf=s_=!1;var r=0;Ea!==0&&(gO()&&(r=Ea),Ea=0);for(var o=li(),l=null,u=nf;u!==null;){var m=u.next,g=Wb(u,o);g===0?(u.next=null,l===null?nf=m:l.next=m,m===null&&(Pl=l)):(l=u,(r!==0||(g&3)!==0)&&(rf=!0)),u=m}vu(r)}function Wb(r,o){for(var l=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var w=31-Ae(g),C=1<<w,P=m[w];P===-1?((C&l)===0||(C&u)!==0)&&(m[w]=wt(C,o)):P<=o&&(r.expiredLanes|=C),g&=~C}if(o=Vt,l=ht,l=ki(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===o&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ji(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ci(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(u!==null&&Ji(u),Xn(l)){case 2:case 8:l=Bs;break;case 32:l=$r;break;case 268435456:l=G;break;default:l=$r}return u=Xb.bind(null,r),l=oi(l,u),r.callbackPriority=o,r.callbackNode=l,o}return u!==null&&u!==null&&Ji(u),r.callbackPriority=2,r.callbackNode=null,2}function Xb(r,o){if(Dn!==0&&Dn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(tf()&&r.callbackNode!==l)return null;var u=ht;return u=ki(r,r===Vt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Db(r,u,o),Wb(r,li()),r.callbackNode!=null&&r.callbackNode===l?Xb.bind(null,r):null)}function Jb(r,o){if(tf())return null;Db(r,o,!0)}function lO(){yO(function(){(St&6)!==0?oi(Ho,aO):Yb()})}function a_(){return Ea===0&&(Ea=Pt()),Ea}function Zb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:il(""+r)}function ew(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function cO(r,o,l,u,m){if(o==="submit"&&l&&l.stateNode===m){var g=Zb((m[Wt]||null).action),w=u.submitter;w&&(o=(o=w[Wt]||null)?Zb(o.formAction):w.getAttribute("formAction"),o!==null&&(g=o,w=null));var C=new rl("action","action",null,u,m);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ea!==0){var P=w?ew(m,w):new FormData(m);Rg(l,{pending:!0,data:P,method:m.method,action:g},null,P)}}else typeof g=="function"&&(C.preventDefault(),P=w?ew(m,w):new FormData(m),Rg(l,{pending:!0,data:P,method:m.method,action:g},g,P))},currentTarget:m}]})}}for(var l_=0;l_<$p.length;l_++){var c_=$p[l_],uO=c_.toLowerCase(),dO=c_[0].toUpperCase()+c_.slice(1);ir(uO,"on"+dO)}ir(D0,"onAnimationEnd"),ir(M0,"onAnimationIteration"),ir(P0,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(Ik,"onTransitionRun"),ir(xk,"onTransitionStart"),ir(Nk,"onTransitionCancel"),ir(L0,"onTransitionEnd"),Yr("onMouseEnter",["mouseout","mouseover"]),Yr("onMouseLeave",["mouseout","mouseover"]),Yr("onPointerEnter",["pointerout","pointerover"]),Yr("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function tw(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],m=u.event;u=u.listeners;e:{var g=void 0;if(o)for(var w=u.length-1;0<=w;w--){var C=u[w],P=C.instance,W=C.currentTarget;if(C=C.listener,P!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=W;try{g(m)}catch(oe){Hh(oe)}m.currentTarget=null,g=P}else for(w=0;w<u.length;w++){if(C=u[w],P=C.instance,W=C.currentTarget,C=C.listener,P!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=W;try{g(m)}catch(oe){Hh(oe)}m.currentTarget=null,g=P}}}}function ot(r,o){var l=o[er];l===void 0&&(l=o[er]=new Set);var u=r+"__bubble";l.has(u)||(nw(o,r,2,!1),l.add(u))}function u_(r,o,l){var u=0;o&&(u|=4),nw(l,r,u,o)}var sf="_reactListening"+Math.random().toString(36).slice(2);function d_(r){if(!r[sf]){r[sf]=!0,Oc.forEach(function(l){l!=="selectionchange"&&(hO.has(l)||u_(l,!1,r),u_(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[sf]||(o[sf]=!0,u_("selectionchange",!1,o))}}function nw(r,o,l,u){switch(Aw(o)){case 2:var m=jO;break;case 8:m=BO;break;default:m=C_}l=m.bind(null,o,l,r),m=void 0,!Mi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(o,l,{capture:!0,passive:m}):r.addEventListener(o,l,!0):m!==void 0?r.addEventListener(o,l,{passive:m}):r.addEventListener(o,l,!1)}function h_(r,o,l,u,m){var g=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var C=u.stateNode.containerInfo;if(C===m)break;if(w===4)for(w=u.return;w!==null;){var P=w.tag;if((P===3||P===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;C!==null;){if(w=Qr(C),w===null)return;if(P=w.tag,P===5||P===6||P===26||P===27){u=g=w;continue e}C=C.parentNode}}u=u.return}oh(function(){var W=g,oe=Di(l),de=[];e:{var X=U0.get(r);if(X!==void 0){var ee=rl,Be=r;switch(r){case"keypress":if(wr(l)===0)break e;case"keydown":case"keyup":ee=ul;break;case"focusin":Be="focus",ee=al;break;case"focusout":Be="blur",ee=al;break;case"beforeblur":case"afterblur":ee=al;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Vp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=mh;break;case D0:case M0:case P0:ee=ll;break;case L0:ee=gh;break;case"scroll":case"scrollend":ee=ah;break;case"wheel":ee=dl;break;case"copy":case"cut":case"paste":ee=cl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Hc;break;case"toggle":case"beforetoggle":ee=yh}var Le=(o&4)!==0,kt=!Le&&(r==="scroll"||r==="scrollend"),$=Le?X!==null?X+"Capture":null:X;Le=[];for(var F=W,Y;F!==null;){var le=F;if(Y=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Y===null||$===null||(le=Zo(F,$),le!=null&&Le.push(Tu(F,le,Y))),kt)break;F=F.return}0<Le.length&&(X=new ee(X,Be,null,l,oe),de.push({event:X,listeners:Le}))}}if((o&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",X&&l!==Jr&&(Be=l.relatedTarget||l.fromElement)&&(Qr(Be)||Be[Tn]))break e;if((ee||X)&&(X=oe.window===oe?oe:(X=oe.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Be=l.relatedTarget||l.toElement,ee=W,Be=Be?Qr(Be):null,Be!==null&&(kt=a(Be),Le=Be.tag,Be!==kt||Le!==5&&Le!==27&&Le!==6)&&(Be=null)):(ee=null,Be=W),ee!==Be)){if(Le=Pi,le="onMouseLeave",$="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Le=Hc,le="onPointerLeave",$="onPointerEnter",F="pointer"),kt=ee==null?X:vr(ee),Y=Be==null?X:vr(Be),X=new Le(le,F+"leave",ee,l,oe),X.target=kt,X.relatedTarget=Y,le=null,Qr(oe)===W&&(Le=new Le($,F+"enter",Be,l,oe),Le.target=Y,Le.relatedTarget=kt,le=Le),kt=le,ee&&Be)t:{for(Le=ee,$=Be,F=0,Y=Le;Y;Y=Ll(Y))F++;for(Y=0,le=$;le;le=Ll(le))Y++;for(;0<F-Y;)Le=Ll(Le),F--;for(;0<Y-F;)$=Ll($),Y--;for(;F--;){if(Le===$||$!==null&&Le===$.alternate)break t;Le=Ll(Le),$=Ll($)}Le=null}else Le=null;ee!==null&&iw(de,X,ee,Le,!1),Be!==null&&kt!==null&&iw(de,kt,Be,Le,!0)}}e:{if(X=W?vr(W):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var Ie=b0;else if(mn(X))if(w0)Ie=Ck;else{Ie=wk;var Ze=bk}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?W&&Uc(W.elementType)&&(Ie=b0):Ie=Sk;if(Ie&&(Ie=Ie(r,W))){is(de,Ie,l,oe);break e}Ze&&Ze(r,X,W),r==="focusout"&&W&&X.type==="number"&&W.memoizedProps.value!=null&&qs(X,"number",X.value)}switch(Ze=W?vr(W):window,r){case"focusin":(mn(Ze)||Ze.contentEditable==="true")&&(hl=Ze,qp=W,Kc=null);break;case"focusout":Kc=qp=hl=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,k0(de,l,oe);break;case"selectionchange":if(Rk)break;case"keydown":case"keyup":k0(de,l,oe)}var De;if(Ar)e:{switch(r){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ut?ne(r,l)&&(Ue="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ue="onCompositionStart");Ue&&(b&&l.locale!=="ko"&&(ut||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ut&&(De=jc()):(br=oe,Hs="value"in br?br.value:br.textContent,ut=!0)),Ze=of(W,Ue),0<Ze.length&&(Ue=new zc(Ue,r,null,l,oe),de.push({event:Ue,listeners:Ze}),De?Ue.data=De:(De=Ee(l),De!==null&&(Ue.data=De)))),(De=y?fn(r,l):dt(r,l))&&(Ue=of(W,"onBeforeInput"),0<Ue.length&&(Ze=new zc("onBeforeInput","beforeinput",null,l,oe),de.push({event:Ze,listeners:Ue}),Ze.data=De)),cO(de,r,W,l,oe)}tw(de,o)})}function Tu(r,o,l){return{instance:r,listener:o,currentTarget:l}}function of(r,o){for(var l=o+"Capture",u=[];r!==null;){var m=r,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Zo(r,l),m!=null&&u.unshift(Tu(r,m,g)),m=Zo(r,o),m!=null&&u.push(Tu(r,m,g))),r.tag===3)return u;r=r.return}return[]}function Ll(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function iw(r,o,l,u,m){for(var g=o._reactName,w=[];l!==null&&l!==u;){var C=l,P=C.alternate,W=C.stateNode;if(C=C.tag,P!==null&&P===u)break;C!==5&&C!==26&&C!==27||W===null||(P=W,m?(W=Zo(l,g),W!=null&&w.unshift(Tu(l,W,P))):m||(W=Zo(l,g),W!=null&&w.push(Tu(l,W,P)))),l=l.return}w.length!==0&&r.push({event:o,listeners:w})}var fO=/\r\n?/g,mO=/\u0000|\uFFFD/g;function rw(r){return(typeof r=="string"?r:""+r).replace(fO,`
`).replace(mO,"")}function sw(r,o){return o=rw(o),rw(r)===o}function af(){}function Nt(r,o,l,u,m,g){switch(l){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Oi(r,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Oi(r,""+u);break;case"className":Er(r,"class",u);break;case"tabIndex":Er(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Er(r,l,u);break;case"style":Lc(r,u,g);break;case"data":if(o!=="object"){Er(r,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=il(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(o!=="input"&&Nt(r,o,"name",m.name,m,null),Nt(r,o,"formEncType",m.formEncType,m,null),Nt(r,o,"formMethod",m.formMethod,m,null),Nt(r,o,"formTarget",m.formTarget,m,null)):(Nt(r,o,"encType",m.encType,m,null),Nt(r,o,"method",m.method,m,null),Nt(r,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=il(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=af);break;case"onScroll":u!=null&&ot("scroll",r);break;case"onScrollEnd":u!=null&&ot("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=il(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":ot("beforetoggle",r),ot("toggle",r),zs(r,"popover",u);break;case"xlinkActuate":Nn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zs(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Lp.get(l)||l,zs(r,l,u))}}function f_(r,o,l,u,m,g){switch(l){case"style":Lc(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?Oi(r,u):(typeof u=="number"||typeof u=="bigint")&&Oi(r,""+u);break;case"onScroll":u!=null&&ot("scroll",r);break;case"onScrollEnd":u!=null&&ot("scrollend",r);break;case"onClick":u!=null&&(r.onclick=af);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),o=l.slice(2,m?l.length-7:void 0),g=r[Wt]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(o,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,u,m);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):zs(r,l,u)}}}function Mn(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",r),ot("load",r);var u=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var w=l[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Nt(r,o,g,w,l,null)}}m&&Nt(r,o,"srcSet",l.srcSet,l,null),u&&Nt(r,o,"src",l.src,l,null);return;case"input":ot("invalid",r);var C=g=w=m=null,P=null,W=null;for(u in l)if(l.hasOwnProperty(u)){var oe=l[u];if(oe!=null)switch(u){case"name":m=oe;break;case"type":w=oe;break;case"checked":P=oe;break;case"defaultChecked":W=oe;break;case"value":g=oe;break;case"defaultValue":C=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,o));break;default:Nt(r,o,u,oe,l,null)}}Wo(r,g,C,P,W,w,m,!1),nl(r);return;case"select":ot("invalid",r),u=w=g=null;for(m in l)if(l.hasOwnProperty(m)&&(C=l[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":w=C;break;case"multiple":u=C;default:Nt(r,o,m,C,l,null)}o=g,l=w,r.multiple=!!u,o!=null?Xr(r,!!u,o,!1):l!=null&&Xr(r,!!u,l,!0);return;case"textarea":ot("invalid",r),g=m=u=null;for(w in l)if(l.hasOwnProperty(w)&&(C=l[w],C!=null))switch(w){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Nt(r,o,w,C,l,null)}Xo(r,u,m,g),nl(r);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(u=l[P],u!=null))switch(P){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Nt(r,o,P,u,l,null)}return;case"dialog":ot("beforetoggle",r),ot("toggle",r),ot("cancel",r),ot("close",r);break;case"iframe":case"object":ot("load",r);break;case"video":case"audio":for(u=0;u<Eu.length;u++)ot(Eu[u],r);break;case"image":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"embed":case"source":case"link":ot("error",r),ot("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(u=l[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Nt(r,o,W,u,l,null)}return;default:if(Uc(o)){for(oe in l)l.hasOwnProperty(oe)&&(u=l[oe],u!==void 0&&f_(r,o,oe,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&Nt(r,o,C,u,l,null))}function pO(r,o,l,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,w=null,C=null,P=null,W=null,oe=null;for(ee in l){var de=l[ee];if(l.hasOwnProperty(ee)&&de!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":P=de;default:u.hasOwnProperty(ee)||Nt(r,o,ee,null,u,de)}}for(var X in u){var ee=u[X];if(de=l[X],u.hasOwnProperty(X)&&(ee!=null||de!=null))switch(X){case"type":g=ee;break;case"name":m=ee;break;case"checked":W=ee;break;case"defaultChecked":oe=ee;break;case"value":w=ee;break;case"defaultValue":C=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ee!==de&&Nt(r,o,X,ee,u,de)}}vi(r,w,C,P,W,oe,g,m);return;case"select":ee=w=C=X=null;for(g in l)if(P=l[g],l.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":ee=P;default:u.hasOwnProperty(g)||Nt(r,o,g,null,u,P)}for(m in u)if(g=u[m],P=l[m],u.hasOwnProperty(m)&&(g!=null||P!=null))switch(m){case"value":X=g;break;case"defaultValue":C=g;break;case"multiple":w=g;default:g!==P&&Nt(r,o,m,g,u,P)}o=C,l=w,u=ee,X!=null?Xr(r,!!l,X,!1):!!u!=!!l&&(o!=null?Xr(r,!!l,o,!0):Xr(r,!!l,l?[]:"",!1));return;case"textarea":ee=X=null;for(C in l)if(m=l[C],l.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Nt(r,o,C,null,u,m)}for(w in u)if(m=u[w],g=l[w],u.hasOwnProperty(w)&&(m!=null||g!=null))switch(w){case"value":X=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&Nt(r,o,w,m,u,g)}It(r,X,ee);return;case"option":for(var Be in l)if(X=l[Be],l.hasOwnProperty(Be)&&X!=null&&!u.hasOwnProperty(Be))switch(Be){case"selected":r.selected=!1;break;default:Nt(r,o,Be,null,u,X)}for(P in u)if(X=u[P],ee=l[P],u.hasOwnProperty(P)&&X!==ee&&(X!=null||ee!=null))switch(P){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Nt(r,o,P,X,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)X=l[Le],l.hasOwnProperty(Le)&&X!=null&&!u.hasOwnProperty(Le)&&Nt(r,o,Le,null,u,X);for(W in u)if(X=u[W],ee=l[W],u.hasOwnProperty(W)&&X!==ee&&(X!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,o));break;default:Nt(r,o,W,X,u,ee)}return;default:if(Uc(o)){for(var kt in l)X=l[kt],l.hasOwnProperty(kt)&&X!==void 0&&!u.hasOwnProperty(kt)&&f_(r,o,kt,void 0,u,X);for(oe in u)X=u[oe],ee=l[oe],!u.hasOwnProperty(oe)||X===ee||X===void 0&&ee===void 0||f_(r,o,oe,X,u,ee);return}}for(var $ in l)X=l[$],l.hasOwnProperty($)&&X!=null&&!u.hasOwnProperty($)&&Nt(r,o,$,null,u,X);for(de in u)X=u[de],ee=l[de],!u.hasOwnProperty(de)||X===ee||X==null&&ee==null||Nt(r,o,de,X,u,ee)}var m_=null,p_=null;function lf(r){return r.nodeType===9?r:r.ownerDocument}function ow(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aw(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function g_(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var __=null;function gO(){var r=window.event;return r&&r.type==="popstate"?r===__?!1:(__=r,!0):(__=null,!1)}var lw=typeof setTimeout=="function"?setTimeout:void 0,_O=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,yO=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(r){return cw.resolve(null).then(r).catch(vO)}:lw;function vO(r){setTimeout(function(){throw r})}function oo(r){return r==="head"}function uw(r,o){var l=o,u=0,m=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<u&&8>u){l=u;var w=r.ownerDocument;if(l&1&&bu(w.documentElement),l&2&&bu(w.body),l&4)for(l=w.head,bu(l),w=l.firstChild;w;){var C=w.nextSibling,P=w.nodeName;w[$o]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=C}}if(m===0){r.removeChild(g),Nu(o);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:u=l.charCodeAt(0)-48;else u=0;l=g}while(l);Nu(o)}function y_(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":y_(l),Fs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function EO(r,o,l,u){for(;r.nodeType===1;){var m=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[$o])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=sr(r.nextSibling),r===null)break}return null}function TO(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=sr(r.nextSibling),r===null))return null;return r}function v_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function bO(r,o){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")o();else{var u=function(){o(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function sr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var E_=null;function dw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return r;o--}else l==="/$"&&o++}r=r.previousSibling}return null}function hw(r,o,l){switch(o=lf(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function bu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Fs(r)}var zi=new Map,fw=new Set;function cf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var gs=Te.d;Te.d={f:wO,r:SO,D:CO,C:AO,L:RO,m:IO,X:NO,S:xO,M:kO};function wO(){var r=gs.f(),o=Zh();return r||o}function SO(r){var o=yr(r);o!==null&&o.tag===5&&o.type==="form"?DT(o):gs.r(r)}var Ul=typeof document>"u"?null:document;function mw(r,o,l){var u=Ul;if(u&&typeof o=="string"&&o){var m=ln(o);m='link[rel="'+r+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),fw.has(m)||(fw.add(m),r={rel:r,crossOrigin:l,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),Mn(o,"link",r),tn(o),u.head.appendChild(o)))}}function CO(r){gs.D(r),mw("dns-prefetch",r,null)}function AO(r,o){gs.C(r,o),mw("preconnect",r,o)}function RO(r,o,l){gs.L(r,o,l);var u=Ul;if(u&&r&&o){var m='link[rel="preload"][as="'+ln(o)+'"]';o==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+ln(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+ln(l.imageSizes)+'"]')):m+='[href="'+ln(r)+'"]';var g=m;switch(o){case"style":g=Vl(r);break;case"script":g=jl(r)}zi.has(g)||(r=_({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),zi.set(g,r),u.querySelector(m)!==null||o==="style"&&u.querySelector(wu(g))||o==="script"&&u.querySelector(Su(g))||(o=u.createElement("link"),Mn(o,"link",r),tn(o),u.head.appendChild(o)))}}function IO(r,o){gs.m(r,o);var l=Ul;if(l&&r){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+ln(u)+'"][href="'+ln(r)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=jl(r)}if(!zi.has(g)&&(r=_({rel:"modulepreload",href:r},o),zi.set(g,r),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Su(g)))return}u=l.createElement("link"),Mn(u,"link",r),tn(u),l.head.appendChild(u)}}}function xO(r,o,l){gs.S(r,o,l);var u=Ul;if(u&&r){var m=Jn(u).hoistableStyles,g=Vl(r);o=o||"default";var w=m.get(g);if(!w){var C={loading:0,preload:null};if(w=u.querySelector(wu(g)))C.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":o},l),(l=zi.get(g))&&T_(r,l);var P=w=u.createElement("link");tn(P),Mn(P,"link",r),P._p=new Promise(function(W,oe){P.onload=W,P.onerror=oe}),P.addEventListener("load",function(){C.loading|=1}),P.addEventListener("error",function(){C.loading|=2}),C.loading|=4,uf(w,o,u)}w={type:"stylesheet",instance:w,count:1,state:C},m.set(g,w)}}}function NO(r,o){gs.X(r,o);var l=Ul;if(l&&r){var u=Jn(l).hoistableScripts,m=jl(r),g=u.get(m);g||(g=l.querySelector(Su(m)),g||(r=_({src:r,async:!0},o),(o=zi.get(m))&&b_(r,o),g=l.createElement("script"),tn(g),Mn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function kO(r,o){gs.M(r,o);var l=Ul;if(l&&r){var u=Jn(l).hoistableScripts,m=jl(r),g=u.get(m);g||(g=l.querySelector(Su(m)),g||(r=_({src:r,async:!0,type:"module"},o),(o=zi.get(m))&&b_(r,o),g=l.createElement("script"),tn(g),Mn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function pw(r,o,l,u){var m=(m=Z.current)?cf(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Vl(l.href),l=Jn(m).hoistableStyles,u=l.get(o),u||(u={type:"style",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Vl(l.href);var g=Jn(m).hoistableStyles,w=g.get(r);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,w),(g=m.querySelector(wu(r)))&&!g._p&&(w.instance=g,w.state.loading=5),zi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},zi.set(r,l),g||OO(m,r,l,w.state))),o&&u===null)throw Error(i(528,""));return w}if(o&&u!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=jl(l),l=Jn(m).hoistableScripts,u=l.get(o),u||(u={type:"script",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Vl(r){return'href="'+ln(r)+'"'}function wu(r){return'link[rel="stylesheet"]['+r+"]"}function gw(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function OO(r,o,l,u){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=r.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Mn(o,"link",l),tn(o),r.head.appendChild(o))}function jl(r){return'[src="'+ln(r)+'"]'}function Su(r){return"script[async]"+r}function _w(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var u=r.querySelector('style[data-href~="'+ln(l.href)+'"]');if(u)return o.instance=u,tn(u),u;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),tn(u),Mn(u,"style",m),uf(u,l.precedence,r),o.instance=u;case"stylesheet":m=Vl(l.href);var g=r.querySelector(wu(m));if(g)return o.state.loading|=4,o.instance=g,tn(g),g;u=gw(l),(m=zi.get(m))&&T_(u,m),g=(r.ownerDocument||r).createElement("link"),tn(g);var w=g;return w._p=new Promise(function(C,P){w.onload=C,w.onerror=P}),Mn(g,"link",u),o.state.loading|=4,uf(g,l.precedence,r),o.instance=g;case"script":return g=jl(l.src),(m=r.querySelector(Su(g)))?(o.instance=m,tn(m),m):(u=l,(m=zi.get(g))&&(u=_({},l),b_(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),tn(m),Mn(m,"link",u),r.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,uf(u,l.precedence,r));return o.instance}function uf(r,o,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,w=0;w<u.length;w++){var C=u[w];if(C.dataset.precedence===o)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(r,g.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function T_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function b_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var df=null;function yw(r,o,l){if(df===null){var u=new Map,m=df=new Map;m.set(l,u)}else m=df,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),m=0;m<l.length;m++){var g=l[m];if(!(g[$o]||g[en]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(o)||"";w=r+w;var C=u.get(w);C?C.push(g):u.set(w,[g])}}return u}function vw(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function DO(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Ew(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Cu=null;function MO(){}function PO(r,o,l){if(Cu===null)throw Error(i(475));var u=Cu;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Vl(l.href),g=r.querySelector(wu(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=hf.bind(u),r.then(u,u)),o.state.loading|=4,o.instance=g,tn(g);return}g=r.ownerDocument||r,l=gw(l),(m=zi.get(m))&&T_(l,m),g=g.createElement("link"),tn(g);var w=g;w._p=new Promise(function(C,P){w.onload=C,w.onerror=P}),Mn(g,"link",l),o.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=hf.bind(u),r.addEventListener("load",o),r.addEventListener("error",o))}}function LO(){if(Cu===null)throw Error(i(475));var r=Cu;return r.stylesheets&&r.count===0&&w_(r,r.stylesheets),0<r.count?function(o){var l=setTimeout(function(){if(r.stylesheets&&w_(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(l)}}:null}function hf(){if(this.count--,this.count===0){if(this.stylesheets)w_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ff=null;function w_(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ff=new Map,o.forEach(UO,r),ff=null,hf.call(r))}function UO(r,o){if(!(o.state.loading&4)){var l=ff.get(r);if(l)var u=l.get(null);else{l=new Map,ff.set(r,l);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var w=m[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),u=w)}u&&l.set(null,u)}m=o.instance,w=m.getAttribute("data-precedence"),g=l.get(w)||u,g===u&&l.set(null,m),l.set(w,m),this.count++,u=hf.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),o.state.loading|=4}}var Au={$$typeof:z,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function VO(r,o,l,u,m,g,w,C){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Et(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.hiddenUpdates=Et(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Tw(r,o,l,u,m,g,w,C,P,W,oe,de){return r=new VO(r,o,l,w,C,P,W,de),o=1,g===!0&&(o|=24),g=Ti(3,null,null,o),r.current=g,g.stateNode=r,o=rg(),o.refCount++,r.pooledCache=o,o.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:o},lg(g),r}function bw(r){return r?(r=gl,r):gl}function ww(r,o,l,u,m,g){m=bw(m),u.context===null?u.context=m:u.pendingContext=m,u=Ks(o),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Qs(r,u,o),l!==null&&(Ai(l,r,o),nu(l,r,o))}function Sw(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function S_(r,o){Sw(r,o),(r=r.alternate)&&Sw(r,o)}function Cw(r){if(r.tag===13){var o=pl(r,67108864);o!==null&&Ai(o,r,67108864),S_(r,67108864)}}var mf=!0;function jO(r,o,l,u){var m=se.T;se.T=null;var g=Te.p;try{Te.p=2,C_(r,o,l,u)}finally{Te.p=g,se.T=m}}function BO(r,o,l,u){var m=se.T;se.T=null;var g=Te.p;try{Te.p=8,C_(r,o,l,u)}finally{Te.p=g,se.T=m}}function C_(r,o,l,u){if(mf){var m=A_(u);if(m===null)h_(r,o,u,pf,l),Rw(r,u);else if(zO(m,r,o,l,u))u.stopPropagation();else if(Rw(r,u),o&4&&-1<FO.indexOf(r)){for(;m!==null;){var g=yr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=Rt(g.pendingLanes);if(w!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var P=1<<31-Ae(w);C.entanglements[1]|=P,w&=~P}Or(g),(St&6)===0&&(Xh=li()+500,vu(0))}}break;case 13:C=pl(g,2),C!==null&&Ai(C,g,2),Zh(),S_(g,2)}if(g=A_(u),g===null&&h_(r,o,u,pf,l),g===m)break;m=g}m!==null&&u.stopPropagation()}else h_(r,o,u,null,l)}}function A_(r){return r=Di(r),R_(r)}var pf=null;function R_(r){if(pf=null,r=Qr(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=c(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return pf=r,null}function Aw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kc()){case Ho:return 2;case Bs:return 8;case $r:case J:return 32;case G:return 268435456;default:return 32}default:return 32}}var I_=!1,ao=null,lo=null,co=null,Ru=new Map,Iu=new Map,uo=[],FO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rw(r,o){switch(r){case"focusin":case"focusout":ao=null;break;case"dragenter":case"dragleave":lo=null;break;case"mouseover":case"mouseout":co=null;break;case"pointerover":case"pointerout":Ru.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(o.pointerId)}}function xu(r,o,l,u,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:o,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},o!==null&&(o=yr(o),o!==null&&Cw(o)),r):(r.eventSystemFlags|=u,o=r.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),r)}function zO(r,o,l,u,m){switch(o){case"focusin":return ao=xu(ao,r,o,l,u,m),!0;case"dragenter":return lo=xu(lo,r,o,l,u,m),!0;case"mouseover":return co=xu(co,r,o,l,u,m),!0;case"pointerover":var g=m.pointerId;return Ru.set(g,xu(Ru.get(g)||null,r,o,l,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Iu.set(g,xu(Iu.get(g)||null,r,o,l,u,m)),!0}return!1}function Iw(r){var o=Qr(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){r.blockedOn=o,Go(r.priority,function(){if(l.tag===13){var u=Ci();u=on(u);var m=pl(l,u);m!==null&&Ai(m,l,u),S_(l,u)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function gf(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=A_(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);Jr=u,l.target.dispatchEvent(u),Jr=null}else return o=yr(l),o!==null&&Cw(o),r.blockedOn=l,!1;o.shift()}return!0}function xw(r,o,l){gf(r)&&l.delete(o)}function qO(){I_=!1,ao!==null&&gf(ao)&&(ao=null),lo!==null&&gf(lo)&&(lo=null),co!==null&&gf(co)&&(co=null),Ru.forEach(xw),Iu.forEach(xw)}function _f(r,o){r.blockedOn===o&&(r.blockedOn=null,I_||(I_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qO)))}var yf=null;function Nw(r){yf!==r&&(yf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yf===r&&(yf=null);for(var o=0;o<r.length;o+=3){var l=r[o],u=r[o+1],m=r[o+2];if(typeof u!="function"){if(R_(u||l)===null)continue;break}var g=yr(l);g!==null&&(r.splice(o,3),o-=3,Rg(g,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function Nu(r){function o(P){return _f(P,r)}ao!==null&&_f(ao,r),lo!==null&&_f(lo,r),co!==null&&_f(co,r),Ru.forEach(o),Iu.forEach(o);for(var l=0;l<uo.length;l++){var u=uo[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<uo.length&&(l=uo[0],l.blockedOn===null);)Iw(l),l.blockedOn===null&&uo.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],g=l[u+1],w=m[Wt]||null;if(typeof g=="function")w||Nw(l);else if(w){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,w=g[Wt]||null)C=w.formAction;else if(R_(m)!==null)continue}else C=w.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),Nw(l)}}}function x_(r){this._internalRoot=r}vf.prototype.render=x_.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,u=Ci();ww(l,u,r,o,null,null)},vf.prototype.unmount=x_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;ww(r.current,2,null,r,null,null),Zh(),o[Tn]=null}};function vf(r){this._internalRoot=r}vf.prototype.unstable_scheduleHydration=function(r){if(r){var o=an();r={blockedOn:null,target:r,priority:o};for(var l=0;l<uo.length&&o!==0&&o<uo[l].priority;l++);uo.splice(l,0,r),l===0&&Iw(r)}};var kw=e.version;if(kw!=="19.1.0")throw Error(i(527,kw,"19.1.0"));Te.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(o),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var HO={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ef.isDisabled&&Ef.supportsFiber)try{we=Ef.inject(HO),ve=Ef}catch{}}return Ou.createRoot=function(r,o){if(!s(r))throw Error(i(299));var l=!1,u="",m=KT,g=QT,w=YT,C=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks)),o=Tw(r,1,!1,null,null,l,u,m,g,w,C,null),r[Tn]=o.current,d_(r),new x_(o)},Ou.hydrateRoot=function(r,o,l){if(!s(r))throw Error(i(299));var u=!1,m="",g=KT,w=QT,C=YT,P=null,W=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(P=l.unstable_transitionCallbacks),l.formState!==void 0&&(W=l.formState)),o=Tw(r,1,!0,o,l??null,u,m,g,w,C,P,W),o.context=bw(null),l=o.current,u=Ci(),u=on(u),m=Ks(u),m.callback=null,Qs(l,m,u),l=u,o.current.lanes=l,Me(o,l),Or(o),r[Tn]=o.current,d_(r),new vf(o)},Ou.version="19.1.0",Ou}var Fw;function nD(){if(Fw)return O_.exports;Fw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),O_.exports=tD(),O_.exports}var iD=nD(),V=Sv(),Du={},zw;function rD(){if(zw)return Du;zw=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.parse=c,Du.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function c(T,R){const S=new a,D=T.length;if(D<2)return S;const k=(R==null?void 0:R.decode)||_;let L=0;do{const B=T.indexOf("=",L);if(B===-1)break;const z=T.indexOf(";",L),K=z===-1?D:z;if(B>K){L=T.lastIndexOf(";",B-1)+1;continue}const te=d(T,L,B),pe=f(T,B,te),N=T.slice(te,pe);if(S[N]===void 0){let A=d(T,B+1,K),x=f(T,K,A);const O=k(T.slice(A,x));S[N]=O}L=K+1}while(L<D);return S}function d(T,R,S){do{const D=T.charCodeAt(R);if(D!==32&&D!==9)return R}while(++R<S);return S}function f(T,R,S){for(;R>S;){const D=T.charCodeAt(--R);if(D!==32&&D!==9)return R+1}return S}function p(T,R,S){const D=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const k=D(R);if(!e.test(k))throw new TypeError(`argument val is invalid: ${R}`);let L=T+"="+k;if(!S)return L;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);L+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);L+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);L+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);L+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(L+="; HttpOnly"),S.secure&&(L+="; Secure"),S.partitioned&&(L+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":L+="; Priority=Low";break;case"medium":L+="; Priority=Medium";break;case"high":L+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":L+="; SameSite=Strict";break;case"lax":L+="; SameSite=Lax";break;case"none":L+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return L}function _(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function v(T){return s.call(T)==="[object Date]"}return Du}rD();var qw="popstate";function sD(n={}){function e(i,s){let{pathname:a,search:c,hash:d}=i.location;return gy("",{pathname:a,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:ad(s)}return aD(e,t,null,n)}function $t(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oD(){return Math.random().toString(36).substring(2,10)}function Hw(n,e){return{usr:n.state,key:n.key,idx:e}}function gy(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?mc(e):e,state:t,key:e&&e.key||i||oD()}}function ad({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function mc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function aD(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,c=s.history,d="POP",f=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function v(){d="POP";let k=_(),L=k==null?null:k-p;p=k,f&&f({action:d,location:D.location,delta:L})}function T(k,L){d="PUSH";let B=gy(D.location,k,L);p=_()+1;let z=Hw(B,p),K=D.createHref(B);try{c.pushState(z,"",K)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(K)}a&&f&&f({action:d,location:D.location,delta:1})}function R(k,L){d="REPLACE";let B=gy(D.location,k,L);p=_();let z=Hw(B,p),K=D.createHref(B);c.replaceState(z,"",K),a&&f&&f({action:d,location:D.location,delta:0})}function S(k){return lD(k)}let D={get action(){return d},get location(){return n(s,c)},listen(k){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(qw,v),f=k,()=>{s.removeEventListener(qw,v),f=null}},createHref(k){return e(s,k)},createURL:S,encodeLocation(k){let L=S(k);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:T,replace:R,go(k){return c.go(k)}};return D}function lD(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),$t(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:ad(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function XA(n,e,t="/"){return cD(n,e,t,!1)}function cD(n,e,t,i){let s=typeof e=="string"?mc(e):e,a=Is(s.pathname||"/",t);if(a==null)return null;let c=JA(n);uD(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let p=TD(a);d=vD(c[f],p,i)}return d}function JA(n,e=[],t=[],i=""){let s=(a,c,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&($t(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let p=ws([i,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&($t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),JA(a.children,e,_,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:_D(p,a.index),routesMeta:_})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,c);else for(let f of ZA(a.path))s(a,c,f)}),e}function ZA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let c=ZA(i.join("/")),d=[];return d.push(...c.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function uD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:yD(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var dD=/^:[\w-]+$/,hD=3,fD=2,mD=1,pD=10,gD=-2,Gw=n=>n==="*";function _D(n,e){let t=n.split("/"),i=t.length;return t.some(Gw)&&(i+=gD),e&&(i+=fD),t.filter(s=>!Gw(s)).reduce((s,a)=>s+(dD.test(a)?hD:a===""?mD:pD),i)}function yD(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function vD(n,e,t=!1){let{routesMeta:i}=n,s={},a="/",c=[];for(let d=0;d<i.length;++d){let f=i[d],p=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",v=Jf({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},_),T=f.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=Jf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:ws([a,v.pathname]),pathnameBase:CD(ws([a,v.pathnameBase])),route:T}),v.pathnameBase!=="/"&&(a=ws([a,v.pathnameBase]))}return c}function Jf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=ED(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:v},T)=>{if(_==="*"){let S=d[T]||"";c=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const R=d[T];return v&&!R?p[_]=void 0:p[_]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function ED(n,e=!1,t=!0){zr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function TD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Is(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function bD(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?mc(n):n;return{pathname:t?t.startsWith("/")?t:wD(t,e):e,search:AD(i),hash:RD(s)}}function wD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function U_(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function eR(n){let e=SD(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function tR(n,e,t,i=!1){let s;typeof n=="string"?s=mc(n):(s={...n},$t(!s.pathname||!s.pathname.includes("?"),U_("?","pathname","search",s)),$t(!s.pathname||!s.pathname.includes("#"),U_("#","pathname","hash",s)),$t(!s.search||!s.search.includes("#"),U_("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),v-=1;s.pathname=T.join("/")}d=v>=0?e[v]:"/"}let f=bD(s,d),p=c&&c!=="/"&&c.endsWith("/"),_=(a||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||_)&&(f.pathname+="/"),f}var ws=n=>n.join("/").replace(/\/\/+/g,"/"),CD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),AD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,RD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ID(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var nR=["POST","PUT","PATCH","DELETE"];new Set(nR);var xD=["GET",...nR];new Set(xD);var pc=V.createContext(null);pc.displayName="DataRouter";var Bm=V.createContext(null);Bm.displayName="DataRouterState";var iR=V.createContext({isTransitioning:!1});iR.displayName="ViewTransition";var ND=V.createContext(new Map);ND.displayName="Fetchers";var kD=V.createContext(null);kD.displayName="Await";var Hr=V.createContext(null);Hr.displayName="Navigation";var kd=V.createContext(null);kd.displayName="Location";var Ps=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ps.displayName="Route";var Cv=V.createContext(null);Cv.displayName="RouteError";function OD(n,{relative:e}={}){$t(Od(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(Hr),{hash:s,pathname:a,search:c}=Dd(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:ws([t,a])),i.createHref({pathname:d,search:c,hash:s})}function Od(){return V.useContext(kd)!=null}function Ls(){return $t(Od(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(kd).location}var rR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sR(n){V.useContext(Hr).static||V.useLayoutEffect(n)}function Us(){let{isDataRoute:n}=V.useContext(Ps);return n?GD():DD()}function DD(){$t(Od(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(pc),{basename:e,navigator:t}=V.useContext(Hr),{matches:i}=V.useContext(Ps),{pathname:s}=Ls(),a=JSON.stringify(eR(i)),c=V.useRef(!1);return sR(()=>{c.current=!0}),V.useCallback((f,p={})=>{if(zr(c.current,rR),!c.current)return;if(typeof f=="number"){t.go(f);return}let _=tR(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ws([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,a,s,n])}V.createContext(null);function Dd(n,{relative:e}={}){let{matches:t}=V.useContext(Ps),{pathname:i}=Ls(),s=JSON.stringify(eR(t));return V.useMemo(()=>tR(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function MD(n,e){return oR(n,e)}function oR(n,e,t,i){var L;$t(Od(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=V.useContext(Hr),{matches:a}=V.useContext(Ps),c=a[a.length-1],d=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",_=c&&c.route;{let B=_&&_.path||"";aR(f,!_||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let v=Ls(),T;if(e){let B=typeof e=="string"?mc(e):e;$t(p==="/"||((L=B.pathname)==null?void 0:L.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),T=B}else T=v;let R=T.pathname||"/",S=R;if(p!=="/"){let B=p.replace(/^\//,"").split("/");S="/"+R.replace(/^\//,"").split("/").slice(B.length).join("/")}let D=XA(n,{pathname:S});zr(_||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),zr(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=jD(D&&D.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:ws([p,s.encodeLocation?s.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:ws([p,s.encodeLocation?s.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),a,t,i);return e&&k?V.createElement(kd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},k):k}function PD(){let n=HD(),e=ID(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:a},"ErrorBoundary")," or"," ",V.createElement("code",{style:a},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,c)}var LD=V.createElement(PD,null),UD=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(Ps.Provider,{value:this.props.routeContext},V.createElement(Cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VD({routeContext:n,match:e,children:t}){let i=V.useContext(pc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ps.Provider,{value:n},t)}function jD(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);$t(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:_,errors:v}=t,T=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||T){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,p,_)=>{let v,T=!1,R=null,S=null;t&&(v=a&&p.route.id?a[p.route.id]:void 0,R=p.route.errorElement||LD,c&&(d<0&&_===0?(aR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,S=null):d===_&&(T=!0,S=p.route.hydrateFallbackElement||null)));let D=e.concat(s.slice(0,_+1)),k=()=>{let L;return v?L=R:T?L=S:p.route.Component?L=V.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=f,V.createElement(VD,{match:p,routeContext:{outlet:f,matches:D,isDataRoute:t!=null},children:L})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?V.createElement(UD,{location:t.location,revalidation:t.revalidation,component:R,error:v,children:k(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):k()},null)}function Av(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BD(n){let e=V.useContext(pc);return $t(e,Av(n)),e}function FD(n){let e=V.useContext(Bm);return $t(e,Av(n)),e}function zD(n){let e=V.useContext(Ps);return $t(e,Av(n)),e}function Rv(n){let e=zD(n),t=e.matches[e.matches.length-1];return $t(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function qD(){return Rv("useRouteId")}function HD(){var i;let n=V.useContext(Cv),e=FD("useRouteError"),t=Rv("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function GD(){let{router:n}=BD("useNavigate"),e=Rv("useNavigate"),t=V.useRef(!1);return sR(()=>{t.current=!0}),V.useCallback(async(s,a={})=>{zr(t.current,rR),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var $w={};function aR(n,e,t){!e&&!$w[n]&&($w[n]=!0,zr(!1,t))}V.memo($D);function $D({routes:n,future:e,state:t}){return oR(n,void 0,t,e)}function fi(n){$t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1}){$t(!Od(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:c,navigator:s,static:a,future:{}}),[c,s,a]);typeof t=="string"&&(t=mc(t));let{pathname:f="/",search:p="",hash:_="",state:v=null,key:T="default"}=t,R=V.useMemo(()=>{let S=Is(f,c);return S==null?null:{location:{pathname:S,search:p,hash:_,state:v,key:T},navigationType:i}},[c,f,p,_,v,T,i]);return zr(R!=null,`<Router basename="${c}"> is not able to match the URL "${f}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:V.createElement(Hr.Provider,{value:d},V.createElement(kd.Provider,{children:e,value:R}))}function QD({children:n,location:e}){return MD(_y(n),e)}function _y(n,e=[]){let t=[];return V.Children.forEach(n,(i,s)=>{if(!V.isValidElement(i))return;let a=[...e,s];if(i.type===V.Fragment){t.push.apply(t,_y(i.props.children,a));return}$t(i.type===fi,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$t(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=_y(i.props.children,a)),t.push(c)}),t}var Df="get",Mf="application/x-www-form-urlencoded";function Fm(n){return n!=null&&typeof n.tagName=="string"}function YD(n){return Fm(n)&&n.tagName.toLowerCase()==="button"}function WD(n){return Fm(n)&&n.tagName.toLowerCase()==="form"}function XD(n){return Fm(n)&&n.tagName.toLowerCase()==="input"}function JD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZD(n,e){return n.button===0&&(!e||e==="_self")&&!JD(n)}var Tf=null;function eM(){if(Tf===null)try{new FormData(document.createElement("form"),0),Tf=!1}catch{Tf=!0}return Tf}var tM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V_(n){return n!=null&&!tM.has(n)?(zr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mf}"`),null):n}function nM(n,e){let t,i,s,a,c;if(WD(n)){let d=n.getAttribute("action");i=d?Is(d,e):null,t=n.getAttribute("method")||Df,s=V_(n.getAttribute("enctype"))||Mf,a=new FormData(n)}else if(YD(n)||XD(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(i=f?Is(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Df,s=V_(n.getAttribute("formenctype"))||V_(d.getAttribute("enctype"))||Mf,a=new FormData(d,n),!eM()){let{name:p,type:_,value:v}=n;if(_==="image"){let T=p?`${p}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else p&&a.append(p,v)}}else{if(Fm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Df,i=null,s=Mf,c=n}return a&&s==="text/plain"&&(c=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:c}}function Iv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function iM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function sM(n,e,t){let i=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await iM(a,t);return c.links?c.links():[]}return[]}));return cM(i.flat(1).filter(rM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Kw(n,e,t,i,s,a){let c=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,d=(f,p)=>{var _;return t[p].pathname!==f.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>c(f,p)||d(f,p)):a==="data"?e.filter((f,p)=>{var v;let _=i.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(c(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function oM(n,e,{includeHydrateFallback:t}={}){return aM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function aM(n){return[...new Set(n)]}function lM(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function cM(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let a=JSON.stringify(lM(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uM=new Set([100,101,204,205]);function dM(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Is(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function lR(){let n=V.useContext(pc);return Iv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hM(){let n=V.useContext(Bm);return Iv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var xv=V.createContext(void 0);xv.displayName="FrameworkContext";function cR(){let n=V.useContext(xv);return Iv(n,"You must render this element inside a <HydratedRouter> element"),n}function fM(n,e){let t=V.useContext(xv),[i,s]=V.useState(!1),[a,c]=V.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:_,onTouchStart:v}=e,T=V.useRef(null);V.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=L=>{L.forEach(B=>{c(B.isIntersecting)})},k=new IntersectionObserver(D,{threshold:.5});return T.current&&k.observe(T.current),()=>{k.disconnect()}}},[n]),V.useEffect(()=>{if(i){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[i]);let R=()=>{s(!0)},S=()=>{s(!1),c(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:Mu(d,R),onBlur:Mu(f,S),onMouseEnter:Mu(p,R),onMouseLeave:Mu(_,S),onTouchStart:Mu(v,R)}]:[!1,T,{}]}function Mu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function mM({page:n,...e}){let{router:t}=lR(),i=V.useMemo(()=>XA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(gM,{page:n,matches:i,...e}):null}function pM(n){let{manifest:e,routeModules:t}=cR(),[i,s]=V.useState([]);return V.useEffect(()=>{let a=!1;return sM(n,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[n,e,t]),i}function gM({page:n,matches:e,...t}){let i=Ls(),{manifest:s,routeModules:a}=cR(),{basename:c}=lR(),{loaderData:d,matches:f}=hM(),p=V.useMemo(()=>Kw(n,e,f,s,i,"data"),[n,e,f,s,i]),_=V.useMemo(()=>Kw(n,e,f,s,i,"assets"),[n,e,f,s,i]),v=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,D=!1;if(e.forEach(L=>{var z;let B=s.routes[L.route.id];!B||!B.hasLoader||(!p.some(K=>K.route.id===L.route.id)&&L.route.id in d&&((z=a[L.route.id])!=null&&z.shouldRevalidate)||B.hasClientLoader?D=!0:S.add(L.route.id))}),S.size===0)return[];let k=dM(n,c);return D&&S.size>0&&k.searchParams.set("_routes",e.filter(L=>S.has(L.route.id)).map(L=>L.route.id).join(",")),[k.pathname+k.search]},[c,d,i,s,p,e,n,a]),T=V.useMemo(()=>oM(_,s),[_,s]),R=pM(_);return V.createElement(V.Fragment,null,v.map(S=>V.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),T.map(S=>V.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),R.map(({key:S,link:D})=>V.createElement("link",{key:S,...D})))}function _M(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var uR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uR&&(window.__reactRouterVersion="7.6.1")}catch{}function yM({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=sD({window:t,v5Compat:!0}));let s=i.current,[a,c]=V.useState({action:s.action,location:s.location}),d=V.useCallback(f=>{V.startTransition(()=>c(f))},[c]);return V.useLayoutEffect(()=>s.listen(d),[s,d]),V.createElement(KD,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var dR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mt=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:c,state:d,target:f,to:p,preventScrollReset:_,viewTransition:v,...T},R){let{basename:S}=V.useContext(Hr),D=typeof p=="string"&&dR.test(p),k,L=!1;if(typeof p=="string"&&D&&(k=p,uR))try{let x=new URL(window.location.href),O=p.startsWith("//")?new URL(x.protocol+p):new URL(p),U=Is(O.pathname,S);O.origin===x.origin&&U!=null?p=U+O.search+O.hash:L=!0}catch{zr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=OD(p,{relative:s}),[z,K,te]=fM(i,T),pe=bM(p,{replace:c,state:d,target:f,preventScrollReset:_,relative:s,viewTransition:v});function N(x){e&&e(x),x.defaultPrevented||pe(x)}let A=V.createElement("a",{...T,...te,href:k||B,onClick:L||a?e:N,ref:_M(R,K),target:f,"data-discover":!D&&t==="render"?"true":void 0});return z&&!D?V.createElement(V.Fragment,null,A,V.createElement(mM,{page:B})):A});Mt.displayName="Link";var vM=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:c,viewTransition:d,children:f,...p},_){let v=Dd(c,{relative:p.relative}),T=Ls(),R=V.useContext(Bm),{navigator:S,basename:D}=V.useContext(Hr),k=R!=null&&RM(v)&&d===!0,L=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,B=T.pathname,z=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(B=B.toLowerCase(),z=z?z.toLowerCase():null,L=L.toLowerCase()),z&&D&&(z=Is(z,D)||z);const K=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let te=B===L||!s&&B.startsWith(L)&&B.charAt(K)==="/",pe=z!=null&&(z===L||!s&&z.startsWith(L)&&z.charAt(L.length)==="/"),N={isActive:te,isPending:pe,isTransitioning:k},A=te?e:void 0,x;typeof i=="function"?x=i(N):x=[i,te?"active":null,pe?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(N):a;return V.createElement(Mt,{...p,"aria-current":A,className:x,ref:_,style:O,to:c,viewTransition:d},typeof f=="function"?f(N):f)});vM.displayName="NavLink";var EM=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:c=Df,action:d,onSubmit:f,relative:p,preventScrollReset:_,viewTransition:v,...T},R)=>{let S=CM(),D=AM(d,{relative:p}),k=c.toLowerCase()==="get"?"get":"post",L=typeof d=="string"&&dR.test(d),B=z=>{if(f&&f(z),z.defaultPrevented)return;z.preventDefault();let K=z.nativeEvent.submitter,te=(K==null?void 0:K.getAttribute("formmethod"))||c;S(K||z.currentTarget,{fetcherKey:e,method:te,navigate:t,replace:s,state:a,relative:p,preventScrollReset:_,viewTransition:v})};return V.createElement("form",{ref:R,method:k,action:D,onSubmit:i?f:B,...T,"data-discover":!L&&n==="render"?"true":void 0})});EM.displayName="Form";function TM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hR(n){let e=V.useContext(pc);return $t(e,TM(n)),e}function bM(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:c}={}){let d=Us(),f=Ls(),p=Dd(n,{relative:a});return V.useCallback(_=>{if(ZD(_,e)){_.preventDefault();let v=t!==void 0?t:ad(f)===ad(p);d(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:c})}},[f,d,p,t,i,e,n,s,a,c])}var wM=0,SM=()=>`__${String(++wM)}__`;function CM(){let{router:n}=hR("useSubmit"),{basename:e}=V.useContext(Hr),t=qD();return V.useCallback(async(i,s={})=>{let{action:a,method:c,encType:d,formData:f,body:p}=nM(i,e);if(s.navigate===!1){let _=s.fetcherKey||SM();await n.fetch(_,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function AM(n,{relative:e}={}){let{basename:t}=V.useContext(Hr),i=V.useContext(Ps);$t(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Dd(n||".",{relative:e})},c=Ls();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(_=>_==="")){d.delete("index"),f.filter(v=>v).forEach(v=>d.append("index",v));let _=d.toString();a.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ws([t,a.pathname])),ad(a)}function RM(n,e={}){let t=V.useContext(iR);$t(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=hR("useViewTransitionState"),s=Dd(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Is(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Is(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Jf(s.pathname,c)!=null||Jf(s.pathname,a)!=null}[...uM];const IM=()=>{};var Qw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye=function(n,e){if(!n)throw gc(e)},gc=function(n){return new Error("Firebase Database ("+fR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},xM=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Nv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,d=c?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,_=a>>2,v=(a&3)<<4|d>>4;let T=(d&15)<<2|p>>6,R=p&63;f||(R=64,c||(T=64)),i.push(t[_],t[v],t[T],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||p==null||v==null)throw new NM;const T=a<<2|d>>4;if(i.push(T),p!==64){const R=d<<4&240|p>>2;if(i.push(R),v!==64){const S=p<<6&192|v;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class NM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pR=function(n){const e=mR(n);return Nv.encodeByteArray(e,!0)},Zf=function(n){return pR(n).replace(/\./g,"")},em=function(n){try{return Nv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(n){return gR(void 0,n)}function gR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!OM(t)||(n[t]=gR(n[t],e[t]));return n}function OM(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=()=>DM().__FIREBASE_DEFAULTS__,PM=()=>{if(typeof process>"u"||typeof Qw>"u")return;const n=Qw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&em(n[1]);return e&&JSON.parse(e)},zm=()=>{try{return IM()||MM()||PM()||LM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_R=n=>{var e,t;return(t=(e=zm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},kv=n=>{const e=_R(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},yR=()=>{var n;return(n=zm())===null||n===void 0?void 0:n.config},vR=n=>{var e;return(e=zm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n){return n.endsWith(".cloudworkstations.dev")}async function qm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Zf(JSON.stringify(t)),Zf(JSON.stringify(c)),""].join(".")}const $u={};function UM(){const n={prod:[],emulator:[]};for(const e of Object.keys($u))$u[e]?n.emulator.push(e):n.prod.push(e);return n}function VM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Yw=!1;function Hm(n,e){if(typeof window>"u"||typeof document>"u"||!Vs(window.location.host)||$u[n]===e||$u[n]||Yw)return;$u[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=UM().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Yw=!0,c()},T}function _(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=VM(i),R=t("text"),S=document.getElementById(R)||document.createElement("span"),D=t("learnmore"),k=document.getElementById(D)||document.createElement("a"),L=t("preprendIcon"),B=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const z=T.element;d(z),_(k,D);const K=p();f(B,L),z.append(B,S,k,K),document.body.appendChild(z)}a?(S.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function jM(){var n;const e=(n=zm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ER(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zM(){const n=Wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qM(){return fR.NODE_ADMIN===!0}function HM(){return!jM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TR(){try{return typeof indexedDB=="object"}catch{return!1}}function bR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function GM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M="FirebaseError";class mr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=$M,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?KM(a,i):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new mr(s,d,i)}}function KM(n,e){return n.replace(QM,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const QM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){return JSON.parse(n)}function yn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=function(n){let e={},t={},i={},s="";try{const a=n.split(".");e=ld(em(a[0])||""),t=ld(em(a[1])||""),s=a[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}},YM=function(n){const e=wR(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},WM=function(n){const e=wR(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ec(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function yy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tm(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function ko(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],c=e[s];if(Ww(a)&&Ww(c)){if(!ko(a,c))return!1}else if(a!==c)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Ww(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const T=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(T<<1|T>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],c=this.chain_[2],d=this.chain_[3],f=this.chain_[4],p,_;for(let v=0;v<80;v++){v<40?v<20?(p=d^a&(c^d),_=1518500249):(p=a^c^d,_=1859775393):v<60?(p=a&c|d&(a|c),_=2400959708):(p=a^c^d,_=3395469782);const T=(s<<5|s>>>27)+p+f+_+i[v]&4294967295;f=d,d=c,c=(a<<30|a>>>2)&4294967295,a=s,s=T}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let s=0;const a=this.buf_;let c=this.inbuf_;for(;s<t;){if(c===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(a[c]=e.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(a),c=0;break}}else for(;s<t;)if(a[c]=e[s],++c,++s,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)e[i]=this.chain_[s]>>a&255,++i;return e}}function JM(n,e){const t=new ZM(n,e);return t.subscribe.bind(t)}class ZM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");eP(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=j_),s.error===void 0&&(s.error=j_),s.complete===void 0&&(s.complete=j_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function j_(){}function Gm(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const a=s-55296;i++,ye(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;s=65536+(a<<10)+c}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},$m=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n){return n&&n._delegate?n._delegate:n}class Ni{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Md;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rP(e))try{this.getOrInitializeService({instanceIdentifier:Ta})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ta){return this.instances.has(e)}getOptions(e=Ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&c.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:iP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ta){return this.component?this.component.multipleInstances?e:Ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iP(n){return n===Ta?void 0:n}function rP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(at||(at={}));const oP={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},aP=at.INFO,lP={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},cP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=lP[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=aP,this._logHandler=cP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const uP=(n,e)=>e.some(t=>n instanceof t);let Xw,Jw;function dP(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hP(){return Jw||(Jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SR=new WeakMap,vy=new WeakMap,CR=new WeakMap,B_=new WeakMap,Mv=new WeakMap;function fP(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Ss(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&SR.set(t,n)}).catch(()=>{}),Mv.set(e,n),e}function mP(n){if(vy.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});vy.set(n,e)}let Ey={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pP(n){Ey=n(Ey)}function gP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(F_(this),e,...t);return CR.set(i,e.sort?e.sort():[e]),Ss(i)}:hP().includes(n)?function(...e){return n.apply(F_(this),e),Ss(SR.get(this))}:function(...e){return Ss(n.apply(F_(this),e))}}function _P(n){return typeof n=="function"?gP(n):(n instanceof IDBTransaction&&mP(n),uP(n,dP())?new Proxy(n,Ey):n)}function Ss(n){if(n instanceof IDBRequest)return fP(n);if(B_.has(n))return B_.get(n);const e=_P(n);return e!==n&&(B_.set(n,e),Mv.set(e,n)),e}const F_=n=>Mv.get(n);function Qm(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),d=Ss(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Ss(c.result),f.oldVersion,f.newVersion,Ss(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}function z_(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),Ss(t).then(()=>{})}const yP=["get","getKey","getAll","getAllKeys","count"],vP=["put","add","delete","clear"],q_=new Map;function Zw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(q_.get(e))return q_.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=vP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||yP.includes(t)))return;const a=async function(c,...d){const f=this.transaction(c,s?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),s&&f.done]))[0]};return q_.set(e,a),a}pP(n=>({...n,get:(e,t,i)=>Zw(e,t)||n.get(e,t,i),has:(e,t)=>!!Zw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function TP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ty="@firebase/app",eS="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Km("@firebase/app"),bP="@firebase/app-compat",wP="@firebase/analytics-compat",SP="@firebase/analytics",CP="@firebase/app-check-compat",AP="@firebase/app-check",RP="@firebase/auth",IP="@firebase/auth-compat",xP="@firebase/database",NP="@firebase/data-connect",kP="@firebase/database-compat",OP="@firebase/functions",DP="@firebase/functions-compat",MP="@firebase/installations",PP="@firebase/installations-compat",LP="@firebase/messaging",UP="@firebase/messaging-compat",VP="@firebase/performance",jP="@firebase/performance-compat",BP="@firebase/remote-config",FP="@firebase/remote-config-compat",zP="@firebase/storage",qP="@firebase/storage-compat",HP="@firebase/firestore",GP="@firebase/ai",$P="@firebase/firestore-compat",KP="firebase",QP="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="[DEFAULT]",YP={[Ty]:"fire-core",[bP]:"fire-core-compat",[SP]:"fire-analytics",[wP]:"fire-analytics-compat",[AP]:"fire-app-check",[CP]:"fire-app-check-compat",[RP]:"fire-auth",[IP]:"fire-auth-compat",[xP]:"fire-rtdb",[NP]:"fire-data-connect",[kP]:"fire-rtdb-compat",[OP]:"fire-fn",[DP]:"fire-fn-compat",[MP]:"fire-iid",[PP]:"fire-iid-compat",[LP]:"fire-fcm",[UP]:"fire-fcm-compat",[VP]:"fire-perf",[jP]:"fire-perf-compat",[BP]:"fire-rc",[FP]:"fire-rc-compat",[zP]:"fire-gcs",[qP]:"fire-gcs-compat",[HP]:"fire-fst",[$P]:"fire-fst-compat",[GP]:"fire-vertex","fire-js":"fire-js",[KP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new Map,WP=new Map,wy=new Map;function tS(n,e){try{n.container.addComponent(e)}catch(t){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wi(n){const e=n.name;if(wy.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;wy.set(e,n);for(const t of nm.values())tS(t,n);for(const t of WP.values())tS(t,n);return!0}function zo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wo=new za("app","Firebase",XP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=QP;function AR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:by,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw wo.create("bad-app-name",{appName:String(s)});if(t||(t=yR()),!t)throw wo.create("no-options");const a=nm.get(s);if(a){if(ko(t,a.options)&&ko(i,a.config))return a;throw wo.create("duplicate-app",{appName:s})}const c=new sP(s);for(const f of wy.values())c.addComponent(f);const d=new JP(t,i,c);return nm.set(s,d),d}function Pd(n=by){const e=nm.get(n);if(!e&&n===by&&yR())return AR();if(!e)throw wo.create("no-app",{appName:n});return e}function Yn(n,e,t){var i;let s=(i=YP[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(d.join(" "));return}Wi(new Ni(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="firebase-heartbeat-database",e2=1,cd="firebase-heartbeat-store";let H_=null;function RR(){return H_||(H_=Qm(ZP,e2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cd)}catch(t){console.warn(t)}}}}).catch(n=>{throw wo.create("idb-open",{originalErrorMessage:n.message})})),H_}async function t2(n){try{const t=(await RR()).transaction(cd),i=await t.objectStore(cd).get(IR(n));return await t.done,i}catch(e){if(e instanceof mr)xs.warn(e.message);else{const t=wo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(t.message)}}}async function nS(n,e){try{const i=(await RR()).transaction(cd,"readwrite");await i.objectStore(cd).put(e,IR(n)),await i.done}catch(t){if(t instanceof mr)xs.warn(t.message);else{const i=wo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xs.warn(i.message)}}}function IR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1024,i2=30;class r2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new o2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=iS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>i2){const c=a2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=iS(),{heartbeatsToSend:i,unsentEntries:s}=s2(this._heartbeatsCache.heartbeats),a=Zf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return xs.warn(t),""}}}function iS(){return new Date().toISOString().substring(0,10)}function s2(n,e=n2){const t=[];let i=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),rS(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class o2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TR()?bR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await t2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return nS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return nS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rS(n){return Zf(JSON.stringify({version:2,heartbeats:n})).length}function a2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(n){Wi(new Ni("platform-logger",e=>new EP(e),"PRIVATE")),Wi(new Ni("heartbeat",e=>new r2(e),"PRIVATE")),Yn(Ty,eS,n),Yn(Ty,eS,"esm2017"),Yn("fire-js","")}l2("");function Pv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function xR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c2=xR,NR=new za("auth","Firebase",xR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=new Km("@firebase/auth");function u2(n,...e){im.logLevel<=at.WARN&&im.warn(`Auth (${qo}): ${n}`,...e)}function Pf(n,...e){im.logLevel<=at.ERROR&&im.error(`Auth (${qo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n,...e){throw Lv(n,...e)}function Vr(n,...e){return Lv(n,...e)}function kR(n,e,t){const i=Object.assign(Object.assign({},c2()),{[e]:t});return new za("auth","Firebase",i).create(e,{appName:n.name})}function Ra(n){return kR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return NR.create(n,...e)}function Fe(n,e,...t){if(!n)throw Lv(e,...t)}function vs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function ks(n,e){n||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function d2(){return sS()==="http:"||sS()==="https:"}function sS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d2()||FM()||"connection"in navigator)?navigator.onLine:!0}function f2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.shortDelay=e,this.longDelay=t,ks(t>e,"Short delay should be less than long delay!"),this.isMobile=Dv()||ER()}get(){return h2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(n,e){ks(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g2=new Ld(3e4,6e4);function Vv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function yc(n,e,t,i,s={}){return DR(n,s,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const d=_c(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},a);return BM()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Vs(n.emulatorConfig.host)&&(p.credentials="include"),OR.fetch()(await MR(n,n.config.apiHost,t,d),p)})}async function DR(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},m2),e);try{const s=new y2(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw bf(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw bf(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw bf(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw bf(n,"user-disabled",c);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw kR(n,_,p);Ns(n,_)}}catch(s){if(s instanceof mr)throw s;Ns(n,"network-request-failed",{message:String(s)})}}async function _2(n,e,t,i,s={}){const a=await yc(n,e,t,i,s);return"mfaPendingCredential"in a&&Ns(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function MR(n,e,t,i){const s=`${e}${t}?${i}`,a=n,c=a.config.emulator?Uv(n.config,s):`${n.config.apiScheme}://${s}`;return p2.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class y2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Vr(this.auth,"network-request-failed")),g2.get())})}}function bf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Vr(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(n,e){return yc(n,"POST","/v1/accounts:delete",e)}async function rm(n,e){return yc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E2(n,e=!1){const t=Ot(n),i=await t.getIdToken(e),s=jv(i);Fe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Ku(G_(s.auth_time)),issuedAtTime:Ku(G_(s.iat)),expirationTime:Ku(G_(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function G_(n){return Number(n)*1e3}function jv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=em(t);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function oS(n){const e=jv(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof mr&&T2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function T2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sm(n){var e;const t=n.auth,i=await n.getIdToken(),s=await ud(n,rm(t,{idToken:i}));Fe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?PR(a.providerUserInfo):[],d=S2(n.providerData,c),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Cy(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function w2(n){const e=Ot(n);await sm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S2(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function PR(n){return n.map(e=>{var{providerId:t}=e,i=Pv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(n,e){const t=await DR(n,{},async()=>{const i=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await MR(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",OR.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function A2(n,e){return yc(n,"POST","/v2/accounts:revokeToken",Vv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=oS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await C2(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,c=new Yl;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(Fe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Fe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class cr{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,a=Pv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new b2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Cy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ud(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return E2(this,e)}reload(){return w2(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await sm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gi(this.auth.app))return Promise.reject(Ra(this.auth));const e=await this.getIdToken();return await ud(this,v2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,a,c,d,f,p,_;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,D=(d=t.tenantId)!==null&&d!==void 0?d:void 0,k=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,L=(p=t.createdAt)!==null&&p!==void 0?p:void 0,B=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:z,emailVerified:K,isAnonymous:te,providerData:pe,stsTokenManager:N}=t;Fe(z&&N,e,"internal-error");const A=Yl.fromJSON(this.name,N);Fe(typeof z=="string",e,"internal-error"),fo(v,e.name),fo(T,e.name),Fe(typeof K=="boolean",e,"internal-error"),Fe(typeof te=="boolean",e,"internal-error"),fo(R,e.name),fo(S,e.name),fo(D,e.name),fo(k,e.name),fo(L,e.name),fo(B,e.name);const x=new cr({uid:z,auth:e,email:T,emailVerified:K,displayName:v,isAnonymous:te,photoURL:S,phoneNumber:R,tenantId:D,stsTokenManager:A,createdAt:L,lastLoginAt:B});return pe&&Array.isArray(pe)&&(x.providerData=pe.map(O=>Object.assign({},O))),k&&(x._redirectEventId=k),x}static async _fromIdTokenResponse(e,t,i=!1){const s=new Yl;s.updateFromServerResponse(t);const a=new cr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await sm(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Fe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?PR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new Yl;d.updateFromIdToken(i);const f=new cr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new Map;function Es(n){ks(n instanceof Function,"Expected a class definition");let e=aS.get(n);return e?(ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,aS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LR.type="NONE";const lS=LR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n,e,t){return`firebase:${n}:${e}:${t}`}class Wl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Lf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Lf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rm(this.auth,{idToken:e}).catch(()=>{});return t?cr._fromGetAccountInfoResponse(this.auth,t,e):null}return cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wl(Es(lS),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||Es(lS);const c=Lf(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const _=await p._get(c);if(_){let v;if(typeof _=="string"){const T=await rm(e,{idToken:_}).catch(()=>{});if(!T)break;v=await cr._fromGetAccountInfoResponse(e,T,_)}else v=cr._fromJSON(e,_);p!==a&&(d=v),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Wl(a,e,i):(a=f[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new Wl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zR(e))return"Blackberry";if(qR(e))return"Webos";if(VR(e))return"Safari";if((e.includes("chrome/")||jR(e))&&!e.includes("edge/"))return"Chrome";if(FR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function UR(n=Wn()){return/firefox\//i.test(n)}function VR(n=Wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jR(n=Wn()){return/crios\//i.test(n)}function BR(n=Wn()){return/iemobile/i.test(n)}function FR(n=Wn()){return/android/i.test(n)}function zR(n=Wn()){return/blackberry/i.test(n)}function qR(n=Wn()){return/webos/i.test(n)}function Bv(n=Wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function R2(n=Wn()){var e;return Bv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function I2(){return zM()&&document.documentMode===10}function HR(n=Wn()){return Bv(n)||FR(n)||qR(n)||zR(n)||/windows phone/i.test(n)||BR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n,e=[]){let t;switch(n){case"Browser":t=cS(Wn());break;case"Worker":t=`${cS(Wn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,d)=>{try{const f=e(a);c(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(n,e={}){return yc(n,"GET","/v2/passwordPolicy",Vv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=6;class O2{constructor(e){var t,i,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:k2,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,a,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uS(this),this.idTokenSubscription=new uS(this),this.beforeStateQueue=new x2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rm(this,{idToken:e}),i=await cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=f2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gi(this.app))return Promise.reject(Ra(this));const t=e?Ot(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gi(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gi(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N2(this),t=new O2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await A2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Es(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,s);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&u2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Fv(n){return Ot(n)}class uS{constructor(e){this.auth=e,this.observer=null,this.addObserver=JM(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M2(n){zv=n}function P2(n){return zv.loadJS(n)}function L2(){return zv.gapiScript}function U2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(n,e){const t=zo(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ko(a,e??{}))return s;Ns(s,"already-initialized")}return t.initialize({options:e})}function j2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Es);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function B2(n,e,t){const i=Fv(n);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=$R(e),{host:c,port:d}=F2(e),f=d===null?"":`:${d}`,p={url:`${a}//${c}${f}/`},_=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(ko(p,i.config.emulator)&&ko(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Vs(c)?(qm(`${a}//${c}${f}`),Hm("Auth",!0)):z2()}function $R(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function F2(n){const e=$R(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:dS(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:dS(c)}}}function dS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function z2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,t){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,e){return _2(n,"POST","/v1/accounts:signInWithIdp",Vv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="http://localhost";class ka extends KR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ns("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,a=Pv(t,["providerId","signInMethod"]);if(!i||!s)return null;const c=new ka(i,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Xl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Xl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xl(e,t)}buildRequest(){const e={requestUri:q2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends QR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Ud{constructor(){super("facebook.com")}static credential(e){return ka._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.FACEBOOK_SIGN_IN_METHOD="facebook.com";go.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Ud{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ka._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return _o.credential(t,i)}catch{return null}}}_o.GOOGLE_SIGN_IN_METHOD="google.com";_o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Ud{constructor(){super("github.com")}static credential(e){return ka._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yo.credential(e.oauthAccessToken)}catch{return null}}}yo.GITHUB_SIGN_IN_METHOD="github.com";yo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Ud{constructor(){super("twitter.com")}static credential(e,t){return ka._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vo.credential(t,i)}catch{return null}}}vo.TWITTER_SIGN_IN_METHOD="twitter.com";vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await cr._fromIdTokenResponse(e,i,s),c=hS(i);return new tc({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=hS(i);return new tc({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function hS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om extends mr{constructor(e,t,i,s){var a;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,om.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new om(e,t,i,s)}}function YR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?om._fromErrorAndOperation(n,a,e,i):a})}async function H2(n,e,t=!1){const i=await ud(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return tc._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(n,e,t=!1){const{auth:i}=n;if(Gi(i.app))return Promise.reject(Ra(i));const s="reauthenticate";try{const a=await ud(n,YR(i,s,e,n),t);Fe(a.idToken,i,"internal-error");const c=jv(a.idToken);Fe(c,i,"internal-error");const{sub:d}=c;return Fe(n.uid===d,i,"user-mismatch"),tc._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ns(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(n,e,t=!1){if(Gi(n.app))return Promise.reject(Ra(n));const i="signIn",s=await YR(n,i,e),a=await tc._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}function K2(n,e,t,i){return Ot(n).onIdTokenChanged(e,t,i)}function Q2(n,e,t){return Ot(n).beforeAuthStateChanged(e,t)}const am="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(am,"1"),this.storage.removeItem(am),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=1e3,W2=10;class XR extends WR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);I2()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,W2):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XR.type="LOCAL";const X2=XR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR extends WR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}JR.type="SESSION";const ZR=JR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Ym(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(c).map(async p=>p(t.origin,a)),f=await J2(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ym.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((d,f)=>{const p=qv("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(v){const T=v;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function eL(n){jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function tL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function iL(){return eI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="firebaseLocalStorageDb",rL=1,lm="firebaseLocalStorage",nI="fbase_key";class Vd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wm(n,e){return n.transaction([lm],e?"readwrite":"readonly").objectStore(lm)}function sL(){const n=indexedDB.deleteDatabase(tI);return new Vd(n).toPromise()}function Ay(){const n=indexedDB.open(tI,rL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(lm,{keyPath:nI})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(lm)?e(i):(i.close(),await sL(),e(await Ay()))})})}async function fS(n,e,t){const i=Wm(n,!0).put({[nI]:e,value:t});return new Vd(i).toPromise()}async function oL(n,e){const t=Wm(n,!1).get(e),i=await new Vd(t).toPromise();return i===void 0?null:i.value}function mS(n,e){const t=Wm(n,!0).delete(e);return new Vd(t).toPromise()}const aL=800,lL=3;class iI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ay(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>lL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ym._getInstance(iL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await tL(),!this.activeServiceWorker)return;this.sender=new Z2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ay();return await fS(e,am,"1"),await mS(e,am),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>fS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>oL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Wm(s,!1).getAll();return new Vd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iI.type="LOCAL";const cL=iI;new Ld(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(n,e){return e?Es(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends KR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dL(n){return $2(n.auth,new Hv(n),n.bypassAuthState)}function hL(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),G2(t,new Hv(n),n.bypassAuthState)}async function fL(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),H2(t,new Hv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dL;case"linkViaPopup":case"linkViaRedirect":return fL;case"reauthViaPopup":case"reauthViaRedirect":return hL;default:Ns(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new Ld(2e3,1e4);class Kl extends rI{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Kl.currentPopupAction&&Kl.currentPopupAction.cancel(),Kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=qv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mL.get())};e()}}Kl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="pendingRedirect",Uf=new Map;class gL extends rI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Uf.get(this.auth._key());if(!e){try{const i=await _L(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Uf.set(this.auth._key(),e)}return this.bypassAuthState||Uf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _L(n,e){const t=EL(e),i=vL(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function yL(n,e){Uf.set(n._key(),e)}function vL(n){return Es(n._redirectPersistence)}function EL(n){return Lf(pL,n.config.apiKey,n.name)}async function TL(n,e,t=!1){if(Gi(n.app))return Promise.reject(Ra(n));const i=Fv(n),s=uL(i,e),c=await new gL(i,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=10*60*1e3;class wL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!sI(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Vr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bL&&this.cachedEventUids.clear(),this.cachedEventUids.has(pS(e))}saveEventToCache(e){this.cachedEventUids.add(pS(e)),this.lastProcessedEventTime=Date.now()}}function pS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CL(n,e={}){return yc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RL=/^https?/;async function IL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await CL(n);for(const t of e)try{if(xL(t))return}catch{}Ns(n,"unauthorized-domain")}function xL(n){const e=Sy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!RL.test(t))return!1;if(AL.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new Ld(3e4,6e4);function gS(){const n=jr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function kL(n){return new Promise((e,t)=>{var i,s,a;function c(){gS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gS(),t(Vr(n,"network-request-failed"))},timeout:NL.get()})}if(!((s=(i=jr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=jr().gapi)===null||a===void 0)&&a.load)c();else{const d=U2("iframefcb");return jr()[d]=()=>{gapi.load?c():t(Vr(n,"network-request-failed"))},P2(`${L2()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Vf=null,e})}let Vf=null;function OL(n){return Vf=Vf||kL(n),Vf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=new Ld(5e3,15e3),ML="__/auth/iframe",PL="emulator/auth/iframe",LL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VL(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Uv(e,PL):`https://${n.config.authDomain}/${ML}`,i={apiKey:e.apiKey,appName:n.name,v:qo},s=UL.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${_c(i).slice(1)}`}async function jL(n){const e=await OL(n),t=jr().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:VL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LL,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const c=Vr(n,"network-request-failed"),d=jr().setTimeout(()=>{a(c)},DL.get());function f(){jr().clearTimeout(d),s(i)}i.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FL=500,zL=600,qL="_blank",HL="http://localhost";class _S{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GL(n,e,t,i=FL,s=zL){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},BL),{width:i.toString(),height:s.toString(),top:a,left:c}),p=Wn().toLowerCase();t&&(d=jR(p)?qL:t),UR(p)&&(e=e||HL,f.scrollbars="yes");const _=Object.entries(f).reduce((T,[R,S])=>`${T}${R}=${S},`,"");if(R2(p)&&d!=="_self")return $L(e||"",d),new _S(null);const v=window.open(e||"",d,_);Fe(v,n,"popup-blocked");try{v.focus()}catch{}return new _S(v)}function $L(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="__/auth/handler",QL="emulator/auth/handler",YL=encodeURIComponent("fac");async function yS(n,e,t,i,s,a){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:qo,eventId:s};if(e instanceof QR){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",yy(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(e instanceof Ud){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),p=f?`#${YL}=${encodeURIComponent(f)}`:"";return`${WL(n)}?${_c(d).slice(1)}${p}`}function WL({config:n}){return n.emulator?Uv(n,QL):`https://${n.authDomain}/${KL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="webStorageSupport";class XL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZR,this._completeRedirectFn=TL,this._overrideRedirectResult=yL}async _openPopup(e,t,i,s){var a;ks((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await yS(e,t,i,Sy(),s);return GL(e,c,qv())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await yS(e,t,i,Sy(),s);return eL(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ks(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await jL(e),i=new wL(e);return t.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($_,{type:$_},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[$_];c!==void 0&&t(!!c),Ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HR()||VR()||Bv()}}const JL=XL;var vS="@firebase/auth",ES="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tU(n){Wi(new Ni("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Fe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GR(n)},p=new D2(i,s,a,f);return j2(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Wi(new Ni("auth-internal",e=>{const t=Fv(e.getProvider("auth").getImmediate());return(i=>new ZL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(vS,ES,eU(n)),Yn(vS,ES,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=5*60,iU=vR("authIdTokenMaxAge")||nU;let TS=null;const rU=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>iU)return;const s=t==null?void 0:t.token;TS!==s&&(TS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ry(n=Pd()){const e=zo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=V2(n,{popupRedirectResolver:JL,persistence:[cL,X2,ZR]}),i=vR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=rU(a.toString());Q2(t,c,()=>c(t.currentUser)),K2(t,d=>c(d))}}const s=_R("auth");return s&&B2(t,`http://${s}`),t}function sU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}M2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=Vr("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",sU().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tU("Browser");var bS={};const wS="@firebase/database",SS="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oI="";function oU(n){oI=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ld(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Gr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new aU(e)}}catch{}return new lU},wa=aI("localStorage"),cU=aI("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Km("@firebase/database"),uU=function(){let n=1;return function(){return n++}}(),lI=function(n){const e=tP(n),t=new XM;t.update(e);const i=t.digest();return Nv.encodeByteArray(i)},jd=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=jd.apply(null,i):typeof i=="object"?e+=yn(i):e+=i,e+=" "}return e};let Qu=null,CS=!0;const dU=function(n,e){ye(!0,"Can't turn on custom loggers persistently."),Jl.logLevel=at.VERBOSE,Qu=Jl.log.bind(Jl)},Un=function(...n){if(CS===!0&&(CS=!1,Qu===null&&cU.get("logging_enabled")===!0&&dU()),Qu){const e=jd.apply(null,n);Qu(e)}},Bd=function(n){return function(...e){Un(n,...e)}},Iy=function(...n){const e="FIREBASE INTERNAL ERROR: "+jd(...n);Jl.error(e)},Os=function(...n){const e=`FIREBASE FATAL ERROR: ${jd(...n)}`;throw Jl.error(e),new Error(e)},ri=function(...n){const e="FIREBASE WARNING: "+jd(...n);Jl.warn(e)},hU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ri("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Gv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fU=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Oa="[MIN_NAME]",Oo="[MAX_NAME]",qa=function(n,e){if(n===e)return 0;if(n===Oa||e===Oo)return-1;if(e===Oa||n===Oo)return 1;{const t=AS(n),i=AS(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},mU=function(n,e){return n===e?0:n<e?-1:1},Pu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+yn(e))},$v=function(n){if(typeof n!="object"||n===null)return yn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=yn(e[i]),t+=":",t+=$v(n[e[i]]);return t+="}",t},cI=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function Bn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uI=function(n){ye(!Gv(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,a,c,d,f;n===0?(a=0,c=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=d+i,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(a=0,c=Math.round(n/Math.pow(2,1-i-t))));const p=[];for(f=t;f;f-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(f=e;f;f-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(s?1:0),p.reverse();const _=p.join("");let v="";for(f=0;f<64;f+=8){let T=parseInt(_.substr(f,8),2).toString(16);T.length===1&&(T="0"+T),v=v+T}return v.toLowerCase()},pU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},gU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function _U(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const yU=new RegExp("^-?(0*)\\d{1,10}$"),vU=-2147483648,EU=2147483647,AS=function(n){if(yU.test(n)){const e=Number(n);if(e>=vU&&e<=EU)return e}return null},vc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ri("Exception was thrown by user callback.",t),e},Math.floor(0))}},TU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Gi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ri(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Un("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ri(e)}}class jf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}jf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="5",dI="v",hI="s",fI="r",mI="f",pI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gI="ls",_I="p",xy="ac",yI="websocket",vI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t,i,s,a=!1,c="",d=!1,f=!1,p=null){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function SU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function TI(n,e,t){ye(typeof e=="string","typeof type must == string"),ye(typeof t=="object","typeof params must == object");let i;if(e===yI)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===vI)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);SU(n)&&(t.ns=n.namespace);const s=[];return Bn(t,(a,c)=>{s.push(a+"="+c)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(){this.counters_={}}incrementCounter(e,t=1){Gr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return kM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={},Q_={};function Qv(n){const e=n.toString();return K_[e]||(K_[e]=new CU),K_[e]}function AU(n,e){const t=n.toString();return Q_[t]||(Q_[t]=e()),Q_[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&vc(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="start",IU="close",xU="pLPCommand",NU="pRTLPCB",bI="id",wI="pw",SI="ser",kU="cb",OU="seg",DU="ts",MU="d",PU="dframe",CI=1870,AI=30,LU=CI-AI,UU=25e3,VU=3e4;class Ql{constructor(e,t,i,s,a,c,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bd(e),this.stats_=Qv(t),this.urlFn=f=>(this.appCheckToken&&(f[xy]=this.appCheckToken),TI(t,vI,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new RU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(VU)),fU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Yv((...a)=>{const[c,d,f,p,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===RS)this.id=d,this.password=f;else if(c===IU)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[RS]="t",i[SI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[kU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[dI]=Kv,this.transportSessionId&&(i[hI]=this.transportSessionId),this.lastSessionId&&(i[gI]=this.lastSessionId),this.applicationId&&(i[_I]=this.applicationId),this.appCheckToken&&(i[xy]=this.appCheckToken),typeof location<"u"&&location.hostname&&pI.test(location.hostname)&&(i[fI]=mI);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ql.forceAllow_=!0}static forceDisallow(){Ql.forceDisallow_=!0}static isAvailable(){return Ql.forceAllow_?!0:!Ql.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!pU()&&!gU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=yn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=pR(t),s=cI(i,LU);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[PU]="t",i[bI]=e,i[wI]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=yn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Yv{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=uU(),window[xU+this.uniqueCallbackIdentifier]=e,window[NU+this.uniqueCallbackIdentifier]=t,this.myIFrame=Yv.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Un("frame writing exception"),d.stack&&Un(d.stack),Un(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Un("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[bI]=this.myID,e[wI]=this.myPW,e[SI]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AI+i.length<=CI;){const c=this.pendingSegs.shift();i=i+"&"+OU+s+"="+c.seg+"&"+DU+s+"="+c.ts+"&"+MU+s+"="+c.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(UU)),a=()=>{clearTimeout(s),i()};this.addTag(e,a)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Un("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=16384,BU=45e3;let cm=null;typeof MozWebSocket<"u"?cm=MozWebSocket:typeof WebSocket<"u"&&(cm=WebSocket);class ar{constructor(e,t,i,s,a,c,d){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bd(this.connId),this.stats_=Qv(t),this.connURL=ar.connectionURL_(t,c,d,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,a){const c={};return c[dI]=Kv,typeof location<"u"&&location.hostname&&pI.test(location.hostname)&&(c[fI]=mI),t&&(c[hI]=t),i&&(c[gI]=i),s&&(c[xy]=s),a&&(c[_I]=a),TI(e,yI,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wa.set("previous_websocket_failure",!0);try{let i;qM(),this.mySock=new cm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){ar.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&cm!==null&&!ar.forceDisallow_}static previouslyFailed(){return wa.isInMemoryStorage||wa.get("previous_websocket_failure")===!0}markConnectionHealthy(){wa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=ld(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ye(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=yn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=cI(t,jU);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(BU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ar.responsesRequiredToBeHealthy=2;ar.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{static get ALL_TRANSPORTS(){return[Ql,ar]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ar&&ar.isAvailable();let i=t&&!ar.previouslyFailed();if(e.webSocketOnly&&(t||ri("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ar];else{const s=this.transports_=[];for(const a of dd.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);dd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}dd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=6e4,zU=5e3,qU=10*1024,HU=100*1024,Y_="t",IS="d",GU="s",xS="r",$U="e",NS="o",kS="a",OS="n",DS="p",KU="h";class QU{constructor(e,t,i,s,a,c,d,f,p,_){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bd("c:"+this.id+":"),this.transportManager_=new dd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Yu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>HU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Y_ in e){const t=e[Y_];t===kS?this.upgradeIfSecondaryHealthy_():t===xS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===NS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Pu("t",e),i=Pu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:DS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:OS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Pu("t",e),i=Pu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Pu(Y_,e);if(IS in e){const i=e[IS];if(t===KU){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===OS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===GU?this.onConnectionShutdown_(i):t===xS?this.onReset_(i):t===$U?Iy("Server Error: "+i):t===NS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Iy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Kv!==i&&ri("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Yu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(FU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:DS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.allowedEvents_=e,this.listeners_={},ye(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let a=0;a<s.length;a++)if(s[a].callback===t&&(!i||i===s[a].context)){s.splice(a,1);return}}validateEventType_(e){ye(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends II{static getInstance(){return new um}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Dv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ye(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=32,PS=768;class At{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function gt(){return new At("")}function et(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Do(n){return n.pieces_.length-n.pieceNum_}function Bt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new At(n.pieces_,e)}function Wv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function YU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function hd(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function xI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new At(e,0)}function Zt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof At)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new At(t,0)}function tt(n){return n.pieceNum_>=n.pieces_.length}function ii(n,e){const t=et(n),i=et(e);if(t===null)return e;if(t===i)return ii(Bt(n),Bt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function WU(n,e){const t=hd(n,0),i=hd(e,0);for(let s=0;s<t.length&&s<i.length;s++){const a=qa(t[s],i[s]);if(a!==0)return a}return t.length===i.length?0:t.length<i.length?-1:1}function Xv(n,e){if(Do(n)!==Do(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ki(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Do(n)>Do(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class XU{constructor(e,t){this.errorPrefix_=t,this.parts_=hd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=$m(this.parts_[i]);NI(this)}}function JU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=$m(e),NI(n)}function ZU(n){const e=n.parts_.pop();n.byteLength_-=$m(e),n.parts_.length>0&&(n.byteLength_-=1)}function NI(n){if(n.byteLength_>PS)throw new Error(n.errorPrefix_+"has a key path longer than "+PS+" bytes ("+n.byteLength_+").");if(n.parts_.length>MS)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MS+") or object contains a cycle "+ba(n))}function ba(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends II{static getInstance(){return new Jv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ye(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=1e3,e4=60*5*1e3,LS=30*1e3,t4=1.3,n4=3e4,i4="server_kill",US=3;class Cs extends RI{constructor(e,t,i,s,a,c,d,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=f,this.id=Cs.nextPersistentConnectionId_++,this.log_=Bd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lu,this.maxReconnectDelay_=e4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&um.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,a={r:s,a:e,b:t};this.log_(yn(a)),ye(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new Md,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),t.promise}listen(e,t,i,s){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),ye(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ye(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const d={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(c).set(a,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const a={p:i},c="q";e.tag&&(a.q=t._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,d=>{const f=d.d,p=d.s;Cs.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",d),p!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(p,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Gr(e,"w")){const i=ec(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();ri(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||WM(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=LS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=YM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const a=s.s,c=s.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),ye(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const a={p:e},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const a={p:t,d:i};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,a){this.initConnection_();const c={p:t,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:s}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,a=>{this.log_(t+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+yn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Iy("Unrecognized action received from server: "+yn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ye(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>n4&&(this.reconnectDelay_=Lu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*t4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Cs.nextConnectionId_++,a=this.lastSessionId;let c=!1,d=null;const f=function(){d?d.close():(c=!0,i())},p=function(v){ye(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(v)};this.realtime_={close:f,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,T]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Un("getToken() completed but was canceled"):(Un("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=T&&T.token,d=new QU(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,R=>{ri(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(i4)},a))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&ri(v),f())}}}interrupt(e){Un("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Un("Resuming connection for reason: "+e),delete this.interruptReasons_[e],yy(this.interruptReasons_)&&(this.reconnectDelay_=Lu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(a=>$v(a)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new At(e).toString();let s;if(this.listens.has(i)){const a=this.listens.get(i);s=a.get(t),a.delete(t),a.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){Un("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=US&&(this.reconnectDelay_=LS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Un("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=US&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+oI.replace(/\./g,"-")]=1,Dv()?e["framework.cordova"]=1:ER()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=um.getInstance().currentlyOnline();return yy(this.interruptReasons_)&&e}}Cs.nextPersistentConnectionId_=0;Cs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new nt(Oa,e),s=new nt(Oa,t);return this.compare(i,s)!==0}minPost(){return nt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf;class kI extends Xm{static get __EMPTY_NODE(){return wf}static set __EMPTY_NODE(e){wf=e}compare(e,t){return qa(e.name,t.name)}isDefinedOn(e){throw gc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nt.MIN}maxPost(){return new nt(Oo,wf)}makePost(e,t){return ye(typeof e=="string","KeyIndex indexValue must always be a string."),new nt(e,wf)}toString(){return".key"}}const Ia=new kI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf=class{constructor(e,t,i,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,s&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ii=class zu{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??zu.RED,this.left=s??Lr.EMPTY_NODE,this.right=a??Lr.EMPTY_NODE}copy(e,t,i,s,a){return new zu(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Lr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Lr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,zu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,zu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Ii.RED=!0;Ii.BLACK=!1;class r4{copy(e,t,i,s,a){return this}insert(e,t,i){return new Ii(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Lr=class Bf{constructor(e,t=Bf.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Bf(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Bf(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ii.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Sf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Sf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Sf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Sf(this.root_,null,this.comparator_,!0,e)}};Lr.EMPTY_NODE=new r4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n,e){return qa(n.name,e.name)}function Zv(n,e){return qa(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ny;function o4(n){Ny=n}const OI=function(n){return typeof n=="number"?"number:"+uI(n):"string:"+n},DI=function(n){if(n.isLeafNode()){const e=n.val();ye(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gr(e,".sv"),"Priority must be a string or number.")}else ye(n===Ny||n.isEmpty(),"priority of unexpected type.");ye(n===Ny||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VS;class Rn{static set __childrenNodeConstructor(e){VS=e}static get __childrenNodeConstructor(){return VS}constructor(e,t=Rn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ye(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),DI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Rn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Rn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return tt(e)?this:et(e)===".priority"?this.priorityNode_:Rn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Rn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=et(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ye(i!==".priority"||Do(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Rn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+OI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=uI(this.value_):e+=this.value_,this.lazyHash_=lI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Rn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Rn.__childrenNodeConstructor?-1:(ye(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=Rn.VALUE_TYPE_ORDER.indexOf(t),a=Rn.VALUE_TYPE_ORDER.indexOf(i);return ye(s>=0,"Unknown leaf type: "+t),ye(a>=0,"Unknown leaf type: "+i),s===a?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Rn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MI,PI;function a4(n){MI=n}function l4(n){PI=n}class c4 extends Xm{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),a=i.compareTo(s);return a===0?qa(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nt.MIN}maxPost(){return new nt(Oo,new Rn("[PRIORITY-POST]",PI))}makePost(e,t){const i=MI(e);return new nt(t,new Rn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Gt=new c4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=Math.log(2);class d4{constructor(e){const t=a=>parseInt(Math.log(a)/u4,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const dm=function(n,e,t,i){n.sort(e);const s=function(f,p){const _=p-f;let v,T;if(_===0)return null;if(_===1)return v=n[f],T=t?t(v):v,new Ii(T,v.node,Ii.BLACK,null,null);{const R=parseInt(_/2,10)+f,S=s(f,R),D=s(R+1,p);return v=n[R],T=t?t(v):v,new Ii(T,v.node,Ii.BLACK,S,D)}},a=function(f){let p=null,_=null,v=n.length;const T=function(S,D){const k=v-S,L=v;v-=S;const B=s(k+1,L),z=n[k],K=t?t(z):z;R(new Ii(K,z.node,D,null,B))},R=function(S){p?(p.left=S,p=S):(_=S,p=S)};for(let S=0;S<f.count;++S){const D=f.nextBitIsOne(),k=Math.pow(2,f.count-(S+1));D?T(k,Ii.BLACK):(T(k,Ii.BLACK),T(k,Ii.RED))}return _},c=new d4(n.length),d=a(c);return new Lr(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W_;const Bl={};class Ts{static get Default(){return ye(Bl&&Gt,"ChildrenNode.ts has not been loaded"),W_=W_||new Ts({".priority":Bl},{".priority":Gt}),W_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=ec(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Lr?t:null}hasIndex(e){return Gr(this.indexSet_,e.toString())}addIndex(e,t){ye(e!==Ia,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const a=t.getIterator(nt.Wrap);let c=a.getNext();for(;c;)s=s||e.isDefinedOn(c.node),i.push(c),c=a.getNext();let d;s?d=dm(i,e.getCompare()):d=Bl;const f=e.toString(),p=Object.assign({},this.indexSet_);p[f]=e;const _=Object.assign({},this.indexes_);return _[f]=d,new Ts(_,p)}addToIndexes(e,t){const i=tm(this.indexes_,(s,a)=>{const c=ec(this.indexSet_,a);if(ye(c,"Missing index implementation for "+a),s===Bl)if(c.isDefinedOn(e.node)){const d=[],f=t.getIterator(nt.Wrap);let p=f.getNext();for(;p;)p.name!==e.name&&d.push(p),p=f.getNext();return d.push(e),dm(d,c.getCompare())}else return Bl;else{const d=t.get(e.name);let f=s;return d&&(f=f.remove(new nt(e.name,d))),f.insert(e,e.node)}});return new Ts(i,this.indexSet_)}removeFromIndexes(e,t){const i=tm(this.indexes_,s=>{if(s===Bl)return s;{const a=t.get(e.name);return a?s.remove(new nt(e.name,a)):s}});return new Ts(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu;class Ve{static get EMPTY_NODE(){return Uu||(Uu=new Ve(new Lr(Zv),null,Ts.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&DI(this.priorityNode_),this.children_.isEmpty()&&ye(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Uu}updatePriority(e){return this.children_.isEmpty()?this:new Ve(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Uu:t}}getChild(e){const t=et(e);return t===null?this:this.getImmediateChild(t).getChild(Bt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ye(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new nt(e,t);let s,a;t.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),a=this.indexMap_.addToIndexes(i,this.children_));const c=s.isEmpty()?Uu:this.priorityNode_;return new Ve(s,c,a)}}updateChild(e,t){const i=et(e);if(i===null)return t;{ye(et(e)!==".priority"||Do(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Bt(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,a=!0;if(this.forEachChild(Gt,(c,d)=>{t[c]=d.val(e),i++,a&&Ve.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):a=!1}),!e&&a&&s<2*i){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+OI(this.getPriority().val())+":"),this.forEachChild(Gt,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":lI(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const a=s.getPredecessorKey(new nt(e,t));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new nt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new nt(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,nt.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,nt.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fd?-1:0}withIndex(e){if(e===Ia||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ve(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ia||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Gt),s=t.getIterator(Gt);let a=i.getNext(),c=s.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=i.getNext(),c=s.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Ia?null:this.indexMap_.get(e.toString())}}Ve.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class h4 extends Ve{constructor(){super(new Lr(Zv),Ve.EMPTY_NODE,Ts.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ve.EMPTY_NODE}isEmpty(){return!1}}const Fd=new h4;Object.defineProperties(nt,{MIN:{value:new nt(Oa,Ve.EMPTY_NODE)},MAX:{value:new nt(Oo,Fd)}});kI.__EMPTY_NODE=Ve.EMPTY_NODE;Rn.__childrenNodeConstructor=Ve;o4(Fd);l4(Fd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=!0;function _n(n,e=null){if(n===null)return Ve.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ye(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Rn(t,_n(e))}if(!(n instanceof Array)&&f4){const t=[];let i=!1;if(Bn(n,(c,d)=>{if(c.substring(0,1)!=="."){const f=_n(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new nt(c,f)))}}),t.length===0)return Ve.EMPTY_NODE;const a=dm(t,s4,c=>c.name,Zv);if(i){const c=dm(t,Gt.getCompare());return new Ve(a,_n(e),new Ts({".priority":c},{".priority":Gt}))}else return new Ve(a,_n(e),Ts.Default)}else{let t=Ve.EMPTY_NODE;return Bn(n,(i,s)=>{if(Gr(n,i)&&i.substring(0,1)!=="."){const a=_n(s);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(_n(e))}}a4(_n);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE extends Xm{constructor(e){super(),this.indexPath_=e,ye(!tt(e)&&et(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),a=i.compareTo(s);return a===0?qa(e.name,t.name):a}makePost(e,t){const i=_n(e),s=Ve.EMPTY_NODE.updateChild(this.indexPath_,i);return new nt(t,s)}maxPost(){const e=Ve.EMPTY_NODE.updateChild(this.indexPath_,Fd);return new nt(Oo,e)}toString(){return hd(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4 extends Xm{compare(e,t){const i=e.node.compareTo(t.node);return i===0?qa(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nt.MIN}maxPost(){return nt.MAX}makePost(e,t){const i=_n(e);return new nt(t,i)}toString(){return".value"}}const LI=new m4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n){return{type:"value",snapshotNode:n}}function nc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function fd(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function md(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function p4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.index_=e}updateChild(e,t,i,s,a,c){ye(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(s).equals(i.getChild(s))&&d.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(fd(t,d)):ye(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(nc(t,i)):c.trackChildChange(md(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Gt,(s,a)=>{t.hasChild(s)||i.trackChildChange(fd(s,a))}),t.isLeafNode()||t.forEachChild(Gt,(s,a)=>{if(e.hasChild(s)){const c=e.getImmediateChild(s);c.equals(a)||i.trackChildChange(md(s,a,c))}else i.trackChildChange(nc(s,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ve.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.indexedFilter_=new tE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=pd.getStartPost_(e),this.endPost_=pd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,a,c){return this.matches(new nt(t,i))||(i=Ve.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,a,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Ve.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(Ve.EMPTY_NODE);const a=this;return t.forEachChild(Gt,(c,d)=>{a.matches(new nt(c,d))||(s=s.updateImmediateChild(c,Ve.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new pd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,a,c){return this.rangedFilter_.matches(new nt(t,i))||(i=Ve.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,a,c):this.fullLimitUpdateChild_(e,t,i,a,c)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=Ve.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=Ve.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const d=a.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))s=s.updateImmediateChild(d.name,d.node),c++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(Ve.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let c=0;for(;a.hasNext();){const d=a.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:s=s.updateImmediateChild(d.name,Ve.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,a){let c;if(this.reverse_){const v=this.index_.getCompare();c=(T,R)=>v(R,T)}else c=this.index_.getCompare();const d=e;ye(d.numChildren()===this.limit_,"");const f=new nt(t,i),p=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),_=this.rangedFilter_.matches(f);if(d.hasChild(t)){const v=d.getImmediateChild(t);let T=s.getChildAfterChild(this.index_,p,this.reverse_);for(;T!=null&&(T.name===t||d.hasChild(T.name));)T=s.getChildAfterChild(this.index_,T,this.reverse_);const R=T==null?1:c(T,f);if(_&&!i.isEmpty()&&R>=0)return a!=null&&a.trackChildChange(md(t,i,v)),d.updateImmediateChild(t,i);{a!=null&&a.trackChildChange(fd(t,v));const D=d.updateImmediateChild(t,Ve.EMPTY_NODE);return T!=null&&this.rangedFilter_.matches(T)?(a!=null&&a.trackChildChange(nc(T.name,T.node)),D.updateImmediateChild(T.name,T.node)):D}}else return i.isEmpty()?e:_&&c(p,f)>=0?(a!=null&&(a.trackChildChange(fd(p.name,p.node)),a.trackChildChange(nc(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(p.name,Ve.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ye(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ye(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oa}hasEnd(){return this.endSet_}getIndexEndValue(){return ye(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ye(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Oo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ye(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gt}copy(){const e=new nE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function _4(n){return n.loadsAllData()?new tE(n.getIndex()):n.hasLimit()?new g4(n):new pd(n)}function y4(n,e){const t=n.copy();return t.index_=e,t}function jS(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Gt?t="$priority":n.index_===LI?t="$value":n.index_===Ia?t="$key":(ye(n.index_ instanceof eE,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=yn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=yn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+yn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=yn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+yn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function BS(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Gt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends RI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ye(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Bd("p:rest:"),this.listens_={}}listen(e,t,i,s){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=hm.getListenId_(e,i),d={};this.listens_[c]=d;const f=jS(e._queryParams);this.restRequest_(a+".json",f,(p,_)=>{let v=_;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(a,v,!1,i),ec(this.listens_,c)===d){let T;p?p===401?T="permission_denied":T="rest_error:"+p:T="ok",s(T,null)}})}unlisten(e,t){const i=hm.getListenId_(e,t);delete this.listens_[i]}get(e){const t=jS(e._queryParams),i=e._path.toString(),s=new Md;return this.restRequest_(i+".json",t,(a,c)=>{let d=c;a===404&&(d=null,a=null),a===null?(this.onDataUpdate_(i,d,!1,null),s.resolve(d)):s.reject(new Error(d))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(t.auth=s.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_c(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=ld(d.responseText)}catch{ri("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,f)}else d.status!==401&&d.status!==404&&ri("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.rootNode_=Ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(){return{value:null,children:new Map}}function VI(n,e,t){if(tt(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=et(e);n.children.has(i)||n.children.set(i,fm());const s=n.children.get(i);e=Bt(e),VI(s,e,t)}}function ky(n,e,t){n.value!==null?t(e,n.value):E4(n,(i,s)=>{const a=new At(e.toString()+"/"+i);ky(s,a,t)})}function E4(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bn(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=10*1e3,b4=30*1e3,w4=5*60*1e3;class S4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new T4(e);const i=FS+(b4-FS)*Math.random();Yu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Bn(e,(s,a)=>{a>0&&Gr(this.statsToReport_,s)&&(t[s]=a,i=!0)}),i&&this.server_.reportStats(t),Yu(this.reportStats_.bind(this),Math.floor(Math.random()*2*w4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ur;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ur||(ur={}));function iE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ur.ACK_USER_WRITE,this.source=iE()}operationForChild(e){if(tt(this.path)){if(this.affectedTree.value!=null)return ye(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new At(e));return new mm(gt(),t,this.revert)}}else return ye(et(this.path)===e,"operationForChild called for unrelated child."),new mm(Bt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.source=e,this.path=t,this.type=ur.LISTEN_COMPLETE}operationForChild(e){return tt(this.path)?new gd(this.source,gt()):new gd(this.source,Bt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ur.OVERWRITE}operationForChild(e){return tt(this.path)?new Da(this.source,gt(),this.snap.getImmediateChild(e)):new Da(this.source,Bt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ur.MERGE}operationForChild(e){if(tt(this.path)){const t=this.children.subtree(new At(e));return t.isEmpty()?null:t.value?new Da(this.source,gt(),t.value):new ic(this.source,gt(),t)}else return ye(et(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ic(this.source,Bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tt(e))return this.isFullyInitialized()&&!this.filtered_;const t=et(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function A4(n,e,t,i){const s=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(p4(c.childName,c.snapshotNode))}),Vu(n,s,"child_removed",e,i,t),Vu(n,s,"child_added",e,i,t),Vu(n,s,"child_moved",a,i,t),Vu(n,s,"child_changed",e,i,t),Vu(n,s,"value",e,i,t),s}function Vu(n,e,t,i,s,a){const c=i.filter(d=>d.type===t);c.sort((d,f)=>I4(n,d,f)),c.forEach(d=>{const f=R4(n,d,a);s.forEach(p=>{p.respondsTo(d.type)&&e.push(p.createEvent(f,n.query_))})})}function R4(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function I4(n,e,t){if(e.childName==null||t.childName==null)throw gc("Should only compare child_ events.");const i=new nt(e.childName,e.snapshotNode),s=new nt(t.childName,t.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n,e){return{eventCache:n,serverCache:e}}function Wu(n,e,t,i){return Jm(new Mo(e,t,i),n.serverCache)}function jI(n,e,t,i){return Jm(n.eventCache,new Mo(e,t,i))}function pm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ma(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X_;const x4=()=>(X_||(X_=new Lr(mU)),X_);class jt{static fromObject(e){let t=new jt(null);return Bn(e,(i,s)=>{t=t.set(new At(i),s)}),t}constructor(e,t=x4()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:gt(),value:this.value};if(tt(e))return null;{const i=et(e),s=this.children.get(i);if(s!==null){const a=s.findRootMostMatchingPathAndValue(Bt(e),t);return a!=null?{path:Zt(new At(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tt(e))return this;{const t=et(e),i=this.children.get(t);return i!==null?i.subtree(Bt(e)):new jt(null)}}set(e,t){if(tt(e))return new jt(t,this.children);{const i=et(e),a=(this.children.get(i)||new jt(null)).set(Bt(e),t),c=this.children.insert(i,a);return new jt(this.value,c)}}remove(e){if(tt(e))return this.children.isEmpty()?new jt(null):new jt(null,this.children);{const t=et(e),i=this.children.get(t);if(i){const s=i.remove(Bt(e));let a;return s.isEmpty()?a=this.children.remove(t):a=this.children.insert(t,s),this.value===null&&a.isEmpty()?new jt(null):new jt(this.value,a)}else return this}}get(e){if(tt(e))return this.value;{const t=et(e),i=this.children.get(t);return i?i.get(Bt(e)):null}}setTree(e,t){if(tt(e))return t;{const i=et(e),a=(this.children.get(i)||new jt(null)).setTree(Bt(e),t);let c;return a.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,a),new jt(this.value,c)}}fold(e){return this.fold_(gt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,a)=>{i[s]=a.fold_(Zt(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,gt(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(tt(e))return null;{const a=et(e),c=this.children.get(a);return c?c.findOnPath_(Bt(e),Zt(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gt(),t)}foreachOnPath_(e,t,i){if(tt(e))return this;{this.value&&i(t,this.value);const s=et(e),a=this.children.get(s);return a?a.foreachOnPath_(Bt(e),Zt(t,s),i):new jt(null)}}foreach(e){this.foreach_(gt(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(Zt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.writeTree_=e}static empty(){return new hr(new jt(null))}}function Xu(n,e,t){if(tt(e))return new hr(new jt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let a=i.value;const c=ii(s,e);return a=a.updateChild(c,t),new hr(n.writeTree_.set(s,a))}else{const s=new jt(t),a=n.writeTree_.setTree(e,s);return new hr(a)}}}function Oy(n,e,t){let i=n;return Bn(t,(s,a)=>{i=Xu(i,Zt(e,s),a)}),i}function zS(n,e){if(tt(e))return hr.empty();{const t=n.writeTree_.setTree(e,new jt(null));return new hr(t)}}function Dy(n,e){return Ha(n,e)!=null}function Ha(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ii(t.path,e)):null}function qS(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Gt,(i,s)=>{e.push(new nt(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new nt(i,s.value))}),e}function So(n,e){if(tt(e))return n;{const t=Ha(n,e);return t!=null?new hr(new jt(t)):new hr(n.writeTree_.subtree(e))}}function My(n){return n.writeTree_.isEmpty()}function rc(n,e){return BI(gt(),n.writeTree_,e)}function BI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,a)=>{s===".priority"?(ye(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):t=BI(Zt(n,s),a,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Zt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n,e){return HI(e,n)}function N4(n,e,t,i,s){ye(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Xu(n.visibleWrites,e,t)),n.lastWriteId=i}function k4(n,e,t,i){ye(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Oy(n.visibleWrites,e,t),n.lastWriteId=i}function O4(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function D4(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);ye(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,a=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&M4(d,i.path)?s=!1:Ki(i.path,d.path)&&(a=!0)),c--}if(s){if(a)return P4(n),!0;if(i.snap)n.visibleWrites=zS(n.visibleWrites,i.path);else{const d=i.children;Bn(d,f=>{n.visibleWrites=zS(n.visibleWrites,Zt(i.path,f))})}return!0}else return!1}function M4(n,e){if(n.snap)return Ki(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ki(Zt(n.path,t),e))return!0;return!1}function P4(n){n.visibleWrites=FI(n.allWrites,L4,gt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function L4(n){return n.visible}function FI(n,e,t){let i=hr.empty();for(let s=0;s<n.length;++s){const a=n[s];if(e(a)){const c=a.path;let d;if(a.snap)Ki(t,c)?(d=ii(t,c),i=Xu(i,d,a.snap)):Ki(c,t)&&(d=ii(c,t),i=Xu(i,gt(),a.snap.getChild(d)));else if(a.children){if(Ki(t,c))d=ii(t,c),i=Oy(i,d,a.children);else if(Ki(c,t))if(d=ii(c,t),tt(d))i=Oy(i,gt(),a.children);else{const f=ec(a.children,et(d));if(f){const p=f.getChild(Bt(d));i=Xu(i,gt(),p)}}}else throw gc("WriteRecord should have .snap or .children")}}return i}function zI(n,e,t,i,s){if(!i&&!s){const a=Ha(n.visibleWrites,e);if(a!=null)return a;{const c=So(n.visibleWrites,e);if(My(c))return t;if(t==null&&!Dy(c,gt()))return null;{const d=t||Ve.EMPTY_NODE;return rc(c,d)}}}else{const a=So(n.visibleWrites,e);if(!s&&My(a))return t;if(!s&&t==null&&!Dy(a,gt()))return null;{const c=function(p){return(p.visible||s)&&(!i||!~i.indexOf(p.writeId))&&(Ki(p.path,e)||Ki(e,p.path))},d=FI(n.allWrites,c,e),f=t||Ve.EMPTY_NODE;return rc(d,f)}}}function U4(n,e,t){let i=Ve.EMPTY_NODE;const s=Ha(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Gt,(a,c)=>{i=i.updateImmediateChild(a,c)}),i;if(t){const a=So(n.visibleWrites,e);return t.forEachChild(Gt,(c,d)=>{const f=rc(So(a,new At(c)),d);i=i.updateImmediateChild(c,f)}),qS(a).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const a=So(n.visibleWrites,e);return qS(a).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function V4(n,e,t,i,s){ye(i||s,"Either existingEventSnap or existingServerSnap must exist");const a=Zt(e,t);if(Dy(n.visibleWrites,a))return null;{const c=So(n.visibleWrites,a);return My(c)?s.getChild(t):rc(c,s.getChild(t))}}function j4(n,e,t,i){const s=Zt(e,t),a=Ha(n.visibleWrites,s);if(a!=null)return a;if(i.isCompleteForChild(t)){const c=So(n.visibleWrites,s);return rc(c,i.getNode().getImmediateChild(t))}else return null}function B4(n,e){return Ha(n.visibleWrites,e)}function F4(n,e,t,i,s,a,c){let d;const f=So(n.visibleWrites,e),p=Ha(f,gt());if(p!=null)d=p;else if(t!=null)d=rc(f,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const _=[],v=c.getCompare(),T=a?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let R=T.getNext();for(;R&&_.length<s;)v(R,i)!==0&&_.push(R),R=T.getNext();return _}else return[]}function z4(){return{visibleWrites:hr.empty(),allWrites:[],lastWriteId:-1}}function gm(n,e,t,i){return zI(n.writeTree,n.treePath,e,t,i)}function oE(n,e){return U4(n.writeTree,n.treePath,e)}function HS(n,e,t,i){return V4(n.writeTree,n.treePath,e,t,i)}function _m(n,e){return B4(n.writeTree,Zt(n.treePath,e))}function q4(n,e,t,i,s,a){return F4(n.writeTree,n.treePath,e,t,i,s,a)}function aE(n,e,t){return j4(n.writeTree,n.treePath,e,t)}function qI(n,e){return HI(Zt(n.treePath,e),n.writeTree)}function HI(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ye(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ye(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const a=s.type;if(t==="child_added"&&a==="child_removed")this.changeMap.set(i,md(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&a==="child_changed")this.changeMap.set(i,fd(i,s.oldSnap));else if(t==="child_changed"&&a==="child_added")this.changeMap.set(i,nc(i,e.snapshotNode));else if(t==="child_changed"&&a==="child_changed")this.changeMap.set(i,md(i,e.snapshotNode,s.oldSnap));else throw gc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const GI=new G4;class lE{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Mo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return aE(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ma(this.viewCache_),a=q4(this.writes_,s,t,1,i,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(n){return{filter:n}}function K4(n,e){ye(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ye(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Q4(n,e,t,i,s){const a=new H4;let c,d;if(t.type===ur.OVERWRITE){const p=t;p.source.fromUser?c=Py(n,e,p.path,p.snap,i,s,a):(ye(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered()&&!tt(p.path),c=ym(n,e,p.path,p.snap,i,s,d,a))}else if(t.type===ur.MERGE){const p=t;p.source.fromUser?c=W4(n,e,p.path,p.children,i,s,a):(ye(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered(),c=Ly(n,e,p.path,p.children,i,s,d,a))}else if(t.type===ur.ACK_USER_WRITE){const p=t;p.revert?c=Z4(n,e,p.path,i,s,a):c=X4(n,e,p.path,p.affectedTree,i,s,a)}else if(t.type===ur.LISTEN_COMPLETE)c=J4(n,e,t.path,i,a);else throw gc("Unknown operation type: "+t.type);const f=a.getChanges();return Y4(e,c,f),{viewCache:c,changes:f}}function Y4(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=pm(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(UI(pm(e)))}}function $I(n,e,t,i,s,a){const c=e.eventCache;if(_m(i,t)!=null)return e;{let d,f;if(tt(t))if(ye(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Ma(e),_=p instanceof Ve?p:Ve.EMPTY_NODE,v=oE(i,_);d=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const p=gm(i,Ma(e));d=n.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=et(t);if(p===".priority"){ye(Do(t)===1,"Can't have a priority with additional path components");const _=c.getNode();f=e.serverCache.getNode();const v=HS(i,t,_,f);v!=null?d=n.filter.updatePriority(_,v):d=c.getNode()}else{const _=Bt(t);let v;if(c.isCompleteForChild(p)){f=e.serverCache.getNode();const T=HS(i,t,c.getNode(),f);T!=null?v=c.getNode().getImmediateChild(p).updateChild(_,T):v=c.getNode().getImmediateChild(p)}else v=aE(i,p,e.serverCache);v!=null?d=n.filter.updateChild(c.getNode(),p,v,_,s,a):d=c.getNode()}}return Wu(e,d,c.isFullyInitialized()||tt(t),n.filter.filtersNodes())}}function ym(n,e,t,i,s,a,c,d){const f=e.serverCache;let p;const _=c?n.filter:n.filter.getIndexedFilter();if(tt(t))p=_.updateFullNode(f.getNode(),i,null);else if(_.filtersNodes()&&!f.isFiltered()){const R=f.getNode().updateChild(t,i);p=_.updateFullNode(f.getNode(),R,null)}else{const R=et(t);if(!f.isCompleteForPath(t)&&Do(t)>1)return e;const S=Bt(t),k=f.getNode().getImmediateChild(R).updateChild(S,i);R===".priority"?p=_.updatePriority(f.getNode(),k):p=_.updateChild(f.getNode(),R,k,S,GI,null)}const v=jI(e,p,f.isFullyInitialized()||tt(t),_.filtersNodes()),T=new lE(s,v,a);return $I(n,v,t,s,T,d)}function Py(n,e,t,i,s,a,c){const d=e.eventCache;let f,p;const _=new lE(s,e,a);if(tt(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,c),f=Wu(e,p,!0,n.filter.filtersNodes());else{const v=et(t);if(v===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),i),f=Wu(e,p,d.isFullyInitialized(),d.isFiltered());else{const T=Bt(t),R=d.getNode().getImmediateChild(v);let S;if(tt(T))S=i;else{const D=_.getCompleteChild(v);D!=null?Wv(T)===".priority"&&D.getChild(xI(T)).isEmpty()?S=D:S=D.updateChild(T,i):S=Ve.EMPTY_NODE}if(R.equals(S))f=e;else{const D=n.filter.updateChild(d.getNode(),v,S,T,_,c);f=Wu(e,D,d.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function GS(n,e){return n.eventCache.isCompleteForChild(e)}function W4(n,e,t,i,s,a,c){let d=e;return i.foreach((f,p)=>{const _=Zt(t,f);GS(e,et(_))&&(d=Py(n,d,_,p,s,a,c))}),i.foreach((f,p)=>{const _=Zt(t,f);GS(e,et(_))||(d=Py(n,d,_,p,s,a,c))}),d}function $S(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Ly(n,e,t,i,s,a,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,p;tt(t)?p=i:p=new jt(null).setTree(t,i);const _=e.serverCache.getNode();return p.children.inorderTraversal((v,T)=>{if(_.hasChild(v)){const R=e.serverCache.getNode().getImmediateChild(v),S=$S(n,R,T);f=ym(n,f,new At(v),S,s,a,c,d)}}),p.children.inorderTraversal((v,T)=>{const R=!e.serverCache.isCompleteForChild(v)&&T.value===null;if(!_.hasChild(v)&&!R){const S=e.serverCache.getNode().getImmediateChild(v),D=$S(n,S,T);f=ym(n,f,new At(v),D,s,a,c,d)}}),f}function X4(n,e,t,i,s,a,c){if(_m(s,t)!=null)return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(tt(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return ym(n,e,t,f.getNode().getChild(t),s,a,d,c);if(tt(t)){let p=new jt(null);return f.getNode().forEachChild(Ia,(_,v)=>{p=p.set(new At(_),v)}),Ly(n,e,t,p,s,a,d,c)}else return e}else{let p=new jt(null);return i.foreach((_,v)=>{const T=Zt(t,_);f.isCompleteForPath(T)&&(p=p.set(_,f.getNode().getChild(T)))}),Ly(n,e,t,p,s,a,d,c)}}function J4(n,e,t,i,s){const a=e.serverCache,c=jI(e,a.getNode(),a.isFullyInitialized()||tt(t),a.isFiltered());return $I(n,c,t,i,GI,s)}function Z4(n,e,t,i,s,a){let c;if(_m(i,t)!=null)return e;{const d=new lE(i,e,s),f=e.eventCache.getNode();let p;if(tt(t)||et(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=gm(i,Ma(e));else{const v=e.serverCache.getNode();ye(v instanceof Ve,"serverChildren would be complete if leaf node"),_=oE(i,v)}_=_,p=n.filter.updateFullNode(f,_,a)}else{const _=et(t);let v=aE(i,_,e.serverCache);v==null&&e.serverCache.isCompleteForChild(_)&&(v=f.getImmediateChild(_)),v!=null?p=n.filter.updateChild(f,_,v,Bt(t),d,a):e.eventCache.getNode().hasChild(_)?p=n.filter.updateChild(f,_,Ve.EMPTY_NODE,Bt(t),d,a):p=f,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=gm(i,Ma(e)),c.isLeafNode()&&(p=n.filter.updateFullNode(p,c,a)))}return c=e.serverCache.isFullyInitialized()||_m(i,gt())!=null,Wu(e,p,c,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new tE(i.getIndex()),a=_4(i);this.processor_=$4(a);const c=t.serverCache,d=t.eventCache,f=s.updateFullNode(Ve.EMPTY_NODE,c.getNode(),null),p=a.updateFullNode(Ve.EMPTY_NODE,d.getNode(),null),_=new Mo(f,c.isFullyInitialized(),s.filtersNodes()),v=new Mo(p,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=Jm(v,_),this.eventGenerator_=new C4(this.query_)}get query(){return this.query_}}function tV(n){return n.viewCache_.serverCache.getNode()}function nV(n){return pm(n.viewCache_)}function iV(n,e){const t=Ma(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tt(e)&&!t.getImmediateChild(et(e)).isEmpty())?t.getChild(e):null}function KS(n){return n.eventRegistrations_.length===0}function rV(n,e){n.eventRegistrations_.push(e)}function QS(n,e,t){const i=[];if(t){ye(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,s);c&&i.push(c)})}if(e){let s=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(!c.matches(e))s.push(c);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function YS(n,e,t,i){e.type===ur.MERGE&&e.source.queryId!==null&&(ye(Ma(n.viewCache_),"We should always have a full cache before handling merges"),ye(pm(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,a=Q4(n.processor_,s,e,t,i);return K4(n.processor_,a.viewCache),ye(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,KI(n,a.changes,a.viewCache.eventCache.getNode(),null)}function sV(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Gt,(a,c)=>{i.push(nc(a,c))}),t.isFullyInitialized()&&i.push(UI(t.getNode())),KI(n,i,t.getNode(),e)}function KI(n,e,t,i){const s=i?[i]:n.eventRegistrations_;return A4(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm;class QI{constructor(){this.views=new Map}}function oV(n){ye(!vm,"__referenceConstructor has already been defined"),vm=n}function aV(){return ye(vm,"Reference.ts has not been loaded"),vm}function lV(n){return n.views.size===0}function cE(n,e,t,i){const s=e.source.queryId;if(s!==null){const a=n.views.get(s);return ye(a!=null,"SyncTree gave us an op for an invalid query."),YS(a,e,t,i)}else{let a=[];for(const c of n.views.values())a=a.concat(YS(c,e,t,i));return a}}function YI(n,e,t,i,s){const a=e._queryIdentifier,c=n.views.get(a);if(!c){let d=gm(t,s?i:null),f=!1;d?f=!0:i instanceof Ve?(d=oE(t,i),f=!1):(d=Ve.EMPTY_NODE,f=!1);const p=Jm(new Mo(d,f,!1),new Mo(i,s,!1));return new eV(e,p)}return c}function cV(n,e,t,i,s,a){const c=YI(n,e,i,s,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),rV(c,t),sV(c,t)}function uV(n,e,t,i){const s=e._queryIdentifier,a=[];let c=[];const d=Po(n);if(s==="default")for(const[f,p]of n.views.entries())c=c.concat(QS(p,t,i)),KS(p)&&(n.views.delete(f),p.query._queryParams.loadsAllData()||a.push(p.query));else{const f=n.views.get(s);f&&(c=c.concat(QS(f,t,i)),KS(f)&&(n.views.delete(s),f.query._queryParams.loadsAllData()||a.push(f.query)))}return d&&!Po(n)&&a.push(new(aV())(e._repo,e._path)),{removed:a,events:c}}function WI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Co(n,e){let t=null;for(const i of n.views.values())t=t||iV(i,e);return t}function XI(n,e){if(e._queryParams.loadsAllData())return ep(n);{const i=e._queryIdentifier;return n.views.get(i)}}function JI(n,e){return XI(n,e)!=null}function Po(n){return ep(n)!=null}function ep(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em;function dV(n){ye(!Em,"__referenceConstructor has already been defined"),Em=n}function hV(){return ye(Em,"Reference.ts has not been loaded"),Em}let fV=1;class WS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jt(null),this.pendingWriteTree_=z4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZI(n,e,t,i,s){return N4(n.pendingWriteTree_,e,t,i,s),s?Ec(n,new Da(iE(),e,t)):[]}function mV(n,e,t,i){k4(n.pendingWriteTree_,e,t,i);const s=jt.fromObject(t);return Ec(n,new ic(iE(),e,s))}function To(n,e,t=!1){const i=O4(n.pendingWriteTree_,e);if(D4(n.pendingWriteTree_,e)){let a=new jt(null);return i.snap!=null?a=a.set(gt(),!0):Bn(i.children,c=>{a=a.set(new At(c),!0)}),Ec(n,new mm(i.path,a,t))}else return[]}function zd(n,e,t){return Ec(n,new Da(rE(),e,t))}function pV(n,e,t){const i=jt.fromObject(t);return Ec(n,new ic(rE(),e,i))}function gV(n,e){return Ec(n,new gd(rE(),e))}function _V(n,e,t){const i=dE(n,t);if(i){const s=hE(i),a=s.path,c=s.queryId,d=ii(a,e),f=new gd(sE(c),d);return fE(n,a,f)}else return[]}function Tm(n,e,t,i,s=!1){const a=e._path,c=n.syncPointTree_.get(a);let d=[];if(c&&(e._queryIdentifier==="default"||JI(c,e))){const f=uV(c,e,t,i);lV(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const p=f.removed;if(d=f.events,!s){const _=p.findIndex(T=>T._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(a,(T,R)=>Po(R));if(_&&!v){const T=n.syncPointTree_.subtree(a);if(!T.isEmpty()){const R=EV(T);for(let S=0;S<R.length;++S){const D=R[S],k=D.query,L=ix(n,D);n.listenProvider_.startListening(Ju(k),_d(n,k),L.hashFn,L.onComplete)}}}!v&&p.length>0&&!i&&(_?n.listenProvider_.stopListening(Ju(e),null):p.forEach(T=>{const R=n.queryToTagMap.get(tp(T));n.listenProvider_.stopListening(Ju(T),R)}))}TV(n,p)}return d}function ex(n,e,t,i){const s=dE(n,i);if(s!=null){const a=hE(s),c=a.path,d=a.queryId,f=ii(c,e),p=new Da(sE(d),f,t);return fE(n,c,p)}else return[]}function yV(n,e,t,i){const s=dE(n,i);if(s){const a=hE(s),c=a.path,d=a.queryId,f=ii(c,e),p=jt.fromObject(t),_=new ic(sE(d),f,p);return fE(n,c,_)}else return[]}function Uy(n,e,t,i=!1){const s=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(s,(T,R)=>{const S=ii(T,s);a=a||Co(R,S),c=c||Po(R)});let d=n.syncPointTree_.get(s);d?(c=c||Po(d),a=a||Co(d,gt())):(d=new QI,n.syncPointTree_=n.syncPointTree_.set(s,d));let f;a!=null?f=!0:(f=!1,a=Ve.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((R,S)=>{const D=Co(S,gt());D&&(a=a.updateImmediateChild(R,D))}));const p=JI(d,e);if(!p&&!e._queryParams.loadsAllData()){const T=tp(e);ye(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const R=bV();n.queryToTagMap.set(T,R),n.tagToQueryMap.set(R,T)}const _=Zm(n.pendingWriteTree_,s);let v=cV(d,e,t,_,a,f);if(!p&&!c&&!i){const T=XI(d,e);v=v.concat(wV(n,e,T))}return v}function uE(n,e,t){const s=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,d)=>{const f=ii(c,e),p=Co(d,f);if(p)return p});return zI(s,e,a,t,!0)}function vV(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(p,_)=>{const v=ii(p,t);i=i||Co(_,v)});let s=n.syncPointTree_.get(t);s?i=i||Co(s,gt()):(s=new QI,n.syncPointTree_=n.syncPointTree_.set(t,s));const a=i!=null,c=a?new Mo(i,!0,!1):null,d=Zm(n.pendingWriteTree_,e._path),f=YI(s,e,d,a?c.getNode():Ve.EMPTY_NODE,a);return nV(f)}function Ec(n,e){return tx(e,n.syncPointTree_,null,Zm(n.pendingWriteTree_,gt()))}function tx(n,e,t,i){if(tt(n.path))return nx(n,e,t,i);{const s=e.get(gt());t==null&&s!=null&&(t=Co(s,gt()));let a=[];const c=et(n.path),d=n.operationForChild(c),f=e.children.get(c);if(f&&d){const p=t?t.getImmediateChild(c):null,_=qI(i,c);a=a.concat(tx(d,f,p,_))}return s&&(a=a.concat(cE(s,n,i,t))),a}}function nx(n,e,t,i){const s=e.get(gt());t==null&&s!=null&&(t=Co(s,gt()));let a=[];return e.children.inorderTraversal((c,d)=>{const f=t?t.getImmediateChild(c):null,p=qI(i,c),_=n.operationForChild(c);_&&(a=a.concat(nx(_,d,f,p)))}),s&&(a=a.concat(cE(s,n,i,t))),a}function ix(n,e){const t=e.query,i=_d(n,t);return{hashFn:()=>(tV(e)||Ve.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?_V(n,t._path,i):gV(n,t._path);{const a=_U(s,t);return Tm(n,t,null,a)}}}}function _d(n,e){const t=tp(e);return n.queryToTagMap.get(t)}function tp(n){return n._path.toString()+"$"+n._queryIdentifier}function dE(n,e){return n.tagToQueryMap.get(e)}function hE(n){const e=n.indexOf("$");return ye(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new At(n.substr(0,e))}}function fE(n,e,t){const i=n.syncPointTree_.get(e);ye(i,"Missing sync point for query tag that we're tracking");const s=Zm(n.pendingWriteTree_,e);return cE(i,t,s,null)}function EV(n){return n.fold((e,t,i)=>{if(t&&Po(t))return[ep(t)];{let s=[];return t&&(s=WI(t)),Bn(i,(a,c)=>{s=s.concat(c)}),s}})}function Ju(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(hV())(n._repo,n._path):n}function TV(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=tp(i),a=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(a)}}}function bV(){return fV++}function wV(n,e,t){const i=e._path,s=_d(n,e),a=ix(n,t),c=n.listenProvider_.startListening(Ju(e),s,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(i);if(s)ye(!Po(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((p,_,v)=>{if(!tt(p)&&_&&Po(_))return[ep(_).query];{let T=[];return _&&(T=T.concat(WI(_).map(R=>R.query))),Bn(v,(R,S)=>{T=T.concat(S)}),T}});for(let p=0;p<f.length;++p){const _=f[p];n.listenProvider_.stopListening(Ju(_),_d(n,_))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new mE(t)}node(){return this.node_}}class pE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Zt(this.path_,e);return new pE(this.syncTree_,t)}node(){return uE(this.syncTree_,this.path_)}}const SV=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},XS=function(n,e,t){if(!n||typeof n!="object")return n;if(ye(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return CV(n[".sv"],e,t);if(typeof n[".sv"]=="object")return AV(n[".sv"],e);ye(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},CV=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ye(!1,"Unexpected server value: "+n)}},AV=function(n,e,t){n.hasOwnProperty("increment")||ye(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ye(!1,"Unexpected increment value: "+i);const s=e.node();if(ye(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const c=s.getValue();return typeof c!="number"?i:c+i},rx=function(n,e,t,i){return gE(e,new pE(t,n),i)},sx=function(n,e,t){return gE(n,new mE(e),t)};function gE(n,e,t){const i=n.getPriority().val(),s=XS(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,d=XS(c.getValue(),e,t);return d!==c.getValue()||s!==c.getPriority().val()?new Rn(d,_n(s)):n}else{const c=n;return a=c,s!==c.getPriority().val()&&(a=a.updatePriority(new Rn(s))),c.forEachChild(Gt,(d,f)=>{const p=gE(f,e.getImmediateChild(d),t);p!==f&&(a=a.updateImmediateChild(d,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function yE(n,e){let t=e instanceof At?e:new At(e),i=n,s=et(t);for(;s!==null;){const a=ec(i.node.children,s)||{children:{},childCount:0};i=new _E(s,i,a),t=Bt(t),s=et(t)}return i}function Tc(n){return n.node.value}function ox(n,e){n.node.value=e,Vy(n)}function ax(n){return n.node.childCount>0}function RV(n){return Tc(n)===void 0&&!ax(n)}function np(n,e){Bn(n.node.children,(t,i)=>{e(new _E(t,n,i))})}function lx(n,e,t,i){t&&e(n),np(n,s=>{lx(s,e,!0)})}function IV(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function qd(n){return new At(n.parent===null?n.name:qd(n.parent)+"/"+n.name)}function Vy(n){n.parent!==null&&xV(n.parent,n.name,n)}function xV(n,e,t){const i=RV(t),s=Gr(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,Vy(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Vy(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=/[\[\].#$\/\u0000-\u001F\u007F]/,kV=/[\[\].#$\u0000-\u001F\u007F]/,J_=10*1024*1024,vE=function(n){return typeof n=="string"&&n.length!==0&&!NV.test(n)},cx=function(n){return typeof n=="string"&&n.length!==0&&!kV.test(n)},OV=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cx(n)},jy=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Gv(n)||n&&typeof n=="object"&&Gr(n,".sv")},ux=function(n,e,t,i){i&&e===void 0||ip(Gm(n,"value"),e,t)},ip=function(n,e,t){const i=t instanceof At?new XU(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ba(i));if(typeof e=="function")throw new Error(n+"contains a function "+ba(i)+" with contents = "+e.toString());if(Gv(e))throw new Error(n+"contains "+e.toString()+" "+ba(i));if(typeof e=="string"&&e.length>J_/3&&$m(e)>J_)throw new Error(n+"contains a string greater than "+J_+" utf8 bytes "+ba(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,a=!1;if(Bn(e,(c,d)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!vE(c)))throw new Error(n+" contains an invalid key ("+c+") "+ba(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);JU(i,c),ip(n,d,i),ZU(i)}),s&&a)throw new Error(n+' contains ".value" child '+ba(i)+" in addition to actual children.")}},DV=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=hd(i);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!vE(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(WU);let s=null;for(t=0;t<e.length;t++){if(i=e[t],s!==null&&Ki(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},MV=function(n,e,t,i){const s=Gm(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const a=[];Bn(e,(c,d)=>{const f=new At(c);if(ip(s,d,Zt(t,f)),Wv(f)===".priority"&&!jy(d))throw new Error(s+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),DV(s,a)},EE=function(n,e,t,i){if(!cx(t))throw new Error(Gm(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},PV=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),EE(n,e,t)},TE=function(n,e){if(et(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},LV=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!vE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!OV(t))throw new Error(Gm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rp(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],a=s.getPath();t!==null&&!Xv(a,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:a}),t.events.push(s)}t&&n.eventLists_.push(t)}function dx(n,e,t){rp(n,t),hx(n,i=>Xv(i,e))}function Xi(n,e,t){rp(n,t),hx(n,i=>Ki(i,e)||Ki(e,i))}function hx(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const a=s.path;e(a)?(VV(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function VV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Qu&&Un("event: "+t.toString()),vc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="repo_interrupt",BV=25;class FV{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fm(),this.transactionQueueTree_=new _E,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zV(n,e,t){if(n.stats_=Qv(n.repoInfo_),n.forceRestClient_||TU())n.server_=new hm(n.repoInfo_,(i,s,a,c)=>{JS(n,i,s,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ZS(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Cs(n.repoInfo_,e,(i,s,a,c)=>{JS(n,i,s,a,c)},i=>{ZS(n,i)},i=>{qV(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=AU(n.repoInfo_,()=>new S4(n.stats_,n.server_)),n.infoData_=new v4,n.infoSyncTree_=new WS({startListening:(i,s,a,c)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=zd(n.infoSyncTree_,i._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),bE(n,"connected",!1),n.serverSyncTree_=new WS({startListening:(i,s,a,c)=>(n.server_.listen(i,a,s,(d,f)=>{const p=c(d,f);Xi(n.eventQueue_,i._path,p)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function fx(n){const t=n.infoData_.getNode(new At(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function sp(n){return SV({timestamp:fx(n)})}function JS(n,e,t,i,s){n.dataUpdateCount++;const a=new At(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(i){const f=tm(t,p=>_n(p));c=yV(n.serverSyncTree_,a,f,s)}else{const f=_n(t);c=ex(n.serverSyncTree_,a,f,s)}else if(i){const f=tm(t,p=>_n(p));c=pV(n.serverSyncTree_,a,f)}else{const f=_n(t);c=zd(n.serverSyncTree_,a,f)}let d=a;c.length>0&&(d=sc(n,a)),Xi(n.eventQueue_,d,c)}function ZS(n,e){bE(n,"connected",e),e===!1&&KV(n)}function qV(n,e){Bn(e,(t,i)=>{bE(n,t,i)})}function bE(n,e,t){const i=new At("/.info/"+e),s=_n(t);n.infoData_.updateSnapshot(i,s);const a=zd(n.infoSyncTree_,i,s);Xi(n.eventQueue_,i,a)}function wE(n){return n.nextWriteId_++}function HV(n,e,t){const i=vV(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{const a=_n(s).withIndex(e._queryParams.getIndex());Uy(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=zd(n.serverSyncTree_,e._path,a);else{const d=_d(n.serverSyncTree_,e);c=ex(n.serverSyncTree_,e._path,a,d)}return Xi(n.eventQueue_,e._path,c),Tm(n.serverSyncTree_,e,t,null,!0),a},s=>(Hd(n,"get for query "+yn(e)+" failed: "+s),Promise.reject(new Error(s))))}function GV(n,e,t,i,s){Hd(n,"set",{path:e.toString(),value:t,priority:i});const a=sp(n),c=_n(t,i),d=uE(n.serverSyncTree_,e),f=sx(c,d,a),p=wE(n),_=ZI(n.serverSyncTree_,e,f,p,!0);rp(n.eventQueue_,_),n.server_.put(e.toString(),c.val(!0),(T,R)=>{const S=T==="ok";S||ri("set at "+e+" failed: "+T);const D=To(n.serverSyncTree_,p,!S);Xi(n.eventQueue_,e,D),By(n,s,T,R)});const v=CE(n,e);sc(n,v),Xi(n.eventQueue_,v,[])}function $V(n,e,t,i){Hd(n,"update",{path:e.toString(),value:t});let s=!0;const a=sp(n),c={};if(Bn(t,(d,f)=>{s=!1,c[d]=rx(Zt(e,d),_n(f),n.serverSyncTree_,a)}),s)Un("update() called with empty data.  Don't do anything."),By(n,i,"ok",void 0);else{const d=wE(n),f=mV(n.serverSyncTree_,e,c,d);rp(n.eventQueue_,f),n.server_.merge(e.toString(),t,(p,_)=>{const v=p==="ok";v||ri("update at "+e+" failed: "+p);const T=To(n.serverSyncTree_,d,!v),R=T.length>0?sc(n,e):e;Xi(n.eventQueue_,R,T),By(n,i,p,_)}),Bn(t,p=>{const _=CE(n,Zt(e,p));sc(n,_)}),Xi(n.eventQueue_,e,[])}}function KV(n){Hd(n,"onDisconnectEvents");const e=sp(n),t=fm();ky(n.onDisconnect_,gt(),(s,a)=>{const c=rx(s,a,n.serverSyncTree_,e);VI(t,s,c)});let i=[];ky(t,gt(),(s,a)=>{i=i.concat(zd(n.serverSyncTree_,s,a));const c=CE(n,s);sc(n,c)}),n.onDisconnect_=fm(),Xi(n.eventQueue_,gt(),i)}function QV(n,e,t){let i;et(e._path)===".info"?i=Uy(n.infoSyncTree_,e,t):i=Uy(n.serverSyncTree_,e,t),dx(n.eventQueue_,e._path,i)}function YV(n,e,t){let i;et(e._path)===".info"?i=Tm(n.infoSyncTree_,e,t):i=Tm(n.serverSyncTree_,e,t),dx(n.eventQueue_,e._path,i)}function WV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(jV)}function Hd(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Un(t,...e)}function By(n,e,t,i){e&&vc(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let a=s;i&&(a+=": "+i);const c=new Error(a);c.code=s,e(c)}})}function mx(n,e,t){return uE(n.serverSyncTree_,e,t)||Ve.EMPTY_NODE}function SE(n,e=n.transactionQueueTree_){if(e||op(n,e),Tc(e)){const t=gx(n,e);ye(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&XV(n,qd(e),t)}else ax(e)&&np(e,t=>{SE(n,t)})}function XV(n,e,t){const i=t.map(p=>p.currentWriteId),s=mx(n,e,i);let a=s;const c=s.hash();for(let p=0;p<t.length;p++){const _=t[p];ye(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const v=ii(e,_.path);a=a.updateChild(v,_.currentOutputSnapshotRaw)}const d=a.val(!0),f=e;n.server_.put(f.toString(),d,p=>{Hd(n,"transaction put response",{path:f.toString(),status:p});let _=[];if(p==="ok"){const v=[];for(let T=0;T<t.length;T++)t[T].status=2,_=_.concat(To(n.serverSyncTree_,t[T].currentWriteId)),t[T].onComplete&&v.push(()=>t[T].onComplete(null,!0,t[T].currentOutputSnapshotResolved)),t[T].unwatcher();op(n,yE(n.transactionQueueTree_,e)),SE(n,n.transactionQueueTree_),Xi(n.eventQueue_,e,_);for(let T=0;T<v.length;T++)vc(v[T])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{ri("transaction at "+f.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}sc(n,e)}},c)}function sc(n,e){const t=px(n,e),i=qd(t),s=gx(n,t);return JV(n,s,i),i}function JV(n,e,t){if(e.length===0)return;const i=[];let s=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],p=ii(t,f.path);let _=!1,v;if(ye(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)_=!0,v=f.abortReason,s=s.concat(To(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=BV)_=!0,v="maxretry",s=s.concat(To(n.serverSyncTree_,f.currentWriteId,!0));else{const T=mx(n,f.path,c);f.currentInputSnapshot=T;const R=e[d].update(T.val());if(R!==void 0){ip("transaction failed: Data returned ",R,f.path);let S=_n(R);typeof R=="object"&&R!=null&&Gr(R,".priority")||(S=S.updatePriority(T.getPriority()));const k=f.currentWriteId,L=sp(n),B=sx(S,T,L);f.currentOutputSnapshotRaw=S,f.currentOutputSnapshotResolved=B,f.currentWriteId=wE(n),c.splice(c.indexOf(k),1),s=s.concat(ZI(n.serverSyncTree_,f.path,B,f.currentWriteId,f.applyLocally)),s=s.concat(To(n.serverSyncTree_,k,!0))}else _=!0,v="nodata",s=s.concat(To(n.serverSyncTree_,f.currentWriteId,!0))}Xi(n.eventQueue_,t,s),s=[],_&&(e[d].status=2,function(T){setTimeout(T,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(v==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(v),!1,null))))}op(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)vc(i[d]);SE(n,n.transactionQueueTree_)}function px(n,e){let t,i=n.transactionQueueTree_;for(t=et(e);t!==null&&Tc(i)===void 0;)i=yE(i,t),e=Bt(e),t=et(e);return i}function gx(n,e){const t=[];return _x(n,e,t),t.sort((i,s)=>i.order-s.order),t}function _x(n,e,t){const i=Tc(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);np(e,s=>{_x(n,s,t)})}function op(n,e){const t=Tc(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,ox(e,t.length>0?t:void 0)}np(e,i=>{op(n,i)})}function CE(n,e){const t=qd(px(n,e)),i=yE(n.transactionQueueTree_,e);return IV(i,s=>{Z_(n,s)}),Z_(n,i),lx(i,s=>{Z_(n,s)}),t}function Z_(n,e){const t=Tc(e);if(t){const i=[];let s=[],a=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(ye(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):(ye(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(To(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?ox(e,void 0):t.length=a+1,Xi(n.eventQueue_,qd(e),s);for(let c=0;c<i.length;c++)vc(i[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ej(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ri(`Invalid query segment '${t}' in query '${n}'`)}return e}const eC=function(n,e){const t=tj(n),i=t.namespace;t.domain==="firebase.com"&&Os(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Os("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||hU();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new EI(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new At(t.pathString)}},tj=function(n){let e="",t="",i="",s="",a="",c=!0,d="https",f=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(d=n.substring(0,p-1),n=n.substring(p+2));let _=n.indexOf("/");_===-1&&(_=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(_,v)),_<v&&(s=ZV(n.substring(_,v)));const T=ej(n.substring(Math.min(n.length,v)));p=e.indexOf(":"),p>=0?(c=d==="https"||d==="wss",f=parseInt(e.substring(p+1),10)):p=e.length;const R=e.slice(0,p);if(R.toLowerCase()==="localhost")t="localhost";else if(R.split(".").length<=2)t=R;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),t=e.substring(S+1),a=i}"ns"in T&&(a=T.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:c,scheme:d,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",nj=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let s;const a=new Array(8);for(s=7;s>=0;s--)a[s]=tC.charAt(t%64),t=Math.floor(t/64);ye(t===0,"Cannot push at time == 0");let c=a.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)c+=tC.charAt(e[s]);return ye(c.length===20,"nextPushId: Length should be 20."),c}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+yn(this.snapshot.exportVal())}}class rj{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ye(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return tt(this._path)?null:Wv(this._path)}get ref(){return new js(this._repo,this._path)}get _queryIdentifier(){const e=BS(this._queryParams),t=$v(e);return t==="{}"?"default":t}get _queryObject(){return BS(this._queryParams)}isEqual(e){if(e=Ot(e),!(e instanceof ap))return!1;const t=this._repo===e._repo,i=Xv(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+YU(this._path)}}function sj(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function oj(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ia){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Oa)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==Oo)throw new Error(i);if(typeof t!="string")throw new Error(s)}}else if(n.getIndex()===Gt){if(e!=null&&!jy(e)||t!=null&&!jy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ye(n.getIndex()instanceof eE||n.getIndex()===LI,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class js extends ap{constructor(e,t){super(e,t,new nE,!1)}get parent(){const e=xI(this._path);return e===null?null:new js(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class yd{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new At(e),i=vd(this.ref,e);return new yd(this._node.getChild(t),i,Gt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new yd(s,vd(this.ref,i),Gt)))}hasChild(e){const t=new At(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ke(n,e){return n=Ot(n),n._checkNotDeleted("ref"),e!==void 0?vd(n._root,e):n._root}function vd(n,e){return n=Ot(n),et(n._path)===null?PV("child","path",e):EE("child","path",e),new js(n._repo,Zt(n._path,e))}function lr(n,e){n=Ot(n),TE("push",n._path),ux("push",e,n._path,!0);const t=fx(n._repo),i=nj(t),s=vd(n,i),a=vd(n,i);let c;return e!=null?c=Qi(a,e).then(()=>a):c=Promise.resolve(a),s.then=c.then.bind(c),s.catch=c.then.bind(c,void 0),s}function Pn(n){return TE("remove",n._path),Qi(n,null)}function Qi(n,e){n=Ot(n),TE("set",n._path),ux("set",e,n._path,!1);const t=new Md;return GV(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function lp(n,e){MV("update",e,n._path);const t=new Md;return $V(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function or(n){n=Ot(n);const e=new yx(()=>{}),t=new cp(e);return HV(n._repo,n,t).then(i=>new yd(i,new js(n._repo,n._path),n._queryParams.getIndex()))}class cp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new ij("value",this,new yd(e.snapshotNode,new js(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new rj(this,e,t):null}matches(e){return e instanceof cp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function aj(n,e,t,i,s){const a=new yx(t,void 0),c=new cp(a);return QV(n._repo,n,c),()=>YV(n._repo,n,c)}function oc(n,e,t,i){return aj(n,"value",e)}let lj=class{};class cj extends lj{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){sj(e,"orderByChild");const t=new At(this._path);if(tt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new eE(t),s=y4(e._queryParams,i);return oj(s),new ap(e._repo,e._path,s,!0)}}function Fy(n){return EE("orderByChild","path",n),new cj(n)}function zy(n,...e){let t=Ot(n);for(const i of e)t=i._apply(t);return t}oV(js);dV(js);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="FIREBASE_DATABASE_EMULATOR_HOST",qy={};let dj=!1;function hj(n,e,t,i){const s=e.lastIndexOf(":"),a=e.substring(0,s),c=Vs(a);n.repoInfo_=new EI(e,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function fj(n,e,t,i,s){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||Os("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Un("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=eC(a,s),d=c.repoInfo,f;typeof process<"u"&&bS&&(f=bS[uj]),f?(a=`http://${f}?ns=${d.namespace}`,c=eC(a,s),d=c.repoInfo):c.repoInfo.secure;const p=new wU(n.name,n.options,e);LV("Invalid Firebase Database URL",c),tt(c.path)||Os("Database URL must point to the root of a Firebase Database (not including a child path).");const _=pj(d,n,p,new bU(n,t));return new gj(_,n)}function mj(n,e){const t=qy[e];(!t||t[n.key]!==n)&&Os(`Database ${e}(${n.repoInfo_}) has already been deleted.`),WV(n),delete t[n.key]}function pj(n,e,t,i){let s=qy[e.name];s||(s={},qy[e.name]=s);let a=s[n.toURLString()];return a&&Os("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new FV(n,dj,t,i),s[n.toURLString()]=a,a}class gj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(zV(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new js(this._repo,gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(mj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Os("Cannot call "+e+" on a deleted database.")}}function Oe(n=Pd(),e){const t=zo(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=kv("database");i&&_j(t,...i)}return t}function _j(n,e,t,i={}){n=Ot(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,a=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ko(i,a.repoInfo_.emulatorOptions))return;Os("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&Os('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new jf(jf.OWNER);else if(i.mockUserToken){const d=typeof i.mockUserToken=="string"?i.mockUserToken:Ov(i.mockUserToken,n.app.options.projectId);c=new jf(d)}Vs(e)&&(qm(e),Hm("Database",!0)),hj(a,s,i,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(n){oU(qo),Wi(new Ni("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return fj(i,s,a,t)},"PUBLIC").setMultipleInstances(!0)),Yn(wS,SS,n),Yn(wS,SS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj={".sv":"timestamp"};function mo(){return vj}Cs.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Cs.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};yj();var Ej="firebase",Tj="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(Ej,Tj,"app");const vx="@firebase/installations",AE="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=1e4,Tx=`w:${AE}`,bx="FIS_v2",bj="https://firebaseinstallations.googleapis.com/v1",wj=60*60*1e3,Sj="installations",Cj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pa=new za(Sj,Cj,Aj);function wx(n){return n instanceof mr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx({projectId:n}){return`${bj}/projects/${n}/installations`}function Cx(n){return{token:n.token,requestStatus:2,expiresIn:Ij(n.expiresIn),creationTime:Date.now()}}async function Ax(n,e){const i=(await e.json()).error;return Pa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Rx({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Rj(n,{refreshToken:e}){const t=Rx(n);return t.append("Authorization",xj(e)),t}async function Ix(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Ij(n){return Number(n.replace("s","000"))}function xj(n){return`${bx} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Sx(n),s=Rx(n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const c={fid:t,authVersion:bx,appId:n.appId,sdkVersion:Tx},d={method:"POST",headers:s,body:JSON.stringify(c)},f=await Ix(()=>fetch(i,d));if(f.ok){const p=await f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:Cx(p.authToken)}}else throw await Ax("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=/^[cdef][\w-]{21}$/,Hy="";function Dj(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Mj(n);return Oj.test(t)?t:Hy}catch{return Hy}}function Mj(n){return kj(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=new Map;function kx(n,e){const t=up(n);Ox(t,e),Pj(t,e)}function Ox(n,e){const t=Nx.get(n);if(t)for(const i of t)i(e)}function Pj(n,e){const t=Lj();t&&t.postMessage({key:n,fid:e}),Uj()}let Sa=null;function Lj(){return!Sa&&"BroadcastChannel"in self&&(Sa=new BroadcastChannel("[Firebase] FID Change"),Sa.onmessage=n=>{Ox(n.data.key,n.data.fid)}),Sa}function Uj(){Nx.size===0&&Sa&&(Sa.close(),Sa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj="firebase-installations-database",jj=1,La="firebase-installations-store";let ey=null;function RE(){return ey||(ey=Qm(Vj,jj,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(La)}}})),ey}async function bm(n,e){const t=up(n),s=(await RE()).transaction(La,"readwrite"),a=s.objectStore(La),c=await a.get(t);return await a.put(e,t),await s.done,(!c||c.fid!==e.fid)&&kx(n,e.fid),e}async function Dx(n){const e=up(n),i=(await RE()).transaction(La,"readwrite");await i.objectStore(La).delete(e),await i.done}async function dp(n,e){const t=up(n),s=(await RE()).transaction(La,"readwrite"),a=s.objectStore(La),c=await a.get(t),d=e(c);return d===void 0?await a.delete(t):await a.put(d,t),await s.done,d&&(!c||c.fid!==d.fid)&&kx(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(n){let e;const t=await dp(n.appConfig,i=>{const s=Bj(i),a=Fj(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===Hy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Bj(n){const e=n||{fid:Dj(),registrationStatus:0};return Mx(e)}function Fj(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Pa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=zj(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qj(n)}:{installationEntry:e}}async function zj(n,e){try{const t=await Nj(n,e);return bm(n.appConfig,t)}catch(t){throw wx(t)&&t.customData.serverCode===409?await Dx(n.appConfig):await bm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function qj(n){let e=await nC(n.appConfig);for(;e.registrationStatus===1;)await xx(100),e=await nC(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await IE(n);return i||t}return e}function nC(n){return dp(n,e=>{if(!e)throw Pa.create("installation-not-found");return Mx(e)})}function Mx(n){return Hj(n)?{fid:n.fid,registrationStatus:0}:n}function Hj(n){return n.registrationStatus===1&&n.registrationTime+Ex<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj({appConfig:n,heartbeatServiceProvider:e},t){const i=$j(n,t),s=Rj(n,t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const c={installation:{sdkVersion:Tx,appId:n.appId}},d={method:"POST",headers:s,body:JSON.stringify(c)},f=await Ix(()=>fetch(i,d));if(f.ok){const p=await f.json();return Cx(p)}else throw await Ax("Generate Auth Token",f)}function $j(n,{fid:e}){return`${Sx(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(n,e=!1){let t;const i=await dp(n.appConfig,a=>{if(!Px(a))throw Pa.create("not-registered");const c=a.authToken;if(!e&&Yj(c))return a;if(c.requestStatus===1)return t=Kj(n,e),a;{if(!navigator.onLine)throw Pa.create("app-offline");const d=Xj(a);return t=Qj(n,d),d}});return t?await t:i.authToken}async function Kj(n,e){let t=await iC(n.appConfig);for(;t.authToken.requestStatus===1;)await xx(100),t=await iC(n.appConfig);const i=t.authToken;return i.requestStatus===0?xE(n,e):i}function iC(n){return dp(n,e=>{if(!Px(e))throw Pa.create("not-registered");const t=e.authToken;return Jj(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Qj(n,e){try{const t=await Gj(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await bm(n.appConfig,i),t}catch(t){if(wx(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Dx(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await bm(n.appConfig,i)}throw t}}function Px(n){return n!==void 0&&n.registrationStatus===2}function Yj(n){return n.requestStatus===2&&!Wj(n)}function Wj(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+wj}function Xj(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Jj(n){return n.requestStatus===1&&n.requestTime+Ex<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(n){const e=n,{installationEntry:t,registrationPromise:i}=await IE(e);return i?i.catch(console.error):xE(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3(n,e=!1){const t=n;return await t3(t),(await xE(t,e)).token}async function t3(n){const{registrationPromise:e}=await IE(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n){if(!n||!n.options)throw ty("App Configuration");if(!n.name)throw ty("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ty(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ty(n){return Pa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="installations",i3="installations-internal",r3=n=>{const e=n.getProvider("app").getImmediate(),t=n3(e),i=zo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},s3=n=>{const e=n.getProvider("app").getImmediate(),t=zo(e,Lx).getImmediate();return{getId:()=>Zj(t),getToken:s=>e3(t,s)}};function o3(){Wi(new Ni(Lx,r3,"PUBLIC")),Wi(new Ni(i3,s3,"PRIVATE"))}o3();Yn(vx,AE);Yn(vx,AE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="/firebase-messaging-sw.js",l3="/firebase-cloud-messaging-push-scope",Ux="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",c3="https://fcmregistrations.googleapis.com/v1",Vx="google.c.a.c_id",u3="google.c.a.c_l",d3="google.c.a.ts",h3="google.c.a.e",rC=1e4;var sC;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(sC||(sC={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ed;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Ed||(Ed={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f3(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),s=new Uint8Array(i.length);for(let a=0;a<i.length;++a)s[a]=i.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="fcm_token_details_db",m3=5,oC="fcm_token_object_Store";async function p3(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(ny))return null;let e=null;return(await Qm(ny,m3,{upgrade:async(i,s,a,c)=>{var d;if(s<2||!i.objectStoreNames.contains(oC))return;const f=c.objectStore(oC),p=await f.index("fcmSenderId").get(n);if(await f.clear(),!!p){if(s===2){const _=p;if(!_.auth||!_.p256dh||!_.endpoint)return;e={token:_.fcmToken,createTime:(d=_.createTime)!==null&&d!==void 0?d:Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:_s(_.vapidKey)}}}else if(s===3){const _=p;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:_s(_.auth),p256dh:_s(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:_s(_.vapidKey)}}}else if(s===4){const _=p;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:_s(_.auth),p256dh:_s(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:_s(_.vapidKey)}}}}}})).close(),await z_(ny),await z_("fcm_vapid_details_db"),await z_("undefined"),g3(e)?e:null}function g3(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3="firebase-messaging-database",y3=1,Td="firebase-messaging-store";let iy=null;function jx(){return iy||(iy=Qm(_3,y3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Td)}}})),iy}async function v3(n){const e=Bx(n),i=await(await jx()).transaction(Td).objectStore(Td).get(e);if(i)return i;{const s=await p3(n.appConfig.senderId);if(s)return await NE(n,s),s}}async function NE(n,e){const t=Bx(n),s=(await jx()).transaction(Td,"readwrite");return await s.objectStore(Td).put(e,t),await s.done,e}function Bx({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},si=new za("messaging","Messaging",E3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T3(n,e){const t=await OE(n),i=Fx(e),s={method:"POST",headers:t,body:JSON.stringify(i)};let a;try{a=await(await fetch(kE(n.appConfig),s)).json()}catch(c){throw si.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw si.create("token-subscribe-failed",{errorInfo:c})}if(!a.token)throw si.create("token-subscribe-no-token");return a.token}async function b3(n,e){const t=await OE(n),i=Fx(e.subscriptionOptions),s={method:"PATCH",headers:t,body:JSON.stringify(i)};let a;try{a=await(await fetch(`${kE(n.appConfig)}/${e.token}`,s)).json()}catch(c){throw si.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw si.create("token-update-failed",{errorInfo:c})}if(!a.token)throw si.create("token-update-no-token");return a.token}async function w3(n,e){const i={method:"DELETE",headers:await OE(n)};try{const a=await(await fetch(`${kE(n.appConfig)}/${e}`,i)).json();if(a.error){const c=a.error.message;throw si.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw si.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function kE({projectId:n}){return`${c3}/projects/${n}/registrations`}async function OE({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function Fx({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const s={web:{endpoint:t,auth:e,p256dh:n}};return i!==Ux&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=7*24*60*60*1e3;async function C3(n){const e=await R3(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:_s(e.getKey("auth")),p256dh:_s(e.getKey("p256dh"))},i=await v3(n.firebaseDependencies);if(i){if(I3(i.subscriptionOptions,t))return Date.now()>=i.createTime+S3?A3(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await w3(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return aC(n.firebaseDependencies,t)}else return aC(n.firebaseDependencies,t)}async function A3(n,e){try{const t=await b3(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await NE(n.firebaseDependencies,i),t}catch(t){throw t}}async function aC(n,e){const i={token:await T3(n,e),createTime:Date.now(),subscriptionOptions:e};return await NE(n,i),i.token}async function R3(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:f3(e)})}function I3(n,e){const t=e.vapidKey===n.vapidKey,i=e.endpoint===n.endpoint,s=e.auth===n.auth,a=e.p256dh===n.p256dh;return t&&i&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return x3(e,n),N3(e,n),k3(e,n),e}function x3(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const s=e.notification.image;s&&(n.notification.image=s);const a=e.notification.icon;a&&(n.notification.icon=a)}function N3(n,e){e.data&&(n.data=e.data)}function k3(n,e){var t,i,s,a,c;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const d=(s=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;d&&(n.fcmOptions.link=d);const f=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;f&&(n.fcmOptions.analyticsLabel=f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(n){return typeof n=="object"&&!!n&&Vx in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(n){if(!n||!n.options)throw ry("App Configuration Object");if(!n.name)throw ry("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw ry(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ry(n){return si.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=D3(e);this.firebaseDependencies={app:e,appConfig:s,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3(n){try{n.swRegistration=await navigator.serviceWorker.register(a3,{scope:l3}),n.swRegistration.update().catch(()=>{}),await L3(n.swRegistration)}catch(e){throw si.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function L3(n){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${rC} ms`)),rC),s=n.installing||n.waiting;n.active?(clearTimeout(i),e()):s?s.onstatechange=a=>{var c;((c=a.target)===null||c===void 0?void 0:c.state)==="activated"&&(s.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(n,e){if(!e&&!n.swRegistration&&await P3(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw si.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Ux)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(n,e){if(!navigator)throw si.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw si.create("permission-blocked");return await V3(n,e==null?void 0:e.vapidKey),await U3(n,e==null?void 0:e.serviceWorkerRegistration),C3(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(n,e,t){const i=B3(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[Vx],message_name:t[u3],message_time:t[d3],message_device_time:Math.floor(Date.now()/1e3)})}function B3(n){switch(n){case Ed.NOTIFICATION_CLICKED:return"notification_open";case Ed.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Ed.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(lC(t)):n.onMessageHandler.next(lC(t)));const i=t.data;O3(i)&&i[h3]==="1"&&await j3(n,t.messageType,i)}const cC="@firebase/messaging",uC="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=n=>{const e=new M3(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>F3(e,t)),e},q3=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>zx(e,i)}};function H3(){Wi(new Ni("messaging",z3,"PUBLIC")),Wi(new Ni("messaging-internal",q3,"PRIVATE")),Yn(cC,uC),Yn(cC,uC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(){try{await bR()}catch{return!1}return typeof window<"u"&&TR()&&GM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n=Pd()){return G3().then(e=>{if(!e)throw si.create("unsupported-browser")},e=>{throw si.create("indexed-db-unsupported")}),zo(Ot(n),"messaging").getImmediate()}async function K3(n,e){return n=Ot(n),zx(n,e)}H3();var dC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,qx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function x(){}x.prototype=A.prototype,N.D=A.prototype,N.prototype=new x,N.prototype.constructor=N,N.C=function(O,U,q){for(var M=Array(arguments.length-2),it=2;it<arguments.length;it++)M[it-2]=arguments[it];return A.prototype[U].apply(O,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,A,x){x||(x=0);var O=Array(16);if(typeof A=="string")for(var U=0;16>U;++U)O[U]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(U=0;16>U;++U)O[U]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=N.g[0],x=N.g[1],U=N.g[2];var q=N.g[3],M=A+(q^x&(U^q))+O[0]+3614090360&4294967295;A=x+(M<<7&4294967295|M>>>25),M=q+(U^A&(x^U))+O[1]+3905402710&4294967295,q=A+(M<<12&4294967295|M>>>20),M=U+(x^q&(A^x))+O[2]+606105819&4294967295,U=q+(M<<17&4294967295|M>>>15),M=x+(A^U&(q^A))+O[3]+3250441966&4294967295,x=U+(M<<22&4294967295|M>>>10),M=A+(q^x&(U^q))+O[4]+4118548399&4294967295,A=x+(M<<7&4294967295|M>>>25),M=q+(U^A&(x^U))+O[5]+1200080426&4294967295,q=A+(M<<12&4294967295|M>>>20),M=U+(x^q&(A^x))+O[6]+2821735955&4294967295,U=q+(M<<17&4294967295|M>>>15),M=x+(A^U&(q^A))+O[7]+4249261313&4294967295,x=U+(M<<22&4294967295|M>>>10),M=A+(q^x&(U^q))+O[8]+1770035416&4294967295,A=x+(M<<7&4294967295|M>>>25),M=q+(U^A&(x^U))+O[9]+2336552879&4294967295,q=A+(M<<12&4294967295|M>>>20),M=U+(x^q&(A^x))+O[10]+4294925233&4294967295,U=q+(M<<17&4294967295|M>>>15),M=x+(A^U&(q^A))+O[11]+2304563134&4294967295,x=U+(M<<22&4294967295|M>>>10),M=A+(q^x&(U^q))+O[12]+1804603682&4294967295,A=x+(M<<7&4294967295|M>>>25),M=q+(U^A&(x^U))+O[13]+4254626195&4294967295,q=A+(M<<12&4294967295|M>>>20),M=U+(x^q&(A^x))+O[14]+2792965006&4294967295,U=q+(M<<17&4294967295|M>>>15),M=x+(A^U&(q^A))+O[15]+1236535329&4294967295,x=U+(M<<22&4294967295|M>>>10),M=A+(U^q&(x^U))+O[1]+4129170786&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^U&(A^x))+O[6]+3225465664&4294967295,q=A+(M<<9&4294967295|M>>>23),M=U+(A^x&(q^A))+O[11]+643717713&4294967295,U=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(U^q))+O[0]+3921069994&4294967295,x=U+(M<<20&4294967295|M>>>12),M=A+(U^q&(x^U))+O[5]+3593408605&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^U&(A^x))+O[10]+38016083&4294967295,q=A+(M<<9&4294967295|M>>>23),M=U+(A^x&(q^A))+O[15]+3634488961&4294967295,U=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(U^q))+O[4]+3889429448&4294967295,x=U+(M<<20&4294967295|M>>>12),M=A+(U^q&(x^U))+O[9]+568446438&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^U&(A^x))+O[14]+3275163606&4294967295,q=A+(M<<9&4294967295|M>>>23),M=U+(A^x&(q^A))+O[3]+4107603335&4294967295,U=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(U^q))+O[8]+1163531501&4294967295,x=U+(M<<20&4294967295|M>>>12),M=A+(U^q&(x^U))+O[13]+2850285829&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^U&(A^x))+O[2]+4243563512&4294967295,q=A+(M<<9&4294967295|M>>>23),M=U+(A^x&(q^A))+O[7]+1735328473&4294967295,U=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(U^q))+O[12]+2368359562&4294967295,x=U+(M<<20&4294967295|M>>>12),M=A+(x^U^q)+O[5]+4294588738&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^U)+O[8]+2272392833&4294967295,q=A+(M<<11&4294967295|M>>>21),M=U+(q^A^x)+O[11]+1839030562&4294967295,U=q+(M<<16&4294967295|M>>>16),M=x+(U^q^A)+O[14]+4259657740&4294967295,x=U+(M<<23&4294967295|M>>>9),M=A+(x^U^q)+O[1]+2763975236&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^U)+O[4]+1272893353&4294967295,q=A+(M<<11&4294967295|M>>>21),M=U+(q^A^x)+O[7]+4139469664&4294967295,U=q+(M<<16&4294967295|M>>>16),M=x+(U^q^A)+O[10]+3200236656&4294967295,x=U+(M<<23&4294967295|M>>>9),M=A+(x^U^q)+O[13]+681279174&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^U)+O[0]+3936430074&4294967295,q=A+(M<<11&4294967295|M>>>21),M=U+(q^A^x)+O[3]+3572445317&4294967295,U=q+(M<<16&4294967295|M>>>16),M=x+(U^q^A)+O[6]+76029189&4294967295,x=U+(M<<23&4294967295|M>>>9),M=A+(x^U^q)+O[9]+3654602809&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^U)+O[12]+3873151461&4294967295,q=A+(M<<11&4294967295|M>>>21),M=U+(q^A^x)+O[15]+530742520&4294967295,U=q+(M<<16&4294967295|M>>>16),M=x+(U^q^A)+O[2]+3299628645&4294967295,x=U+(M<<23&4294967295|M>>>9),M=A+(U^(x|~q))+O[0]+4096336452&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~U))+O[7]+1126891415&4294967295,q=A+(M<<10&4294967295|M>>>22),M=U+(A^(q|~x))+O[14]+2878612391&4294967295,U=q+(M<<15&4294967295|M>>>17),M=x+(q^(U|~A))+O[5]+4237533241&4294967295,x=U+(M<<21&4294967295|M>>>11),M=A+(U^(x|~q))+O[12]+1700485571&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~U))+O[3]+2399980690&4294967295,q=A+(M<<10&4294967295|M>>>22),M=U+(A^(q|~x))+O[10]+4293915773&4294967295,U=q+(M<<15&4294967295|M>>>17),M=x+(q^(U|~A))+O[1]+2240044497&4294967295,x=U+(M<<21&4294967295|M>>>11),M=A+(U^(x|~q))+O[8]+1873313359&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~U))+O[15]+4264355552&4294967295,q=A+(M<<10&4294967295|M>>>22),M=U+(A^(q|~x))+O[6]+2734768916&4294967295,U=q+(M<<15&4294967295|M>>>17),M=x+(q^(U|~A))+O[13]+1309151649&4294967295,x=U+(M<<21&4294967295|M>>>11),M=A+(U^(x|~q))+O[4]+4149444226&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~U))+O[11]+3174756917&4294967295,q=A+(M<<10&4294967295|M>>>22),M=U+(A^(q|~x))+O[2]+718787259&4294967295,U=q+(M<<15&4294967295|M>>>17),M=x+(q^(U|~A))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(U+(M<<21&4294967295|M>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var x=A-this.blockSize,O=this.B,U=this.h,q=0;q<A;){if(U==0)for(;q<=x;)s(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<A;)if(O[U++]=N.charCodeAt(q++),U==this.blockSize){s(this,O),U=0;break}}else for(;q<A;)if(O[U++]=N[q++],U==this.blockSize){s(this,O),U=0;break}}this.h=U,this.o+=A},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var x=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=x&255,x/=256;for(this.u(N),N=Array(16),A=x=0;4>A;++A)for(var O=0;32>O;O+=8)N[x++]=this.g[A]>>>O&255;return N};function a(N,A){var x=d;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=A(N)}function c(N,A){this.h=A;for(var x=[],O=!0,U=N.length-1;0<=U;U--){var q=N[U]|0;O&&q==A||(x[U]=q,O=!1)}this.g=x}var d={};function f(N){return-128<=N&&128>N?a(N,function(A){return new c([A|0],0>A?-1:0)}):new c([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return k(p(-N));for(var A=[],x=1,O=0;N>=x;O++)A[O]=N/x|0,x*=4294967296;return new c(A,0)}function _(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return k(_(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(A,8)),O=v,U=0;U<N.length;U+=8){var q=Math.min(8,N.length-U),M=parseInt(N.substring(U,U+q),A);8>q?(q=p(Math.pow(A,q)),O=O.j(q).add(p(M))):(O=O.j(x),O=O.add(p(M)))}return O}var v=f(0),T=f(1),R=f(16777216);n=c.prototype,n.m=function(){if(D(this))return-k(this).m();for(var N=0,A=1,x=0;x<this.g.length;x++){var O=this.i(x);N+=(0<=O?O:4294967296+O)*A,A*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(S(this))return"0";if(D(this))return"-"+k(this).toString(N);for(var A=p(Math.pow(N,6)),x=this,O="";;){var U=K(x,A).g;x=L(x,U.j(A));var q=((0<x.g.length?x.g[0]:x.h)>>>0).toString(N);if(x=U,S(x))return q+O;for(;6>q.length;)q="0"+q;O=q+O}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function S(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function D(N){return N.h==-1}n.l=function(N){return N=L(this,N),D(N)?-1:S(N)?0:1};function k(N){for(var A=N.g.length,x=[],O=0;O<A;O++)x[O]=~N.g[O];return new c(x,~N.h).add(T)}n.abs=function(){return D(this)?k(this):this},n.add=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],O=0,U=0;U<=A;U++){var q=O+(this.i(U)&65535)+(N.i(U)&65535),M=(q>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);O=M>>>16,q&=65535,M&=65535,x[U]=M<<16|q}return new c(x,x[x.length-1]&-2147483648?-1:0)};function L(N,A){return N.add(k(A))}n.j=function(N){if(S(this)||S(N))return v;if(D(this))return D(N)?k(this).j(k(N)):k(k(this).j(N));if(D(N))return k(this.j(k(N)));if(0>this.l(R)&&0>N.l(R))return p(this.m()*N.m());for(var A=this.g.length+N.g.length,x=[],O=0;O<2*A;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var U=0;U<N.g.length;U++){var q=this.i(O)>>>16,M=this.i(O)&65535,it=N.i(U)>>>16,_t=N.i(U)&65535;x[2*O+2*U]+=M*_t,B(x,2*O+2*U),x[2*O+2*U+1]+=q*_t,B(x,2*O+2*U+1),x[2*O+2*U+1]+=M*it,B(x,2*O+2*U+1),x[2*O+2*U+2]+=q*it,B(x,2*O+2*U+2)}for(O=0;O<A;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=A;O<2*A;O++)x[O]=0;return new c(x,0)};function B(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function z(N,A){this.g=N,this.h=A}function K(N,A){if(S(A))throw Error("division by zero");if(S(N))return new z(v,v);if(D(N))return A=K(k(N),A),new z(k(A.g),k(A.h));if(D(A))return A=K(N,k(A)),new z(k(A.g),A.h);if(30<N.g.length){if(D(N)||D(A))throw Error("slowDivide_ only works with positive integers.");for(var x=T,O=A;0>=O.l(N);)x=te(x),O=te(O);var U=pe(x,1),q=pe(O,1);for(O=pe(O,2),x=pe(x,2);!S(O);){var M=q.add(O);0>=M.l(N)&&(U=U.add(x),q=M),O=pe(O,1),x=pe(x,1)}return A=L(N,U.j(A)),new z(U,A)}for(U=v;0<=N.l(A);){for(x=Math.max(1,Math.floor(N.m()/A.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),q=p(x),M=q.j(A);D(M)||0<M.l(N);)x-=O,q=p(x),M=q.j(A);S(q)&&(q=T),U=U.add(q),N=L(N,M)}return new z(U,N)}n.A=function(N){return K(this,N).h},n.and=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],O=0;O<A;O++)x[O]=this.i(O)&N.i(O);return new c(x,this.h&N.h)},n.or=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],O=0;O<A;O++)x[O]=this.i(O)|N.i(O);return new c(x,this.h|N.h)},n.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),x=[],O=0;O<A;O++)x[O]=this.i(O)^N.i(O);return new c(x,this.h^N.h)};function te(N){for(var A=N.g.length+1,x=[],O=0;O<A;O++)x[O]=N.i(O)<<1|N.i(O-1)>>>31;return new c(x,N.h)}function pe(N,A){var x=A>>5;A%=32;for(var O=N.g.length-x,U=[],q=0;q<O;q++)U[q]=0<A?N.i(q+x)>>>A|N.i(q+x+1)<<32-A:N.i(q+x);return new c(U,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,qx=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,Ao=c}).apply(typeof dC<"u"?dC:typeof self<"u"?self:typeof window<"u"?window:{});var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hx,qu,Gx,Ff,Gy,$x,Kx,Qx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,b){return h==Array.prototype||h==Object.prototype||(h[y]=b.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cf=="object"&&Cf];for(var y=0;y<h.length;++y){var b=h[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function s(h,y){if(y)e:{var b=i;h=h.split(".");for(var I=0;I<h.length-1;I++){var Q=h[I];if(!(Q in b))break e;b=b[Q]}h=h[h.length-1],I=b[h],y=y(I),y!=I&&y!=null&&e(b,h,{configurable:!0,writable:!0,value:y})}}function a(h,y){h instanceof String&&(h+="");var b=0,I=!1,Q={next:function(){if(!I&&b<h.length){var ne=b++;return{value:y(ne,h[ne]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}s("Array.prototype.values",function(h){return h||function(){return a(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,b){return h.call.apply(h.bind,arguments)}function v(h,y,b){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,I),h.apply(y,Q)}}return function(){return h.apply(y,arguments)}}function T(h,y,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,T.apply(null,arguments)}function R(h,y){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function S(h,y){function b(){}b.prototype=y.prototype,h.aa=y.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(I,Q,ne){for(var Ee=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Ee[ut-2]=arguments[ut];return y.prototype[Q].apply(I,Ee)}}function D(h){const y=h.length;if(0<y){const b=Array(y);for(let I=0;I<y;I++)b[I]=h[I];return b}return[]}function k(h,y){for(let b=1;b<arguments.length;b++){const I=arguments[b];if(f(I)){const Q=h.length||0,ne=I.length||0;h.length=Q+ne;for(let Ee=0;Ee<ne;Ee++)h[Q+Ee]=I[Ee]}else h.push(I)}}class L{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function B(h){return/^[\s\xa0]*$/.test(h)}function z(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function K(h){return K[" "](h),h}K[" "]=function(){};var te=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function pe(h,y,b){for(const I in h)y.call(b,h[I],I,h)}function N(h,y){for(const b in h)y.call(void 0,h[b],b,h)}function A(h){const y={};for(const b in h)y[b]=h[b];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let b,I;for(let Q=1;Q<arguments.length;Q++){I=arguments[Q];for(b in I)h[b]=I[b];for(let ne=0;ne<x.length;ne++)b=x[ne],Object.prototype.hasOwnProperty.call(I,b)&&(h[b]=I[b])}}function U(h){var y=1;h=h.split(":");const b=[];for(;0<y&&h.length;)b.push(h.shift()),y--;return h.length&&b.push(h.join(":")),b}function q(h){d.setTimeout(()=>{throw h},0)}function M(){var h=rt;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class it{constructor(){this.h=this.g=null}add(y,b){const I=_t.get();I.set(y,b),this.h?this.h.next=I:this.g=I,this.h=I}}var _t=new L(()=>new se,h=>h.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,xe=!1,rt=new it,j=()=>{const h=d.Promise.resolve(void 0);Te=()=>{h.then(ue)}};var ue=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(b){q(b)}var y=_t;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}xe=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};d.addEventListener("test",b,y),d.removeEventListener("test",b,y)}catch{}return h}();function _e(h,y){if(H.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(te){e:{try{K(y.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(y=null)}}else b=="mouseover"?y=h.fromElement:b=="mouseout"&&(y=h.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Z[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&_e.aa.h.call(this)}}S(_e,H);var Z={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),ae=0;function be(h,y,b,I,Q){this.listener=h,this.proxy=null,this.src=y,this.type=b,this.capture=!!I,this.ha=Q,this.key=++ae,this.da=this.fa=!1}function Xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ct(h){this.src=h,this.g={},this.h=0}ct.prototype.add=function(h,y,b,I,Q){var ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);var Ee=oi(h,y,I,Q);return-1<Ee?(y=h[Ee],b||(y.fa=!1)):(y=new be(y,this.src,ne,!!I,Q),y.fa=b,h.push(y)),y};function xn(h,y){var b=y.type;if(b in h.g){var I=h.g[b],Q=Array.prototype.indexOf.call(I,y,void 0),ne;(ne=0<=Q)&&Array.prototype.splice.call(I,Q,1),ne&&(Xe(y),h.g[b].length==0&&(delete h.g[b],h.h--))}}function oi(h,y,b,I){for(var Q=0;Q<h.length;++Q){var ne=h[Q];if(!ne.da&&ne.listener==y&&ne.capture==!!b&&ne.ha==I)return Q}return-1}var Ji="closure_lm_"+(1e6*Math.random()|0),gr={};function ai(h,y,b,I,Q){if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)ai(h,y[ne],b,I,Q);return null}return b=Ce(b),h&&h[ce]?h.K(y,b,p(I)?!!I.capture:!1,Q):li(h,y,b,!1,I,Q)}function li(h,y,b,I,Q,ne){if(!y)throw Error("Invalid event type");var Ee=p(Q)?!!Q.capture:!!Q,ut=G(h);if(ut||(h[Ji]=ut=new ct(h)),b=ut.add(y,b,I,Ee,ne),b.proxy)return b;if(I=kc(),b.proxy=I,I.src=h,I.listener=b,h.addEventListener)ge||(Q=Ee),Q===void 0&&(Q=!1),h.addEventListener(y.toString(),I,Q);else if(h.attachEvent)h.attachEvent($r(y.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function kc(){function h(b){return y.call(h.src,h.listener,b)}const y=J;return h}function Ho(h,y,b,I,Q){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)Ho(h,y[ne],b,I,Q);else I=p(I)?!!I.capture:!!I,b=Ce(b),h&&h[ce]?(h=h.i,y=String(y).toString(),y in h.g&&(ne=h.g[y],b=oi(ne,b,I,Q),-1<b&&(Xe(ne[b]),Array.prototype.splice.call(ne,b,1),ne.length==0&&(delete h.g[y],h.h--)))):h&&(h=G(h))&&(y=h.g[y.toString()],h=-1,y&&(h=oi(y,b,I,Q)),(b=-1<h?y[h]:null)&&Bs(b))}function Bs(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ce])xn(y.i,h);else{var b=h.type,I=h.proxy;y.removeEventListener?y.removeEventListener(b,I,h.capture):y.detachEvent?y.detachEvent($r(b),I):y.addListener&&y.removeListener&&y.removeListener(I),(b=G(y))?(xn(b,h),b.h==0&&(b.src=null,y[Ji]=null)):Xe(h)}}}function $r(h){return h in gr?gr[h]:gr[h]="on"+h}function J(h,y){if(h.da)h=!0;else{y=new _e(y,this);var b=h.listener,I=h.ha||h.src;h.fa&&Bs(h),h=b.call(I,y)}return h}function G(h){return h=h[Ji],h instanceof ct?h:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(h){return typeof h=="function"?h:(h[Se]||(h[Se]=function(y){return h.handleEvent(y)}),h[Se])}function we(){re.call(this),this.i=new ct(this),this.M=this,this.F=null}S(we,re),we.prototype[ce]=!0,we.prototype.removeEventListener=function(h,y,b,I){Ho(this,h,y,b,I)};function ve(h,y){var b,I=h.F;if(I)for(b=[];I;I=I.F)b.push(I);if(h=h.M,I=y.type||y,typeof y=="string")y=new H(y,h);else if(y instanceof H)y.target=y.target||h;else{var Q=y;y=new H(I,h),O(y,Q)}if(Q=!0,b)for(var ne=b.length-1;0<=ne;ne--){var Ee=y.g=b[ne];Q=me(Ee,I,!0,y)&&Q}if(Ee=y.g=h,Q=me(Ee,I,!0,y)&&Q,Q=me(Ee,I,!1,y)&&Q,b)for(ne=0;ne<b.length;ne++)Ee=y.g=b[ne],Q=me(Ee,I,!1,y)&&Q}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var b=h.g[y],I=0;I<b.length;I++)Xe(b[I]);delete h.g[y],h.h--}}this.F=null},we.prototype.K=function(h,y,b,I){return this.i.add(String(h),y,!1,b,I)},we.prototype.L=function(h,y,b,I){return this.i.add(String(h),y,!0,b,I)};function me(h,y,b,I){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var Q=!0,ne=0;ne<y.length;++ne){var Ee=y[ne];if(Ee&&!Ee.da&&Ee.capture==b){var ut=Ee.listener,fn=Ee.ha||Ee.src;Ee.fa&&xn(h.i,Ee),Q=ut.call(fn,I)!==!1&&Q}}return Q&&!I.defaultPrevented}function Ae(h,y,b){if(typeof h=="function")b&&(h=T(h,b));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function yt(h){h.g=Ae(()=>{h.g=null,h.i&&(h.i=!1,yt(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class mt extends re{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(h){re.call(this),this.h=h,this.g={}}S(Je,re);var Zi=[];function _r(h){pe(h.g,function(y,b){this.g.hasOwnProperty(b)&&Bs(y)},h),h.g={}}Je.prototype.N=function(){Je.aa.N.call(this),_r(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rt=d.JSON.stringify,ki=d.JSON.parse,ci=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function wt(){}wt.prototype.h=null;function Pt(h){return h.h||(h.h=h.i())}function He(){}var Et={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Me(){H.call(this,"d")}S(Me,H);function Ge(){H.call(this,"c")}S(Ge,H);var Ke={},Lt=null;function on(){return Lt=Lt||new we}Ke.La="serverreachability";function Xn(h){H.call(this,Ke.La,h)}S(Xn,H);function an(h){const y=on();ve(y,new Xn(y))}Ke.STAT_EVENT="statevent";function Go(h,y){H.call(this,Ke.STAT_EVENT,h),this.stat=y}S(Go,H);function Ut(h){const y=on();ve(y,new Go(y,h))}Ke.Ma="timingevent";function en(h,y){H.call(this,Ke.Ma,h),this.size=y}S(en,H);function Wt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Tn(){this.g=!0}Tn.prototype.xa=function(){this.g=!1};function er(h,y,b,I,Q,ne){h.info(function(){if(h.g)if(ne)for(var Ee="",ut=ne.split("&"),fn=0;fn<ut.length;fn++){var dt=ut[fn].split("=");if(1<dt.length){var wn=dt[0];dt=dt[1];var mn=wn.split("_");Ee=2<=mn.length&&mn[1]=="type"?Ee+(wn+"="+dt+"&"):Ee+(wn+"=redacted&")}}else Ee=null;else Ee=ne;return"XMLHTTP REQ ("+I+") [attempt "+Q+"]: "+y+`
`+b+`
`+Ee})}function Wa(h,y,b,I,Q,ne,Ee){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Q+"]: "+y+`
`+b+`
`+ne+" "+Ee})}function Kr(h,y,b,I){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+$o(h,b)+(I?" "+I:"")})}function Xa(h,y){h.info(function(){return"TIMEOUT: "+y})}Tn.prototype.info=function(){};function $o(h,y){if(!h.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var I=b[h];if(!(2>I.length)){var Q=I[1];if(Array.isArray(Q)&&!(1>Q.length)){var ne=Q[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var Ee=1;Ee<Q.length;Ee++)Q[Ee]=""}}}}return Rt(b)}catch{return y}}var Fs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yr;function vr(){}S(vr,wt),vr.prototype.g=function(){return new XMLHttpRequest},vr.prototype.i=function(){return{}},yr=new vr;function Jn(h,y,b,I){this.j=h,this.i=y,this.l=b,this.R=I||1,this.U=new Je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tn}function tn(){this.i=null,this.g="",this.h=!1}var Oc={},Ja={};function tr(h,y,b){h.L=1,h.v=Xo(vi(y)),h.m=b,h.P=!0,Yr(h,null)}function Yr(h,y){h.F=Date.now(),Ko(h),h.A=vi(h.v);var b=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),Vc(b.i,"t",I),h.C=0,b=h.j.J,h.h=new tn,h.g=gh(h.j,b?y:null,!h.m),0<h.O&&(h.M=new mt(T(h.Y,h,h.g),h.O)),y=h.U,b=h.g,I=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Zi[0]=Q.toString()),Q=Zi);for(var ne=0;ne<Q.length;ne++){var Ee=ai(b,Q[ne],I||y.handleEvent,!1,y.h||y);if(!Ee)break;y.g[Ee.key]=Ee}y=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),an(),er(h.i,h.u,h.A,h.l,h.R,h.m)}Jn.prototype.ca=function(h){h=h.target;const y=this.M;y&&Pi(h)==3?y.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)e:{const mn=Pi(this.g);var y=this.g.Ba();const is=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||lh(this.g)))){this.J||mn!=4||y==7||(y==8||0>=is?an(3):an(2)),zs(this);var b=this.g.Z();this.X=b;t:if(th(this)){var I=lh(this.g);h="";var Q=I.length,ne=Pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nn(this),Er(this);var Ee="";break t}this.h.i=new d.TextDecoder}for(y=0;y<Q;y++)this.h.h=!0,h+=this.h.i.decode(I[y],{stream:!(ne&&y==Q-1)});I.length=0,this.h.g+=h,this.C=0,Ee=this.h.g}else Ee=this.g.oa();if(this.o=b==200,Wa(this.i,this.u,this.A,this.l,this.R,mn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,fn=this.g;if((ut=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(ut)){var dt=ut;break t}}dt=null}if(b=dt)Kr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qo(this,b);else{this.o=!1,this.s=3,Ut(12),Nn(this),Er(this);break e}}if(this.P){b=!0;let kn;for(;!this.J&&this.C<Ee.length;)if(kn=nh(this,Ee),kn==Ja){mn==4&&(this.s=4,Ut(14),b=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==Oc){this.s=4,Ut(15),Kr(this.i,this.l,Ee,"[Invalid Chunk]"),b=!1;break}else Kr(this.i,this.l,kn,null),Qo(this,kn);if(th(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||Ee.length!=0||this.h.h||(this.s=1,Ut(16),b=!1),this.o=this.o&&b,!b)Kr(this.i,this.l,Ee,"[Invalid Chunked Response]"),Nn(this),Er(this);else if(0<Ee.length&&!this.W){this.W=!0;var wn=this.j;wn.g==this&&wn.ba&&!wn.M&&(wn.j.info("Great, no buffering proxy detected. Bytes received: "+Ee.length),sa(wn),wn.M=!0,Ut(11))}}else Kr(this.i,this.l,Ee,null),Qo(this,Ee);mn==4&&Nn(this),this.o&&!this.J&&(mn==4?fh(this.j,this):(this.o=!1,Ko(this)))}else Vp(this.g),b==400&&0<Ee.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Nn(this),Er(this)}}}catch{}finally{}};function th(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function nh(h,y){var b=h.C,I=y.indexOf(`
`,b);return I==-1?Ja:(b=Number(y.substring(b,I)),isNaN(b)?Oc:(I+=1,I+b>y.length?Ja:(y=y.slice(I,I+b),h.C=I+b,y)))}Jn.prototype.cancel=function(){this.J=!0,Nn(this)};function Ko(h){h.S=Date.now()+h.I,ih(h,h.I)}function ih(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Wt(T(h.ba,h),y)}function zs(h){h.B&&(d.clearTimeout(h.B),h.B=null)}Jn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Xa(this.i,this.A),this.L!=2&&(an(),Ut(17)),Nn(this),this.s=2,Er(this)):ih(this,this.S-h)};function Er(h){h.j.G==0||h.J||fh(h.j,h)}function Nn(h){zs(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,_r(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Qo(h,y){try{var b=h.j;if(b.G!=0&&(b.g==h||Dc(b.h,h))){if(!h.K&&Dc(b.h,h)&&b.G==3){try{var I=b.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Q=I;if(Q[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)ul(b),ll(b);else break e;qc(b),Ut(18)}}else b.za=Q[1],0<b.za-b.T&&37500>Q[2]&&b.F&&b.v==0&&!b.C&&(b.C=Wt(T(b.Za,b),6e3));if(1>=el(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ns(b,11)}else if((h.K||b.g==h)&&ul(b),!B(y))for(Q=b.Da.g.parse(y),y=0;y<Q.length;y++){let dt=Q[y];if(b.T=dt[0],dt=dt[1],b.G==2)if(dt[0]=="c"){b.K=dt[1],b.ia=dt[2];const wn=dt[3];wn!=null&&(b.la=wn,b.j.info("VER="+b.la));const mn=dt[4];mn!=null&&(b.Aa=mn,b.j.info("SVER="+b.Aa));const is=dt[5];is!=null&&typeof is=="number"&&0<is&&(I=1.5*is,b.L=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const kn=h.g;if(kn){const Rr=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rr){var ne=I.h;ne.g||Rr.indexOf("spdy")==-1&&Rr.indexOf("quic")==-1&&Rr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(tl(ne,ne.h),ne.h=null))}if(I.D){const Gc=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gc&&(I.ya=Gc,It(I.I,I.D,Gc))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),I=b;var Ee=h;if(I.qa=ph(I,I.J?I.ia:null,I.W),Ee.K){Zn(I.h,Ee);var ut=Ee,fn=I.L;fn&&(ut.I=fn),ut.B&&(zs(ut),Ko(ut)),I.g=Ee}else dh(I);0<b.i.length&&cl(b)}else dt[0]!="stop"&&dt[0]!="close"||ns(b,7);else b.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?ns(b,7):Fc(b):dt[0]!="noop"&&b.l&&b.l.ta(dt),b.v=0)}}an(4)}catch{}}var rh=class{constructor(h,y){this.g=h,this.map=y}};function Wr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Za(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function el(h){return h.h?1:h.g?h.g.size:0}function Dc(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function tl(h,y){h.g?h.g.add(y):h.h=y}function Zn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Wr.prototype.cancel=function(){if(this.i=Mc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Mc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const b of h.g.values())y=y.concat(b.D);return y}return D(h.i)}function Mp(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var y=[],b=h.length,I=0;I<b;I++)y.push(h[I]);return y}y=[],b=0;for(I in h)y[b++]=h[I];return y}function nl(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var y=[];h=h.length;for(var b=0;b<h;b++)y.push(b);return y}y=[],b=0;for(const I in h)y[b++]=I;return y}}}function Pc(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var b=nl(h),I=Mp(h),Q=I.length,ne=0;ne<Q;ne++)y.call(void 0,I[ne],b&&b[ne],h)}var Yo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pp(h,y){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var I=h[b].indexOf("="),Q=null;if(0<=I){var ne=h[b].substring(0,I);Q=h[b].substring(I+1)}else ne=h[b];y(ne,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ln(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ln){this.h=h.h,Wo(this,h.j),this.o=h.o,this.g=h.g,qs(this,h.s),this.l=h.l;var y=h.i,b=new Jr;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Xr(this,b),this.m=h.m}else h&&(y=String(h).match(Yo))?(this.h=!1,Wo(this,y[1]||"",!0),this.o=Oi(y[2]||""),this.g=Oi(y[3]||"",!0),qs(this,y[4]),this.l=Oi(y[5]||"",!0),Xr(this,y[6]||"",!0),this.m=Oi(y[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}ln.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Jo(y,Lc,!0),":");var b=this.g;return(b||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Jo(y,Lc,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Jo(b,b.charAt(0)=="/"?Lp:Uc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Jo(b,il)),h.join("")};function vi(h){return new ln(h)}function Wo(h,y,b){h.j=b?Oi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function qs(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Xr(h,y,b){y instanceof Jr?(h.i=y,oh(h.i,h.h)):(b||(y=Jo(y,Up)),h.i=new Jr(y,h.h))}function It(h,y,b){h.i.set(y,b)}function Xo(h){return It(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Oi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Jo(h,y,b){return typeof h=="string"?(h=encodeURI(h).replace(y,sh),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function sh(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Lc=/[#\/\?@]/g,Uc=/[#\?:]/g,Lp=/[#\?]/g,Up=/[#\?@]/g,il=/#/g;function Jr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Di(h){h.g||(h.g=new Map,h.h=0,h.i&&Pp(h.i,function(y,b){h.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Jr.prototype,n.add=function(h,y){Di(this),this.i=null,h=Tr(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(y),this.h+=1,this};function Zr(h,y){Di(h),y=Tr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function es(h,y){return Di(h),y=Tr(h,y),h.g.has(y)}n.forEach=function(h,y){Di(this),this.g.forEach(function(b,I){b.forEach(function(Q){h.call(y,Q,I,this)},this)},this)},n.na=function(){Di(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let I=0;I<y.length;I++){const Q=h[I];for(let ne=0;ne<Q.length;ne++)b.push(y[I])}return b},n.V=function(h){Di(this);let y=[];if(typeof h=="string")es(this,h)&&(y=y.concat(this.g.get(Tr(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)y=y.concat(h[b])}return y},n.set=function(h,y){return Di(this),this.i=null,h=Tr(this,h),es(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Vc(h,y,b){Zr(h,y),0<b.length&&(h.i=null,h.g.set(Tr(h,y),D(b)),h.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var I=y[b];const ne=encodeURIComponent(String(I)),Ee=this.V(I);for(I=0;I<Ee.length;I++){var Q=ne;Ee[I]!==""&&(Q+="="+encodeURIComponent(String(Ee[I]))),h.push(Q)}}return this.i=h.join("&")};function Tr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function oh(h,y){y&&!h.j&&(Di(h),h.i=null,h.g.forEach(function(b,I){var Q=I.toLowerCase();I!=Q&&(Zr(this,I),Vc(this,Q,b))},h)),h.j=y}function Zo(h,y){const b=new Tn;if(d.Image){const I=new Image;I.onload=R(Mi,b,"TestLoadImage: loaded",!0,y,I),I.onerror=R(Mi,b,"TestLoadImage: error",!1,y,I),I.onabort=R(Mi,b,"TestLoadImage: abort",!1,y,I),I.ontimeout=R(Mi,b,"TestLoadImage: timeout",!1,y,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else y(!1)}function nr(h,y){const b=new Tn,I=new AbortController,Q=setTimeout(()=>{I.abort(),Mi(b,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:I.signal}).then(ne=>{clearTimeout(Q),ne.ok?Mi(b,"TestPingServer: ok",!0,y):Mi(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),Mi(b,"TestPingServer: error",!1,y)})}function Mi(h,y,b,I,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),I(b)}catch{}}function ea(){this.g=new ci}function br(h,y,b){const I=b||"";try{Pc(h,function(Q,ne){let Ee=Q;p(Q)&&(Ee=Rt(Q)),y.push(I+ne+"="+encodeURIComponent(Ee))})}catch(Q){throw y.push(I+"type="+encodeURIComponent("_badmap")),Q}}function Hs(h){this.l=h.Ub||null,this.j=h.eb||!1}S(Hs,wt),Hs.prototype.g=function(){return new ts(this.l,this.j)},Hs.prototype.i=function(h){return function(){return h}}({});function ts(h,y){we.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ts,we),n=ts.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Sr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Sr(this)),this.g&&(this.readyState=3,Sr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function jc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?wr(this):Sr(this),this.readyState==3&&jc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,wr(this))},n.Qa=function(h){this.g&&(this.response=h,wr(this))},n.ga=function(){this.g&&wr(this)};function wr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Sr(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=y.next();return h.join(`\r
`)};function Sr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Bc(h){let y="";return pe(h,function(b,I){y+=I,y+=":",y+=b,y+=`\r
`}),y}function bn(h,y,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Bc(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):It(h,y,b))}function Tt(h){we.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Tt,we);var rl=/^https?$/i,ta=["POST","PUT"];n=Tt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yr.g(),this.v=this.o?Pt(this.o):Pt(yr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){ah(this,ne);return}if(h=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Q in I)b.set(Q,I[Q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ne of I.keys())b.set(ne,I.get(ne));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ta,y,void 0))||I||Q||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ee]of b)this.g.setRequestHeader(ne,Ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{na(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){ah(this,ne)}};function ah(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,sl(h),Cr(h)}function sl(h){h.A||(h.A=!0,ve(h,"complete"),ve(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ve(this,"complete"),ve(this,"abort"),Cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),Tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ol(this):this.bb())},n.bb=function(){ol(this)};function ol(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Pi(h)!=4||h.Z()!=2)){if(h.u&&Pi(h)==4)Ae(h.Ea,0,h);else if(ve(h,"readystatechange"),Pi(h)==4){h.h=!1;try{const Ee=h.Z();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var I;if(I=Ee===0){var Q=String(h.D).match(Yo)[1]||null;!Q&&d.self&&d.self.location&&(Q=d.self.location.protocol.slice(0,-1)),I=!rl.test(Q?Q.toLowerCase():"")}b=I}if(b)ve(h,"complete"),ve(h,"success");else{h.m=6;try{var ne=2<Pi(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",sl(h)}}finally{Cr(h)}}}}function Cr(h,y){if(h.g){na(h);const b=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||ve(h,"ready");try{b.onreadystatechange=I}catch{}}}function na(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Pi(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Pi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),ki(y)}};function lh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Vp(h){const y={};h=(h.g&&2<=Pi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(B(h[I]))continue;var b=U(h[I]);const Q=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const ne=y[Q]||[];y[Q]=ne,ne.push(b)}N(y,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(h,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||y}function al(h){this.Aa=0,this.i=[],this.j=new Tn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,h),this.cb=ia("retryDelaySeedMs",1e4,h),this.Wa=ia("forwardChannelMaxRetries",2,h),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Wr(h&&h.concurrentRequestLimit),this.Da=new ea,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=al.prototype,n.la=8,n.G=1,n.connect=function(h,y,b,I){Ut(0),this.W=h,this.H=y||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.I=ph(this,null,this.W),cl(this)};function Fc(h){if(ch(h),h.G==3){var y=h.U++,b=vi(h.I);if(It(b,"SID",h.K),It(b,"RID",y),It(b,"TYPE","terminate"),ra(h,b),y=new Jn(h,h.j,y),y.L=2,y.v=Xo(vi(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&d.Image&&(new Image().src=y.v,b=!0),b||(y.g=gh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ko(y)}mh(h)}function ll(h){h.g&&(sa(h),h.g.cancel(),h.g=null)}function ch(h){ll(h),h.u&&(d.clearTimeout(h.u),h.u=null),ul(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function cl(h){if(!Za(h.h)&&!h.s){h.s=!0;var y=h.Ga;Te||j(),xe||(Te(),xe=!0),rt.add(y,h),h.B=0}}function jp(h,y){return el(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Wt(T(h.Ga,h,y),Hc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new Jn(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=A(ne),O(ne,this.S)):ne=this.S),this.m!==null||this.O||(Q.H=ne,ne=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=uh(this,Q,y),b=vi(this.I),It(b,"RID",h),It(b,"CVER",22),this.D&&It(b,"X-HTTP-Session-Id",this.D),ra(this,b),ne&&(this.O?y="headers="+encodeURIComponent(String(Bc(ne)))+"&"+y:this.m&&bn(b,this.m,ne)),tl(this.h,Q),this.Ua&&It(b,"TYPE","init"),this.P?(It(b,"$req",y),It(b,"SID","null"),Q.T=!0,tr(Q,b,null)):tr(Q,b,y),this.G=2}}else this.G==3&&(h?zc(this,h):this.i.length==0||Za(this.h)||zc(this))};function zc(h,y){var b;y?b=y.l:b=h.U++;const I=vi(h.I);It(I,"SID",h.K),It(I,"RID",b),It(I,"AID",h.T),ra(h,I),h.m&&h.o&&bn(I,h.m,h.o),b=new Jn(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),y&&(h.i=y.D.concat(h.i)),y=uh(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),tl(h.h,b),tr(b,I,y)}function ra(h,y){h.H&&pe(h.H,function(b,I){It(y,I,b)}),h.l&&Pc({},function(b,I){It(y,I,b)})}function uh(h,y,b){b=Math.min(h.i.length,b);var I=h.l?T(h.l.Na,h.l,h):null;e:{var Q=h.i;let ne=-1;for(;;){const Ee=["count="+b];ne==-1?0<b?(ne=Q[0].g,Ee.push("ofs="+ne)):ne=0:Ee.push("ofs="+ne);let ut=!0;for(let fn=0;fn<b;fn++){let dt=Q[fn].g;const wn=Q[fn].map;if(dt-=ne,0>dt)ne=Math.max(0,Q[fn].g-100),ut=!1;else try{br(wn,Ee,"req"+dt+"_")}catch{I&&I(wn)}}if(ut){I=Ee.join("&");break e}}}return h=h.i.splice(0,b),y.D=h,I}function dh(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;Te||j(),xe||(Te(),xe=!0),rt.add(y,h),h.v=0}}function qc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Wt(T(h.Fa,h),Hc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,hh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Wt(T(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),ll(this),hh(this))};function sa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function hh(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=vi(h.qa);It(y,"RID","rpc"),It(y,"SID",h.K),It(y,"AID",h.T),It(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&It(y,"TO",h.ja),It(y,"TYPE","xmlhttp"),ra(h,y),h.m&&h.o&&bn(y,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Xo(vi(y)),b.m=null,b.P=!0,Yr(b,h)}n.Za=function(){this.C!=null&&(this.C=null,ll(this),qc(this),Ut(19))};function ul(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function fh(h,y){var b=null;if(h.g==y){ul(h),sa(h),h.g=null;var I=2}else if(Dc(h.h,y))b=y.D,Zn(h.h,y),I=1;else return;if(h.G!=0){if(y.o)if(I==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var Q=h.B;I=on(),ve(I,new en(I,b)),cl(h)}else dh(h);else if(Q=y.s,Q==3||Q==0&&0<y.X||!(I==1&&jp(h,y)||I==2&&qc(h)))switch(b&&0<b.length&&(y=h.h,y.i=y.i.concat(b)),Q){case 1:ns(h,5);break;case 4:ns(h,10);break;case 3:ns(h,6);break;default:ns(h,2)}}}function Hc(h,y){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*y}function ns(h,y){if(h.j.info("Error code "+y),y==2){var b=T(h.fb,h),I=h.Xa;const Q=!I;I=new ln(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Wo(I,"https"),Xo(I),Q?Zo(I.toString(),b):nr(I.toString(),b)}else Ut(2);h.G=0,h.l&&h.l.sa(y),mh(h),ch(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function mh(h){if(h.G=0,h.ka=[],h.l){const y=Mc(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ka,y),k(h.ka,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.ra()}}function ph(h,y,b){var I=b instanceof ln?vi(b):new ln(b);if(I.g!="")y&&(I.g=y+"."+I.g),qs(I,I.s);else{var Q=d.location;I=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;var ne=new ln(null);I&&Wo(ne,I),y&&(ne.g=y),Q&&qs(ne,Q),b&&(ne.l=b),I=ne}return b=h.D,y=h.ya,b&&y&&It(I,b,y),It(I,"VER",h.la),ra(h,I),I}function gh(h,y,b){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Tt(new Hs({eb:b})):new Tt(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _h(){}n=_h.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function dl(){}dl.prototype.g=function(h,y){return new ei(h,y)};function ei(h,y){we.call(this),this.g=new al(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!B(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!B(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ar(this)}S(ei,we),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){Fc(this.g)},ei.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Rt(h),h=b);y.i.push(new rh(y.Ya++,h)),y.G==3&&cl(y)},ei.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,ei.aa.N.call(this)};function yh(h){Me.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const b in y){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}S(yh,Me);function vh(){Ge.call(this),this.status=1}S(vh,Ge);function Ar(h){this.g=h}S(Ar,_h),Ar.prototype.ua=function(){ve(this.g,"a")},Ar.prototype.ta=function(h){ve(this.g,new yh(h))},Ar.prototype.sa=function(h){ve(this.g,new vh)},Ar.prototype.ra=function(){ve(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,Qx=function(){return new dl},Kx=function(){return on()},$x=Ke,Gy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fs.NO_ERROR=0,Fs.TIMEOUT=8,Fs.HTTP_ERROR=6,Ff=Fs,Qr.COMPLETE="complete",Gx=Qr,He.EventType=Et,Et.OPEN="a",Et.CLOSE="b",Et.ERROR="c",Et.MESSAGE="d",we.prototype.listen=we.prototype.K,qu=He,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,Hx=Tt}).apply(typeof Cf<"u"?Cf:typeof self<"u"?self:typeof window<"u"?window:{});const hC="@firebase/firestore",fC="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new Km("@firebase/firestore");function ql(){return Ua.logLevel}function Re(n,...e){if(Ua.logLevel<=at.DEBUG){const t=e.map(DE);Ua.debug(`Firestore (${bc}): ${n}`,...t)}}function Ds(n,...e){if(Ua.logLevel<=at.ERROR){const t=e.map(DE);Ua.error(`Firestore (${bc}): ${n}`,...t)}}function ac(n,...e){if(Ua.logLevel<=at.WARN){const t=e.map(DE);Ua.warn(`Firestore (${bc}): ${n}`,...t)}}function DE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Yx(n,i,t)}function Yx(n,e,t){let i=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ds(i),new Error(i)}function bt(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Yx(e,s,i)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Q3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gn.UNAUTHENTICATED))}shutdown(){}}class Y3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class W3{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Ro;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ro,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},d=f=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ro)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new Wx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class X3{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class J3{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new X3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Z3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){bt(this.o===void 0,3512);const i=a=>{a.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=e6(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function We(n,e){return n<e?-1:n>e?1:0}function $y(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),s=e.codePointAt(t);if(i!==s){if(i<128&&s<128)return We(i,s);{const a=Xx(),c=t6(a.encode(pC(n,t)),a.encode(pC(e,t)));return c!==0?c:We(i,s)}}t+=i>65535?2:1}return We(n.length,e.length)}function pC(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function t6(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return We(n[t],e[t]);return We(n.length,e.length)}function lc(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=-62135596800,_C=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*_C);return new vn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gC)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_C}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-gC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new vn(0,0))}static max(){return new ze(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="__name__";class Mr{constructor(e,t,i){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&je(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=Mr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return We(e.length,t.length)}static compareSegments(e,t){const i=Mr.isNumericId(e),s=Mr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):$y(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class Ft extends Mr{construct(e,t,i){return new Ft(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Ft(t)}static emptyPath(){return new Ft([])}}const n6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Mr{construct(e,t,i){return new Vn(e,t,i)}static isValidIdentifier(e){return n6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yC}static keyField(){return new Vn([yC])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Ne(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ne(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(i+=d,s++):(a(),s++)}if(a(),c)throw new Ne(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Ft.fromString(e))}static fromName(e){return new Pe(Ft.fromString(e).popFirst(5))}static empty(){return new Pe(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=-1;function i6(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(i===1e9?new vn(t+1,0):new vn(t,i));return new Lo(s,Pe.empty(),e)}function r6(n){return new Lo(n.readTime,n.key,bd)}class Lo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Lo(ze.min(),Pe.empty(),bd)}static max(){return new Lo(ze.max(),Pe.empty(),bd)}}function s6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==o6)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,i)=>{t(e)})}static reject(e){return new he((t,i)=>{i(e)})}static waitFor(e){return new he((t,i)=>{let s=0,a=0,c=!1;e.forEach(d=>{++s,d.next(()=>{++a,c&&a===s&&t()},f=>i(f))}),c=!0,a===s&&t()})}static or(e){let t=he.resolve(!1);for(const i of e)t=t.next(s=>s?he.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,a)=>{i.push(t.call(this,s,a))}),this.waitFor(i)}static mapArray(e,t){return new he((i,s)=>{const a=e.length,c=new Array(a);let d=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next(_=>{c[p]=_,++d,d===a&&i(c)},_=>s(_))}})}static doWhile(e,t){return new he((i,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):i()};a()})}}function l6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Sc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}hp.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=-1;function fp(n){return n==null}function wm(n){return n===0&&1/n==-1/0}function c6(n){return typeof n=="number"&&Number.isInteger(n)&&!wm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="";function u6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vC(e)),e=d6(n.get(t),e);return vC(e)}function d6(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case Zx:t+="";break;default:t+=a}}return t}function vC(n){return n+Zx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ga(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function e1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Af(this.root,e,this.comparator,!1)}getReverseIterator(){return new Af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Af(this.root,e,this.comparator,!0)}}class Af{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??Ln.RED,this.left=s??Ln.EMPTY,this.right=a??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new Ln(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ln.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TC(this.data.getIterator())}getIteratorFrom(e){return new TC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class TC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new dr([])}unionWith(e){let t=new En(Vn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lc(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new t1("Invalid base64 string: "+a):a}}(e);return new Fn(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const h6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uo(n){if(bt(!!n,39018),typeof n=="string"){let e=0;const t=h6.exec(n);if(bt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vo(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="server_timestamp",i1="__type__",r1="__previous_value__",s1="__local_write_time__";function PE(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[i1])===null||t===void 0?void 0:t.stringValue)===n1}function mp(n){const e=n.mapValue.fields[r1];return PE(e)?mp(e):e}function wd(n){const e=Uo(n.mapValue.fields[s1].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,t,i,s,a,c,d,f,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=_}}const Sm="(default)";class Sd{constructor(e,t){this.projectId=e,this.database=t||Sm}static empty(){return new Sd("","")}get isDefaultDatabase(){return this.database===Sm}isEqual(e){return e instanceof Sd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="__type__",m6="__max__",Rf={mapValue:{}},a1="__vector__",Cm="value";function jo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?PE(n)?4:g6(n)?9007199254740991:p6(n)?10:11:je(28295,{value:n})}function qr(n,e){if(n===e)return!0;const t=jo(n);if(t!==jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wd(n).isEqual(wd(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Uo(s.timestampValue),d=Uo(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Vo(s.bytesValue).isEqual(Vo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return sn(s.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return sn(s.integerValue)===sn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=sn(s.doubleValue),d=sn(a.doubleValue);return c===d?wm(c)===wm(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return lc(n.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},d=a.mapValue.fields||{};if(EC(c)!==EC(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!qr(c[f],d[f])))return!1;return!0}(n,e);default:return je(52216,{left:n})}}function Cd(n,e){return(n.values||[]).find(t=>qr(t,e))!==void 0}function cc(n,e){if(n===e)return 0;const t=jo(n),i=jo(e);if(t!==i)return We(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=sn(a.integerValue||a.doubleValue),f=sn(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return bC(n.timestampValue,e.timestampValue);case 4:return bC(wd(n),wd(e));case 5:return $y(n.stringValue,e.stringValue);case 6:return function(a,c){const d=Vo(a),f=Vo(c);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),f=c.split("/");for(let p=0;p<d.length&&p<f.length;p++){const _=We(d[p],f[p]);if(_!==0)return _}return We(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=We(sn(a.latitude),sn(c.latitude));return d!==0?d:We(sn(a.longitude),sn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return wC(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,f,p,_;const v=a.fields||{},T=c.fields||{},R=(d=v[Cm])===null||d===void 0?void 0:d.arrayValue,S=(f=T[Cm])===null||f===void 0?void 0:f.arrayValue,D=We(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((_=S==null?void 0:S.values)===null||_===void 0?void 0:_.length)||0);return D!==0?D:wC(R,S)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Rf.mapValue&&c===Rf.mapValue)return 0;if(a===Rf.mapValue)return 1;if(c===Rf.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),p=c.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let v=0;v<f.length&&v<_.length;++v){const T=$y(f[v],_[v]);if(T!==0)return T;const R=cc(d[f[v]],p[_[v]]);if(R!==0)return R}return We(f.length,_.length)}(n.mapValue,e.mapValue);default:throw je(23264,{Pe:t})}}function bC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=Uo(n),i=Uo(e),s=We(t.seconds,i.seconds);return s!==0?s:We(t.nanos,i.nanos)}function wC(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=cc(t[s],i[s]);if(a)return a}return We(t.length,i.length)}function uc(n){return Ky(n)}function Ky(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Uo(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=Ky(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of i)a?a=!1:s+=",",s+=`${c}:${Ky(t.fields[c])}`;return s+"}"}(n.mapValue):je(61005,{value:n})}function zf(n){switch(jo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mp(n);return e?16+zf(e):16;case 5:return 2*n.stringValue.length;case 6:return Vo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+zf(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Ga(i.fields,(a,c)=>{s+=a.length+zf(c)}),s}(n.mapValue);default:throw je(13486,{value:n})}}function SC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qy(n){return!!n&&"integerValue"in n}function LE(n){return!!n&&"arrayValue"in n}function CC(n){return!!n&&"nullValue"in n}function AC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qf(n){return!!n&&"mapValue"in n}function p6(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[o1])===null||t===void 0?void 0:t.stringValue)===a1}function Zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ga(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Zu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function g6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===m6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.value=e}static empty(){return new $i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!qf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=Vn.emptyPath(),i={},s=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,s),i={},s=[],t=d.popLast()}c?i[d.lastSegment()]=Zu(c):s.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());qf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];qf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ga(t,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new $i(Zu(this.value))}}function l1(n){const e=[];return Ga(n.fields,(t,i)=>{const s=new Vn([t]);if(qf(i)){const a=l1(i.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,i,s,a,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new $n(e,0,ze.min(),ze.min(),ze.min(),$i.empty(),0)}static newFoundDocument(e,t,i,s){return new $n(e,1,t,ze.min(),i,s,0)}static newNoDocument(e,t){return new $n(e,2,t,ze.min(),ze.min(),$i.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,ze.min(),ze.min(),$i.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t){this.position=e,this.inclusive=t}}function RC(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?i=Pe.comparator(Pe.fromName(c.referenceValue),t.key):i=cc(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function IC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t="asc"){this.field=e,this.dir=t}}function _6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{}class hn extends c1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new v6(e,t,i):t==="array-contains"?new b6(e,i):t==="in"?new w6(e,i):t==="not-in"?new S6(e,i):t==="array-contains-any"?new C6(e,i):new hn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new E6(e,i):new T6(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cc(t,this.value)):t!==null&&jo(this.value)===jo(t)&&this.matchesComparison(cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends c1{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new fr(e,t)}matches(e){return u1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function u1(n){return n.op==="and"}function d1(n){return y6(n)&&u1(n)}function y6(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function Yy(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+uc(n.value);if(d1(n))return n.filters.map(e=>Yy(e)).join(",");{const e=n.filters.map(t=>Yy(t)).join(",");return`${n.op}(${e})`}}function h1(n,e){return n instanceof hn?function(i,s){return s instanceof hn&&i.op===s.op&&i.field.isEqual(s.field)&&qr(i.value,s.value)}(n,e):n instanceof fr?function(i,s){return s instanceof fr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,c,d)=>a&&h1(c,s.filters[d]),!0):!1}(n,e):void je(19439)}function f1(n){return n instanceof hn?function(t){return`${t.field.canonicalString()} ${t.op} ${uc(t.value)}`}(n):n instanceof fr?function(t){return t.op.toString()+" {"+t.getFilters().map(f1).join(" ,")+"}"}(n):"Filter"}class v6 extends hn{constructor(e,t,i){super(e,t,i),this.key=Pe.fromName(i.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class E6 extends hn{constructor(e,t){super(e,"in",t),this.keys=m1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class T6 extends hn{constructor(e,t){super(e,"not-in",t),this.keys=m1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function m1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Pe.fromName(i.referenceValue))}class b6 extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return LE(t)&&Cd(t.arrayValue,this.value)}}class w6 extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cd(this.value.arrayValue,t)}}class S6 extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cd(this.value.arrayValue,t)}}class C6 extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!LE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Cd(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t=null,i=[],s=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=c,this.endAt=d,this.Ie=null}}function xC(n,e=null,t=[],i=[],s=null,a=null,c=null){return new A6(n,e,t,i,s,a,c)}function UE(n){const e=qe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Yy(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>uc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>uc(i)).join(",")),e.Ie=t}return e.Ie}function VE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!h1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IC(n.startAt,e.startAt)&&IC(n.endAt,e.endAt)}function Wy(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t=null,i=[],s=[],a=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function R6(n,e,t,i,s,a,c,d){return new Gd(n,e,t,i,s,a,c,d)}function p1(n){return new Gd(n)}function NC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function g1(n){return n.collectionGroup!==null}function ed(n){const e=qe(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new En(Vn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Rm(a,i))}),t.has(Vn.keyField().canonicalString())||e.Ee.push(new Rm(Vn.keyField(),i))}return e.Ee}function Br(n){const e=qe(n);return e.de||(e.de=I6(e,ed(n))),e.de}function I6(n,e){if(n.limitType==="F")return xC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Rm(s.field,a)});const t=n.endAt?new Am(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Am(n.startAt.position,n.startAt.inclusive):null;return xC(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Xy(n,e){const t=n.filters.concat([e]);return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jy(n,e,t){return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pp(n,e){return VE(Br(n),Br(e))&&n.limitType===e.limitType}function _1(n){return`${UE(Br(n))}|lt:${n.limitType}`}function Hl(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>f1(s)).join(", ")}]`),fp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>uc(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>uc(s)).join(",")),`Target(${i})`}(Br(n))}; limitType=${n.limitType})`}function gp(n,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Pe.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,s){for(const a of ed(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(c,d,f){const p=RC(c,d,f);return c.inclusive?p<=0:p<0}(i.startAt,ed(i),s)||i.endAt&&!function(c,d,f){const p=RC(c,d,f);return c.inclusive?p>=0:p>0}(i.endAt,ed(i),s))}(n,e)}function x6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y1(n){return(e,t)=>{let i=!1;for(const s of ed(n)){const a=N6(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function N6(n,e,t){const i=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(a,c,d){const f=c.data.field(a),p=d.data.field(a);return f!==null&&p!==null?cc(f,p):je(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ga(this.inner,(t,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return e1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=new Kt(Pe.comparator);function Ms(){return k6}const v1=new Kt(Pe.comparator);function Hu(...n){let e=v1;for(const t of n)e=e.insert(t.key,t);return e}function E1(n){let e=v1;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ca(){return td()}function T1(){return td()}function td(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const O6=new Kt(Pe.comparator),D6=new En(Pe.comparator);function lt(...n){let e=D6;for(const t of n)e=e.add(t);return e}const M6=new En(We);function P6(){return M6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wm(e)?"-0":e}}function b1(n){return{integerValue:""+n}}function L6(n,e){return c6(e)?b1(e):jE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this._=void 0}}function U6(n,e,t){return n instanceof Im?function(s,a){const c={fields:{[i1]:{stringValue:n1},[s1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&PE(a)&&(a=mp(a)),a&&(c.fields[r1]=a),{mapValue:c}}(t,e):n instanceof Ad?S1(n,e):n instanceof Rd?C1(n,e):function(s,a){const c=w1(s,a),d=kC(c)+kC(s.Re);return Qy(c)&&Qy(s.Re)?b1(d):jE(s.serializer,d)}(n,e)}function V6(n,e,t){return n instanceof Ad?S1(n,e):n instanceof Rd?C1(n,e):t}function w1(n,e){return n instanceof xm?function(i){return Qy(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Im extends _p{}class Ad extends _p{constructor(e){super(),this.elements=e}}function S1(n,e){const t=A1(e);for(const i of n.elements)t.some(s=>qr(s,i))||t.push(i);return{arrayValue:{values:t}}}class Rd extends _p{constructor(e){super(),this.elements=e}}function C1(n,e){let t=A1(e);for(const i of n.elements)t=t.filter(s=>!qr(s,i));return{arrayValue:{values:t}}}class xm extends _p{constructor(e,t){super(),this.serializer=e,this.Re=t}}function kC(n){return sn(n.integerValue||n.doubleValue)}function A1(n){return LE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function j6(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Ad&&s instanceof Ad||i instanceof Rd&&s instanceof Rd?lc(i.elements,s.elements,qr):i instanceof xm&&s instanceof xm?qr(i.Re,s.Re):i instanceof Im&&s instanceof Im}(n.transform,e.transform)}class B6{constructor(e,t){this.version=e,this.transformResults=t}}class As{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yp{}function R1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new x1(n.key,As.none()):new $d(n.key,n.data,As.none());{const t=n.data,i=$i.empty();let s=new En(Vn.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),s=s.add(a)}return new Ka(n.key,i,new dr(s.toArray()),As.none())}}function F6(n,e,t){n instanceof $d?function(s,a,c){const d=s.value.clone(),f=DC(s.fieldTransforms,a,c.transformResults);d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ka?function(s,a,c){if(!Hf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const d=DC(s.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(I1(s)),f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function nd(n,e,t,i){return n instanceof $d?function(a,c,d,f){if(!Hf(a.precondition,c))return d;const p=a.value.clone(),_=MC(a.fieldTransforms,f,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ka?function(a,c,d,f){if(!Hf(a.precondition,c))return d;const p=MC(a.fieldTransforms,f,c),_=c.data;return _.setAll(I1(a)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(a,c,d){return Hf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function z6(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=w1(i.transform,s||null);a!=null&&(t===null&&(t=$i.empty()),t.set(i.field,a))}return t||null}function OC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&lc(i,s,(a,c)=>j6(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $d extends yp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ka extends yp{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function I1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function DC(n,e,t){const i=new Map;bt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,d=e.data.field(a.field);i.set(a.field,V6(c,d,t[s]))}return i}function MC(n,e,t){const i=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);i.set(s.field,U6(a,c,e))}return i}class x1 extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q6 extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&F6(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=nd(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=nd(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=T1();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(s.key)?null:d;const f=R1(c,d);f!==null&&i.set(s.key,f),c.isValidDocument()||c.convertToNoDocument(ze.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lt())}isEqual(e){return this.batchId===e.batchId&&lc(this.mutations,e.mutations,(t,i)=>OC(t,i))&&lc(this.baseMutations,e.baseMutations,(t,i)=>OC(t,i))}}class BE{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){bt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let s=function(){return O6}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,i[c].version);return new BE(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,ft;function K6(n){switch(n){case fe.OK:return je(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function N1(n){if(n===void 0)return Ds("GRPC error has no .code"),fe.UNKNOWN;switch(n){case dn.OK:return fe.OK;case dn.CANCELLED:return fe.CANCELLED;case dn.UNKNOWN:return fe.UNKNOWN;case dn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case dn.INTERNAL:return fe.INTERNAL;case dn.UNAVAILABLE:return fe.UNAVAILABLE;case dn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case dn.NOT_FOUND:return fe.NOT_FOUND;case dn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case dn.ABORTED:return fe.ABORTED;case dn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case dn.DATA_LOSS:return fe.DATA_LOSS;default:return je(39323,{code:n})}}(ft=dn||(dn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new Ao([4294967295,4294967295],0);function PC(n){const e=Xx().encode(n),t=new qx;return t.update(e),new Uint8Array(t.digest())}function LC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ao([t,i],0),new Ao([s,a],0)]}class FE{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Gu(`Invalid padding: ${t}`);if(i<0)throw new Gu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ao.fromNumber(this.pe)}we(e,t,i){let s=e.add(t.multiply(Ao.fromNumber(i)));return s.compare(Q6)===1&&(s=new Ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=PC(e),[i,s]=LC(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,s,a);if(!this.Se(c))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new FE(a,s,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=PC(e),[i,s]=LC(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,s,a);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new vp(ze.min(),s,new Kt(We),Ms(),lt())}}class Kd{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Kd(i,t,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t,i,s){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=s}}class k1{constructor(e,t){this.targetId=e,this.Ce=t}}class O1{constructor(e,t,i=Fn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class UC{constructor(){this.Fe=0,this.Me=VC(),this.xe=Fn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=lt(),t=lt(),i=lt();return this.Me.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:je(38017,{changeType:a})}}),new Kd(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=VC()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,bt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Y6{constructor(e){this.ze=e,this.je=new Map,this.He=Ms(),this.Je=If(),this.Ye=If(),this.Ze=new Kt(We)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,i=e.Ce.count,s=this._t(t);if(s){const a=s.target;if(Wy(a))if(i===0){const c=new Pe(a.path);this.tt(t,c,$n.newNoDocument(c,ze.min()))}else bt(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let c,d;try{c=Vo(i).toUint8Array()}catch(f){if(f instanceof t1)return ac("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new FE(c,s,a)}catch(f){return ac(f instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let s=0;return i.forEach(a=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),s++)}),s}It(e){const t=new Map;this.je.forEach((a,c)=>{const d=this._t(c);if(d){if(a.current&&Wy(d.target)){const f=new Pe(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,$n.newNoDocument(f,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let i=lt();this.Ye.forEach((a,c)=>{let d=!0;c.forEachWhile(f=>{const p=this._t(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const s=new vp(e,t,this.Ze,this.He,i);return this.He=Ms(),this.Je=If(),this.Ye=If(),this.Ze=new Kt(We),s}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new UC,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new En(We),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new En(We),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new UC),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function If(){return new Kt(Pe.comparator)}function VC(){return new Kt(Pe.comparator)}const W6={asc:"ASCENDING",desc:"DESCENDING"},X6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J6={and:"AND",or:"OR"};class Z6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zy(n,e){return n.useProto3Json||fp(e)?e:{value:e}}function Nm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eB(n,e){return Nm(n,e.toTimestamp())}function Fr(n){return bt(!!n,49232),ze.fromTimestamp(function(t){const i=Uo(t);return new vn(i.seconds,i.nanos)}(n))}function zE(n,e){return ev(n,e).canonicalString()}function ev(n,e){const t=function(s){return new Ft(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function M1(n){const e=Ft.fromString(n);return bt(j1(e),10190,{key:e.toString()}),e}function tv(n,e){return zE(n.databaseId,e.path)}function sy(n,e){const t=M1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(L1(t))}function P1(n,e){return zE(n.databaseId,e)}function tB(n){const e=M1(n);return e.length===4?Ft.emptyPath():L1(e)}function nv(n){return new Ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function L1(n){return bt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function jC(n,e,t){return{name:tv(n,e),fields:t.value.mapValue.fields}}function nB(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:je(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(p,_){return p.useProto3Json?(bt(_===void 0||typeof _=="string",58123),Fn.fromBase64String(_||"")):(bt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Fn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?fe.UNKNOWN:N1(p.code);return new Ne(_,p.message||"")}(c);t=new O1(i,s,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sy(n,i.document.name),a=Fr(i.document.updateTime),c=i.document.createTime?Fr(i.document.createTime):ze.min(),d=new $i({mapValue:{fields:i.document.fields}}),f=$n.newFoundDocument(s,a,c,d),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Gf(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sy(n,i.document),a=i.readTime?Fr(i.readTime):ze.min(),c=$n.newNoDocument(s,a),d=i.removedTargetIds||[];t=new Gf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sy(n,i.document),a=i.removedTargetIds||[];t=new Gf([],a,s,null)}else{if(!("filter"in e))return je(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,c=new $6(s,a),d=i.targetId;t=new k1(d,c)}}return t}function iB(n,e){let t;if(e instanceof $d)t={update:jC(n,e.key,e.value)};else if(e instanceof x1)t={delete:tv(n,e.key)};else if(e instanceof Ka)t={update:jC(n,e.key,e.data),updateMask:hB(e.fieldMask)};else{if(!(e instanceof q6))return je(16599,{ft:e.type});t={verify:tv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const d=c.transform;if(d instanceof Im)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ad)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Rd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xm)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw je(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:eB(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:je(27497)}(n,e.precondition)),t}function rB(n,e){return n&&n.length>0?(bt(e!==void 0,14353),n.map(t=>function(s,a){let c=s.updateTime?Fr(s.updateTime):Fr(a);return c.isEqual(ze.min())&&(c=Fr(a)),new B6(c,s.transformResults||[])}(t,e))):[]}function sB(n,e){return{documents:[P1(n,e.path)]}}function oB(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=P1(n,s);const a=function(p){if(p.length!==0)return V1(fr.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(_=>function(T){return{field:Gl(T.field),direction:cB(T.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Zy(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:t,parent:s}}function aB(n){let e=tB(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){bt(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(v){const T=U1(v);return T instanceof fr&&d1(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(T=>function(S){return new Rm($l(S.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(v){let T;return T=typeof v=="object"?v.value:v,fp(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(v){const T=!!v.before,R=v.values||[];return new Am(R,T)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const T=!v.before,R=v.values||[];return new Am(R,T)}(t.endAt)),R6(e,s,c,a,d,"F",f,p)}function lB(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function U1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=$l(t.unaryFilter.field);return hn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=$l(t.unaryFilter.field);return hn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=$l(t.unaryFilter.field);return hn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$l(t.unaryFilter.field);return hn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(n):n.fieldFilter!==void 0?function(t){return hn.create($l(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fr.create(t.compositeFilter.filters.map(i=>U1(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(t.compositeFilter.op))}(n):je(30097,{filter:n})}function cB(n){return W6[n]}function uB(n){return X6[n]}function dB(n){return J6[n]}function Gl(n){return{fieldPath:n.canonicalString()}}function $l(n){return Vn.fromServerFormat(n.fieldPath)}function V1(n){return n instanceof hn?function(t){if(t.op==="=="){if(AC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if(CC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if(CC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:uB(t.op),value:t.value}}}(n):n instanceof fr?function(t){const i=t.getFilters().map(s=>V1(s));return i.length===1?i[0]:{compositeFilter:{op:dB(t.op),filters:i}}}(n):je(54877,{filter:n})}function hB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function j1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t,i,s,a=ze.min(),c=ze.min(),d=Fn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.wt=e}}function mB(n){const e=aB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(){this.Cn=new gB}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Lo.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Lo.min())}updateCollectionGroup(e,t,i){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class gB{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new En(Ft.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new En(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B1=41943040;class mi{static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(B1,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new dc(0)}static lr(){return new dc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="LruGarbageCollector",_B=1048576;function zC([n,e],[t,i]){const s=We(n,t);return s===0?We(e,i):s}class yB{constructor(e){this.Er=e,this.buffer=new En(zC),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();zC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vB{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Re(FC,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Sc(t)?Re(FC,"Ignoring IndexedDB error during garbage collection: ",t):await wc(t)}await this.mr(3e5)})}}class EB{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return he.resolve(hp.le);const i=new yB(t);return this.gr.forEachTarget(e,s=>i.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>i.Rr(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(BC)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BC):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,s,a,c,d,f,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,t))).next(v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),ql()<=at.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-_}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function TB(n,e){return new EB(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?he.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&nd(i.mutation,s,dr.empty(),vn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,lt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=lt()){const s=Ca();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(a=>{let c=Hu();return a.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Ca();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,lt()))}populateOverlays(e,t,i){const s=[];return i.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,s){let a=Ms();const c=td(),d=function(){return td()}();return t.forEach((f,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof Ka)?a=a.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),nd(_.mutation,p,_.mutation.getFieldMask(),vn.now())):c.set(p.key,dr.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var v;return d.set(p,new wB(_,(v=c.get(p))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,t){const i=td();let s=new Kt((c,d)=>c-d),a=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let _=i.get(f)||dr.empty();_=d.applyToLocalView(p,_),i.set(f,_);const v=(s.get(d.batchId)||lt()).add(f);s=s.insert(d.batchId,v)})}).next(()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,_=f.value,v=T1();_.forEach(T=>{if(!a.has(T)){const R=R1(t.get(T),i.get(T));R!==null&&v.set(T,R),a=a.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return he.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(c){return Pe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):g1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):he.resolve(Ca());let d=bd,f=a;return c.next(p=>he.forEach(p,(_,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),a.get(_)?he.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{f=f.insert(_,T)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,lt())).next(_=>({batchId:d,changes:E1(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(i=>{let s=Hu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let c=Hu();return this.indexManager.getCollectionParents(e,a).next(d=>he.forEach(d,f=>{const p=function(v,T){return new Gd(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(_=>{_.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s))).next(c=>{a.forEach((f,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,$n.newInvalidDocument(_)))});let d=Hu();return c.forEach((f,p)=>{const _=a.get(f);_!==void 0&&nd(_.mutation,p,dr.empty(),vn.now()),gp(t,p)&&(d=d.insert(f,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return he.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Fr(s.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(s){return{name:s.name,query:mB(s.bundledQuery),readTime:Fr(s.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this.overlays=new Kt(Pe.comparator),this.Qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ca();return he.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,a)=>{this.bt(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(i)),he.resolve()}getOverlaysForCollection(e,t,i){const s=Ca(),a=t.length+1,c=new Pe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>i&&s.set(f.getKey(),f)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new Kt((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=a.get(p.largestBatchId);_===null&&(_=Ca(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Ca(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=s)););return he.resolve(d)}bt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Qr.get(s.largestBatchId).delete(i.key);this.Qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new G6(t,i));let a=this.Qr.get(t);a===void 0&&(a=lt(),this.Qr.set(t,a)),this.Qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.$r=new En(In.Ur),this.Kr=new En(In.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const i=new In(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new In(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){const t=new Pe(new Ft([])),i=new In(t,e),s=new In(t,e+1),a=[];return this.Kr.forEachInRange([i,s],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Pe(new Ft([])),i=new In(t,e),s=new In(t,e+1);let a=lt();return this.Kr.forEachInRange([i,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new In(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class In{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Pe.comparator(e.key,t.key)||We(e.Zr,t.Zr)}static Wr(e,t){return We(e.Zr,t.Zr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new En(In.Ur)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new H6(a,t,i,s);this.mutationQueue.push(c);for(const d of s)this.Xr=this.Xr.add(new In(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ti(i),a=s<0?0:s;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?ME:this.nr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new In(t,0),s=new In(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([i,s],c=>{const d=this.ei(c.Zr);a.push(d)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new En(We);return t.forEach(s=>{const a=new In(s,0),c=new In(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],d=>{i=i.add(d.Zr)})}),he.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;Pe.isDocumentKey(a)||(a=a.child(""));const c=new In(new Pe(a),0);let d=new En(We);return this.Xr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(d=d.add(f.Zr)),!0)},c),he.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(i=>{const s=this.ei(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){bt(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return he.forEach(t.mutations,s=>{const a=new In(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){const i=new In(t,0),s=this.Xr.firstAfterOrEqual(i);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e){this.ii=e,this.docs=function(){return new Kt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,c=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return he.resolve(i?i.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let i=Ms();return t.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():$n.newInvalidDocument(s))}),he.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=Ms();const c=t.path,d=new Pe(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||s6(r6(_),i)<=0||(s.has(_.key)||gp(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,i,s){je(9500)}si(e,t){return he.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new NB(this)}getSize(e){return he.resolve(this.size)}}class NB extends bB{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Br.addEntry(e,s)):this.Br.removeEntry(i)}),he.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e){this.persistence=e,this.oi=new $a(t=>UE(t),VE),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this._i=0,this.ai=new qE,this.targetCount=0,this.ui=dc.cr()}forEachTarget(e,t){return this.oi.forEach((i,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),he.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new dc(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tr(t),he.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),he.waitFor(a).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const i=this.oi.get(t)||null;return he.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),he.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ai.Yr(t);return he.resolve(i)}containsKey(e,t){return he.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t){this.ci={},this.overlays={},this.li=new hp(0),this.hi=!1,this.hi=!0,this.Pi=new RB,this.referenceDelegate=e(this),this.Ti=new kB(this),this.indexManager=new pB,this.remoteDocumentCache=function(s){return new xB(s)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new fB(t),this.Ei=new CB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new IB(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){Re("MemoryPersistence","Starting transaction:",e);const s=new OB(this.li.next());return this.referenceDelegate.di(),i(s).next(a=>this.referenceDelegate.Ai(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ri(e,t){return he.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}}class OB extends a6{constructor(e){super(),this.currentSequenceNumber=e}}class HE{constructor(e){this.persistence=e,this.Vi=new qE,this.mi=null}static fi(e){return new HE(e)}get gi(){if(this.mi)return this.mi;throw je(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),he.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(s=>this.gi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.gi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.gi,i=>{const s=Pe.fromPath(i);return this.pi(e,s).next(a=>{a||t.removeEntry(s,ze.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return he.or([()=>he.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class km{constructor(e,t){this.persistence=e,this.yi=new $a(i=>u6(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=TB(this,t)}static fi(e,t){return new km(e,t)}di(){}Ai(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}Sr(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return he.forEach(this.yi,(i,s)=>this.Dr(e,i,s).next(a=>a?he.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.si(e,c=>this.Dr(e,c,t).next(d=>{d||(i++,a.removeEntry(c,ze.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),he.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),he.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zf(e.data.value)),t}Dr(e,t,i){return he.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.yi.get(t);return he.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.ds=i,this.As=s}static Rs(e,t){let i=lt(),s=lt();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new GE(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return HM()?8:l6(Wn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.ws(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Ss(e,t,s,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new DB;return this.bs(e,t,c).next(d=>{if(a.result=d,this.fs)return this.Ds(e,t,c,d.size)})}).next(()=>a.result)}Ds(e,t,i,s){return i.documentReadCount<this.gs?(ql()<=at.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),he.resolve()):(ql()<=at.DEBUG&&Re("QueryEngine","Query:",Hl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ps*s?(ql()<=at.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):he.resolve())}ws(e,t){if(NC(t))return he.resolve(null);let i=Br(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Jy(t,null,"F"),i=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=lt(...a);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.vs(t,d);return this.Cs(t,p,c,f.readTime)?this.ws(e,Jy(t,null,"F")):this.Fs(e,p,t,f)}))})))}Ss(e,t,i,s){return NC(t)||s.isEqual(ze.min())?he.resolve(null):this.ys.getDocuments(e,i).next(a=>{const c=this.vs(t,a);return this.Cs(t,c,i,s)?he.resolve(null):(ql()<=at.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hl(t)),this.Fs(e,c,t,i6(s,bd)).next(d=>d))})}vs(e,t){let i=new En(y1(e));return t.forEach((s,a)=>{gp(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}bs(e,t,i){return ql()<=at.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Hl(t)),this.ys.getDocumentsMatchingQuery(e,t,Lo.min(),i)}Fs(e,t,i,s){return this.ys.getDocumentsMatchingQuery(e,i,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="LocalStore",PB=3e8;class LB{constructor(e,t,i,s){this.persistence=e,this.Ms=t,this.serializer=s,this.xs=new Kt(We),this.Os=new $a(a=>UE(a),VE),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SB(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function UB(n,e,t,i){return new LB(n,e,t,i)}async function z1(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],d=[];let f=lt();for(const p of s){c.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of a){d.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:d}))})})}function VB(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,p,_){const v=p.batch,T=v.keys();let R=he.resolve();return T.forEach(S=>{R=R.next(()=>_.getEntry(f,S)).next(D=>{const k=p.docVersions.get(S);bt(k!==null,48541),D.version.compareTo(k)<0&&(v.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),_.addEntry(D)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=lt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function q1(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function jB(n,e){const t=qe(n),i=e.snapshotVersion;let s=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});s=t.xs;const d=[];e.targetChanges.forEach((_,v)=>{const T=s.get(v);if(!T)return;d.push(t.Ti.removeMatchingKeys(a,_.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(a,_.addedDocuments,v)));let R=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(Fn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),s=s.insert(v,R),function(D,k,L){return D.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=PB?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(T,R,_)&&d.push(t.Ti.updateTargetData(a,R))});let f=Ms(),p=lt();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),d.push(BB(a,c,e.documentUpdates).next(_=>{f=_.qs,p=_.Qs})),!i.isEqual(ze.min())){const _=t.Ti.getLastRemoteSnapshotVersion(a).next(v=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,i));d.push(_)}return he.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(t.xs=s,a))}function BB(n,e,t){let i=lt(),s=lt();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let c=Ms();return t.forEach((d,f)=>{const p=a.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(ze.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Re($E,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)}),{qs:c,Qs:s}})}function FB(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=ME),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function zB(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Ti.getTargetData(i,e).next(a=>a?(s=a,he.resolve(s)):t.Ti.allocateTargetId(i).next(c=>(s=new bo(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.xs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}async function iv(n,e,t){const i=qe(n),s=i.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!Sc(c))throw c;Re($E,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(s.target)}function qC(n,e,t){const i=qe(n);let s=ze.min(),a=lt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,_){const v=qe(f),T=v.Os.get(_);return T!==void 0?he.resolve(v.xs.get(T)):v.Ti.getTargetData(p,_)}(i,c,Br(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(f=>{a=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,t?s:ze.min(),t?a:lt())).next(d=>(qB(i,x6(e),d),{documents:d,$s:a})))}function qB(n,e,t){let i=n.Ns.get(e)||ze.min();t.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Ns.set(e,i)}class HC{constructor(){this.activeTargetIds=P6()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HB{constructor(){this.xo=new HC,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new HC,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="ConnectivityMonitor";class $C{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Re(GC,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Re(GC,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf=null;function rv(){return xf===null?xf=function(){return 268435456+Math.round(2147483648*Math.random())}():xf++,"0x"+xf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="RestConnection",$B={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KB{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${s}`,this.Go=this.databaseId.database===Sm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}zo(e,t,i,s,a){const c=rv(),d=this.jo(e,t.toUriEncodedString());Re(oy,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,a);const{host:p}=new URL(d),_=Vs(p);return this.Jo(e,d,f,i,_).then(v=>(Re(oy,`Received RPC '${e}' ${c}: `,v),v),v=>{throw ac(oy,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v})}Yo(e,t,i,s,a,c){return this.zo(e,t,i,s,a)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}jo(e,t){const i=$B[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection";class YB extends KB{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,a){const c=rv();return new Promise((d,f)=>{const p=new Hx;p.setWithCredentials(!0),p.listenOnce(Gx.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ff.NO_ERROR:const v=p.getResponseJson();Re(Hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Ff.TIMEOUT:Re(Hn,`RPC '${e}' ${c} timed out`),f(new Ne(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const T=p.getStatus();if(Re(Hn,`RPC '${e}' ${c} failed with status:`,T,"response text:",p.getResponseText()),T>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const S=R==null?void 0:R.error;if(S&&S.status&&S.message){const D=function(L){const B=L.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(B)>=0?B:fe.UNKNOWN}(S.status);f(new Ne(D,S.message))}else f(new Ne(fe.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new Ne(fe.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Re(Hn,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(s);Re(Hn,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",_,i,15)})}T_(e,t,i){const s=rv(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Qx(),d=Kx(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=a.join("");Re(Hn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const v=c.createWebChannel(_,f);let T=!1,R=!1;const S=new QB({Zo:k=>{R?Re(Hn,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(T||(Re(Hn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),T=!0),Re(Hn,`RPC '${e}' stream ${s} sending:`,k),v.send(k))},Xo:()=>v.close()}),D=(k,L,B)=>{k.listen(L,z=>{try{B(z)}catch(K){setTimeout(()=>{throw K},0)}})};return D(v,qu.EventType.OPEN,()=>{R||(Re(Hn,`RPC '${e}' stream ${s} transport opened.`),S.__())}),D(v,qu.EventType.CLOSE,()=>{R||(R=!0,Re(Hn,`RPC '${e}' stream ${s} transport closed`),S.u_())}),D(v,qu.EventType.ERROR,k=>{R||(R=!0,ac(Hn,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),S.u_(new Ne(fe.UNAVAILABLE,"The operation could not be completed")))}),D(v,qu.EventType.MESSAGE,k=>{var L;if(!R){const B=k.data[0];bt(!!B,16349);const z=B,K=(z==null?void 0:z.error)||((L=z[0])===null||L===void 0?void 0:L.error);if(K){Re(Hn,`RPC '${e}' stream ${s} received error:`,K);const te=K.status;let pe=function(x){const O=dn[x];if(O!==void 0)return N1(O)}(te),N=K.message;pe===void 0&&(pe=fe.INTERNAL,N="Unknown error status: "+te+" with message "+K.message),R=!0,S.u_(new Ne(pe,N)),v.close()}else Re(Hn,`RPC '${e}' stream ${s} received:`,B),S.c_(B)}}),D(d,$x.STAT_EVENT,k=>{k.stat===Gy.PROXY?Re(Hn,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Gy.NOPROXY&&Re(Hn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}}function ay(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n){return new Z6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t,i=1e3,s=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=i,this.E_=s,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),i=Math.max(0,Date.now()-this.V_),s=Math.max(0,t-i);s>0&&Re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="PersistentStream";class G1{constructor(e,t,i,s,a,c,d,f){this.xi=e,this.y_=i,this.w_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new H1(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.S_===t&&this.K_(i,s)},i=>{e(()=>{const s=new Ne(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.W_(s)})})}K_(e,t){const i=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{i(()=>this.W_(s))}),this.stream.onMessage(s=>{i(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Re(KC,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(Re(KC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WB extends G1{constructor(e,t,i,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,c),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=nB(this.serializer,e),i=function(a){if(!("targetChange"in a))return ze.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ze.min():c.readTime?Fr(c.readTime):ze.min()}(e);return this.listener.j_(t,i)}H_(e){const t={};t.database=nv(this.serializer),t.addTarget=function(a,c){let d;const f=c.target;if(d=Wy(f)?{documents:sB(a,f)}:{query:oB(a,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=D1(a,c.resumeToken);const p=Zy(a,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(ze.min())>0){d.readTime=Nm(a,c.snapshotVersion.toTimestamp());const p=Zy(a,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=lB(this.serializer,e);i&&(t.labels=i),this.L_(t)}J_(e){const t={};t.database=nv(this.serializer),t.removeTarget=e,this.L_(t)}}class XB extends G1{constructor(e,t,i,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,c),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=rB(e.writeResults,e.commitTime),i=Fr(e.commitTime);return this.listener.ea(i,t)}ta(){const e={};e.database=nv(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>iB(this.serializer,i))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{}class ZB extends JB{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.na=!1}ra(){if(this.na)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,ev(t,i),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(fe.UNKNOWN,a.toString())})}Yo(e,t,i,s,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,ev(t,i),s,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(fe.UNKNOWN,c.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class e9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ds(t),this.oa=!1):Re("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="RemoteStore";class t9{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(c=>{i.enqueueAndForget(async()=>{Qa(this)&&(Re(Va,"Restarting streams for network reachability change."),await async function(f){const p=qe(f);p.Ta.add(4),await Qd(p),p.da.set("Unknown"),p.Ta.delete(4),await Tp(p)}(this))})}),this.da=new e9(i,s)}}async function Tp(n){if(Qa(n))for(const e of n.Ia)await e(!0)}async function Qd(n){for(const e of n.Ia)await e(!1)}function $1(n,e){const t=qe(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),WE(t)?YE(t):Cc(t).M_()&&QE(t,e))}function KE(n,e){const t=qe(n),i=Cc(t);t.Pa.delete(e),i.M_()&&K1(t,e),t.Pa.size===0&&(i.M_()?i.N_():Qa(t)&&t.da.set("Unknown"))}function QE(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cc(n).H_(e)}function K1(n,e){n.Aa.Ke(e),Cc(n).J_(e)}function YE(n){n.Aa=new Y6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Cc(n).start(),n.da._a()}function WE(n){return Qa(n)&&!Cc(n).F_()&&n.Pa.size>0}function Qa(n){return qe(n).Ta.size===0}function Q1(n){n.Aa=void 0}async function n9(n){n.da.set("Online")}async function i9(n){n.Pa.forEach((e,t)=>{QE(n,e)})}async function r9(n,e){Q1(n),WE(n)?(n.da.ca(e),YE(n)):n.da.set("Unknown")}async function s9(n,e,t){if(n.da.set("Online"),e instanceof O1&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const d of a.targetIds)s.Pa.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Pa.delete(d),s.Aa.removeTarget(d))}(n,e)}catch(i){Re(Va,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Om(n,i)}else if(e instanceof Gf?n.Aa.Xe(e):e instanceof k1?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(ze.min()))try{const i=await q1(n.localStore);t.compareTo(i)>=0&&await function(a,c){const d=a.Aa.It(c);return d.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Pa.get(p);_&&a.Pa.set(p,_.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,p)=>{const _=a.Pa.get(f);if(!_)return;a.Pa.set(f,_.withResumeToken(Fn.EMPTY_BYTE_STRING,_.snapshotVersion)),K1(a,f);const v=new bo(_.target,f,p,_.sequenceNumber);QE(a,v)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){Re(Va,"Failed to raise snapshot:",i),await Om(n,i)}}async function Om(n,e,t){if(!Sc(e))throw e;n.Ta.add(1),await Qd(n),n.da.set("Offline"),t||(t=()=>q1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re(Va,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Tp(n)})}function Y1(n,e){return e().catch(t=>Om(n,t,e))}async function bp(n){const e=qe(n),t=Bo(e);let i=e.ha.length>0?e.ha[e.ha.length-1].batchId:ME;for(;o9(e);)try{const s=await FB(e.localStore,i);if(s===null){e.ha.length===0&&t.N_();break}i=s.batchId,a9(e,s)}catch(s){await Om(e,s)}W1(e)&&X1(e)}function o9(n){return Qa(n)&&n.ha.length<10}function a9(n,e){n.ha.push(e);const t=Bo(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function W1(n){return Qa(n)&&!Bo(n).F_()&&n.ha.length>0}function X1(n){Bo(n).start()}async function l9(n){Bo(n).ta()}async function c9(n){const e=Bo(n);for(const t of n.ha)e.Z_(t.mutations)}async function u9(n,e,t){const i=n.ha.shift(),s=BE.from(i,e,t);await Y1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await bp(n)}async function d9(n,e){e&&Bo(n).Y_&&await async function(i,s){if(function(c){return K6(c)&&c!==fe.ABORTED}(s.code)){const a=i.ha.shift();Bo(i).O_(),await Y1(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await bp(i)}}(n,e),W1(n)&&X1(n)}async function QC(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Re(Va,"RemoteStore received new credentials");const i=Qa(t);t.Ta.add(3),await Qd(t),i&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Tp(t)}async function h9(n,e){const t=qe(n);e?(t.Ta.delete(2),await Tp(t)):e||(t.Ta.add(2),await Qd(t),t.da.set("Unknown"))}function Cc(n){return n.Ra||(n.Ra=function(t,i,s){const a=qe(t);return a.ra(),new WB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{e_:n9.bind(null,n),n_:i9.bind(null,n),i_:r9.bind(null,n),j_:s9.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),WE(n)?YE(n):n.da.set("Unknown")):(await n.Ra.stop(),Q1(n))})),n.Ra}function Bo(n){return n.Va||(n.Va=function(t,i,s){const a=qe(t);return a.ra(),new XB(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:l9.bind(null,n),i_:d9.bind(null,n),X_:c9.bind(null,n),ea:u9.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await bp(n)):(await n.Va.stop(),n.ha.length>0&&(Re(Va,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const c=Date.now()+i,d=new XE(e,t,c,s,a);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JE(n,e){if(Ds("AsyncQueue",`${e}: ${n}`),Sc(n))return new Ne(fe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Pe.comparator(t.key,i.key):(t,i)=>Pe.comparator(t.key,i.key),this.keyedMap=Hu(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Zl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.ma=new Kt(Pe.comparator)}track(e){const t=e.doc.key,i=this.ma.get(t);i?e.type!==0&&i.type===3?this.ma=this.ma.insert(t,e):e.type===3&&i.type!==1?this.ma=this.ma.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ma=this.ma.remove(t):e.type===1&&i.type===2?this.ma=this.ma.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):je(63341,{Vt:e,fa:i}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,i)=>{e.push(i)}),e}}class hc{constructor(e,t,i,s,a,c,d,f,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new hc(e,t,Zl.emptySet(t),c,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class m9{constructor(){this.queries=WC(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,i){const s=qe(t),a=s.queries;s.queries=WC(),a.forEach((c,d)=>{for(const f of d.ya)f.onError(i)})})(this,new Ne(fe.ABORTED,"Firestore shutting down"))}}function WC(){return new $a(n=>_1(n),pp)}async function p9(n,e){const t=qe(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.wa()&&e.Sa()&&(i=2):(a=new f9,i=e.Sa()?0:1);try{switch(i){case 0:a.pa=await t.onListen(s,!0);break;case 1:a.pa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=JE(c,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&ZE(t)}async function g9(n,e){const t=qe(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const c=a.ya.indexOf(e);c>=0&&(a.ya.splice(c,1),a.ya.length===0?s=e.Sa()?0:1:!a.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function _9(n,e){const t=qe(n);let i=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const d of c.ya)d.va(s)&&(i=!0);c.pa=s}}i&&ZE(t)}function y9(n,e,t){const i=qe(n),s=i.queries.get(e);if(s)for(const a of s.ya)a.onError(t);i.queries.delete(e)}function ZE(n){n.ba.forEach(e=>{e.next()})}var sv,XC;(XC=sv||(sv={})).Ca="default",XC.Cache="cache";class v9{constructor(e,t,i){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=i||{}}va(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new hc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const i=t!=="Offline";return(!this.options.La||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==sv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.key=e}}class Z1{constructor(e){this.key=e}}class E9{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=lt(),this.mutatedKeys=lt(),this.Ha=y1(e),this.Ja=new Zl(this.Ha)}get Ya(){return this.Ga}Za(e,t){const i=t?t.Xa:new YC,s=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,v)=>{const T=s.get(_),R=gp(this.query,v)?v:null,S=!!T&&this.mutatedKeys.has(T.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let k=!1;T&&R?T.data.isEqual(R.data)?S!==D&&(i.track({type:3,doc:R}),k=!0):this.eu(T,R)||(i.track({type:2,doc:R}),k=!0,(f&&this.Ha(R,f)>0||p&&this.Ha(R,p)<0)&&(d=!0)):!T&&R?(i.track({type:0,doc:R}),k=!0):T&&!R&&(i.track({type:1,doc:T}),k=!0,(f||p)&&(d=!0)),k&&(R?(c=c.add(R),a=D?a.add(_):a.delete(_)):(c=c.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ja:c,Xa:i,Cs:d,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const c=e.Xa.ga();c.sort((_,v)=>function(R,S){const D=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Vt:k})}};return D(R)-D(S)}(_.type,v.type)||this.Ha(_.doc,v.doc)),this.tu(i),s=s!=null&&s;const d=t&&!s?this.nu():[],f=this.ja.size===0&&this.current&&!s?1:0,p=f!==this.za;return this.za=f,c.length!==0||p?{snapshot:new hc(this.query,e.Ja,a,c,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ru:d}:{ru:d}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new YC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=lt(),this.Ja.forEach(i=>{this.iu(i.key)&&(this.ja=this.ja.add(i.key))});const t=[];return e.forEach(i=>{this.ja.has(i)||t.push(new Z1(i))}),this.ja.forEach(i=>{e.has(i)||t.push(new J1(i))}),t}su(e){this.Ga=e.$s,this.ja=lt();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return hc.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const e0="SyncEngine";class T9{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class b9{constructor(e){this.key=e,this._u=!1}}class w9{constructor(e,t,i,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.au={},this.uu=new $a(d=>_1(d),pp),this.cu=new Map,this.lu=new Set,this.hu=new Kt(Pe.comparator),this.Pu=new Map,this.Tu=new qE,this.Iu={},this.Eu=new Map,this.du=dc.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function S9(n,e,t=!0){const i=sN(n);let s;const a=i.uu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.ou()):s=await eN(i,e,t,!0),s}async function C9(n,e){const t=sN(n);await eN(t,e,!0,!1)}async function eN(n,e,t,i){const s=await zB(n.localStore,Br(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await A9(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&$1(n.remoteStore,s),d}async function A9(n,e,t,i,s){n.Ru=(v,T,R)=>async function(D,k,L,B){let z=k.view.Za(L);z.Cs&&(z=await qC(D.localStore,k.query,!1).then(({documents:N})=>k.view.Za(N,z)));const K=B&&B.targetChanges.get(k.targetId),te=B&&B.targetMismatches.get(k.targetId)!=null,pe=k.view.applyChanges(z,D.isPrimaryClient,K,te);return ZC(D,k.targetId,pe.ru),pe.snapshot}(n,v,T,R);const a=await qC(n.localStore,e,!0),c=new E9(e,a.$s),d=c.Za(a.documents),f=Kd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=c.applyChanges(d,n.isPrimaryClient,f);ZC(n,t,p.ru);const _=new T9(e,t,c);return n.uu.set(e,_),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),p.snapshot}async function R9(n,e,t){const i=qe(n),s=i.uu.get(e),a=i.cu.get(s.targetId);if(a.length>1)return i.cu.set(s.targetId,a.filter(c=>!pp(c,e))),void i.uu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await iv(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&KE(i.remoteStore,s.targetId),ov(i,s.targetId)}).catch(wc)):(ov(i,s.targetId),await iv(i.localStore,s.targetId,!0))}async function I9(n,e){const t=qe(n),i=t.uu.get(e),s=t.cu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),KE(t.remoteStore,i.targetId))}async function x9(n,e,t){const i=L9(n);try{const s=await function(c,d){const f=qe(c),p=vn.now(),_=d.reduce((R,S)=>R.add(S.key),lt());let v,T;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let S=Ms(),D=lt();return f.Bs.getEntries(R,_).next(k=>{S=k,S.forEach((L,B)=>{B.isValidDocument()||(D=D.add(L))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,S)).next(k=>{v=k;const L=[];for(const B of d){const z=z6(B,v.get(B.key).overlayedDocument);z!=null&&L.push(new Ka(B.key,z,l1(z.value.mapValue),As.exists(!0)))}return f.mutationQueue.addMutationBatch(R,p,L,d)}).next(k=>{T=k;const L=k.applyToLocalDocumentSet(v,D);return f.documentOverlayCache.saveOverlays(R,k.batchId,L)})}).then(()=>({batchId:T.batchId,changes:E1(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(c,d,f){let p=c.Iu[c.currentUser.toKey()];p||(p=new Kt(We)),p=p.insert(d,f),c.Iu[c.currentUser.toKey()]=p}(i,s.batchId,t),await Yd(i,s.changes),await bp(i.remoteStore)}catch(s){const a=JE(s,"Failed to persist write");t.reject(a)}}async function tN(n,e){const t=qe(n);try{const i=await jB(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.Pu.get(a);c&&(bt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c._u=!0:s.modifiedDocuments.size>0?bt(c._u,14607):s.removedDocuments.size>0&&(bt(c._u,42227),c._u=!1))}),await Yd(t,i,e)}catch(i){await wc(i)}}function JC(n,e,t){const i=qe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.uu.forEach((a,c)=>{const d=c.view.Da(e);d.snapshot&&s.push(d.snapshot)}),function(c,d){const f=qe(c);f.onlineState=d;let p=!1;f.queries.forEach((_,v)=>{for(const T of v.ya)T.Da(d)&&(p=!0)}),p&&ZE(f)}(i.eventManager,e),s.length&&i.au.j_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function N9(n,e,t){const i=qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Pu.get(e),a=s&&s.key;if(a){let c=new Kt(Pe.comparator);c=c.insert(a,$n.newNoDocument(a,ze.min()));const d=lt().add(a),f=new vp(ze.min(),new Map,new Kt(We),c,d);await tN(i,f),i.hu=i.hu.remove(a),i.Pu.delete(e),t0(i)}else await iv(i.localStore,e,!1).then(()=>ov(i,e,t)).catch(wc)}async function k9(n,e){const t=qe(n),i=e.batch.batchId;try{const s=await VB(t.localStore,e);iN(t,i,null),nN(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Yd(t,s)}catch(s){await wc(s)}}async function O9(n,e,t){const i=qe(n);try{const s=await function(c,d){const f=qe(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return f.mutationQueue.lookupMutationBatch(p,d).next(v=>(bt(v!==null,37113),_=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>f.localDocuments.getDocuments(p,_))})}(i.localStore,e);iN(i,e,t),nN(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Yd(i,s)}catch(s){await wc(s)}}function nN(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function iN(n,e,t){const i=qe(n);let s=i.Iu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.Iu[i.currentUser.toKey()]=s}}function ov(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.cu.get(e))n.uu.delete(i),t&&n.au.Vu(i,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(i=>{n.Tu.containsKey(i)||rN(n,i)})}function rN(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(KE(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),t0(n))}function ZC(n,e,t){for(const i of t)i instanceof J1?(n.Tu.addReference(i.key,e),D9(n,i)):i instanceof Z1?(Re(e0,"Document no longer in limbo: "+i.key),n.Tu.removeReference(i.key,e),n.Tu.containsKey(i.key)||rN(n,i.key)):je(19791,{mu:i})}function D9(n,e){const t=e.key,i=t.path.canonicalString();n.hu.get(t)||n.lu.has(i)||(Re(e0,"New document in limbo: "+t),n.lu.add(i),t0(n))}function t0(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new Pe(Ft.fromString(e)),i=n.du.next();n.Pu.set(i,new b9(t)),n.hu=n.hu.insert(t,i),$1(n.remoteStore,new bo(Br(p1(t.path)),i,"TargetPurposeLimboResolution",hp.le))}}async function Yd(n,e,t){const i=qe(n),s=[],a=[],c=[];i.uu.isEmpty()||(i.uu.forEach((d,f)=>{c.push(i.Ru(f,e,t).then(p=>{var _;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){s.push(p);const v=GE.Rs(f.targetId,p);a.push(v)}}))}),await Promise.all(c),i.au.j_(s),await async function(f,p){const _=qe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>he.forEach(p,T=>he.forEach(T.ds,R=>_.persistence.referenceDelegate.addReference(v,T.targetId,R)).next(()=>he.forEach(T.As,R=>_.persistence.referenceDelegate.removeReference(v,T.targetId,R)))))}catch(v){if(!Sc(v))throw v;Re($E,"Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const R=_.xs.get(T),S=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(S);_.xs=_.xs.insert(T,D)}}}(i.localStore,a))}async function M9(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Re(e0,"User change. New user:",e.toKey());const i=await z1(t.localStore,e);t.currentUser=e,function(a,c){a.Eu.forEach(d=>{d.forEach(f=>{f.reject(new Ne(fe.CANCELLED,c))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Yd(t,i.ks)}}function P9(n,e){const t=qe(n),i=t.Pu.get(e);if(i&&i._u)return lt().add(i.key);{let s=lt();const a=t.cu.get(e);if(!a)return s;for(const c of a){const d=t.uu.get(c);s=s.unionWith(d.view.Ya)}return s}}function sN(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N9.bind(null,e),e.au.j_=_9.bind(null,e.eventManager),e.au.Vu=y9.bind(null,e.eventManager),e}function L9(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O9.bind(null,e),e}class Dm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ep(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return UB(this.persistence,new MB,e.initialUser,this.serializer)}yu(e){return new F1(HE.fi,this.serializer)}pu(e){return new HB}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dm.provider={build:()=>new Dm};class U9 extends Dm{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){bt(this.persistence.referenceDelegate instanceof km,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new vB(i,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new F1(i=>km.fi(i,t),this.serializer)}}class av{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M9.bind(null,this.syncEngine),await h9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new m9}()}createDatastore(e){const t=Ep(e.databaseInfo.databaseId),i=function(a){return new YB(a)}(e.databaseInfo);return function(a,c,d,f){return new ZB(a,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,a,c,d){return new t9(i,s,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>JC(this.syncEngine,t,0),function(){return $C.C()?new $C:new GB}())}createSyncEngine(e,t){return function(s,a,c,d,f,p,_){const v=new w9(s,a,c,d,f,p);return _&&(v.Au=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=qe(s);Re(Va,"RemoteStore shutting down."),a.Ta.add(5),await Qd(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}av.provider={build:()=>new av};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="FirestoreClient";class j9{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Gn.UNAUTHENTICATED,this.clientId=Jx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{Re(Fo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Re(Fo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=JE(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ly(n,e){n.asyncQueue.verifyOperationInProgress(),Re(Fo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await z1(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function eA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await B9(n);Re(Fo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>QC(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>QC(e.remoteStore,s)),n._onlineComponents=e}async function B9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(Fo,"Using user provided OfflineComponentProvider");try{await ly(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ac("Error using user provided cache. Falling back to memory cache: "+t),await ly(n,new Dm)}}else Re(Fo,"Using default OfflineComponentProvider"),await ly(n,new U9(void 0));return n._offlineComponents}async function oN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(Fo,"Using user provided OnlineComponentProvider"),await eA(n,n._uninitializedComponentsProvider._online)):(Re(Fo,"Using default OnlineComponentProvider"),await eA(n,new av))),n._onlineComponents}function F9(n){return oN(n).then(e=>e.syncEngine)}async function z9(n){const e=await oN(n),t=e.eventManager;return t.onListen=S9.bind(null,e.syncEngine),t.onUnlisten=R9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=I9.bind(null,e.syncEngine),t}function q9(n,e,t={}){const i=new Ro;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,f,p){const _=new V9({next:T=>{_.Cu(),c.enqueueAndForget(()=>g9(a,v)),T.fromCache&&f.source==="server"?p.reject(new Ne(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new v9(d,_,{includeMetadataChanges:!0,La:!0});return p9(a,v)}(await z9(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n,e,t){if(!t)throw new Ne(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function H9(n,e,t,i){if(e===!0&&i===!0)throw new Ne(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nA(n){if(!Pe.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iA(n){if(Pe.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function Mm(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wp(n);throw new Ne(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="firestore.googleapis.com",rA=!0;class sA{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cN,this.ssl=rA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:rA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_B)throw new Ne(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aN((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Q3;switch(i.type){case"firstParty":return new J3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ne(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=tA.get(t);i&&(Re("ComponentProvider","Removing Datastore"),tA.delete(t),i.terminate())}(this),Promise.resolve()}}function G9(n,e,t,i={}){var s;n=Mm(n,Sp);const a=Vs(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(qm(`https://${f}`),Hm("Firestore",!0)),c.host!==cN&&c.host!==f&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:a,emulatorOptions:i});if(!ko(p,d)&&(n._setSettings(p),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=Gn.MOCK_USER;else{_=Ov(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Ne(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Gn(T)}n._authCredentials=new Y3(new Wx(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ac(this.firestore,e,this._query)}}class Yi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yi(this.firestore,e,this._key)}}class Io extends Ac{constructor(e,t,i){super(e,t,p1(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yi(this.firestore,null,new Pe(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function Pm(n,e,...t){if(n=Ot(n),lN("collection","path",e),n instanceof Sp){const i=Ft.fromString(e,...t);return iA(i),new Io(n,null,i)}{if(!(n instanceof Yi||n instanceof Io))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ft.fromString(e,...t));return iA(i),new Io(n.firestore,null,i)}}function $9(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=Jx.newId()),lN("doc","path",e),n instanceof Sp){const i=Ft.fromString(e,...t);return nA(i),new Yi(n,null,new Pe(i))}{if(!(n instanceof Yi||n instanceof Io))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ft.fromString(e,...t));return nA(i),new Yi(n.firestore,n instanceof Io?n.converter:null,new Pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="AsyncQueue";class aA{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new H1(this,"async_queue_retry"),this.ec=()=>{const i=ay();i&&Re(oA,"Visibility state changed to "+i.visibilityState),this.C_.p_()},this.tc=e;const t=ay();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=ay();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Ro;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Sc(e))throw e;Re(oA,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(i=>{throw this.Ju=i,this.Yu=!1,Ds("INTERNAL UNHANDLED ERROR: ",lA(i)),i}).then(i=>(this.Yu=!1,i))));return this.tc=t,t}enqueueAfterDelay(e,t,i){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const s=XE.createAndSchedule(this,e,t,i,a=>this.oc(a));return this.Hu.push(s),s}nc(){this.Ju&&je(47125,{_c:lA(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function lA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class n0 extends Sp{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new aA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aA(e),this._firestoreClient=void 0,await e}}}function K9(n,e){const t=Pd(),i=Sm,s=zo(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=kv("firestore");a&&G9(s,...a)}return s}function uN(n){if(n._terminated)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Q9(n),n._firestoreClient}function Q9(n){var e,t,i;const s=n._freezeSettings(),a=function(d,f,p,_){return new f6(d,f,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,aN(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new j9(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fc(Fn.fromBase64String(e))}catch(t){throw new Ne(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fc(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9=/^__.*__$/;class W9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new $d(e,this.data,t,this.fieldTransforms)}}function hN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{hc:n})}}class o0{constructor(e,t,i,s,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new o0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:i,Ec:!1});return s.dc(e),s}Ac(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:i,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Lm(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(hN(this.hc)&&Y9.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class X9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ep(e)}gc(e,t,i,s=!1){return new o0({hc:e,methodName:t,fc:i,path:Vn.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fN(n){const e=n._freezeSettings(),t=Ep(n._databaseId);return new X9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function J9(n,e,t,i,s,a={}){const c=n.gc(a.merge||a.mergeFields?2:0,e,t,s);gN("Data must be an object, but it was:",c,i);const d=mN(i,c);let f,p;if(a.merge)f=new dr(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const _=[];for(const v of a.mergeFields){const T=eF(e,v,t);if(!c.contains(T))throw new Ne(fe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);nF(_,T)||_.push(T)}f=new dr(_),p=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=c.fieldTransforms;return new W9(new $i(d),f,p)}function Z9(n,e,t,i=!1){return a0(t,n.gc(i?4:3,e))}function a0(n,e){if(pN(n=Ot(n)))return gN("Unsupported field value:",e,n),mN(n,e);if(n instanceof dN)return function(i,s){if(!hN(s.hc))throw s.Vc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(i,s){const a=[];let c=0;for(const d of i){let f=a0(d,s.Rc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}}(n,e)}return function(i,s){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return L6(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=vn.fromDate(i);return{timestampValue:Nm(s.serializer,a)}}if(i instanceof vn){const a=new vn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nm(s.serializer,a)}}if(i instanceof r0)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fc)return{bytesValue:D1(s.serializer,i._byteString)};if(i instanceof Yi){const a=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw s.Vc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:zE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof s0)return function(c,d){return{mapValue:{fields:{[o1]:{stringValue:a1},[Cm]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Vc("VectorValues must only contain numeric values.");return jE(d.serializer,p)})}}}}}}(i,s);throw s.Vc(`Unsupported field value: ${wp(i)}`)}(n,e)}function mN(n,e){const t={};return e1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ga(n,(i,s)=>{const a=a0(s,e.Ic(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function pN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof r0||n instanceof fc||n instanceof Yi||n instanceof dN||n instanceof s0)}function gN(n,e,t){if(!pN(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=wp(t);throw i==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+i)}}function eF(n,e,t){if((e=Ot(e))instanceof i0)return e._internalPath;if(typeof e=="string")return _N(n,e);throw Lm("Field path arguments must be of type string or ",n,!1,void 0,t)}const tF=new RegExp("[~\\*/\\[\\]]");function _N(n,e,t){if(e.search(tF)>=0)throw Lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new i0(...e.split("."))._internalPath}catch{throw Lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lm(n,e,t,i,s){const a=i&&!i.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${i}`),c&&(f+=` in document ${s}`),f+=")"),new Ne(fe.INVALID_ARGUMENT,d+n+f)}function nF(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Yi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(l0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class iF extends yN{data(){return super.data()}}function l0(n,e){return typeof e=="string"?_N(n,e):e instanceof i0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c0{}class sF extends c0{}function lv(n,e,...t){let i=[];e instanceof c0&&i.push(e),i=i.concat(t),function(a){const c=a.filter(f=>f instanceof u0).length,d=a.filter(f=>f instanceof Cp).length;if(c>1||c>0&&d>0)throw new Ne(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Cp extends sF{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Cp(e,t,i)}_apply(e){const t=this._parse(e);return vN(e._query,t),new Ac(e.firestore,e.converter,Xy(e._query,t))}_parse(e){const t=fN(e.firestore);return function(a,c,d,f,p,_,v){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){uA(v,_);const S=[];for(const D of v)S.push(cA(f,a,D));T={arrayValue:{values:S}}}else T=cA(f,a,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||uA(v,_),T=Z9(d,c,v,_==="in"||_==="not-in");return hn.create(p,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cv(n,e,t){const i=e,s=l0("where",n);return Cp._create(s,i,t)}class u0 extends c0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new u0(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let c=s;const d=a.getFlattenedFilters();for(const f of d)vN(c,f),c=Xy(c,f)}(e._query,t),new Ac(e.firestore,e.converter,Xy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cA(n,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g1(e)&&t.indexOf("/")!==-1)throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ft.fromString(t));if(!Pe.isDocumentKey(i))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return SC(n,new Pe(i))}if(t instanceof Yi)return SC(n,t._key);throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wp(t)}.`)}function uA(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vN(n,e){const t=function(s,a){for(const c of s)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class oF{convertValue(e,t="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ga(e,(s,a)=>{i[s]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,s;const a=(s=(i=(t=e.fields)===null||t===void 0?void 0:t[Cm].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(c=>sn(c.doubleValue));return new s0(a)}convertGeoPoint(e){return new r0(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(wd(e));default:return null}}convertTimestamp(e){const t=Uo(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ft.fromString(e);bt(j1(i),9688,{name:e});const s=new Sd(i.get(1),i.get(3)),a=new Pe(i.popFirst(5));return s.isEqual(t)||Ds(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lF extends yN{constructor(e,t,i,s,a,c){super(e,t,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(l0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class $f extends lF{data(e={}){return super.data(e)}}class cF{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Nf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new $f(this._firestore,this._userDataWriter,i.key,i,new Nf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(d=>{const f=new $f(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Nf(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new $f(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Nf(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:uF(d.type),doc:f,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}class dF extends oF{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yi(this.firestore,null,t)}}function uv(n){n=Mm(n,Ac);const e=Mm(n.firestore,n0),t=uN(e),i=new dF(e);return rF(n._query),q9(t,n._query).then(s=>new cF(e,i,n,s))}function hF(n,e){const t=Mm(n.firestore,n0),i=$9(n),s=aF(n.converter,e);return fF(t,[J9(fN(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,As.exists(!1))]).then(()=>i)}function fF(n,e){return function(i,s){const a=new Ro;return i.asyncQueue.enqueueAndForget(async()=>x9(await F9(i),s,a)),a.promise}(uN(n),e)}(function(e,t=!0){(function(s){bc=s})(qo),Wi(new Ni("firestore",(i,{instanceIdentifier:s,options:a})=>{const c=i.getProvider("app").getImmediate(),d=new n0(new W3(i.getProvider("auth-internal")),new Z3(c,i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ne(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sd(p.options.projectId,_)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Yn(hC,fC,e),Yn(hC,fC,"esm2017")})();let EN=null;const mF={apiKey:"AIzaSyAJPSCYXRziedHYjHQVky6cE1E_WRdFZsw",authDomain:"script-39a43.firebaseapp.com",projectId:"script-39a43",storageBucket:"script-39a43.firebasestorage.app",messagingSenderId:"29280693831",appId:"1:29280693831:web:3f8184059b57e783c1cb62",measurementId:"G-DXK7GQWZQF"},TN=[];let bN=null,dv=null,wN=null;const hv=n=>{bN?n(dv):TN.push(n)};(async()=>{bN=await AR(mF),dv=K9(),wN=$3();for(const n of TN)n(dv)})();const fv=()=>{if(!window.usuarioLogado)return;const n=document.getElementById("chatNotification");if(!n){console.error("Elemento chatNotification não encontrado!");return}oc(ke(Oe(),"chats"),e=>{let t=0;e.forEach(i=>{i.forEach(s=>{const a=s.val();a.remetente!==EN.uid&&a.lida===!1&&t++})}),t>0?(n.textContent=t>99?"99+":String(t),n.style.display="inline"):n.style.display="none"})};function pF(n){const e=new Date,t=e-n,i=24*60*60*1e3,s=60*1e3,a=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],c=["Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"];return t<s?"Agora":t<i&&n.getDate()===e.getDate()?"Hoje":t<i*2&&n.getDate()===e.getDate()-1?"Ontem":t<7*24*60*60*1e3?c[n.getDay()]:`${n.getDate()} de ${a[n.getMonth()]} de ${n.getFullYear()}`}function mv(n){return`${n.getHours()}:${n.getMinutes().toString().padStart(2,"0")}`}const pv=n=>{EN=n},bs=n=>`https://lh3.googleusercontent.com/u/0/d/${n}=w1366-h607-iv1?auditContext=forDisplay`;function SN(n,e){return function(){return n.apply(e,arguments)}}const{toString:gF}=Object.prototype,{getPrototypeOf:d0}=Object,{iterator:Ap,toStringTag:CN}=Symbol,Rp=(n=>e=>{const t=gF.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),pr=n=>(n=n.toLowerCase(),e=>Rp(e)===n),Ip=n=>e=>typeof e===n,{isArray:Rc}=Array,Id=Ip("undefined");function _F(n){return n!==null&&!Id(n)&&n.constructor!==null&&!Id(n.constructor)&&gi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const AN=pr("ArrayBuffer");function yF(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&AN(n.buffer),e}const vF=Ip("string"),gi=Ip("function"),RN=Ip("number"),xp=n=>n!==null&&typeof n=="object",EF=n=>n===!0||n===!1,Kf=n=>{if(Rp(n)!=="object")return!1;const e=d0(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(CN in n)&&!(Ap in n)},TF=pr("Date"),bF=pr("File"),wF=pr("Blob"),SF=pr("FileList"),CF=n=>xp(n)&&gi(n.pipe),AF=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||gi(n.append)&&((e=Rp(n))==="formdata"||e==="object"&&gi(n.toString)&&n.toString()==="[object FormData]"))},RF=pr("URLSearchParams"),[IF,xF,NF,kF]=["ReadableStream","Request","Response","Headers"].map(pr),OF=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wd(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),Rc(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),c=a.length;let d;for(i=0;i<c;i++)d=a[i],e.call(null,n[d],d,n)}}function IN(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const Aa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xN=n=>!Id(n)&&n!==Aa;function gv(){const{caseless:n}=xN(this)&&this||{},e={},t=(i,s)=>{const a=n&&IN(e,s)||s;Kf(e[a])&&Kf(i)?e[a]=gv(e[a],i):Kf(i)?e[a]=gv({},i):Rc(i)?e[a]=i.slice():e[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Wd(arguments[i],t);return e}const DF=(n,e,t,{allOwnKeys:i}={})=>(Wd(e,(s,a)=>{t&&gi(s)?n[a]=SN(s,t):n[a]=s},{allOwnKeys:i}),n),MF=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),PF=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},LF=(n,e,t,i)=>{let s,a,c;const d={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)c=s[a],(!i||i(c,n,e))&&!d[c]&&(e[c]=n[c],d[c]=!0);n=t!==!1&&d0(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},UF=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},VF=n=>{if(!n)return null;if(Rc(n))return n;let e=n.length;if(!RN(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},jF=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&d0(Uint8Array)),BF=(n,e)=>{const i=(n&&n[Ap]).call(n);let s;for(;(s=i.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},FF=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},zF=pr("HTMLFormElement"),qF=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),dA=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),HF=pr("RegExp"),NN=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Wd(t,(s,a)=>{let c;(c=e(s,a,n))!==!1&&(i[a]=c||s)}),Object.defineProperties(n,i)},GF=n=>{NN(n,(e,t)=>{if(gi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(gi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},$F=(n,e)=>{const t={},i=s=>{s.forEach(a=>{t[a]=!0})};return Rc(n)?i(n):i(String(n).split(e)),t},KF=()=>{},QF=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function YF(n){return!!(n&&gi(n.append)&&n[CN]==="FormData"&&n[Ap])}const WF=n=>{const e=new Array(10),t=(i,s)=>{if(xp(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const a=Rc(i)?[]:{};return Wd(i,(c,d)=>{const f=t(c,s+1);!Id(f)&&(a[d]=f)}),e[s]=void 0,a}}return i};return t(n,0)},XF=pr("AsyncFunction"),JF=n=>n&&(xp(n)||gi(n))&&gi(n.then)&&gi(n.catch),kN=((n,e)=>n?setImmediate:e?((t,i)=>(Aa.addEventListener("message",({source:s,data:a})=>{s===Aa&&a===t&&i.length&&i.shift()()},!1),s=>{i.push(s),Aa.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",gi(Aa.postMessage)),ZF=typeof queueMicrotask<"u"?queueMicrotask.bind(Aa):typeof process<"u"&&process.nextTick||kN,e5=n=>n!=null&&gi(n[Ap]),ie={isArray:Rc,isArrayBuffer:AN,isBuffer:_F,isFormData:AF,isArrayBufferView:yF,isString:vF,isNumber:RN,isBoolean:EF,isObject:xp,isPlainObject:Kf,isReadableStream:IF,isRequest:xF,isResponse:NF,isHeaders:kF,isUndefined:Id,isDate:TF,isFile:bF,isBlob:wF,isRegExp:HF,isFunction:gi,isStream:CF,isURLSearchParams:RF,isTypedArray:jF,isFileList:SF,forEach:Wd,merge:gv,extend:DF,trim:OF,stripBOM:MF,inherits:PF,toFlatObject:LF,kindOf:Rp,kindOfTest:pr,endsWith:UF,toArray:VF,forEachEntry:BF,matchAll:FF,isHTMLForm:zF,hasOwnProperty:dA,hasOwnProp:dA,reduceDescriptors:NN,freezeMethods:GF,toObjectSet:$F,toCamelCase:qF,noop:KF,toFiniteNumber:QF,findKey:IN,global:Aa,isContextDefined:xN,isSpecCompliantForm:YF,toJSONObject:WF,isAsyncFn:XF,isThenable:JF,setImmediate:kN,asap:ZF,isIterable:e5};function $e(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}ie.inherits($e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const ON=$e.prototype,DN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{DN[n]={value:n}});Object.defineProperties($e,DN);Object.defineProperty(ON,"isAxiosError",{value:!0});$e.from=(n,e,t,i,s,a)=>{const c=Object.create(ON);return ie.toFlatObject(n,c,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),$e.call(c,n.message,e,t,i,s),c.cause=n,c.name=n.name,a&&Object.assign(c,a),c};const t5=null;function _v(n){return ie.isPlainObject(n)||ie.isArray(n)}function MN(n){return ie.endsWith(n,"[]")?n.slice(0,-2):n}function hA(n,e,t){return n?n.concat(e).map(function(s,a){return s=MN(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function n5(n){return ie.isArray(n)&&!n.some(_v)}const i5=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function Np(n,e,t){if(!ie.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,k){return!ie.isUndefined(k[D])});const i=t.metaTokens,s=t.visitor||_,a=t.dots,c=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(s))throw new TypeError("visitor must be a function");function p(S){if(S===null)return"";if(ie.isDate(S))return S.toISOString();if(ie.isBoolean(S))return S.toString();if(!f&&ie.isBlob(S))throw new $e("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(S)||ie.isTypedArray(S)?f&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function _(S,D,k){let L=S;if(S&&!k&&typeof S=="object"){if(ie.endsWith(D,"{}"))D=i?D:D.slice(0,-2),S=JSON.stringify(S);else if(ie.isArray(S)&&n5(S)||(ie.isFileList(S)||ie.endsWith(D,"[]"))&&(L=ie.toArray(S)))return D=MN(D),L.forEach(function(z,K){!(ie.isUndefined(z)||z===null)&&e.append(c===!0?hA([D],K,a):c===null?D:D+"[]",p(z))}),!1}return _v(S)?!0:(e.append(hA(k,D,a),p(S)),!1)}const v=[],T=Object.assign(i5,{defaultVisitor:_,convertValue:p,isVisitable:_v});function R(S,D){if(!ie.isUndefined(S)){if(v.indexOf(S)!==-1)throw Error("Circular reference detected in "+D.join("."));v.push(S),ie.forEach(S,function(L,B){(!(ie.isUndefined(L)||L===null)&&s.call(e,L,ie.isString(B)?B.trim():B,D,T))===!0&&R(L,D?D.concat(B):[B])}),v.pop()}}if(!ie.isObject(n))throw new TypeError("data must be an object");return R(n),e}function fA(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function h0(n,e){this._pairs=[],n&&Np(n,this,e)}const PN=h0.prototype;PN.append=function(e,t){this._pairs.push([e,t])};PN.toString=function(e){const t=e?function(i){return e.call(this,i,fA)}:fA;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function r5(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function LN(n,e,t){if(!e)return n;const i=t&&t.encode||r5;ie.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=ie.isURLSearchParams(e)?e.toString():new h0(e,t).toString(i),a){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class mA{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(i){i!==null&&e(i)})}}const UN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s5=typeof URLSearchParams<"u"?URLSearchParams:h0,o5=typeof FormData<"u"?FormData:null,a5=typeof Blob<"u"?Blob:null,l5={isBrowser:!0,classes:{URLSearchParams:s5,FormData:o5,Blob:a5},protocols:["http","https","file","blob","url","data"]},f0=typeof window<"u"&&typeof document<"u",yv=typeof navigator=="object"&&navigator||void 0,c5=f0&&(!yv||["ReactNative","NativeScript","NS"].indexOf(yv.product)<0),u5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",d5=f0&&window.location.href||"http://localhost",h5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:f0,hasStandardBrowserEnv:c5,hasStandardBrowserWebWorkerEnv:u5,navigator:yv,origin:d5},Symbol.toStringTag,{value:"Module"})),Kn={...h5,...l5};function f5(n,e){return Np(n,new Kn.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,a){return Kn.isNode&&ie.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function m5(n){return ie.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function p5(n){const e={},t=Object.keys(n);let i;const s=t.length;let a;for(i=0;i<s;i++)a=t[i],e[a]=n[a];return e}function VN(n){function e(t,i,s,a){let c=t[a++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),f=a>=t.length;return c=!c&&ie.isArray(s)?s.length:c,f?(ie.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!d):((!s[c]||!ie.isObject(s[c]))&&(s[c]=[]),e(t,i,s[c],a)&&ie.isArray(s[c])&&(s[c]=p5(s[c])),!d)}if(ie.isFormData(n)&&ie.isFunction(n.entries)){const t={};return ie.forEachEntry(n,(i,s)=>{e(m5(i),s,t,0)}),t}return null}function g5(n,e,t){if(ie.isString(n))try{return(e||JSON.parse)(n),ie.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Xd={transitional:UN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,a=ie.isObject(e);if(a&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return s?JSON.stringify(VN(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return f5(e,this.formSerializer).toString();if((d=ie.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Np(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),g5(e)):e}],transformResponse:[function(e){const t=this.transitional||Xd.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(i&&!this.responseType||s)){const c=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?$e.from(d,$e.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kn.classes.FormData,Blob:Kn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],n=>{Xd.headers[n]={}});const _5=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y5=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(c){s=c.indexOf(":"),t=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!t||e[t]&&_5[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},pA=Symbol("internals");function ju(n){return n&&String(n).trim().toLowerCase()}function Qf(n){return n===!1||n==null?n:ie.isArray(n)?n.map(Qf):String(n)}function v5(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const E5=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function cy(n,e,t,i,s){if(ie.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!ie.isString(e)){if(ie.isString(i))return e.indexOf(i)!==-1;if(ie.isRegExp(i))return i.test(e)}}function T5(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function b5(n,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,a,c){return this[i].call(this,e,s,a,c)},configurable:!0})})}let _i=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function a(d,f,p){const _=ju(f);if(!_)throw new Error("header name must be a non-empty string");const v=ie.findKey(s,_);(!v||s[v]===void 0||p===!0||p===void 0&&s[v]!==!1)&&(s[v||f]=Qf(d))}const c=(d,f)=>ie.forEach(d,(p,_)=>a(p,_,f));if(ie.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(ie.isString(e)&&(e=e.trim())&&!E5(e))c(y5(e),t);else if(ie.isObject(e)&&ie.isIterable(e)){let d={},f,p;for(const _ of e){if(!ie.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[p=_[0]]=(f=d[p])?ie.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}c(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=ju(e),e){const i=ie.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return v5(s);if(ie.isFunction(t))return t.call(this,s,i);if(ie.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ju(e),e){const i=ie.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||cy(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function a(c){if(c=ju(c),c){const d=ie.findKey(i,c);d&&(!t||cy(i,i[d],d,t))&&(delete i[d],s=!0)}}return ie.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const a=t[i];(!e||cy(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,i={};return ie.forEach(this,(s,a)=>{const c=ie.findKey(i,a);if(c){t[c]=Qf(s),delete t[a];return}const d=e?T5(a):String(a).trim();d!==a&&delete t[a],t[d]=Qf(s),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&ie.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[pA]=this[pA]={accessors:{}}).accessors,s=this.prototype;function a(c){const d=ju(c);i[d]||(b5(s,c),i[d]=!0)}return ie.isArray(e)?e.forEach(a):a(e),this}};_i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(_i.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});ie.freezeMethods(_i);function uy(n,e){const t=this||Xd,i=e||t,s=_i.from(i.headers);let a=i.data;return ie.forEach(n,function(d){a=d.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function jN(n){return!!(n&&n.__CANCEL__)}function Ic(n,e,t){$e.call(this,n??"canceled",$e.ERR_CANCELED,e,t),this.name="CanceledError"}ie.inherits(Ic,$e,{__CANCEL__:!0});function BN(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new $e("Request failed with status code "+t.status,[$e.ERR_BAD_REQUEST,$e.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function w5(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function S5(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,a=0,c;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),_=i[a];c||(c=p),t[s]=f,i[s]=p;let v=a,T=0;for(;v!==s;)T+=t[v++],v=v%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),p-c<e)return;const R=_&&p-_;return R?Math.round(T*1e3/R):void 0}}function C5(n,e){let t=0,i=1e3/e,s,a;const c=(p,_=Date.now())=>{t=_,s=null,a&&(clearTimeout(a),a=null),n.apply(null,p)};return[(...p)=>{const _=Date.now(),v=_-t;v>=i?c(p,_):(s=p,a||(a=setTimeout(()=>{a=null,c(s)},i-v)))},()=>s&&c(s)]}const Um=(n,e,t=3)=>{let i=0;const s=S5(50,250);return C5(a=>{const c=a.loaded,d=a.lengthComputable?a.total:void 0,f=c-i,p=s(f),_=c<=d;i=c;const v={loaded:c,total:d,progress:d?c/d:void 0,bytes:f,rate:p||void 0,estimated:p&&d&&_?(d-c)/p:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(v)},t)},gA=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},_A=n=>(...e)=>ie.asap(()=>n(...e)),A5=Kn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Kn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Kn.origin),Kn.navigator&&/(msie|trident)/i.test(Kn.navigator.userAgent)):()=>!0,R5=Kn.hasStandardBrowserEnv?{write(n,e,t,i,s,a){const c=[n+"="+encodeURIComponent(e)];ie.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),ie.isString(i)&&c.push("path="+i),ie.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function I5(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function x5(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function FN(n,e,t){let i=!I5(e);return n&&(i||t==!1)?x5(n,e):e}const yA=n=>n instanceof _i?{...n}:n;function ja(n,e){e=e||{};const t={};function i(p,_,v,T){return ie.isPlainObject(p)&&ie.isPlainObject(_)?ie.merge.call({caseless:T},p,_):ie.isPlainObject(_)?ie.merge({},_):ie.isArray(_)?_.slice():_}function s(p,_,v,T){if(ie.isUndefined(_)){if(!ie.isUndefined(p))return i(void 0,p,v,T)}else return i(p,_,v,T)}function a(p,_){if(!ie.isUndefined(_))return i(void 0,_)}function c(p,_){if(ie.isUndefined(_)){if(!ie.isUndefined(p))return i(void 0,p)}else return i(void 0,_)}function d(p,_,v){if(v in e)return i(p,_);if(v in n)return i(void 0,p)}const f={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(p,_,v)=>s(yA(p),yA(_),v,!0)};return ie.forEach(Object.keys(Object.assign({},n,e)),function(_){const v=f[_]||s,T=v(n[_],e[_],_);ie.isUndefined(T)&&v!==d||(t[_]=T)}),t}const zN=n=>{const e=ja({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:d}=e;e.headers=c=_i.from(c),e.url=LN(FN(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(ie.isFormData(t)){if(Kn.hasStandardBrowserEnv||Kn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[p,..._]=f?f.split(";").map(v=>v.trim()).filter(Boolean):[];c.setContentType([p||"multipart/form-data",..._].join("; "))}}if(Kn.hasStandardBrowserEnv&&(i&&ie.isFunction(i)&&(i=i(e)),i||i!==!1&&A5(e.url))){const p=s&&a&&R5.read(a);p&&c.set(s,p)}return e},N5=typeof XMLHttpRequest<"u",k5=N5&&function(n){return new Promise(function(t,i){const s=zN(n);let a=s.data;const c=_i.from(s.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:p}=s,_,v,T,R,S;function D(){R&&R(),S&&S(),s.cancelToken&&s.cancelToken.unsubscribe(_),s.signal&&s.signal.removeEventListener("abort",_)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function L(){if(!k)return;const z=_i.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),te={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:z,config:n,request:k};BN(function(N){t(N),D()},function(N){i(N),D()},te),k=null}"onloadend"in k?k.onloadend=L:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(L)},k.onabort=function(){k&&(i(new $e("Request aborted",$e.ECONNABORTED,n,k)),k=null)},k.onerror=function(){i(new $e("Network Error",$e.ERR_NETWORK,n,k)),k=null},k.ontimeout=function(){let K=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const te=s.transitional||UN;s.timeoutErrorMessage&&(K=s.timeoutErrorMessage),i(new $e(K,te.clarifyTimeoutError?$e.ETIMEDOUT:$e.ECONNABORTED,n,k)),k=null},a===void 0&&c.setContentType(null),"setRequestHeader"in k&&ie.forEach(c.toJSON(),function(K,te){k.setRequestHeader(te,K)}),ie.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),d&&d!=="json"&&(k.responseType=s.responseType),p&&([T,S]=Um(p,!0),k.addEventListener("progress",T)),f&&k.upload&&([v,R]=Um(f),k.upload.addEventListener("progress",v),k.upload.addEventListener("loadend",R)),(s.cancelToken||s.signal)&&(_=z=>{k&&(i(!z||z.type?new Ic(null,n,k):z),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(_),s.signal&&(s.signal.aborted?_():s.signal.addEventListener("abort",_)));const B=w5(s.url);if(B&&Kn.protocols.indexOf(B)===-1){i(new $e("Unsupported protocol "+B+":",$e.ERR_BAD_REQUEST,n));return}k.send(a||null)})},O5=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const a=function(p){if(!s){s=!0,d();const _=p instanceof Error?p:this.reason;i.abort(_ instanceof $e?_:new Ic(_ instanceof Error?_.message:_))}};let c=e&&setTimeout(()=>{c=null,a(new $e(`timeout ${e} of ms exceeded`,$e.ETIMEDOUT))},e);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),n=null)};n.forEach(p=>p.addEventListener("abort",a));const{signal:f}=i;return f.unsubscribe=()=>ie.asap(d),f}},D5=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},M5=async function*(n,e){for await(const t of P5(n))yield*D5(t,e)},P5=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},vA=(n,e,t,i)=>{const s=M5(n,e);let a=0,c,d=f=>{c||(c=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:p,value:_}=await s.next();if(p){d(),f.close();return}let v=_.byteLength;if(t){let T=a+=v;t(T)}f.enqueue(new Uint8Array(_))}catch(p){throw d(p),p}},cancel(f){return d(f),s.return()}},{highWaterMark:2})},kp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qN=kp&&typeof ReadableStream=="function",L5=kp&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),HN=(n,...e)=>{try{return!!n(...e)}catch{return!1}},U5=qN&&HN(()=>{let n=!1;const e=new Request(Kn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),EA=64*1024,vv=qN&&HN(()=>ie.isReadableStream(new Response("").body)),Vm={stream:vv&&(n=>n.body)};kp&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Vm[e]&&(Vm[e]=ie.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new $e(`Response type '${e}' is not supported`,$e.ERR_NOT_SUPPORT,i)})})})(new Response);const V5=async n=>{if(n==null)return 0;if(ie.isBlob(n))return n.size;if(ie.isSpecCompliantForm(n))return(await new Request(Kn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(n)||ie.isArrayBuffer(n))return n.byteLength;if(ie.isURLSearchParams(n)&&(n=n+""),ie.isString(n))return(await L5(n)).byteLength},j5=async(n,e)=>{const t=ie.toFiniteNumber(n.getContentLength());return t??V5(e)},B5=kp&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:a,timeout:c,onDownloadProgress:d,onUploadProgress:f,responseType:p,headers:_,withCredentials:v="same-origin",fetchOptions:T}=zN(n);p=p?(p+"").toLowerCase():"text";let R=O5([s,a&&a.toAbortSignal()],c),S;const D=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let k;try{if(f&&U5&&t!=="get"&&t!=="head"&&(k=await j5(_,i))!==0){let te=new Request(e,{method:"POST",body:i,duplex:"half"}),pe;if(ie.isFormData(i)&&(pe=te.headers.get("content-type"))&&_.setContentType(pe),te.body){const[N,A]=gA(k,Um(_A(f)));i=vA(te.body,EA,N,A)}}ie.isString(v)||(v=v?"include":"omit");const L="credentials"in Request.prototype;S=new Request(e,{...T,signal:R,method:t.toUpperCase(),headers:_.normalize().toJSON(),body:i,duplex:"half",credentials:L?v:void 0});let B=await fetch(S,T);const z=vv&&(p==="stream"||p==="response");if(vv&&(d||z&&D)){const te={};["status","statusText","headers"].forEach(x=>{te[x]=B[x]});const pe=ie.toFiniteNumber(B.headers.get("content-length")),[N,A]=d&&gA(pe,Um(_A(d),!0))||[];B=new Response(vA(B.body,EA,N,()=>{A&&A(),D&&D()}),te)}p=p||"text";let K=await Vm[ie.findKey(Vm,p)||"text"](B,n);return!z&&D&&D(),await new Promise((te,pe)=>{BN(te,pe,{data:K,headers:_i.from(B.headers),status:B.status,statusText:B.statusText,config:n,request:S})})}catch(L){throw D&&D(),L&&L.name==="TypeError"&&/Load failed|fetch/i.test(L.message)?Object.assign(new $e("Network Error",$e.ERR_NETWORK,n,S),{cause:L.cause||L}):$e.from(L,L&&L.code,n,S)}}),Ev={http:t5,xhr:k5,fetch:B5};ie.forEach(Ev,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const TA=n=>`- ${n}`,F5=n=>ie.isFunction(n)||n===null||n===!1,GN={getAdapter:n=>{n=ie.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let a=0;a<e;a++){t=n[a];let c;if(i=t,!F5(t)&&(i=Ev[(c=String(t)).toLowerCase()],i===void 0))throw new $e(`Unknown adapter '${c}'`);if(i)break;s[c||"#"+a]=i}if(!i){const a=Object.entries(s).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=e?a.length>1?`since :
`+a.map(TA).join(`
`):" "+TA(a[0]):"as no adapter specified";throw new $e("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:Ev};function dy(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ic(null,n)}function bA(n){return dy(n),n.headers=_i.from(n.headers),n.data=uy.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),GN.getAdapter(n.adapter||Xd.adapter)(n).then(function(i){return dy(n),i.data=uy.call(n,n.transformResponse,i),i.headers=_i.from(i.headers),i},function(i){return jN(i)||(dy(n),i&&i.response&&(i.response.data=uy.call(n,n.transformResponse,i.response),i.response.headers=_i.from(i.response.headers))),Promise.reject(i)})}const $N="1.10.0",Op={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Op[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const wA={};Op.transitional=function(e,t,i){function s(a,c){return"[Axios v"+$N+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,d)=>{if(e===!1)throw new $e(s(c," has been removed"+(t?" in "+t:"")),$e.ERR_DEPRECATED);return t&&!wA[c]&&(wA[c]=!0,console.warn(s(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,c,d):!0}};Op.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function z5(n,e,t){if(typeof n!="object")throw new $e("options must be an object",$e.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const a=i[s],c=e[a];if(c){const d=n[a],f=d===void 0||c(d,a,n);if(f!==!0)throw new $e("option "+a+" must be "+f,$e.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new $e("Unknown option "+a,$e.ERR_BAD_OPTION)}}const Yf={assertOptions:z5,validators:Op},Dr=Yf.validators;let xa=class{constructor(e){this.defaults=e||{},this.interceptors={request:new mA,response:new mA}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ja(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:a}=t;i!==void 0&&Yf.assertOptions(i,{silentJSONParsing:Dr.transitional(Dr.boolean),forcedJSONParsing:Dr.transitional(Dr.boolean),clarifyTimeoutError:Dr.transitional(Dr.boolean)},!1),s!=null&&(ie.isFunction(s)?t.paramsSerializer={serialize:s}:Yf.assertOptions(s,{encode:Dr.function,serialize:Dr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Yf.assertOptions(t,{baseUrl:Dr.spelling("baseURL"),withXsrfToken:Dr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=a&&ie.merge(a.common,a[t.method]);a&&ie.forEach(["delete","get","head","post","put","patch","common"],S=>{delete a[S]}),t.headers=_i.concat(c,a);const d=[];let f=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(t)===!1||(f=f&&D.synchronous,d.unshift(D.fulfilled,D.rejected))});const p=[];this.interceptors.response.forEach(function(D){p.push(D.fulfilled,D.rejected)});let _,v=0,T;if(!f){const S=[bA.bind(this),void 0];for(S.unshift.apply(S,d),S.push.apply(S,p),T=S.length,_=Promise.resolve(t);v<T;)_=_.then(S[v++],S[v++]);return _}T=d.length;let R=t;for(v=0;v<T;){const S=d[v++],D=d[v++];try{R=S(R)}catch(k){D.call(this,k);break}}try{_=bA.call(this,R)}catch(S){return Promise.reject(S)}for(v=0,T=p.length;v<T;)_=_.then(p[v++],p[v++]);return _}getUri(e){e=ja(this.defaults,e);const t=FN(e.baseURL,e.url,e.allowAbsoluteUrls);return LN(t,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){xa.prototype[e]=function(t,i){return this.request(ja(i||{},{method:e,url:t,data:(i||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(i){return function(a,c,d){return this.request(ja(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}xa.prototype[e]=t(),xa.prototype[e+"Form"]=t(!0)});let q5=class KN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(d=>{i.subscribe(d),a=d}).then(s);return c.cancel=function(){i.unsubscribe(a)},c},e(function(a,c,d){i.reason||(i.reason=new Ic(a,c,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new KN(function(s){e=s}),cancel:e}}};function H5(n){return function(t){return n.apply(null,t)}}function G5(n){return ie.isObject(n)&&n.isAxiosError===!0}const Tv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tv).forEach(([n,e])=>{Tv[e]=n});function QN(n){const e=new xa(n),t=SN(xa.prototype.request,e);return ie.extend(t,xa.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return QN(ja(n,s))},t}const Qt=QN(Xd);Qt.Axios=xa;Qt.CanceledError=Ic;Qt.CancelToken=q5;Qt.isCancel=jN;Qt.VERSION=$N;Qt.toFormData=Np;Qt.AxiosError=$e;Qt.Cancel=Qt.CanceledError;Qt.all=function(e){return Promise.all(e)};Qt.spread=H5;Qt.isAxiosError=G5;Qt.mergeConfig=ja;Qt.AxiosHeaders=_i;Qt.formToJSON=n=>VN(ie.isHTMLForm(n)?new FormData(n):n);Qt.getAdapter=GN.getAdapter;Qt.HttpStatusCode=Tv;Qt.default=Qt;const{Axios:mH,AxiosError:pH,CanceledError:gH,isCancel:_H,CancelToken:yH,VERSION:vH,all:EH,Cancel:TH,isAxiosError:bH,spread:wH,toFormData:SH,AxiosHeaders:CH,HttpStatusCode:AH,formToJSON:RH,getAdapter:IH,mergeConfig:xH}=Qt,$5=n=>Qt.get(n,{withCredentials:!0,headers:{"Content-Type":"application/json"}}),K5=(n,e)=>e instanceof FormData?Qt.post(n,e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}):Qt.post(n,e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}),xo={get:$5,post:K5};class Q5{constructor(e){N_(this,"socket");N_(this,"events",{});this.socket=new WebSocket(e),this.register_events()}register_events(){this.socket.addEventListener("open",()=>{console.log("aberto")}),this.socket.addEventListener("message",e=>{const t=JSON.parse(e.data),i=t.event,s=t.response,a=t.id;a in this.events&&(t.error?console.error(`event "${i}" not found`):this.events[a](s),delete this.events[a])}),this.socket.addEventListener("close",()=>{console.log("Conexão fechada")}),this.socket.addEventListener("error",e=>{console.error("Erro no WebSocket:",e)})}async send(e,t){const i=Math.floor(Math.random()*4294967296);this.socket.send(JSON.stringify({event:e,data:t,id:i}));var s;const a=new Promise((c,d)=>{s=c});return this.events[i]=s,a}}const bv="https://ifai-phwn.onrender.com",hy="https://ifai.eneagonlosamigos.workers.dev",Y5="wss://ifai.eneagonlosamigos.workers.dev/ws";navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({server:bv});const YN=V.createContext(void 0),W5=({setShow:n,children:e})=>{const[t,i]=V.useState(!0),[s,a]=V.useState(null),[c,d]=V.useState(),f=V.useRef(null),p=V.useRef(null),_=k=>{f.current=k},v={respa:V.useRef(null)},T=()=>{xo.get(hy+"/logout").then(k=>{k.data.result&&(pv(void 0),a(void 0),c.socket.close())})},R=()=>{i(window.innerWidth<769)},S=async()=>{const k=s||(await xo.get(hy+"/is_loged")).data.user;if(k){const L=new Q5(Y5);d(L),L.socket.onopen=()=>{hv(B=>{p.current=B,Notification.requestPermission().then(z=>{z==="granted"&&K3(wN,{vapidKey:"BMnpFNI__s7Nfy5f9iau1GzD-VG2KsAG_Dz-du_lglQi642tZhK4oHbpH85tAVEWjR-3Q2gtLBCiPvxKfBDN-L8"}).then(K=>{K?xo.post(bv+"/token",{user_uid:k.uid,token:K}):console.log("Nenhum token disponível.")}).catch(K=>{console.log("Erro ao obter token:",K)})})}),pv(k),a(k)}}else a(void 0);n(!0)};V.useEffect(()=>{S()},[s]),V.useEffect(()=>(R(),window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R)}),[]);const D={db:p,socket:c,server:bv,worker_server:hy,mobile:t,usuarioLogado:s,setUsuarioLogado:a,logout:T,setNavigate:_,refs:v};return E.jsx(YN.Provider,{value:D,children:e})},yi=()=>{const n=V.useContext(YN);if(!n)throw new Error("useGlobalContext must be used within a GlobalProvider");return n};function X5(){const{usuarioLogado:n}=yi(),e=Us(),t=Ls();return V.useEffect(()=>{n===void 0&&t.pathname!="/login"&&t.pathname!="/registro"?e("/login"):n&&(t.pathname=="/login"||t.pathname=="/registro")&&e("/")},[n,t]),E.jsx(E.Fragment,{})}const jn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAOVBMVEWzs7P///+vr6/j4+Otra3u7u7Y2Njm5ua3t7f7+/vAwMC6urrU1NTz8/PQ0NDp6enKysrExMTc3NzfYYiMAAAEUUlEQVR4nO2dC4KqMAxFISA/QWH2v9gH4vj8ANo22NvOPSvwWJo0aQtJQgghhBBCCCGEEEIIIYQQQgghX0Uu+P4VOyLF+VxmRd9Eq1mlv3TZkEQpmd5z7uMbybxLH8mayBwlS5/pIhvI04thmtZtTDPyuGA4UkQ0jsuGaX3Kff8yHWTNcJyPEcQcyav2OZbeUwY+HSXZ1LtwClhRqtc8scAh1GGUY/mJ30QfpKL8fOo3koWnmPe1geCYOI6hOX78gN4YQlKUxmwAZwJK/9Jb+I38hKIoSwvtmBTtBceQGoKiDPaCadoGEG6q9xpb4Od+ebsMfYNvgXcYLWQWOYAPouMzOtH7dthEzu6GNfQgNu6CU/vGt8Y6GkOIPYgKs3Di5NtjFSl0DDvYlY1zLvzl6NtkjZXGrzmwazeHJfcjZ1BDMa/rV0CNpmrTME0r3y7LiJpgOvh2WUYpG06AhhpFwx9MQ7VkAdsgjt9QpbD4K4ag85CGNLwDtMynoQGgaxrFfBi/IWinJn5DxZU3aN87fsP102uxGMZf4+c2BzCCMhQ9w8a3yzKKvTZUw4OaIWZbX2Lvl0qr5jfWFhXewlRnc/Q/cKdO3M9gPIMWbBRX3VfAtkm1dn/vwYqnimH0BlYFlesLgvVq9jDE6mQoLrpvYFVQ2tlwAizSqKfDtMbKFonTweBF4Laf1A3RimC9kyZX8A6cKLb0L2DlignF8veCb58FdGMN4q1L1ZnYAQomquEUrTicsb3PtQBcLrySqwUb3yaraG3NIIaZGaVKH/nWzMtrWqzAKiqe0FjZgJ6lubLwJhpT8Bakj7jvIWKV9q84J8UDWOH7iusKHDrMzLglRewwM+OUFNHDzIxL/xs9zFyxT4r4YWbGvrUIufW7hO2hDKydik3sOhqghf0idou3AFLhf2ye04Ce0QnzeBpKHP3F+BUute9fbExu2FzE7K5tYra0wW3NbGByAAW1fbiNQaV4DizKzBh0+ZGba1t8PoQBRpkJg3QRRlX4jFHrNITK/gWzo3xBvTNxxnTtHUxleMO0HxVS5XQhNy6fAssYNn3hoBTtXp0Y0MImt+zsH3z/8I+x3n+qg3hBu+kbkh9p4Z9UaRw3Zg7Qwyh5r3AaIwO8LjMjVaF0FLpsAL97MQ6f5jnorqhyJEmRRv8QdFc0CcZQigzZDgf1LxyKIfH7ESzJq9MOh/QfqMt2SPw8suOzWexwF2iRLjsdvzuY0+CVez2bK9Tn9lsxdgos3xq8Z8uy3/tzJuOf2H978J4o+/1mpcixVT6vbkW9zy3hcep9LbC8R39pJ9vfbPJAqfnVljGp7531bMi0go5I6ze0rKOzJSdaFcMedO7TUQZgv4nW1VD/WqE2jvtWe1yz18X1BEcAho4TkYb+oSENaegfGtKQhv6hIQ1p6B8a0pCG/qEhDeM3TPoyw8b9wpug4ypICCGEEEIIIYQQQgghhBBCCPk7/AOT7UbJ5bD1AAAAAABJRU5ErkJggg==",Bu=n=>n>1?"s":"";function WN({userPerfilUid:n}){const{socket:e,usuarioLogado:t}=yi(),[i,s]=V.useState([]),a=c=>{const d=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],p=new Date().getTime()-c,_=new Date(c);if(p<60*1e3){const v=Math.floor(p/1e3);return`Há ${String(v)} segundo${Bu(v)}`}else if(p<60*60*1e3){const v=Math.floor(p/6e4);return`Há ${String(v)} minuto${Bu(v)}`}else if(p<24*60*60*1e3){const v=Math.floor(p/36e5);return`Há ${String(v)} hora${Bu(v)}`}else if(p<7*24*60*60*1e3){const v=Math.floor(p/864e5);return`Há ${String(v)} dia${Bu(v)}`}else if(p<30*24*60*60*1e3){const v=Math.floor(p/6048e5);return`Há ${String(v)} semana${Bu(v)}`}return`${_.getDay()+1} de ${d[_.getMonth()]} de ${_.getFullYear()}`};return V.useEffect(()=>{if(!t||n=="")return;async function c(){console.time("ai");const d=await e.send("/feed",{});console.timeEnd("ai"),s(d.results.map(f=>{const p=f;return{...p,data:a(p.timestamp),image:bs(p.image),logo:p.logo||jn,user:p.name}}))}c()},[t,n]),E.jsx("div",{id:"feed",children:i.map((c,d)=>E.jsxs("div",{className:"post",children:[E.jsxs("div",{className:"header-post",children:[E.jsx(Mt,{to:"/perfil?id="+c.userUid,children:E.jsx("img",{className:"logo",src:c.logo})}),E.jsx(Mt,{to:"/perfil?id="+c.userUid,className:"user",children:c.user})]}),E.jsx("img",{className:"image",src:c.image}),E.jsx("div",{className:"footer-post",children:E.jsxs("div",{className:"post-info",children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-heart post-info-icon like",viewBox:"0 0 16 16",children:E.jsx("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"})}),E.jsx("div",{className:"post-info-value",children:"0"})]})}),E.jsx("div",{className:"text",children:c.description}),E.jsx("div",{className:"data",children:c.data})]},d))})}const Jd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAekAAADgCAYAAAAntp7rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA3fSURBVHgB7d3PchRHngfwzBLseDyH0SNoHoAwN8Int28zwzgC23PwskQgTlqfBuwHkHgAPOKkIyLC2D7srtkIZM/NzQmOBH4B+QlWEzHjWP6oc6sEeCXAlhq1qMyszydCIEFDdNYvs79VmdnVMczQ12fOzG8/eDCaa5p3QkoLKYSToWnm2+/nf3pQjFthMtnsfo8h3NueTG7P/epX4/dv3twKAJCBXPIshkPqGhIePz7fPvEzbSNG4dWN26/1ePz47baBmwEAXqMc8+yVQ7ptzEJ49OgvKcbFPWcWM9A+qfVw/PhlYQ3AUcs5z6YO6e5MIz1+vNI25C/hiAlrAI5KCXk2VUj/xx/+cKaZm7s26zONfWy2XysfbGxcDwAwA6Xk2YFC+nWebfyc9omuvr+xcSkAwCsqLc/2Delurj49evR16Ha29W+zXYh/1/Q3ANMqMc9+MaSfNui79tuFkA9BDcBUSs2znw3pTBv0TJZBfW7t01GKYTmmdLL9/XWuc0whjUNs1m8sXXmlNf4y2tg5XDuZjXL6y276Tm1KzrPm5/5Vxg3qLKSHD7++NhplM+jPrV1aSTG1xyyN8n4xiqN2LWb97NrFlTClctrYefV2Mhtl9Zfd9J3alJxnLw3p//rTn1ZDvg16IsaT87/5zXLIwNm1TxZTjFk8l4OKsVn+aO3i6KCPL7GNnWnbyWyU2l9203fqUHqevRDS//nHPy72uettGimEi902+tCzGOP5UKC5KV5ES21jZ67wsChRyf1lN32nbDXk2Z6Q7ubtY2Gdsmmaa/1Pe6dRKFGKU+xwLLSNnanayWwU3F9203eKVUue7b2SfvSoa9BCKMt8LtPexSlqnfAQhtJOZk/fKVclefZTSO/sfgthMRSomybYufcqAINXU579/5X0k7OOYk0ePChi3QGAI1ZRnu2EdMlnHc/EplnM6S1ZALx+teXZTkhPHj4chfLNz//611XsKAXg1dSWZzsh3VTydonUNL2/HQuA/tSWZ83OJ4KEMAp1GJnyBhimGvOs2X78eBQq8ts333wnADA4NeZZM5dSVaGWUiU3UQBgKjXmWbcmXdcddWJcCAAMUXV51rTz91Wt4cbaigTAgdSYZ011V54x2jgGMEQV5lnTTnrXFmpCGmCIKsyzJgAAWRLSAJCpbk16K9SltvYAcBAV5lkTJpO6GpXSZgBgeCrMsyY2zb1Qk/rOpAA4gBrzrKntyjNNJnUVCYCDqTDPmu0Yb4eKxBjHAYDBqTHPmrljx8ahIn//8ceqigTAwdSYZ837N29uxRDGoQ7jC+OxNWmAAaoxz568TzrGm6EO6wGA4aosz56E9LFj12vYFf1ge9tUN8CQVZZnOyG9M0WQ0nooWGqf/7/+7W+bAYDBqi3Pfrot6P9ub18NBXs4mVwOAAxeTXn2U0h3qZ1CWA0FchUNwDM15dmeD9hojh+/XNxcfkqbrqIB2K2WPNsT0t1c/iSEC6EkMa64igZgt1ry7IWPqvzzrVs3S5kmSJPJ6gcbG9cDADynhjx76edJ70wThJD3PbDbaYEPv/32UgCAn1F6nr00pLtpggfb2+9ne7Py9nk9mEzeDQDwC0rPs+bn/qKbF9/5h7k17GmDrEMDcBAl51nzS/8+u4aldE9AAzCtUvPsF0O60/0HH3zzze/6XnzvFtX//uOPAhqAV1Jinu0b0s98uLFxKaV0oYezkK3JZPJ+t6juE64AOKyS8uzAId358Jtv1rvL8/Sa7ou6c7bxz3/+7s/fflvLp5oAkIFS8uxYmNLTy/MLX/7+95f/pWmWY4yLYba22sasP0zpqqltAI5KCXk2dUg/81zjRk2M59t5/lF4deP2AN3c+sc/rhc3rZ3CVohhPtRsCG0EBinnPHvlkH7maePWu69ro9H8b9988512+mDUNM3JtpHdi/pCCHte3LfadYCt2DT3Jtvbm21Dxu0C+u2i15tjvNem2CgUJ40P/NBi29iZop3AYOWYZ4cO6d2ePrH/fvo1GDGFyyke6qyrH3GnMx7soaW2sTNFOwE6ueTZVBvHeLnPP77STm2ElVCQFCcrN5b+euD7npfYxs607WRGuuUR4NCE9Ix8vvTZ5ZQmF9rLtnHI1c4LZxpPmjT6Yml16o/3LKKNnUO2kxnYWR6pgaUS+hUDwIydW/t0lGL6LpQupkUzMfRpLgDM2P2NO5tvvfd29+0oFKpbKmlnYq4G6JGQBo7E/Vt3bp84feqHGJtnu2Lzt/NWw3R30oTFL5dWXUHTu5dOdz+ZqgrLMaWTKdv3xrZrRbFZv7F0xUCiGMbWsKh3/0qvwQtX0ufWLq20DbkWujPfGN4I2YoL7S9n2jP1+P3G3XGAzBlbw6Le/auhBnuupM+ufbIYnzSoKNtp8u5XH6+OA2TK2BoW9e5fLTXY8xasGOP5UKC5GJcDZMzYGhb17l8tNXjufdKF3vYxxZMBsmZsDYt696+OGsz0tqC9yWQzgE0iVMeHqgyLevfvuRq449iMPNmg0N28IY3yDehOHIWU1s+uXVwJAGRNSM9At0EhFbaWE2Oz/NHaxVEAIFtCegZsEgHgKAjpmbBJBIDZE9JDZpMIQNaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkam9Ip7AVgNkztoZFvftXSQ32hnSM90KR0jhAzoytYVHv/lVSgz0hHVO4HEoUw3qAjBlbw6Le/aulBntC+vOPr4xjDCuhIClOVm4s/fV6gIwZW8Oi3v2rpQYvbBz7fOmzyylNLrRxPg652llrSONJk0ZfLK2WebbE4Bhbw6Le/auhBjFwaP+29sn/tEdyPhToxr9/pg8AZMpbsGbBJhEAjoCQngGbRAA4CnOBQ7u/cWfzrffe7r4dhUJ0GxTa9Y+rAYBsCekZuX/rzu0Tp0/9EGPTrU0vhBx1GxRiujtpwuKXS6t27QIAAAAAAABHzXtkgSNzbu3TUYphOaZ0MhVzL4E0DrFZv7F0xb4NemfjGHAkzq1dWmmD+VroNlLG8EYoRlxofzlz4vSp+P3G3XGAHrmSBmbu7Noni/FJQBdtO03e/erj1XGAnriZCTBzMcbzoQJzMS4H6NGxl/1hGetI+a0bDeG4lbPGmOe64nDGVhqFGqR4MhyC19L+lV6DF66kn6wjpe+6QZb3i3AchZTWz65dXAkZGMJxK6eNnbz6R8fYKtAh6qTe/auhBntCultHSoVN78TYLH+0dnEUejSE41ZiGzs59I+OsTUs6t2/WmrQ7H1AmetIfa8bDeG4lbzGmMO6orE1LOrdv1pq8Nx0d6HrSIdcN5rBExiFEk113ApeY+y9f3SMrWFR7/7VUYM6dncXc5OEzAzluOkfr86xGxb17t9zNfAWLADIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEztDekUtgLTG8Jx0zcOZ2jHb+j9xXjpXyU12BvSMd4LRUrj0KchHLdi29jpuX90hja2iu4vuw2t/RmMlVmppAZ7QjqmcDmUKIb10KMhHLdi29jpuX/sPIWBja2i+8tuQ2t/BmNlVmqpwdzuH+5v3Nl86723u29HoRApTla+WFq9Gno0hONWYhs7OfSPztDGVqn9ZbehtT+XsTIrtdRg7vkH3b915/aJ06d+iLGZb39cCDnq1hpiujtpwuKXS6vXQwaGcNyKaGMnw/7RGdrYKqa/7Da09mc6VmZFDQAAAAAAAAAAAAAAAAAAAAAAAAAAgFcQX/aH59Y+HaUYlmNKJ9vf50OW0jjEZv3G0pVs7nXquLEffWRY1Lt/pdfghQ/YOLd2aaVtyLXQ3Yw8hjdCtuJC+8uZE6dPxe837o5Dzxw39qOPDIt696+GGuy5kj679slifNKgomynybtffbw6Dj1x3NiPPjIs6t2/WmrQ7P7LGOP5UKC5GJdDjxw39qOPDIt696+WGjR7/zqNQolSPBl65bixH31kWNS7f3XUoAk1yHYzQOYcN/ajjwyLevfvuRrUEdIAUCEhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkKm9IZ3CVmB6jhv70UeGRb37V0kN9oZ0jPdCkdI49MlxYz/6yLCod/8qqcGekI4pXA4limE99MhxYz/6yLCod/9qqcHc7h/ub9zZfOu9t7tvR6EQKU5WvlhavRp65LixH31kWNS7f7XUYO75B92/def2idOnfoixmW9/XAg56tYaYro7acLil0ur10MGHDf2o48Mi3r3r4Ya/B/51/eV9G4kXwAAAABJRU5ErkJggg==";function J5(){const{mobile:n}=yi(),e=Us();return V.useEffect(()=>{window.navigate=e},[]),E.jsx(E.Fragment,{children:E.jsxs("main",{id:"home",className:"page",children:[n?E.jsxs("div",{id:"home-header",children:[E.jsx("div",{className:"header_logo",children:E.jsx(Mt,{to:"/",children:E.jsx("img",{src:Jd,width:"60px",alt:"Logo"})})}),E.jsxs(Mt,{to:"/chats",className:"defbtn",id:"chatButton",children:[E.jsx("i",{className:"fa-solid fa-comment-dots"}),E.jsx("span",{id:"chatNotification"})]})]}):E.jsx(E.Fragment,{}),E.jsx(WN,{userPerfilUid:null})]})})}function Z5(){const{socket:n,usuarioLogado:e}=yi(),t=Us(),[i,s]=V.useState([]),[a,c]=V.useState([]),[d,f]=V.useState(0),[p,_]=V.useState(null),v=V.useRef({timeout:null,time:0}),T=V.useRef({timeout:null,time:0}),R={searchFriends:V.useRef(null),searchAlunos:V.useRef(null)},S=()=>{n.send("/friends",{operation:"get"}).then(N=>{N.result&&s(N.results.map(A=>({...A,logo:A.logo?bs(A.logo):jn})))})},D=()=>{n.send("/friends",{operation:"get_requests"}).then(N=>{N.result&&c(N.results.map(A=>({...A,logo:A.logo?bs(A.logo):jn})))})},k=async()=>{e&&(Date.now()-T.current.time<300&&(clearTimeout(T.current.timeout),T.current.time=Date.now()),T.current={timeout:setTimeout(()=>{const N=R.searchFriends.current.value.toLowerCase().trim();if(N===""){S();return}n.send("/friends",{operation:"search_friends",term:N}).then(async A=>{const x=[];for(const U of A.results){const[q,M]=U.friend_info?JSON.parse(U.friend_info):["",-1],it=U.uid;if(it!=e.uid){var O;M==-1?O="unsolicited":O=M==1?"friend":q==e.uid?"sended_request":"received_request",x.push({logo:U.logo?bs(U.logo):jn,name:U.name,mode:O,uid:it})}}s(x)})},300),time:Date.now()})};function L(N){e&&n.send("/friends",{operation:"remove_friend",uid_to_remove_friend:N}).then(A=>{A.result&&(s(x=>[...x.filter(O=>N!=O.uid)]),_(x=>[...(x||[]).map(O=>({...O,mode:N==O.uid?"unsolicited":O.mode}))]))})}const B=()=>{if(!e){t("/login");return}Date.now()-v.current.time<300&&(clearTimeout(v.current.timeout),v.current.time=Date.now()),v.current={timeout:setTimeout(()=>{const N=R.searchAlunos.current.value.toLowerCase().trim();if(N===""){_(null);return}n.send("/friends",{operation:"search_users",term:N}).then(async A=>{const x=[];for(const U of A.results){const[q,M]=U.friend_info?JSON.parse(U.friend_info):["",-1],it=U.uid;if(it!=e.uid){var O;M==-1?O="unsolicited":O=M==1?"friend":q==e.uid?"sended_request":"received_request",x.push({logo:U.logo?bs(U.logo):jn,name:U.name,mode:O,uid:it})}}_(x)})},300),time:Date.now()}};function z(N){e&&N!=""&&n.send("/friends",{operation:"send_request",uid_to_send_request:N}).then(A=>{A.result&&(c(x=>[...x.map(O=>({...O,mode:N==O.uid?"sended_request":O.mode}))]),_(x=>[...(x||[]).map(O=>({...O,mode:N==O.uid?"sended_request":O.mode}))]))})}function K(N){e&&n.send("/friends",{operation:"remove_send_request",uid_to_remove_send_request:N}).then(A=>{A.result&&_(x=>[...(x||[]).map(O=>({...O,mode:N==O.uid?"unsolicited":O.mode}))])})}function te(N){e&&n.send("/friends",{operation:"accept_request",uid_to_accept_request:N}).then(A=>{A.result&&c(x=>[...x.filter(O=>O.uid==N?(s([...i,{...O,mode:"friends"}]),_(U=>[...(U||[]).map(q=>({...q,mode:N==q.uid?"friends":q.mode}))]),!1):!0)])})}function pe(N){e&&n.send("/friends",{operation:"decline_request",uid_to_decline_request:N}).then(A=>{A.result&&_(x=>[...(x||[]).map(O=>({...O,mode:N==O.uid?"unsolicited":O.mode}))])})}return V.useEffect(()=>{d==0?S():d==1&&D()},[d]),V.useEffect(()=>{const A=new URLSearchParams(location.search).get("page");e&&A&&["0","1","2"].includes(A)?f(Number(A)):A||t("/amigos?page=0")},[e,location.search]),E.jsx(E.Fragment,{children:E.jsxs("main",{id:"amigos-page",className:"page",children:[E.jsxs("div",{id:"btns",children:[E.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=0"),style:{color:d===0?"#000":"#777",borderBottom:d===0?"3px solid green":"none"},children:"Amigos"}),E.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=1"),style:{color:d===1?"#000":"#777",borderBottom:d===1?"3px solid green":"none"},children:"Pedidos"}),E.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=2"),style:{color:d===2?"#000":"#777",borderBottom:d===2?"3px solid green":"none"},children:"Pesquisar"})]}),E.jsx("div",{id:"amigos-division"}),E.jsxs("div",{id:"mainlists",children:[E.jsxs("section",{id:"lista-amigos",style:{display:d===0?"block":"none"},children:[E.jsx("h2",{children:"Meus Amigos"}),E.jsx("div",{className:"search-box",style:{display:"flex",alignItems:"center",gap:"8px"},children:E.jsx("input",{ref:R.searchFriends,onInput:k,type:"text",id:"searchFriendsInput",placeholder:"Pesquisar amigo",style:{padding:"5px",flex:1}})}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("div",{id:"friendsList",style:{minHeight:"100px"},children:i.map((N,A)=>E.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[E.jsx(Mt,{to:`/perfil?id=${N.uid}`,children:E.jsx("img",{src:N.logo,alt:"Foto de "+N.name,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}})}),E.jsx(Mt,{className:"name-friend",to:`/perfil?id=${N.uid}`,children:N.name}),E.jsx("button",{id:"remove-friend",onClick:()=>L(N.uid),children:"Remover"})]},A))})]}),E.jsxs("section",{id:"pedidos",style:{display:d===1?"block":"none"},children:[E.jsx("div",{className:"fqtop",style:{padding:"10px 0"},children:E.jsx("h2",{children:"Pedidos de Amizade"})}),E.jsx("div",{id:"friendRequests",className:"PA",style:{minHeight:"50px"},children:a.map((N,A)=>E.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[E.jsx("img",{src:N.logo,alt:"Foto de "+N.name,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}}),E.jsx("strong",{children:N.name}),E.jsx("button",{id:"aceitar-pedido",onClick:x=>{x.stopPropagation(),te(N.uid)},children:"Aceitar"}),E.jsx("button",{id:"rejeitar-pedido",onClick:x=>{x.stopPropagation(),pe(N.uid)},children:"Recusar"})]},A))})]}),E.jsxs("section",{id:"search-users",style:{display:d===2?"block":"none"},children:[E.jsx("h2",{children:"Usuários"}),E.jsx("div",{className:"search-box",style:{display:"flex",alignItems:"center",gap:"8px"},children:E.jsx("input",{ref:R.searchAlunos,onInput:B,placeholder:"Pesquisar usuário",style:{padding:"5px",flex:1}})}),E.jsx("div",{id:"searchResults",children:p?p.length==0?E.jsx("div",{children:"Nenhum usuário encontrado."}):p.map((N,A)=>E.jsxs("div",{className:"friends-item",children:[E.jsxs(Mt,{className:"friends-link",to:"/perfil?id="+N.uid,children:[E.jsx("img",{src:N.logo,alt:"Foto de "+N.name}),E.jsx("strong",{children:N.name})]}),N.mode=="friend"?E.jsx("span",{children:"(Amigos)"}):N.mode=="sended_request"?E.jsx("button",{className:"retirar",onClick:()=>K(N.uid),children:"Cancelar"}):N.mode=="received_request"?E.jsxs(E.Fragment,{children:[E.jsx("button",{className:"aceitar",onClick:()=>te(N.uid),children:"Aceitar"}),E.jsx("button",{className:"rejeitar",onClick:()=>pe(N.uid),children:"Rejeitar"})]}):E.jsx("i",{className:"fa-solid fa-user-plus",onClick:()=>z(N.uid)})]},A)):E.jsx(E.Fragment,{})})]})]})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firebasestorage.googleapis.com",JN="storageBucket",ez=2*60*1e3,tz=10*60*1e3,nz=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends mr{constructor(e,t,i=0){super(fy(e),`Firebase Storage: ${t} (${fy(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zt||(zt={}));function fy(n){return"storage/"+n}function m0(){const n="An unknown error occurred, please check the error payload for server response.";return new Yt(zt.UNKNOWN,n)}function iz(n){return new Yt(zt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function rz(n){return new Yt(zt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sz(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yt(zt.UNAUTHENTICATED,n)}function oz(){return new Yt(zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function az(n){return new Yt(zt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function ZN(){return new Yt(zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ek(){return new Yt(zt.CANCELED,"User canceled the upload/download.")}function lz(n){return new Yt(zt.INVALID_URL,"Invalid URL '"+n+"'.")}function cz(n){return new Yt(zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function uz(){return new Yt(zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JN+"' property when initializing the app?")}function tk(){return new Yt(zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dz(){return new Yt(zt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function hz(){return new Yt(zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function fz(n){return new Yt(zt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wv(n){return new Yt(zt.INVALID_ARGUMENT,n)}function nk(){return new Yt(zt.APP_DELETED,"The Firebase app was deleted.")}function mz(n){return new Yt(zt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function id(n,e){return new Yt(zt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Fu(n){throw new Yt(zt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=xi.makeFromUrl(e,t)}catch{return new xi(e,"")}if(i.path==="")return i;throw cz(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+s+c,"i"),f={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const _="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${v}/${_}/b/${s}/o${T}`,"i"),S={bucket:1,path:3},D=t===XN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",L=new RegExp(`^https?://${D}/${s}/${k}`,"i"),z=[{regex:d,indices:f,postModify:a},{regex:R,indices:S,postModify:p},{regex:L,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<z.length;K++){const te=z[K],pe=te.regex.exec(e);if(pe){const N=pe[te.indices.bucket];let A=pe[te.indices.path];A||(A=""),i=new xi(N,A),te.postModify(i);break}}if(i==null)throw lz(e);return i}}class pz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gz(n,e,t){let i=1,s=null,a=null,c=!1,d=0;function f(){return d===2}let p=!1;function _(...k){p||(p=!0,e.apply(null,k))}function v(k){s=setTimeout(()=>{s=null,n(R,f())},k)}function T(){a&&clearTimeout(a)}function R(k,...L){if(p){T();return}if(k){T(),_.call(null,k,...L);return}if(f()||c){T(),_.call(null,k,...L);return}i<64&&(i*=2);let z;d===1?(d=2,z=0):z=(i+Math.random())*1e3,v(z)}let S=!1;function D(k){S||(S=!0,T(),!p&&(s!==null?(k||(d=2),clearTimeout(s),v(0)):k||(d=1)))}return v(0),a=setTimeout(()=>{c=!0,D(!0)},t),D}function _z(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(n){return n!==void 0}function vz(n){return typeof n=="function"}function Ez(n){return typeof n=="object"&&!Array.isArray(n)}function Dp(n){return typeof n=="string"||n instanceof String}function SA(n){return p0()&&n instanceof Blob}function p0(){return typeof Blob<"u"}function CA(n,e,t,i){if(i<e)throw wv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw wv(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function ik(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var Na;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Na||(Na={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,t,i,s,a,c,d,f,p,_,v,T=!0,R=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,D)=>{this.resolve_=S,this.reject_=D,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new kf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{const f=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===Na.NO_ERROR,f=a.getStatus();if(!d||rk(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Na.ABORT;i(!1,new kf(!1,null,_));return}const p=this.successCodes_.indexOf(f)!==-1;i(!0,new kf(p,a))})},t=(i,s)=>{const a=this.resolve_,c=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());yz(f)?a(f):a()}catch(f){c(f)}else if(d!==null){const f=m0();f.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,f)):c(f)}else if(s.canceled){const f=this.appDelete_?nk():ek();c(f)}else{const f=ZN();c(f)}};this.canceled_?t(!1,new kf(!1,null,!0)):this.backoffId_=gz(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_z(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function bz(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function wz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Sz(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Cz(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Az(n,e,t,i,s,a,c=!0,d=!1){const f=ik(n.urlParams),p=n.url+f,_=Object.assign({},n.headers);return Sz(_,e),bz(_,t),wz(_,a),Cz(_,i),new Tz(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Iz(...n){const e=Rz();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(p0())return new Blob(n);throw new Yt(zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xz(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(n){if(typeof atob>"u")throw fz("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class my{constructor(e,t){this.data=e,this.contentType=t||null}}function kz(n,e){switch(n){case Ur.RAW:return new my(sk(e));case Ur.BASE64:case Ur.BASE64URL:return new my(ok(n,e));case Ur.DATA_URL:return new my(Dz(e),Mz(e))}throw m0()}function sk(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,c=n.charCodeAt(++t);i=65536|(a&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Oz(n){let e;try{e=decodeURIComponent(n)}catch{throw id(Ur.DATA_URL,"Malformed data URL.")}return sk(e)}function ok(n,e){switch(n){case Ur.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw id(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ur.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw id(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Nz(e)}catch(s){throw s.message.includes("polyfill")?s:id(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}class ak{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw id(Ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Pz(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Dz(n){const e=new ak(n);return e.base64?ok(Ur.BASE64,e.rest):Oz(e.rest)}function Mz(n){return new ak(n).contentType}function Pz(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){let i=0,s="";SA(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(SA(this.data_)){const i=this.data_,s=xz(i,e,t);return s===null?null:new ys(s)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new ys(i,!0)}}static getBlob(...e){if(p0()){const t=e.map(i=>i instanceof ys?i.data_:i);return new ys(Iz.apply(null,t))}else{const t=e.map(c=>Dp(c)?kz(Ur.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let a=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)s[a++]=c[d]}),new ys(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n){let e;try{e=JSON.parse(n)}catch{return null}return Ez(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Uz(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function ck(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(n,e){return e}class ni{constructor(e,t,i,s){this.server=e,this.local=t||e,this.writable=!!i,this.xform=s||Vz}}let Of=null;function jz(n){return!Dp(n)||n.length<2?n:ck(n)}function g0(){if(Of)return Of;const n=[];n.push(new ni("bucket")),n.push(new ni("generation")),n.push(new ni("metageneration")),n.push(new ni("name","fullPath",!0));function e(a,c){return jz(c)}const t=new ni("name");t.xform=e,n.push(t);function i(a,c){return c!==void 0?Number(c):c}const s=new ni("size");return s.xform=i,n.push(s),n.push(new ni("timeCreated")),n.push(new ni("updated")),n.push(new ni("md5Hash",null,!0)),n.push(new ni("cacheControl",null,!0)),n.push(new ni("contentDisposition",null,!0)),n.push(new ni("contentEncoding",null,!0)),n.push(new ni("contentLanguage",null,!0)),n.push(new ni("contentType",null,!0)),n.push(new ni("metadata","customMetadata",!0)),Of=n,Of}function Bz(n,e){function t(){const i=n.bucket,s=n.fullPath,a=new xi(i,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Fz(n,e,t){const i={};i.type="file";const s=t.length;for(let a=0;a<s;a++){const c=t[a];i[c.local]=c.xform(i,e[c.server])}return Bz(i,n),i}function uk(n,e,t){const i=lk(e);return i===null?null:Fz(n,i,t)}function zz(n,e,t,i){const s=lk(e);if(s===null||!Dp(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(p=>{const _=n.bucket,v=n.fullPath,T="/b/"+c(_)+"/o/"+c(v),R=xc(T,t,i),S=ik({alt:"media",token:p});return R+S})[0]}function dk(n,e){const t={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Ya{constructor(e,t,i,s){this.url=e,this.method=t,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(n){if(!n)throw m0()}function _0(n,e){function t(i,s){const a=uk(n,s,e);return Rs(a!==null),a}return t}function qz(n,e){function t(i,s){const a=uk(n,s,e);return Rs(a!==null),zz(a,s,n.host,n._protocol)}return t}function Zd(n){function e(t,i){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=oz():s=sz():t.getStatus()===402?s=rz(n.bucket):t.getStatus()===403?s=az(n.path):s=i,s.status=t.getStatus(),s.serverResponse=i.serverResponse,s}return e}function y0(n){const e=Zd(n);function t(i,s){let a=e(i,s);return i.getStatus()===404&&(a=iz(n.path)),a.serverResponse=s.serverResponse,a}return t}function Hz(n,e,t){const i=e.fullServerUrl(),s=xc(i,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,d=new Ya(s,a,_0(n,t),c);return d.errorHandler=y0(e),d}function Gz(n,e,t){const i=e.fullServerUrl(),s=xc(i,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,d=new Ya(s,a,qz(n,t),c);return d.errorHandler=y0(e),d}function $z(n,e){const t=e.fullServerUrl(),i=xc(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function c(f,p){}const d=new Ya(i,s,c,a);return d.successCodes=[200,204],d.errorHandler=y0(e),d}function Kz(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function hk(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=Kz(null,e)),i}function fk(n,e,t,i,s){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let z="";for(let K=0;K<2;K++)z=z+Math.random().toString().slice(2);return z}const f=d();c["Content-Type"]="multipart/related; boundary="+f;const p=hk(e,i,s),_=dk(p,t),v="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+f+"--",R=ys.getBlob(v,i,T);if(R===null)throw tk();const S={name:p.fullPath},D=xc(a,n.host,n._protocol),k="POST",L=n.maxUploadRetryTime,B=new Ya(D,k,_0(n,t),L);return B.urlParams=S,B.headers=c,B.body=R.uploadData(),B.errorHandler=Zd(e),B}class jm{constructor(e,t,i,s){this.current=e,this.total=t,this.finalized=!!i,this.metadata=s||null}}function v0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Rs(!1)}return Rs(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Qz(n,e,t,i,s){const a=e.bucketOnlyServerUrl(),c=hk(e,i,s),d={name:c.fullPath},f=xc(a,n.host,n._protocol),p="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},v=dk(c,t),T=n.maxUploadRetryTime;function R(D){v0(D);let k;try{k=D.getResponseHeader("X-Goog-Upload-URL")}catch{Rs(!1)}return Rs(Dp(k)),k}const S=new Ya(f,p,R,T);return S.urlParams=d,S.headers=_,S.body=v,S.errorHandler=Zd(e),S}function Yz(n,e,t,i){const s={"X-Goog-Upload-Command":"query"};function a(p){const _=v0(p,["active","final"]);let v=null;try{v=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Rs(!1)}v||Rs(!1);const T=Number(v);return Rs(!isNaN(T)),new jm(T,i.size(),_==="final")}const c="POST",d=n.maxUploadRetryTime,f=new Ya(t,c,a,d);return f.headers=s,f.errorHandler=Zd(e),f}const AA=256*1024;function Wz(n,e,t,i,s,a,c,d){const f=new jm(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw dz();const p=f.total-f.current;let _=p;s>0&&(_=Math.min(_,s));const v=f.current,T=v+_;let R="";_===0?R="finalize":p===_?R="upload, finalize":R="upload";const S={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${f.current}`},D=i.slice(v,T);if(D===null)throw tk();function k(K,te){const pe=v0(K,["active","final"]),N=f.current+_,A=i.size();let x;return pe==="final"?x=_0(e,a)(K,te):x=null,new jm(N,A,pe==="final",x)}const L="POST",B=e.maxUploadRetryTime,z=new Ya(t,L,k,B);return z.headers=S,z.body=D.uploadData(),z.progressCallback=d||null,z.errorHandler=Zd(n),z}const pi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function py(n){switch(n){case"running":case"pausing":case"canceling":return pi.RUNNING;case"paused":return pi.PAUSED;case"success":return pi.SUCCESS;case"canceled":return pi.CANCELED;case"error":return pi.ERROR;default:return pi.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,t,i){if(vz(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Jz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Na.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Na.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Na.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,s,a){if(this.sent_)throw Fu("cannot .send() more than once");if(Vs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Zz extends Jz{initXhr(){this.xhr_.responseType="text"}}function Eo(){return new Zz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=g0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(zt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(rk(s.status,[]))if(a)s=ZN();else{this.sleepTime=Math.max(this.sleepTime*2,nz),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(zt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,a)=>{this._resolve=s,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=Qz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Eo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const s=Yz(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(s,Eo,t,i);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=AA*this._chunkMultiplier,t=new jm(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,a)=>{let c;try{c=Wz(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){this._error=f,this._transition("error");return}const d=this._ref.storage._makeRequest(c,Eo,s,a,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){AA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=Hz(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,Eo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=fk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,Eo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=ek(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=py(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,s){const a=new Xz(t||void 0,i||void 0,s||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(py(this._state)){case pi.SUCCESS:Fl(this._resolve.bind(null,this.snapshot))();break;case pi.CANCELED:case pi.ERROR:const t=this._reject;Fl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(py(this._state)){case pi.RUNNING:case pi.PAUSED:e.next&&Fl(e.next.bind(e,this.snapshot))();break;case pi.SUCCESS:e.complete&&Fl(e.complete.bind(e))();break;case pi.CANCELED:case pi.ERROR:e.error&&Fl(e.error.bind(e,this._error))();break;default:e.error&&Fl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this._service=e,t instanceof xi?this._location=t:this._location=xi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ba(e,t)}get root(){const e=new xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ck(this._location.path)}get storage(){return this._service}get parent(){const e=Lz(this._location.path);if(e===null)return null;const t=new xi(this._location.bucket,e);return new Ba(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw mz(e)}}function tq(n,e,t){n._throwIfRoot("uploadBytes");const i=fk(n.storage,n._location,g0(),new ys(e,!0),t);return n.storage.makeRequestWithTokens(i,Eo).then(s=>({metadata:s,ref:n}))}function nq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new eq(n,new ys(e),t)}function iq(n){n._throwIfRoot("getDownloadURL");const e=Gz(n.storage,n._location,g0());return n.storage.makeRequestWithTokens(e,Eo).then(t=>{if(t===null)throw hz();return t})}function rq(n){n._throwIfRoot("deleteObject");const e=$z(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Eo)}function sq(n,e){const t=Uz(n._location.path,e),i=new xi(n._location.bucket,t);return new Ba(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(n){return/^[A-Za-z]+:\/\//.test(n)}function aq(n,e){return new Ba(n,e)}function mk(n,e){if(n instanceof E0){const t=n;if(t._bucket==null)throw uz();const i=new Ba(t,t._bucket);return e!=null?mk(i,e):i}else return e!==void 0?sq(n,e):n}function lq(n,e){if(e&&oq(e)){if(n instanceof E0)return aq(n,e);throw wv("To use ref(service, url), the first argument must be a Storage instance.")}else return mk(n,e)}function RA(n,e){const t=e==null?void 0:e[JN];return t==null?null:xi.makeFromBucketSpec(t,n)}function cq(n,e,t,i={}){n.host=`${e}:${t}`;const s=Vs(e);s&&(qm(`https://${n.host}`),Hm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:Ov(a,n.app.options.projectId))}class E0{constructor(e,t,i,s,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=XN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ez,this._maxUploadRetryTime=tz,this._requests=new Set,s!=null?this._bucket=xi.makeFromBucketSpec(s,this._host):this._bucket=RA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xi.makeFromBucketSpec(this._url,e):this._bucket=RA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ba(this,e)}_makeRequest(e,t,i,s,a=!0){if(this._deleted)return new pz(nk());{const c=Az(e,this._appId,i,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const IA="@firebase/storage",xA="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="storage";function rd(n,e,t){return n=Ot(n),tq(n,e,t)}function sd(n,e,t){return n=Ot(n),nq(n,e,t)}function Pr(n){return n=Ot(n),iq(n)}function NA(n){return n=Ot(n),rq(n)}function qi(n,e){return n=Ot(n),lq(n,e)}function Hi(n=Pd(),e){n=Ot(n);const i=zo(n,pk).getImmediate({identifier:e}),s=kv("storage");return s&&uq(i,...s),i}function uq(n,e,t,i={}){cq(n,e,t,i)}function dq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new E0(t,i,s,e,qo)}function hq(){Wi(new Ni(pk,dq,"PUBLIC").setMultipleInstances(!0)),Yn(IA,xA,""),Yn(IA,xA,"esm2017")}hq();function Nc({showPopup:n}){const[e,t]=V.useState({show:!1}),i=Us(),s=c=>{t(typeof c=="string"?{message:c,show:!0}:{...c,show:!0})},a=()=>{e.redirect&&i(e.redirectUrl),t({show:!1})};return V.useEffect(()=>{n.current=s},[n]),E.jsx("div",{id:"errorPopupContainer",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2e3,padding:"1rem",boxSizing:"border-box",display:e.show?"flex":"none"},children:E.jsxs("div",{id:"errorPopup",style:{backgroundColor:"#fff",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",maxWidth:"400px",width:"100%",margin:"auto"},children:[E.jsx("button",{onClick:a,style:{position:"relative",fontSize:"20px",width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",backgroundColor:"#15803d",color:"#fff",fontWeight:"600",border:"none",borderRadius:"0.375rem",cursor:"pointer",transition:"background-color 0.2s ease-in-out, transform 0.2s ease-in-out",marginBottom:"10px"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#166534",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#15803d",c.currentTarget.style.transform="scale(1)"},onFocus:c=>{c.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 128, 61, 0.5)"},onBlur:c=>{c.currentTarget.style.boxShadow="none"},children:E.jsx("i",{className:"fa-solid fa-xmark","aria-hidden":"true"})}),E.jsx("p",{id:"errorPopupMessage",style:{marginBottom:"1.5rem",color:"#4b5563",lineHeight:"1.6"},children:e.message})]})})}const fq=({messages:n,scrollToBottom:e,onExcluir:t})=>{const i=p=>p.audio?t(p.id,"audio",p.audio.url):p.arquivo?t(p.id,"arquivo",p.arquivo.url):p.video?t(p.id,"video",p.video):p.imagem?t(p.id,"imagem",p.imagem):t(p.id,"texto"),s=(p,_)=>{},a=p=>{},c=(p,_)=>{},d=p=>"",f=p=>"";return V.useEffect(()=>{e()},[n]),E.jsx("div",{id:"chat-messages",children:n.map(p=>{const _=p.audio?`${String(Math.floor(p.audio.duracao/60)).padStart(2,"0")}:${String(p.audio.duracao%60).padStart(2,"0")}`:"";return p.isTime?E.jsx("div",{className:"message-time",children:pF(p.date)}):E.jsx("div",{style:{display:"flex",alignItems:"center",margin:"10px 0",justifyContent:"flex-end"},className:"message-usuario",children:E.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[E.jsxs("div",{className:"message-bubble",style:{backgroundColor:"green",color:"white",padding:"8px",borderRadius:"15px",maxWidth:"fit-content"},children:[E.jsx("div",{style:{fontWeight:"bold"},children:"Você"}),p.imagem&&E.jsx("div",{style:{margin:"5px 0"},children:E.jsx("img",{src:p.imagem,style:{maxWidth:"250px",maxHeight:"250px",borderRadius:"10px",cursor:"pointer"},onClick:()=>a(p.imagem)})}),p.video&&E.jsx("div",{style:{margin:"5px 0"},children:E.jsx("video",{src:p.video,controls:!0,style:{maxWidth:"250px",maxHeight:"250px",borderRadius:"10px"}})}),p.audio&&E.jsxs("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",backgroundColor:"#1b5c2438",borderRadius:"10px",padding:"8px"},children:[E.jsx("audio",{id:`audio-${p.id}`,src:p.audio.url,preload:"auto"}),E.jsx("button",{onClick:()=>s(`audio-${p.id}`,`play-btn-${p.id}`),id:`play-btn-${p.id}`,style:{background:"none",border:"none",fontSize:"20px",color:"green",cursor:"pointer"},children:E.jsx("i",{className:"fa-solid fa-play"})}),E.jsx("div",{style:{flexGrow:1,height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",margin:"0 10px",cursor:"pointer"},onClick:v=>c(`audio-${p.id}`,v.currentTarget),children:E.jsx("div",{style:{height:"100%",width:"0%",backgroundColor:"#248232"}})}),E.jsx("div",{style:{fontSize:"12px",color:"white"},children:_})]}),p.arquivo&&E.jsxs("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",backgroundColor:"#1b5c2438",borderRadius:"10px",padding:"8px",cursor:"pointer"},children:[E.jsx("div",{style:{marginRight:"10px",fontSize:"24px"},children:d(p.arquivo.tipo)}),E.jsxs("div",{children:[E.jsx("strong",{children:p.arquivo.nome}),E.jsx("div",{style:{fontSize:"12px",color:"white"},children:f(p.arquivo.tamanho||0)})]}),E.jsxs("a",{href:p.arquivo.url,target:"_blank",download:p.arquivo.nome,style:{marginLeft:"auto",color:"white",textDecoration:"none"},children:[E.jsx("i",{className:"fa-solid fa-download"})," Baixar"]})]}),p.texto&&E.jsx("div",{style:{whiteSpace:"pre-wrap"},children:p.texto}),E.jsx("div",{style:{textAlign:"right",fontSize:"small"},children:mv(p.date)})]}),E.jsx("div",{style:{cursor:"pointer",fontSize:"16px",padding:"3px",position:"absolute",right:0,bottom:"-18px"},onClick:()=>i(p)})]})},p.id)})})},mq=V.memo(fq);function pq(){const{socket:n,mobile:e,usuarioLogado:t}=yi(),[i,s]=V.useState([]),a=()=>{t&&n.send("/chats",{}).then(c=>{if(c.result){const d=c.results;s(d.map(f=>({id:f.id,logo:f.logo?bs(f.logo):jn,name:f.name,message_time:f.message_time,message_text:f.message_text})))}})};return V.useEffect(()=>{e||a()},[e,t]),E.jsxs("section",{id:"history",children:[E.jsxs("div",{id:"top-chats",children:[E.jsx("span",{className:"icone","aria-hidden":"true",children:E.jsx("i",{className:"fa-solid fa-comment-dots","aria-hidden":"true",style:{margin:"0 auto"}})}),E.jsx("h2",{id:"label-chats",children:"Conversas"})]}),E.jsx("div",{id:"friendList",children:i.map((c,d)=>E.jsx(Mt,{className:"chat-link",to:`/chat/${c.id}`,children:E.jsxs("div",{children:[E.jsx("img",{src:c.logo}),E.jsx("div",{children:c.name})]})},d))})]})}const gq=V.memo(pq);function kA(){const{server:n,socket:e,db:t,mobile:i,usuarioLogado:s,refs:{respa:a}}=yi(),c=Us(),d=V.useRef(null),f=V.useRef(null),p=V.useRef(!1),_=V.useRef([]),[v,T]=V.useState([]),[R,S]=V.useState(""),D=V.useRef(-1),k=V.useRef({audioSeconds:0,audioTimer:null,mediaRecorder:null,audioChunks:[]}),[L,B]=V.useState(!1),z=V.useRef(null),K={fileInput:V.useRef(null),messageInput:V.useRef(null)},te=()=>{if(!s||!d.current)return;const re=K.messageInput.current.textContent;if(re.trim()==="")return;K.messageInput.current&&(K.messageInput.current.addEventListener("keydown",ge=>{d.current&&(ge.key==="Enter"&&(ge.shiftKey||ge.preventDefault()),Qi(ke(Oe(),`chats/${D.current}/typing/${s.uid}`),!0),clearTimeout(window.typingTimeout),window.typingTimeout=setTimeout(()=>{Qi(ke(Oe(),`chats/${D.current}/typing/${s.uid}`),!1)},2e3))}),K.messageInput.current.addEventListener("blur",()=>{d.current&&Qi(ke(Oe(),`chats/${D.current}/typing/${s.uid}`),!1)})),xo.post(n+"/message",{title:f.current.name,body:re,other_uid:d.current.uid,chat_id:new URLSearchParams(location.search).get("id")});const H={remetente:s.uid,texto:re,timestamp:Date.now(),lida:!1};lr(ke(Oe(),`chats/${D.current}`),H).then(()=>{K.messageInput.current.textContent=""}),pe()};function pe(){!s||!D.current||or(zy(ke(Oe(),`chats/${D.current}`),Fy("timestamp"))).then(re=>{let H={};re.forEach(ge=>{const _e=ge.val();_e.lida===!1&&_e.remetente!==s.uid&&(H[ge.key+"/lida"]=!0)}),Object.keys(H).length>0&&lp(ke(Oe(),`chats/${D.current}`),H).then(()=>{fv()})})}function N(){if(!s||!d.current)return;const re=ke(Oe(),`chats/${D.current}/typing`);function H(ge){let _e=!1;ge.forEach(ae=>{ae.key!==s.uid&&ae.val()===!0&&(_e=!0)});const Z=document.getElementById("chat-messages");let ce=document.getElementById("typing-indicator");if(_e){if(!ce){ce=document.createElement("div"),ce.id="typing-indicator",ce.classList.add("message-bubble"),ce.style.backgroundColor="gray",ce.style.color="white",ce.style.marginRight="auto",ce.style.padding="0px 0px 0px 0px",ce.style.borderRadius="15px",ce.style.maxWidth="fit-content",ce.style.position="relative",ce.style.fontStyle="italic",ce.innerHTML='<img src="static/TD.gif" alt="Digitando..." style="width:40px; height:30px;">';let ae=document.createElement("div");ae.id="typing-container",ae.style.display="flex",ae.style.alignItems="center",ae.style.margin="10px 0",uv(lv(Pm(t.current,"usuarios"),cv("uid","==",d.current.uid))).then(be=>{const Xe=be.docs[0].data();let ct=document.createElement("img");ct.src=Xe.fotoPerfil?bs(Xe.fotoPerfil):"static/avatar.png",ct.style.width="40px",ct.style.height="40px",ct.style.borderRadius="50%",ct.style.objectFit="cover",ct.style.marginRight="10px",ae.appendChild(ct),ae.appendChild(ce),Z.appendChild(ae),Z.scrollTop=Z.scrollHeight})}}else ce&&ce.parentElement.remove()}oc(re,H)}function A(){if(!s||!d.current)return;const re=document.getElementById("chat-messages");if(!re){console.error("Elemento chat-messages não encontrado");return}let H=document.getElementById("barra-opcoes-selecao");if(!H){H=document.createElement("div"),H.id="barra-opcoes-selecao",H.style.position="fixed",H.style.left="0",H.style.right="0",H.style.backgroundColor="#333",H.style.color="white",H.style.padding="10px",H.style.display="none",H.style.justifyContent="space-between",H.style.alignItems="center";const ge=document.createElement("span");ge.id="contador-selecionadas",ge.textContent="0 selecionadas";const _e=document.createElement("button");_e.textContent="Excluir",_e.style.backgroundColor="red",_e.style.color="white",_e.style.border="none",_e.style.padding="5px 10px",_e.style.borderRadius="5px",_e.style.cursor="pointer",_e.onclick=O;const Z=document.createElement("button");Z.textContent="Cancelar",Z.style.backgroundColor="gray",Z.style.color="white",Z.style.border="none",Z.style.padding="5px 10px",Z.style.borderRadius="5px",Z.style.cursor="pointer",Z.onclick=x,H.appendChild(ge),H.appendChild(_e),H.appendChild(Z),document.body.appendChild(H)}oc(zy(ke(Oe(),`chats/${D.current}`),Fy("timestamp")),ge=>{const _e=[];ge.forEach(Z=>{const ce=Z.val();ce.date=new Date(ce.timestamp);const ae=_e.length>0?_e[_e.length-1].date:null;ae&&(ce.date.getFullYear()!==ae.getFullYear()||ce.date.getMonth()!==ae.getMonth()||ce.date.getDate()!==ae.getDate())&&_e.push({isTime:!0,date:ce.date,id:String(ce.timestamp)}),_e.push({...ce,isTime:!1,timestamp:void 0})}),T(_e),re.scrollTop=re.scrollHeight})}function x(){p.current=!1,document.querySelectorAll(".mensagem-usuario").forEach(H=>{H.style.opacity="1",H.querySelector(".message-bubble").style.border="none"}),_.current=[];const re=document.getElementById("barra-opcoes-selecao");re&&(re.style.display="none")}function O(){_.current.length!==0&&confirm(`Tem certeza que deseja excluir ${_.current.length} mensagem(ns)?`)&&(_.current.forEach(({chatId:re,messageId:H})=>{Pn(ke(Oe(),`chats/${re.current}/${H}`)).catch(ge=>{console.error("Erro ao excluir mensagem:",ge)})}),x())}function U(){if(!(!s||!d.current)){if(!navigator.mediaDevices||!window.MediaRecorder){z.current("Seu navegador não suporta gravação de áudio.");return}if(L){q();return}navigator.mediaDevices.getUserMedia({audio:!0}).then(re=>{const H=document.getElementById("gravador-container");H?H.style.display="flex":_t(),k.current.audioSeconds=0,it(),k.current.audioTimer=setInterval(it,1e3),k.current.mediaRecorder=new MediaRecorder(re),k.current.audioChunks=[],k.current.mediaRecorder.ondataavailable=ge=>{ge.data.size>0&&k.current.audioChunks.push(ge.data)},k.current.mediaRecorder.onstop=()=>{const ge=new Blob(k.current.audioChunks,{type:"audio/wav"});se(ge)},k.current.mediaRecorder.start(),B(!0)}).catch(re=>{console.error("Erro ao acessar o microfone:",re),z.current("Não foi possível acessar o microfone.")})}}function q(){if(!k.current.mediaRecorder||k.current.mediaRecorder.state==="inactive")return;clearInterval(k.current.audioTimer),k.current.mediaRecorder.stop(),B(!1),k.current.mediaRecorder.stream&&k.current.mediaRecorder.stream.getTracks().forEach(H=>H.stop());const re=document.getElementById("gravador-container");re&&(re.style.display="none")}function M(){if(!k.current.mediaRecorder||k.current.mediaRecorder.state==="inactive")return;k.current.mediaRecorder.onstop=null,clearInterval(k.current.audioTimer),k.current.mediaRecorder.stop(),B(!1),k.current.audioChunks=[],k.current.mediaRecorder.stream&&k.current.mediaRecorder.stream.getTracks().forEach(ge=>ge.stop());const re=document.getElementById("gravador-container");re&&(re.style.display="none");const H=document.getElementById("audio-record-btn");H&&(H.innerHTML='<i class="fa-solid fa-microphone"></i>',H.classList.remove("recording"),H.title="Gravar mensagem de voz")}function it(){k.current.audioSeconds++;const re=Math.floor(k.current.audioSeconds/60),H=k.current.audioSeconds%60,ge=`${re.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`,_e=document.getElementById("tempo-gravacao");_e&&(_e.textContent=ge),k.current.audioSeconds>=180&&q()}function _t(){const re=document.getElementById("chat-container")||document.body,H=document.createElement("div");H.id="gravador-container",H.style.display="flex",H.style.alignItems="center",H.style.justifyContent="space-between",H.style.backgroundColor="#f0f0f0",H.style.padding="10px 15px",H.style.borderRadius="10px",H.style.margin="10px 0",H.style.gap="10px",H.style.position="fixed",H.style.bottom="70px",H.style.left="50%",H.style.transform="translateX(-50%)",H.style.width="80%",H.style.maxWidth="400px",H.style.zIndex="100";const ge=document.createElement("div");ge.innerHTML='<i class="fa-solid fa-circle"></i>',ge.style.color="red",ge.style.fontSize="14px",ge.style.animation="pulse 1.5s infinite ease-in-out";const _e=document.createElement("div");_e.id="tempo-gravacao",_e.textContent="00:00",_e.style.fontFamily="monospace",_e.style.fontSize="16px",_e.style.fontWeight="bold";const Z=document.createElement("div");Z.textContent="Áudios podem ter no máximo 3 minutos.",Z.style.fontSize="12px",Z.style.color="#666",Z.style.marginTop="5px",Z.style.textAlign="center",Z.style.width="100%";const ce=document.createElement("div");ce.style.display="flex",ce.style.gap="15px";const ae=document.createElement("button");ae.innerHTML='<i class="fa-solid fa-check"></i>',ae.style.border="none",ae.style.backgroundColor="#248232",ae.style.color="white",ae.style.borderRadius="50%",ae.style.width="35px",ae.style.height="35px",ae.style.display="flex",ae.style.alignItems="center",ae.style.justifyContent="center",ae.style.cursor="pointer",ae.title="Enviar",ae.onclick=q;const be=document.createElement("button");be.innerHTML='<i class="fa-solid fa-times"></i>',be.style.border="none",be.style.backgroundColor="#e53935",be.style.color="white",be.style.borderRadius="50%",be.style.width="35px",be.style.height="35px",be.style.display="flex",be.style.alignItems="center",be.style.justifyContent="center",be.style.cursor="pointer",be.title="Cancelar",be.onclick=M,ce.appendChild(ae),ce.appendChild(be),H.appendChild(ge),H.appendChild(_e),H.appendChild(Z),H.appendChild(ce),re.appendChild(H)}function se(re){if(!s||!d.current||!re)return;const H=`audio_${s.uid}_${Date.now()}.wav`,ge=qi(Hi(),`chat_audios/${D.current}/${H}`),_e=document.createElement("div");_e.style.width="0%",_e.style.height="4px",_e.style.backgroundColor="#4CAF50",_e.style.position="fixed",_e.style.top="0",_e.style.left="0",_e.style.zIndex="1000",document.body.appendChild(_e);const Z=sd(ge,re);Z.on("state_changed",ce=>{const ae=ce.bytesTransferred/ce.totalBytes*100;_e.style.width=`${ae}%`},ce=>{console.error("Erro ao fazer upload do áudio:",ce),z.current("Não foi possível enviar a mensagem de voz."),document.body.removeChild(_e)},()=>{Pr(Z.snapshot.ref).then(ce=>{const ae=K.messageInput.current?K.messageInput.current.textContent.trim():"",be={remetente:s.uid,texto:ae,audio:{url:ce,duracao:k.current.audioSeconds},timestamp:Date.now(),lida:!1};return lr(ke(Oe(),`chats/${D.current}`),be)}).then(()=>{K.messageInput.current.textContent="",document.body.removeChild(_e),pe()}).catch(ce=>{console.error("Erro ao salvar mensagem de áudio:",ce),z.current("Não foi possível enviar a mensagem de voz."),document.body.contains(_e)&&document.body.removeChild(_e)})})}const Te=re=>{const H=re.target.files[0];if(!H)return;const ge=["image/jpeg","image/png","image/gif","image/webp"],_e=["video/mp4","video/webm","video/ogg"],Z=20*1024*1024;if(ge.includes(H.type)){xe(re);return}else if(_e.includes(H.type)){rt(re);return}if(H.size>Z){z.current("O tamanho do arquivo não pode ser maior que 20MB.");return}const ce=K.messageInput.current?K.messageInput.current.textContent.trim():"",ae=qi(Hi(),`chat_files/${D.current}/${s.uid}_${Date.now()}_${H.name}`);rd(ae,H).then(be=>Pr(be.ref)).then(be=>{const Xe={remetente:s.uid,texto:ce,arquivo:{url:be,nome:H.name,tipo:H.type,tamanho:H.size},timestamp:mo()};return lr(ke(Oe(),`chats/${D.current}`),Xe)}).then(()=>{K.fileInput.current.value="",K.messageInput.current&&(K.messageInput.current.textContent="")}).catch(be=>{console.error("Erro no upload do arquivo:",be),z.current("Não foi possível enviar o arquivo.")})};function xe(re){const H=re.target.files[0];if(!H)return;const ge=["image/jpeg","image/png","image/gif","image/webp"],_e=5*1024*1024;if(!ge.includes(H.type)){z.current("Apenas suportamos imagens JPEG, PNG, GIF e WebP.");return}if(H.size>_e){z.current("A imagem não pode ser maior que 5MB.");return}const Z=K.messageInput.current?K.messageInput.current.textContent.trim():"",ce=qi(Hi(),`chat_images/${D.current}/${s.uid}_${Date.now()}_${H.name}`),ae=document.createElement("div");ae.style.width="0%",ae.style.height="4px",ae.style.backgroundColor="#4CAF50",ae.style.position="fixed",ae.style.top="0",ae.style.left="0",ae.style.zIndex="1000",document.body.appendChild(ae),sd(ce,H).then(be=>{const Xe=be.bytesTransferred/be.totalBytes*100;return ae.style.width=`${Xe}%`,Pr(be.ref)}).then(be=>{const Xe={remetente:s.uid,texto:Z,imagem:be,timestamp:Date.now(),lida:!1};return lr(ke(Oe(),`chats/${D.current}`),Xe)}).then(()=>{re.target.value="",K.messageInput.current&&(K.messageInput.current.textContent=""),document.body.removeChild(ae),pe()}).catch(be=>{console.error("Erro no upload da imagem:",be),z.current("Não foi possível enviar a imagem."),document.body.contains(ae)&&document.body.removeChild(ae)})}function rt(re){const H=re.target.files[0];if(!H)return;const ge=20*1024*1024;if(!["video/mp4","video/webm","video/ogg"].includes(H.type)){z.current("Apenas suportamos vídeos MP4, WebM ou OGG.");return}if(H.size>ge){z.current("O tamanho do vídeo não pode ser maior que 20MB.");return}const Z=K.messageInput.current?K.messageInput.current.textContent.trim():"",ce=qi(Hi(),`chat_videos/${D.current}/${s.uid}_${Date.now()}_${H.name}`),ae=document.createElement("div");ae.style.width="0%",ae.style.height="4px",ae.style.backgroundColor="#4CAF50",ae.style.position="fixed",ae.style.top="0",ae.style.left="0",ae.style.zIndex="1000",document.body.appendChild(ae),sd(ce,H).then(be=>{const Xe=be.bytesTransferred/be.totalBytes*100;return ae.style.width=`${Xe}%`,Pr(be.ref)}).then(be=>{const Xe={remetente:s.uid,texto:Z,video:be,timestamp:Date.now(),lida:!1};return lr(ke(Oe(),`chats/${D.current}`),Xe)}).then(()=>{re.target.value="",K.messageInput.current&&(K.messageInput.current.textContent=""),document.body.removeChild(ae),pe()}).catch(be=>{console.error("Erro no upload do vídeo:",be),z.current("Não foi possível enviar o vídeo."),document.body.contains(ae)&&document.body.removeChild(ae)})}const j=V.useCallback(()=>{const re=document.getElementById("chat-messages");re&&(re.scrollTop=re.scrollHeight)},[]),ue=()=>{S(K.messageInput.current.innerText)};return V.useEffect(()=>{j()},[R]),V.useEffect(()=>{s&&location.pathname.startsWith("/chat")&&(D.current=Number(location.pathname.split("/")[2]),e.send("/chat",{operation:"get_messages",id:D.current}).then(re=>{if(re.result){const H=JSON.parse(re.results.users),ge=Object.keys(H),_e=s.uid==ge[0]?ge[1]:ge[0];d.current={...H[_e],uid:_e},f.current={...H[s.uid],uid:s.uid},D.current=re.results.id;const Z=document.getElementById("chat-box");Z.style.display="flex",A(),pe(),N()}else c("/chats")}))},[location.search,s]),E.jsxs("div",{id:"chats-page",className:"page",children:[E.jsx("h4",{ref:a,className:"hidden",id:"resultadoPA"}),E.jsxs("div",{className:"chatdiv",children:[!i||i&&location.pathname=="/chats"?E.jsx(gq,{}):E.jsx(E.Fragment,{}),!i||i&&location.pathname=="/chat"?E.jsxs("section",{id:"chat",children:[E.jsxs("div",{id:"user-info",children:[E.jsx("div",{id:"user-logo"}),E.jsx("div",{id:"user-name"})]}),E.jsxs("div",{id:"chat-box",style:{display:"none"},children:[E.jsx(mq,{messages:v,scrollToBottom:j,onExcluir:V.useCallback((...re)=>{},[])}),E.jsx("div",{id:"typingIndicatorContainer",style:{display:"none"}}),E.jsxs("div",{id:"chat-input",className:v.length>0?"loaded":"",children:[E.jsx("input",{type:"file",ref:K.fileInput,id:"fileUpload",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar,image/*,video/*",style:{display:"none"},onChange:Te}),E.jsx("div",{onInput:ue,contentEditable:!0,ref:K.messageInput,className:"message-input"}),(R==""||R==`
`)&&E.jsx("div",{className:"message-input is-empty",children:"Digite sua mensagem..."}),E.jsx("i",{onClick:te,className:"fa-solid fa-paper-plane send-item"+(R.trim()==""?" disabled":""),"aria-hidden":"true"}),E.jsx("i",{onClick:()=>K.fileInput.current.click(),className:"fa-solid fa-paperclip send-item","aria-hidden":"true"}),E.jsx("i",{onClick:U,id:"audio-record-btn",title:"Gravar mensagem voz",className:"fa-solid  attachment-btn send-item "+(L?"fa-stop recording":"fa-microphone")})]})]})]}):E.jsx(E.Fragment,{})]}),E.jsx(Nc,{showPopup:z})]})}const Wf="/assets/default_comunidade-BJpLMTtg.png";function _q(){const{db:n,usuarioLogado:e}=yi(),t=Us(),i=V.useRef(null),s=V.useRef(null),a=V.useRef({}),c=V.useRef(null),d=V.useRef(null),f=V.useRef(null),p=V.useRef(null),_=V.useRef(!1),v=V.useRef([]),[T,R]=V.useState([]),[S,D]=V.useState(0),[k,L]=V.useState({show:!1,fotoPerfil:jn,nome:"",isUserCreator:!1,targetIsAdmin:!1,left:"0",top:"0"}),B=V.useRef({audioSeconds:0,audioTimer:null,mediaRecorder:null,audioChunks:[]}),[z,K]=V.useState(!1),te={fileInput:V.useRef(null),menu:V.useRef(null),messageInput:V.useRef(null)},pe=J=>{R(J.map(G=>({fotoPerfil:G.fotoPerfil,nome:G.nome,isCreator:G.isCreator,id:G.id,isAdmin:G.isAdmin})))},N=J=>{if(J===s){i.current("Não é possível silenciar o líder da comunidade.");return}if(e.uid!==s.current&&a.current[e.uid]&&a.current[J]){i.current("Você não tem permissão para fazer isso.");return}const G=prompt("Por quanto tempo deseja silenciar este membro? (em horas)");if(G===null)return;const Se=parseInt(G);if(isNaN(Se)||Se<=0){i.current("Insira um número válido de horas.");return}const Ce=new Date,we=new Date(Ce.getTime()+Se*60*60*1e3);hv(ve=>{Qi(ke(Oe(),`comunidades/${f.current}/membros/${J}/muted`),{until:we.getTime(),by:e.uid,reason:"Silenciado por administrador",timestamp:mo()}).then(()=>{i.current(`Membro silenciado por ${Se} hora(s).`)}).catch(me=>{console.error("Erro ao silenciar membro:",me),i.current("Não foi possível silenciar o membro.")})})},A=J=>{const G=document.getElementById("membersList");if(G.innerHTML="",!J.membros){G.innerHTML='<div class="no-members">Nenhum membro encontrado</div>';return}const Se=Object.keys(J.membros);uv(lv(Pm(n.current,"usuarios"),cv("uid","in",Se))).then(Ce=>{d.current=Ce.docs.map(we=>{const ve=we.data();return{id:ve.uid,...ve}}),d.current.sort((we,ve)=>we.id===s?-1:ve.id===s?1:a.current[we.id]&&!a.current[ve.id]?-1:!a.current[we.id]&&a.current[ve.id]?1:(we.nome||"").localeCompare(ve.nome||"")),pe(d.current),D(d.current.length)}).catch(Ce=>{console.error("Erro ao carregar membros:",Ce),G.innerHTML='<div class="error-message">Erro ao carregar membros</div>'})},x=()=>{or(ke(Oe(),"comunidades/"+f.current)).then(J=>{if(J.exists()){const G=J.val();document.getElementById("comunidadeTitulo").innerText=G.nome||"Comunidade",document.getElementById("comunidadeDescricao").innerText=G.descricao||"Sem descrição",G.tags?(document.getElementById("comunidadeTags").style.display="block",document.getElementById("comunidadeTags").querySelector("span").innerText=G.tags):document.getElementById("comunidadeTags").style.display="none",G.imagem?document.getElementById("comunidadeImagem").src=G.imagem:document.getElementById("comunidadeImagem").src="static/default_comunidade.png",s.current=G.criador,G.admins&&(a.current=G.admins),c.current=e.uid===s.current||a&&a.current[String(e.uid)],A(G)}else i.current("Comunidade não encontrada."),window.location.href="index.html"}).catch(J=>{console.error("Erro ao carregar comunidade:",J),i.current("Erro ao carregar dados da comunidade.")})};function O(){document.getElementById("bannerModal").style.display="none"}function U(){if(!te.fileInput.current.files||te.fileInput.current.files.length===0){i.current("Selecione uma imagem para o banner.");return}const J=te.fileInput.current.files[0];rd(qi(Hi(),`comunidades/${f.current}/banner/${J.name}`),J).then(G=>Pr(G.ref)).then(G=>lp(ke(Oe(),`comunidades/${f.current}`),{banner:G})).then(()=>{O(),q()}).catch(G=>{console.error("Erro ao atualizar banner:",G),i.current("Erro ao atualizar banner.")})}function q(){or(ke(Oe(),`comunidades/${f.current}/banner`)).then(J=>{const G=J.val()||"https://via.placeholder.com/300x150";document.getElementById("communityBanner").style.backgroundImage=`url('${G}')`}).catch(J=>{console.error("Erro ao carregar banner:",J)})}function M(){if(!(!e||!f.current)){if(!navigator.mediaDevices||!window.MediaRecorder){i.current("Seu navegador não suporta gravação de áudio.");return}if(z){it();return}navigator.mediaDevices.getUserMedia({audio:!0}).then(J=>{const G=document.getElementById("gravador-container");G?G.style.display="flex":Te(),B.current.audioSeconds=0,se(),B.current.audioTimer=setInterval(se,1e3),B.current.mediaRecorder=new MediaRecorder(J),B.current.audioChunks=[],B.current.mediaRecorder.ondataavailable=Se=>{Se.data.size>0&&B.current.audioChunks.push(Se.data)},B.current.mediaRecorder.onstop=()=>{const Se=new Blob(B.current.audioChunks,{type:"audio/wav"});xe(Se)},B.current.mediaRecorder.start(),K(!0)}).catch(J=>{console.error("Erro ao acessar o microfone:",J),i.current("Não foi possível acessar o microfone.")})}}function it(){if(!B.current.mediaRecorder||B.current.mediaRecorder.state==="inactive")return;clearInterval(B.current.audioTimer),B.current.mediaRecorder.stop(),K(!1),B.current.mediaRecorder.stream&&B.current.mediaRecorder.stream.getTracks().forEach(G=>G.stop());const J=document.getElementById("gravador-container");J&&(J.style.display="none")}function _t(){if(!B.current.mediaRecorder||B.current.mediaRecorder.state==="inactive")return;B.current.mediaRecorder.onstop=null,clearInterval(B.current.audioTimer),B.current.mediaRecorder.stop(),K(!1),B.current.audioChunks=[],B.current.mediaRecorder.stream&&B.current.mediaRecorder.stream.getTracks().forEach(Se=>Se.stop());const J=document.getElementById("gravador-container");J&&(J.style.display="none");const G=document.getElementById("audio-record-btn");G&&(G.innerHTML='<i class="fa-solid fa-microphone"></i>',G.classList.remove("recording"),G.title="Gravar mensagem de voz")}function se(){B.current.audioSeconds++;const J=Math.floor(B.current.audioSeconds/60),G=B.current.audioSeconds%60,Se=`${J.toString().padStart(2,"0")}:${G.toString().padStart(2,"0")}`,Ce=document.getElementById("tempo-gravacao");Ce&&(Ce.textContent=Se),B.current.audioSeconds>=180&&it()}function Te(){const J=document.getElementById("chat-container")||document.body,G=document.createElement("div");G.id="gravador-container",G.style.display="flex",G.style.alignItems="center",G.style.justifyContent="space-between",G.style.backgroundColor="#f0f0f0",G.style.padding="10px 15px",G.style.borderRadius="10px",G.style.margin="10px 0",G.style.gap="10px",G.style.position="fixed",G.style.bottom="70px",G.style.left="50%",G.style.transform="translateX(-50%)",G.style.width="80%",G.style.maxWidth="400px",G.style.zIndex="100";const Se=document.createElement("div");Se.innerHTML='<i class="fa-solid fa-circle"></i>',Se.style.color="red",Se.style.fontSize="14px",Se.style.animation="pulse 1.5s infinite ease-in-out";const Ce=document.createElement("div");Ce.id="tempo-gravacao",Ce.textContent="00:00",Ce.style.fontFamily="monospace",Ce.style.fontSize="16px",Ce.style.fontWeight="bold";const we=document.createElement("div");we.textContent="Áudios podem ter no máximo 3 minutos.",we.style.fontSize="12px",we.style.color="#666",we.style.marginTop="5px",we.style.textAlign="center",we.style.width="100%";const ve=document.createElement("div");ve.style.display="flex",ve.style.gap="15px";const me=document.createElement("button");me.innerHTML='<i class="fa-solid fa-check"></i>',me.style.border="none",me.style.backgroundColor="#248232",me.style.color="white",me.style.borderRadius="50%",me.style.width="35px",me.style.height="35px",me.style.display="flex",me.style.alignItems="center",me.style.justifyContent="center",me.style.cursor="pointer",me.title="Enviar",me.onclick=it;const Ae=document.createElement("button");Ae.innerHTML='<i class="fa-solid fa-times"></i>',Ae.style.border="none",Ae.style.backgroundColor="#e53935",Ae.style.color="white",Ae.style.borderRadius="50%",Ae.style.width="35px",Ae.style.height="35px",Ae.style.display="flex",Ae.style.alignItems="center",Ae.style.justifyContent="center",Ae.style.cursor="pointer",Ae.title="Cancelar",Ae.onclick=_t,ve.appendChild(me),ve.appendChild(Ae),G.appendChild(Se),G.appendChild(Ce),G.appendChild(we),G.appendChild(ve),J.appendChild(G)}function xe(J){if(!e||!f.current||!J)return;const G=`audio_${e.uid}_${Date.now()}.wav`,Se=qi(Hi(),`chat_audios/${f.current}/${G}`),Ce=document.createElement("div");Ce.style.width="0%",Ce.style.height="4px",Ce.style.backgroundColor="#4CAF50",Ce.style.position="fixed",Ce.style.top="0",Ce.style.left="0",Ce.style.zIndex="1000",document.body.appendChild(Ce);const we=sd(Se,J);we.on("state_changed",ve=>{const me=ve.bytesTransferred/ve.totalBytes*100;Ce.style.width=`${me}%`},ve=>{console.error("Erro ao fazer upload do áudio:",ve),i.current("Não foi possível enviar a mensagem de voz."),document.body.removeChild(Ce)},()=>{Pr(we.snapshot.ref).then(ve=>{const me=te.messageInput.current?te.messageInput.current.value.trim():"",Ae={remetente:e.uid,texto:me,audio:{url:ve,duracao:B.current.audioSeconds},timestamp:Date.now(),lida:!1};return lr(ke(Oe(),`comunidades/${f.current}/mensagens`),Ae)}).then(()=>{te.messageInput.current.value="",document.body.removeChild(Ce)}).catch(ve=>{console.error("Erro ao salvar mensagem de áudio:",ve),i.current("Não foi possível enviar a mensagem de voz."),document.body.contains(Ce)&&document.body.removeChild(Ce)})})}const rt=J=>{const G=J.target.files[0];if(!G)return;const Se=["image/jpeg","image/png","image/gif","image/webp"],Ce=["video/mp4","video/webm","video/ogg"],we=20*1024*1024;if(Se.includes(G.type)){j(J);return}else if(Ce.includes(G.type)){ue(J);return}if(G.size>we){i.current("O tamanho do arquivo não pode ser maior que 20MB.");return}const ve=document.getElementById("messageInput"),me=ve?ve.value.trim():"",Ae=qi(Hi(),`chat_files/${f.current}/${e.uid}_${Date.now()}_${G.name}`);rd(Ae,G).then(yt=>Pr(yt.ref)).then(yt=>{const mt={remetente:e.uid,texto:me,arquivo:{url:yt,nome:G.name,tipo:G.type,tamanho:G.size},timestamp:mo()};return lr(ke(Oe(),`comunidades/${f.current}/mensagens`),mt)}).then(()=>{te.fileInput.current.value="",ve&&(ve.value="")}).catch(yt=>{console.error("Erro no upload do arquivo:",yt),i.current("Não foi possível enviar o arquivo.")})};function j(J){const G=J.target.files[0];if(!G)return;const Se=["image/jpeg","image/png","image/gif","image/webp"],Ce=5*1024*1024;if(!Se.includes(G.type)){i.current("Apenas suportamos imagens JPEG, PNG, GIF e WebP.");return}if(G.size>Ce){i.current("A imagem não pode ser maior que 5MB.");return}const we=document.getElementById("messageInput"),ve=we?we.value.trim():"",me=qi(Hi(),`chat_images/${f.current}/${e.uid}_${Date.now()}_${G.name}`);rd(me,G).then(Ae=>Pr(Ae.ref)).then(Ae=>{const yt={remetente:e.uid,texto:ve,imagem:Ae,timestamp:mo()};return lr(ke(Oe(),`comunidades/${f.current}/mensagens`),yt)}).then(()=>{te.fileInput.current.value="",we&&(we.value="")}).catch(Ae=>{})}function ue(J){const G=J.target.files[0];if(!G)return;const Se=20*1024*1024;if(!["video/mp4","video/webm","video/ogg"].includes(G.type)){i.current("Apenas suportamos vídeos MP4, WebM ou OGG.");return}if(G.size>Se){i.current("O tamanho do vídeo não pode ser maior que 20MB.");return}const we=document.getElementById("messageInput"),ve=we?we.value.trim():"",me=qi(Hi(),`chat_videos/${f.current}/${e.uid}_${Date.now()}_${G.name}`),Ae=document.createElement("div");Ae.style.width="0%",Ae.style.height="4px",Ae.style.backgroundColor="#4CAF50",Ae.style.position="fixed",Ae.style.top="0",Ae.style.left="0",Ae.style.zIndex="1000",document.body.appendChild(Ae);const yt=sd(me,G);yt.on("state_changed",mt=>{const Je=mt.bytesTransferred/mt.totalBytes*100;Ae.style.width=`${Je}%`},mt=>{console.error("Erro no upload do vídeo:",mt),i.current("Não foi possível enviar o vídeo."),document.body.contains(Ae)&&document.body.removeChild(Ae)},async()=>{const mt=await Pr(yt.snapshot.ref),Je={remetente:e.uid,texto:ve,video:mt,timestamp:mo()};return te.fileInput.current.value="",we&&(we.value=""),document.body.removeChild(Ae),lr(ke(Oe(),`comunidades/${f.current}/mensagens`),Je)})}function re(){if(!e||!f.current)return;const J=document.getElementById("messageInput");if(!J){console.error("Elemento messageInput não encontrado");return}const G=J.value.trim();G!==""&&or(ke(Oe(),`comunidades/${f.current}/membros/${e.uid}/muted`)).then(Se=>{if(Se.exists()){const we=Se.val(),ve=new Date().getTime();if(we.until>ve){const me=new Date(we.until-ve),Ae=Math.floor(me/(60*60*1e3)),yt=Math.floor(me%(60*60*1e3)/(60*1e3));i.current(`Você está silenciado e não pode enviar mensagens. Tempo restante: ${Ae}h ${yt}m`);return}else Pn(ke(Oe(),`comunidades/${f.current}/membros/${e.uid}/muted`))}const Ce={remetente:e.uid,texto:G,timestamp:mo()};lr(ke(Oe(),`comunidades/${f.current}/mensagens`),Ce).then(()=>{J.value="";const we=document.getElementById("chat-messages");we&&(we.scrollTop=we.scrollHeight)}).catch(we=>{console.error("Erro ao enviar mensagem:",we),i.current("Não foi possível enviar a mensagem.")})})}function H(){return or(ke(Oe(),"comunidades/"+f.current)).then(J=>{if(!J.exists())return!1;const G=J.val();return G.privacidade==="publica"?!0:G.criador===e.uid||G.membros&&G.membros[e.uid]}).catch(J=>(console.error("Erro ao verificar acesso:",J),!1))}function ge(J){return new URLSearchParams(window.location.search).get(J)}function _e(J){const G=document.getElementById("messageInput"),Se=document.querySelector("#chat-input button");G&&(J?(G.removeAttribute("disabled"),G.placeholder="Digite sua mensagem..."):(G.setAttribute("disabled","disabled"),G.placeholder="Entre na comunidade para enviar mensagens...")),Se&&(J?(Se.removeAttribute("disabled"),Se.style.opacity="1"):(Se.setAttribute("disabled","disabled"),Se.style.opacity="0.5"))}function Z(){!e||!f.current||or(ke(Oe(),`comunidades/${f.current}`)).then(J=>{if(!J.exists())return;if(J.val().criador===e.uid){document.getElementById("botao-entrar-container").style.display="none",_e(!0);return}or(ke(Oe(),`comunidades/${f.current}/membros/${e.uid}`)).then(Ce=>{Ce.exists()?(document.getElementById("botao-entrar-container").style.display="none",_e(!0)):(document.getElementById("botao-entrar-container").style.display="block",_e(!1),document.getElementById("botao-entrar").onclick=ce)})})}function ce(){!e||!f.current||Qi(ke(Oe(),`comunidades/${f.current}/membros/${e.uid}`),{entrou:mo()}).then(()=>{document.getElementById("botao-entrar-container").style.display="none",_e(!0)}).catch(J=>{console.error("Erro ao entrar na comunidade:",J),i.current("Não foi possível entrar na comunidade.")})}function ae(){const J=document.getElementById("chat-messages");if(!J){console.error("Elemento chat-messages não encontrado");return}let G=document.getElementById("barra-opcoes-selecao");if(!G){G=document.createElement("div"),G.id="barra-opcoes-selecao",G.style.position="fixed",G.style.bottom="0",G.style.left="0",G.style.right="0",G.style.backgroundColor="#333",G.style.color="white",G.style.padding="10px",G.style.display="none",G.style.justifyContent="space-between",G.style.alignItems="center",G.style.zIndex="1000";const we=document.createElement("span");we.id="contador-selecionadas",we.textContent="0 selecionadas";const ve=document.createElement("button");ve.textContent="Excluir",ve.style.backgroundColor="red",ve.style.color="white",ve.style.border="none",ve.style.padding="5px 10px",ve.style.borderRadius="5px",ve.style.cursor="pointer",ve.onclick=ai;const me=document.createElement("button");me.textContent="Cancelar",me.style.backgroundColor="gray",me.style.color="white",me.style.border="none",me.style.padding="5px 10px",me.style.borderRadius="5px",me.style.cursor="pointer",me.onclick=oi,G.appendChild(we),G.appendChild(ve),G.appendChild(me),document.body.appendChild(G)}const Se=ke(Oe(),`comunidades/${f.current}/mensagens`),Ce=zy(Se,Fy("timestamp"));oc(Ce,we=>{if(J.innerHTML="",!we.exists()){const me=document.createElement("div");me.style.textAlign="center",me.style.padding="20px",me.style.color="#666",me.textContent="Nenhuma mensagem enviada ainda. Seja o primeiro a enviar!",J.appendChild(me);return}const ve=[];we.forEach(me=>{ve.push({id:me.key,...me.val()})}),ve.sort((me,Ae)=>me.timestamp-Ae.timestamp),ve.forEach(me=>{const Ae=me.id,yt=document.createElement("div");yt.style.display="flex",yt.style.alignItems="flex-start",yt.style.margin="10px 0",yt.setAttribute("data-message-id",Ae);const mt=document.createElement("img");mt.style.width="40px",mt.style.height="40px",mt.style.borderRadius="50%",mt.style.objectFit="cover",mt.style.marginRight="10px";const Je=document.createElement("div");Je.classList.add("message-bubble"),Je.style.padding="8px",Je.style.borderRadius="15px",Je.style.maxWidth="70%",Je.style.position="relative",Je.style.wordBreak="break-word";const Zi=me.timestamp,_r=new Date(Zi);if(me.remetente===e.uid){const Rt=document.createElement("div");Rt.style.position="relative",Rt.style.display="flex",Rt.style.justifyContent="flex-end",Rt.style.width="100%",Rt.classList.add("mensagem-usuario"),Rt.setAttribute("data-message-id",Ae),Je.style.backgroundColor="#248232",Je.style.color="white";const ki=mv(_r);if(me.imagem){const Me=document.createElement("div");Me.style.maxWidth="250px",Me.style.margin="5px 0";const Ge=document.createElement("img");Ge.src=me.imagem,Ge.style.maxWidth="100%",Ge.style.borderRadius="10px",Ge.style.cursor="pointer",Ge.onclick=()=>{const Ke=document.createElement("div");Ke.style.position="fixed",Ke.style.top="0",Ke.style.left="0",Ke.style.width="100%",Ke.style.height="100%",Ke.style.backgroundColor="rgba(0,0,0,0.8)",Ke.style.display="flex",Ke.style.justifyContent="center",Ke.style.alignItems="center",Ke.style.zIndex="1000";const Lt=document.createElement("img");Lt.src=me.imagem,Lt.style.maxWidth="90%",Lt.style.maxHeight="90%",Lt.style.objectFit="contain",Ke.onclick=()=>document.body.removeChild(Ke),Ke.appendChild(Lt),document.body.appendChild(Ke)},Me.appendChild(Ge),Je.appendChild(Me)}if(me.video){const Me=document.createElement("div");Me.style.maxWidth="250px",Me.style.margin="5px 0",Me.style.position="relative";const Ge=document.createElement("video");Ge.src=me.video,Ge.style.maxWidth="100%",Ge.style.borderRadius="10px",Ge.controls=!0,Ge.preload="metadata",Ge.onerror=Ke=>{console.error("Erro ao carregar vídeo:",Ke),console.error("URL do vídeo:",me.video),Me.innerHTML=`
                        <div style="color:red; text-align:center;">
                            Erro ao carregar vídeo
                            <br>
                            <small>${me.video}</small>
                        </div>
                        `},Me.appendChild(Ge),Je.appendChild(Me)}if(me.audio&&me.audio.url){const Me=document.createElement("div");Me.style.display="flex",Me.style.alignItems="center",Me.style.backgroundColor="#1b5c2438",Me.style.borderRadius="10px",Me.style.padding="8px",Me.style.marginTop="5px";const Ge=document.createElement("div");Ge.style.display="flex",Ge.style.alignItems="center",Ge.style.width="40vh",Ge.style.backgroundColor="#fff",Ge.style.borderRadius="10px",Ge.style.padding="5px";const Ke=document.createElement("div");Ke.style.flexGrow="1",Ke.style.height="4px",Ke.style.backgroundColor="#e0e0e0",Ke.style.borderRadius="2px",Ke.style.marginRight="10px",Ke.style.cursor="pointer";const Lt=document.createElement("div");Lt.style.height="100%",Lt.style.width="0%",Lt.style.backgroundColor="#248232",Ke.appendChild(Lt);const on=document.createElement("button");on.innerHTML='<i class="fa-solid fa-play"></i>',on.style.backgroundColor="transparent",on.style.border="none",on.style.fontSize="20px",on.style.color="green",on.style.cursor="pointer";const Xn=document.createElement("input");Xn.type="range",Xn.value="100",Xn.min="0",Xn.max="100",Xn.style.width="60px",Xn.style.marginLeft="10px";const an=new Audio(me.audio.url);an.preload="auto",an.ontimeupdate=()=>{const er=an.currentTime/an.duration*100;Lt.style.width=`${er}%`},an.onended=()=>{on.innerHTML='<i class="fa-solid fa-play"></i>'},Ke.addEventListener("click",er=>{const Wa=Ke.getBoundingClientRect(),Xa=(er.clientX-Wa.left)/Wa.width*an.duration;an.currentTime=Xa}),on.onclick=()=>{an.paused?(an.play(),on.innerHTML='<i class="fa-solid fa-pause"></i>'):(an.pause(),on.innerHTML='<i class="fa-solid fa-play"></i>')},Xn.oninput=er=>{an.volume=er.target.value/100},Ge.appendChild(on),Ge.appendChild(Ke),Ge.appendChild(Xn),Me.appendChild(Ge);const Go=me.audio.duracao||0,Ut=Math.floor(Go/60),en=Go%60,Wt=`${Ut.toString().padStart(2,"0")}:${en.toString().padStart(2,"0")}`,Tn=document.createElement("div");Tn.style.marginLeft="10px",Tn.style.fontSize="12px",Tn.style.color="white",Tn.textContent=`${Wt}`,Me.appendChild(Tn),Je.appendChild(Me)}if(me.arquivo){const Me=document.createElement("div");Me.style.display="flex",Me.style.alignItems="center",Me.style.backgroundColor="#1b5c2438",Me.style.borderRadius="10px",Me.style.padding="8px",Me.style.marginTop="5px",Me.style.cursor="pointer";const Ge=document.createElement("div");switch(Ge.style.marginRight="10px",Ge.style.fontSize="24px",me.arquivo.tipo){case"application/pdf":Ge.innerHTML='<i class="fa-solid fa-file-pdf"></i>';break;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":Ge.innerHTML='<i class="fa-solid fa-file-word"></i>';break;case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":Ge.innerHTML='<i class="fa-solid fa-chart-simple"></i>';break;case"text/plain":Ge.innerHTML='<i class="fa-solid fa-file-lines"></i>';break;case"application/zip":Ge.innerHTML='<i class="fa-solid fa-file-zipper"></i>';break;case"application/x-rar-compressed":Ge.innerHTML='<i class="fa-solid fa-file-zipper"></i>';break;default:Ge.innerHTML='<i class="fa-solid fa-file"></i>'}const Ke=document.createElement("div");Ke.innerHTML=`
                            <strong>${me.arquivo.nome}</strong>
                            <div style="font-size: 12px; color: white;">
                            ${li(me.arquivo.tamanho||0)}
                            </div>
                        `;const Lt=document.createElement("a");Lt.href=me.arquivo.url,Lt.target="_blank",Lt.download=me.arquivo.nome,Lt.style.marginLeft="auto",Lt.style.color="white",Lt.style.textDecoration="none",Lt.innerHTML='<i class="fa-solid fa-download"></i>&nbsp; Baixar',Me.appendChild(Ge),Me.appendChild(Ke),Me.appendChild(Lt),Je.appendChild(Me)}if(me.texto){const Me=document.createElement("div");Me.textContent=me.texto,Je.appendChild(Me)}const ci=document.createElement("div");ci.textContent=ki,ci.style.textAlign="right",ci.style.fontSize="small",Je.appendChild(ci);const wt=document.createElement("div");wt.innerHTML="⋮",wt.style.cursor="pointer",wt.style.fontSize="20px",wt.style.padding="5px 8px",wt.style.marginLeft="5px",wt.style.alignSelf="flex-start",wt.style.color="#333",wt.style.borderRadius="50%",wt.style.transition="background-color 0.2s",wt.style.position="relative",wt.title="Opções da mensagem",wt.onmouseover=()=>{wt.style.backgroundColor="#f0f0f0"},wt.onmouseout=()=>{wt.style.backgroundColor="transparent"};const Pt=`menu-${Ae}`,He=document.createElement("div");He.id=Pt,He.className="menu-opcoes",He.style.position="absolute",He.style.right="0",He.style.top="25px",He.style.backgroundColor="white",He.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",He.style.padding="5px 0",He.style.borderRadius="5px",He.style.zIndex="1000",He.style.display="none",He.style.minWidth="120px";const Et=document.createElement("div");Et.textContent="Excluir mensagem",Et.style.padding="8px 15px",Et.style.cursor="pointer",Et.style.color="#E53935",Et.style.fontSize="14px",Et.style.transition="background-color 0.2s",Et.onmouseover=()=>{Et.style.backgroundColor="#f5f5f5"},Et.onmouseout=()=>{Et.style.backgroundColor="transparent"},Et.onclick=Me=>{Me.stopPropagation(),me.arquivo?Xe(Ae,me.arquivo.url):me.imagem?be(Ae,me.imagem):ct(Ae)},wt.onclick=Me=>{Me.stopPropagation(),gr(Pt)},He.appendChild(Et),wt.appendChild(He),Rt.appendChild(Je),Rt.appendChild(wt),yt.appendChild(Rt),Rt.addEventListener("dblclick",function(Me){Ji(this,Ae),Me.stopPropagation()}),Rt.addEventListener("click",function(Me){_.current&&(xn(this,Ae),Me.stopPropagation())})}else Je.style.backgroundColor="#E8E8E8",Je.style.color="#333",Je.style.marginRight="auto",uv(lv(Pm(n.current,"usuarios"),cv("uid","==",me.remetente))).then(Rt=>{const ki=Rt.docs.length>0?Rt.docs[0].data():{nome:"Usuário"};mt.src=ki.fotoPerfil?ki.fotoPerfil:jn,mt.alt=ki.nome||"Usuário";const ci=mv(_r);if(me.imagem){const Pt=document.createElement("img");Pt.src=me.imagem,Pt.style.maxWidth="100%",Pt.style.borderRadius="10px",Pt.style.marginBottom="8px",Pt.style.cursor="pointer",Pt.onclick=()=>{const He=document.createElement("div");He.style.position="fixed",He.style.top="0",He.style.left="0",He.style.width="100%",He.style.height="100%",He.style.backgroundColor="rgba(0,0,0,0.8)",He.style.display="flex",He.style.justifyContent="center",He.style.alignItems="center",He.style.zIndex="1000";const Et=document.createElement("img");Et.src=me.imagem,Et.style.maxWidth="90%",Et.style.maxHeight="90%",Et.style.objectFit="contain",He.onclick=()=>document.body.removeChild(He),He.appendChild(Et),document.body.appendChild(He)},Je.appendChild(Pt)}if(me.video){const Pt=document.createElement("div");Pt.style.maxWidth="250px",Pt.style.margin="5px 0",Pt.style.position="relative";const He=document.createElement("video");He.src=me.video,He.style.maxWidth="100%",He.style.borderRadius="10px",He.controls=!0,He.preload="metadata",He.onerror=Et=>{console.error("Erro ao carregar vídeo:",Et),console.error("URL do vídeo:",me.video),Pt.innerHTML=`
                                <div style="color:red; text-align:center;">
                                    Erro ao carregar vídeo
                                    <br>
                                    <small>${me.video}</small>
                                </div>
                                `},Pt.appendChild(He),Je.appendChild(Pt)}if(me.texto){const Pt=document.createElement("div");Pt.textContent=me.texto,Je.appendChild(Pt)}const wt=document.createElement("div");wt.textContent=ci,wt.style.textAlign="right",wt.style.fontSize="small",Je.appendChild(wt)}).catch(Rt=>{console.error("Erro ao buscar informações do remetente:",Rt),mt.src=jn,mt.alt="Usuário"}),yt.appendChild(mt),yt.appendChild(Je);J.appendChild(yt)}),J.scrollTop=J.scrollHeight})}function be(J,G){e&&confirm("Tem certeza que deseja excluir esta mensagem com imagem?")&&NA(qi(Hi(),G)).then(()=>Pn(ke(Oe(),`comunidades/${f.current}/mensagens/${J}`))).then(()=>{console.log("Mensagem e imagem excluídas com sucesso")}).catch(Se=>{console.error("Erro ao excluir mensagem com imagem:",Se),i.current("Não foi possível excluir a mensagem.")})}function Xe(J,G){e&&confirm("Tem certeza que deseja excluir esta mensagem com arquivo?")&&NA(qi(Hi(),G)).then(()=>Pn(ke(Oe(),`comunidades/${f.current}/mensagens/${J}`))).then(()=>{console.log("Mensagem e arquivo excluídos com sucesso")}).catch(Se=>{console.error("Erro ao excluir mensagem com arquivo:",Se),alert("Não foi possível excluir a mensagem.")})}function ct(J){confirm("Tem certeza que deseja excluir esta mensagem?")&&Pn(ke(Oe(),`comunidades/${f.current}/mensagens/${J}`)).then(()=>{console.log("Mensagem excluída com sucesso")}).catch(G=>{console.error("Erro ao excluir mensagem:",G)})}function xn(J,G){if(!_.current||!J.classList.contains("mensagem-usuario"))return;const Se=v.current.indexOf(G);Se===-1?(v.current.push(G),J.style.opacity="0.7",J.querySelector(".message-bubble").style.borderWidth="2px",J.querySelector(".message-bubble").style.borderStyle="solid",J.querySelector(".message-bubble").style.borderColor="yellow"):(v.current.splice(Se,1),J.style.opacity="1",J.querySelector(".message-bubble").style.border="none",v.current.length===0&&oi());const Ce=document.getElementById("contador-selecionadas");Ce&&(Ce.textContent=`${v.current.length} selecionada${v.current.length!==1?"s":""}`)}function oi(){_.current=!1,document.querySelectorAll(".mensagem-usuario").forEach(G=>{G.style.opacity="1",G.querySelector(".message-bubble").style.border="none"});const J=document.getElementById("barra-opcoes-selecao");J&&(J.style.display="none")}function Ji(J,G){if(!_.current){_.current=!0,v.current=[],xn(J,G);const Se=document.getElementById("barra-opcoes-selecao");Se&&(Se.style.display="flex")}}function gr(J){const G=document.getElementById(J);if(!G)return;document.querySelectorAll(".menu-opcoes").forEach(Ce=>{Ce.id!==J&&(Ce.style.display="none")}),G.style.display=G.style.display==="block"?"none":"block";function Se(Ce){const we=Ce.target.closest(".menu-opcoes"),ve=Ce.target.closest('div[onclick*="toggleMenuOpcoes"]');(!we||we.id!==J)&&(!ve||!ve.contains(document.getElementById(J)))&&(G.style.display="none",document.removeEventListener("click",Se))}G.style.display==="block"?setTimeout(()=>{document.addEventListener("click",Se)},10):document.removeEventListener("click",Se)}function ai(){v.current.length!==0&&confirm(`Tem certeza que deseja excluir ${v.current.length} mensagem(ns)?`)&&(v.current.forEach(J=>{Pn(ke(Oe(),`comunidades/${f}/mensagens/${J}`)).catch(G=>{console.error("Erro ao excluir mensagem:",G)})}),oi())}function li(J){if(!Number.isFinite(J)||J<0)return"Tamanho inválido";if(J===0)return"0 Bytes";const G=1024,Se=["Bytes","KB","MB","GB","TB"],Ce=Math.floor(Math.log(J)/Math.log(G));return`${(J/Math.pow(G,Ce)).toFixed(2)} ${Se[Ce]}`}function kc(J,G){J.preventDefault();const Se=G.id===s.current,Ce=e.uid===s.current;if(Se&&!Ce)return;const we=a.current[G.id],ve=Ce;var me=`${J.clientX}px`,Ae=`${J.clientY}px`;const yt=te.menu.current.getBoundingClientRect();yt.right>window.innerWidth&&(me=`${window.innerWidth-yt.width-10}px`),yt.bottom>window.innerHeight&&(Ae=`${window.innerHeight-yt.height-10}px`),L({show:!0,isUserCreator:Ce,targetIsAdmin:we,left:me,top:Ae,...G}),ve&&te.menu.current.querySelector(".toggle-admin").addEventListener("click",()=>{Ho(G.id,we),L(mt=>({show:!1,...mt}))}),te.menu.current.querySelector(".mute-member").addEventListener("click",()=>{N(G.id),L(mt=>({show:!1,...mt}))}),te.menu.current.querySelector(".kick-member").addEventListener("click",()=>{Bs(G.id),L(mt=>({show:!1,...mt}))}),te.menu.current.querySelector(".ban-member").addEventListener("click",()=>{$r(G.id),L(mt=>({show:!1,...mt}))}),document.addEventListener("click",function mt(Je){!te.menu.current.contains(Je.target)&&!Je.target.closest(".member-item")&&(L(Zi=>({show:!1,...Zi})),document.removeEventListener("click",mt))})}function Ho(J,G){J!==s.current&&(G?Pn(ke(Oe(),`comunidades/${f}/admins/${J}`)).then(()=>{delete a.current[J],pe(d)}).catch(Se=>{console.error("Erro ao remover administrador:",Se),alert("Não foi possível remover o administrador.")}):Qi(ke(Oe(),`comunidades/${f}/admins/${J}`),!0).then(()=>{a.current[J]=!0,pe(d)}).catch(Se=>{console.error("Erro ao definir administrador:",Se),alert("Não foi possível definir o administrador.")}))}function Bs(J){if(J===s.current){alert("Não é possível expulsar o líder da comunidade.");return}if(e.uid!==s.current&&a.current[e.uid]&&a.current[J]){alert("Você não tem permissão para fazer isso.");return}confirm("Tem certeza que deseja expulsar este membro da comunidade?")&&Pn(ke(Oe(),`comunidades/${f}/membros/${J}`)).then(()=>a.current[J]?Pn(ke(Oe(),`comunidades/${f}/admins/${J}`)):Promise.resolve()).then(()=>{d.current=d.current.filter(G=>G.id!==J),document.getElementById("membersCount").textContent=`(${d.current.length})`,pe(d)}).catch(G=>{console.error("Erro ao expulsar membro:",G),alert("Não foi possível expulsar o membro.")})}function $r(J){if(J===s.current){alert("Não é possível banir o líder da comunidade.");return}if(e.uid!==s.current&&a.current[e.uid]&&a.current[J]){alert("Você não tem permissão para fazer isso.");return}confirm("Tem certeza que deseja banir permanentemente este membro da comunidade?")&&Qi(ke(Oe(),`comunidades/${f}/banidos/${J}`),{by:e.uid,timestamp:mo(),reason:"Banido por administrador"}).then(()=>Pn(ke(Oe(),`comunidades/${f}/membros/${J}`))).then(()=>a.current[J]?Pn(ke(Oe(),`comunidades/${f}/admins/${J}`)):Promise.resolve()).then(()=>{d.current=d.current.filter(G=>G.id!==J),document.getElementById("membersCount").textContent=`(${d.current.length})`,pe(d)}).catch(G=>{console.error("Erro ao banir membro:",G),alert("Não foi possível banir o membro.")})}return V.useEffect(()=>{f.current=ge("id")},[location]),V.useEffect(()=>{hv(Se=>{p.current=Se}),document.addEventListener("click",function(Se){_&&!Se.target.closest(".mensagem-usuario")&&oi()});const J=document.getElementById("memberSearch"),G=document.getElementById("searchButton");if(J&&G){let Se=function(){const Ce=J.value.toLowerCase().trim();if(Ce===""){pe(d.current);return}const we=d.current.filter(ve=>(ve.nome||"").toLowerCase().includes(Ce));pe(we)};G.addEventListener("click",Se),J.addEventListener("keypress",function(Ce){Ce.key==="Enter"&&(Ce.preventDefault(),Se())}),J.addEventListener("input",function(){Se()})}},[]),V.useEffect(()=>{e&&(f.current=ge("id"),f.current?H().then(J=>{J?(x(),ae(),Z()):(alert("Você não tem permissão para acessar esta comunidade."),t("/"))}):(alert("ID da comunidade não encontrado."),t("/")))},[e]),E.jsxs("div",{id:"com-page",className:"page",children:[E.jsx("div",{id:"bannerOverlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.3)",display:"none",justifyContent:"center",alignItems:"center",color:"white",fontSize:18},children:"Clique para editar o banner"}),E.jsx("main",{children:E.jsxs("div",{className:"community-container",children:[E.jsxs("div",{className:"community-left",children:[E.jsxs("div",{className:"comunidade-info",children:[E.jsx("div",{id:"communityBanner",style:{width:"100%",height:200,backgroundColor:"#f0f0f0",backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer",borderTopRightRadius:30,borderTopLeftRadius:30}}),E.jsx("img",{id:"comunidadeImagem",src:Wf,alt:"Imagem da comunidade"}),E.jsx("h2",{id:"comunidadeTitulo",children:"Nome da Comunidade"}),E.jsx("p",{id:"comunidadeDescricao",children:"Descrição da comunidade"}),E.jsxs("p",{id:"comunidadeTags",children:["Tags: ",E.jsx("span",{})]})]}),E.jsx("div",{id:"botao-entrar-container",style:{textAlign:"center",margin:"15px 0",display:"none"},children:E.jsx("button",{id:"botao-entrar",style:{padding:"10px 20px",fontSize:16,background:"#248232",color:"#fff",border:"none",borderRadius:5,cursor:"pointer"},children:"Entrar na Comunidade"})}),E.jsxs("div",{id:"chat-container",children:[E.jsx("h3",{children:"Chat da Comunidade"}),E.jsx("div",{id:"chat-messages"}),E.jsxs("div",{id:"chat-input",children:[E.jsx("input",{type:"file",ref:te.fileInput,id:"fileUpload",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar,image/*,video/*",style:{display:"none"},onChange:rt}),E.jsx("textarea",{ref:te.messageInput,id:"messageInput",placeholder:"Digite sua mensagem..."}),E.jsx("i",{onClick:re,className:"fa-solid fa-paper-plane send-item","aria-hidden":"true"}),E.jsx("i",{onClick:()=>te.fileInput.current.click(),className:"fa-solid fa-paperclip send-item","aria-hidden":"true"}),E.jsx("i",{onClick:M,id:"audio-record-btn",title:"Gravar mensagem voz",className:"fa-solid  attachment-btn send-item "+(z?"fa-stop recording":"fa-microphone")})]})]})]}),E.jsx("div",{className:"community-right",children:E.jsxs("div",{className:"members-container",children:[E.jsxs("div",{className:"members-header",children:[E.jsxs("h3",{children:["Membros ",E.jsxs("span",{id:"membersCount",children:["(",S,")"]})]}),E.jsxs("div",{className:"search-box",children:[E.jsx("input",{type:"text",id:"memberSearch",placeholder:"Buscar membro..."}),E.jsx("button",{id:"searchButton",children:E.jsx("i",{className:"fas fa-search"})})]})]}),E.jsx("div",{id:"membersList",children:T.map((J,G)=>E.jsxs(Mt,{to:"/perfil?id="+J.id,className:"member-item",onClick:Se=>{const Ce=c&&J.id!==e.uid,we=e.uid===s.current;Ce&&(we||J.id!==s.current)&&kc(Se,J)},children:[E.jsx("img",{src:J.fotoPerfil||jn,alt:J.nome,className:"member-avatar"}),E.jsx("div",{className:"member-info",children:E.jsxs("div",{className:"member-name",children:[E.jsx("div",{children:J.nome||"Usuário"}),J.isCreator?E.jsx("i",{className:"fas fa-crown crown-icon",title:"Líder da comunidade"}):E.jsx(E.Fragment,{}),J.isAdmin&&!J.isCreator?E.jsx("span",{className:"admin-badge",children:"Admin"}):E.jsx(E.Fragment,{})]})})]},G))})]})})]})}),E.jsx("div",{id:"bannerModal",style:{display:"none",position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",zIndex:1e3},children:E.jsxs("div",{style:{background:"white",padding:20,borderRadius:10,width:"90%",maxWidth:500},children:[E.jsx("h3",{children:"Editar Banner da Comunidade"}),E.jsx("input",{type:"file",id:"bannerFileInput",accept:"image/*",style:{margin:"10px 0"}}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[E.jsx("button",{onClick:O,style:{padding:"10px 20px",background:"#f44336",color:"white",border:"none",borderRadius:5,cursor:"pointer"},children:"Cancelar"}),E.jsx("button",{onClick:U,style:{padding:"10px 20px",background:"#4CAF50",color:"white",border:"none",borderRadius:5,cursor:"pointer"},children:"Salvar"})]})]})}),E.jsxs("div",{className:"member-options",style:{position:"absolute",display:k.show?"block":"none",left:k.left,top:k.top},ref:te.menu,children:[E.jsxs(Mt,{to:"/perfil?id="+k.id,className:"member-options-header",children:[E.jsx("img",{src:k.fotoPerfil||jn,alt:k.nome}),k.nome||"Usuário"]}),k.isUserCreator&&E.jsx("div",{className:"option-item toggle-admin",children:k.targetIsAdmin?"Remover administrador":"Definir como administrador"}),E.jsx("div",{className:"option-item mute-member",children:"Silenciar membro"}),E.jsx("div",{className:"option-item danger kick-member",children:"Expulsar da comunidade"}),E.jsx("div",{className:"option-item danger ban-member",children:"Banir permanentemente"})]}),E.jsx(Nc,{showPopup:i})]})}function yq(){const{worker_server:n,usuarioLogado:e,setUsuarioLogado:t}=yi(),i=V.useRef(null),s=a=>{a.preventDefault();const c=document.getElementById("loginNameEmail").value,d=document.getElementById("loginSenha").value;xo.post(n+"/login",{name_email:c,password:d}).then(f=>{f.data.result?t(f.data.user):i.current("Nome de usuário, e-mail ou senha incorreto.")})};return e?E.jsx(E.Fragment,{}):E.jsxs(E.Fragment,{children:[E.jsx("div",{id:"signin",className:"page",children:E.jsxs("form",{onSubmit:s,id:"sign-container",children:[E.jsx("img",{id:"logo",src:Jd,width:"150px"}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Nome ou e-mail:"}),E.jsx("input",{id:"loginNameEmail",required:!0})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Senha:"}),E.jsx("input",{type:"password",id:"loginSenha",required:!0})]}),E.jsxs("p",{children:["Não possui conta? ",E.jsx(Mt,{to:"/registro",children:"Registre-se"})]}),E.jsx("button",{id:"btn-submit",type:"submit",children:"Entrar"})]})}),E.jsx(Nc,{showPopup:i})]})}function gk(){const{refs:n,mobile:e,usuarioLogado:t,setNavigate:i}=yi(),s=Us(),a=Ls(),[c,d]=V.useState([]),[f,p]=V.useState(null);function _(){or(ke(Oe(),`friends/${t.uid}`)).then(L=>{const B=[];L.forEach(z=>{const K=z.key;or(ke(Oe(),"usuarios/"+K)).then(te=>{const pe=te.val();B.push(pe)})}),d(B)})}function v(L){t&&Pn(ke(Oe(),`friendRequests/${t.uid}/${L}`)).then(()=>{D(),_()})}function T(L){t&&or(ke(Oe(),`friendRequests/${L}/${t.uid}`)).then(B=>{B.exists()?(n.respa.current.classList.add("erro"),n.respa.current.classList.remove("hidden"),n.respa.current.innerText="Pedido já enviado."):Qi(ke(Oe(),`friendRequests/${L}/${t.uid}`),!0).then(()=>{n.respa.current.classList.add("sucesso"),n.respa.current.classList.remove("hidden"),n.respa.current.innerText="Pedido enviado!",setTimeout(function(){n.respa.current.classList.add("hidden"),n.respa.current.classList.remove("sucesso"),n.respa.current.innerText=""},3e3);const z=document.querySelector(`button[data-uid="${L}"]`);z&&(z.innerText="Retirar solicitação",z.onclick=()=>R(L)),D()})})}function R(L){t&&Pn(ke(Oe(),`friendRequests/${L}/${t.uid}`)).then(()=>{const B=document.querySelector(`button[data-uid="${L}"]`);B&&(B.innerText="Adicionar",B.onclick=()=>T(L)),D()})}function S(L,B=null){t&&(Qi(ke(Oe(),`friends/${t.uid}/${L}`),!0),Qi(ke(Oe(),`friends/${L}/${t.uid}`),!0),Pn(ke(Oe(),`friendRequests/${t.uid}/${L}`)).then(()=>{D(),_(),B&&(B.innerHTML=`<strong>${B.querySelector("strong").textContent}</strong> <span><b>(Amigos)</b></span>`)}))}function D(){if(!t)return;const L=document.getElementById("friendRequests");if(!L){console.error("Elemento friendRequests não encontrado");return}oc(ke(Oe(),`friendRequests/${t.uid}`),B=>{L.innerHTML="",B.exists()?B.forEach(z=>{const K=z.key;or(ke(Oe(),"usuarios/"+K)).then(te=>{const pe=te.val();if(pe){const N=document.createElement("div");N.style.display="flex",N.style.alignItems="center",N.style.marginBottom="10px";const A=document.createElement("img");A.src=pe.fotoPerfil?pe.fotoPerfil:jn,A.alt=`Foto de ${pe.nome}`,A.style.width="40px",A.style.height="40px",A.style.borderRadius="50%",A.style.marginRight="10px";const x=document.createElement("strong");x.innerText=pe.nome,N.appendChild(A),N.appendChild(x);const O=document.createElement("button");O.textContent="Aceitar",O.classList.add("aceitar"),O.onclick=()=>S(K,N);const U=document.createElement("button");U.textContent="Rejeitar",U.classList.add("rejeitar"),U.onclick=()=>v(K),N.appendChild(O),N.appendChild(U),L.appendChild(N)}})}):L.textContent="Sem pedidos de amizade no momento."})}function k(L){t&&(Pn(ke(Oe(),`friends/${t.uid}/${L}`)),Pn(ke(Oe(),`friends/${L}/${t.uid}`)).then(()=>{_()}))}return V.useEffect(()=>{window.navigate=s,i(L=>s(L))},[]),V.useEffect(()=>{if(t){fv();const L=document.getElementById("sidebar"),B=document.getElementById("toggleSidebar"),z=document.querySelector("body");B.addEventListener("click",function(){L.classList.toggle("collapsed");const K=document.querySelectorAll("#sidebar .btn-text"),te=document.getElementById("buscar");L.classList.contains("collapsed")?(L.style.width="50px",B.style.left="60px",z.style.marginLeft="60px",K.forEach(pe=>pe.style.display="none"),te&&(te.style.display="none")):(L.style.width="250px",B.style.left="260px",z.style.marginLeft="260px",K.forEach(pe=>pe.style.display="inline"),te&&(te.style.display="flex"))}),document.addEventListener("DOMContentLoaded",function(){setTimeout(fv,2e3)}),document.addEventListener("DOMContentLoaded",function(){const K=document.querySelector("body");K.style.marginLeft="60px"})}},[t]),t?E.jsxs(E.Fragment,{children:[E.jsx("aside",{id:"sidebar",className:"collapsed",children:E.jsxs("div",{id:"sidebar-content",style:{overflowY:"auto",flexGrow:1},children:[E.jsx("br",{}),E.jsxs("div",{id:"searchResults",children:[f?f.length==0?E.jsx("div",{children:"Nenhum usuário encontrado."}):f.map((L,B)=>E.jsxs("div",{className:"friends-item",children:[E.jsxs(Mt,{className:"friends-link",to:"/perfil?id="+L.id,children:[E.jsx("img",{src:L.fotoPerfil,alt:"Foto de "+L.nome}),E.jsx("strong",{children:L.nome})]}),L.mode=="friend"?E.jsx("span",{children:"(Amigos)"}):L.mode=="sended_request"?E.jsx("button",{className:"retirar",onClick:()=>{v(L.uid),p(z=>z.map(K=>K.id==L.id?{...K,mode:"unsolicited"}:K))},children:"cancelar"}):L.mode=="received_request"?E.jsxs(E.Fragment,{children:[E.jsx("button",{className:"aceitar",onClick:()=>{S(L.id),p(z=>z.map(K=>K.id==L.id?{...K,mode:"friend"}:K))},children:"aceitar"}),E.jsx("button",{className:"rejeitar",onClick:()=>v(L.id),children:"rejeitar"})]}):E.jsx("i",{className:"fa-solid fa-user-plus",onClick:()=>{T(L.id),p(z=>z.map(K=>K.id==L.id?{...K,mode:"sended_request"}:K))}})]},B)):E.jsx(E.Fragment,{}),c.map((L,B)=>E.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[E.jsx("img",{src:L.fotoPerfil,alt:"Foto de "+L.nome,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}}),E.jsx("strong",{children:L.nome}),E.jsx("button",{id:"go-to-friend-perfil",onClick:()=>s(`/perfil?id=${L.id}`),children:"Ver Perfil"}),E.jsx("button",{id:"remove-friend",onClick:()=>k(L.id),children:"Remover"})]},B))]}),E.jsxs("nav",{id:"mainnav",children:[e?E.jsx(E.Fragment,{}):E.jsx("div",{className:"header_logo",children:E.jsx(Mt,{to:"/",children:E.jsx("img",{src:Jd,width:"40px",alt:"Logo"})})}),E.jsx(Mt,{to:"/",className:"defbtn"+(a.pathname==="/"?" selected":""),children:E.jsx("i",{className:"fa-solid fa-house"})}),E.jsx(Mt,{to:"/search",className:"defbtn"+(a.pathname==="/search"?" selected":""),children:E.jsx("i",{className:"fa-solid fa-magnifying-glass","aria-hidden":"true",style:{color:"#9ecc9e"}})}),E.jsx(Mt,{to:"/amigos",className:"defbtn"+(a.pathname==="/amigos"?" selected":""),children:E.jsx("i",{className:"fa-solid fa-user-group"})}),e?E.jsx(E.Fragment,{}):E.jsxs(Mt,{to:"/chats",className:"defbtn"+(a.pathname==="/chats"?" selected":""),id:"chatButton",children:[E.jsx("i",{className:"fa-solid fa-comment-dots"}),E.jsx("span",{id:"chatNotification"})]}),E.jsx(Mt,{to:"/perfil",className:"defbtn"+(a.pathname==="/perfil"?" selected":""),children:E.jsx("i",{className:"fas fa-user","aria-hidden":"true"})}),E.jsx(Mt,{to:"/ferramentas",className:"defbtn"+(["/ferramentas","/flashcards","/add-posts"].includes(a.pathname)?" selected":""),children:E.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),E.jsx("button",{id:"toggleSidebar",children:"☰"})]}):E.jsx(E.Fragment,{})}const vq={ISINF:"Integrado em Informática",ISSEG:"Integrado em Segurança do Trabalho",ISADM:"Integrado em Administração",ISMEC:"Integrado em Mecânica",ISL:"Técnico em Logística",TADS:"Técnico em ADS",TSEG:"Técnico em Segurança do Trabalho",ISDEV:"Desenvolvedor",LOAD:""},Eq=()=>{const{socket:n,server:e,usuarioLogado:t}=yi(),[i,s]=V.useState("Carregando..."),[a,c]=V.useState(0),[d,f]=V.useState(jn),[p,_]=V.useState(!1),[v,T]=V.useState(null),R=Us(),S={avatar:V.useRef(null),fileInput:V.useRef(null),removePhotoBtn:V.useRef(null)};function D(K){const te=new FormData,pe=new Date().getTime().toString();te.append("type","update"),te.append("timestamp",pe.toString()),te.append("file",K),te.append("user_uid",t.uid),xo.post(e+"/perfil",te).then(N=>{S.avatar.current.src=bs(N.data.file_id),S.removePhotoBtn.current.style.display="block"})}const k=()=>{t.uid!=v.uid?n.send("/chat",{operation:"go_to_chat",user_to_navigate_chat:v.uid}).then(K=>{K.result&&R(`/chat/${K.chat_id}`)}):R("/chats")},L=()=>{const K=document.getElementById("fileInput");K&&K.click()},B=K=>{if(K.target.files&&K.target.files[0]&&t&&t.uid===v.uid){const te=K.target.files[0],pe=new FileReader;pe.onloadend=()=>{f(pe.result),_(!0),D(te)},pe.readAsDataURL(te)}},z=K=>{K.preventDefault(),f(jn),_(!1);const te=document.getElementById("fileInput");te&&(te.value="")};return V.useEffect(()=>{if(t){let K=function(A){return new URLSearchParams(window.location.search).get(A)},te=function(A){n.send("/perfil",{uid:A}).then(x=>{if(x.result){const O=x.perfil;s(O.name||"Usuário"),c(O.nFriends),T({...O,uid:A}),O.logo?f(bs(O.logo)):f(jn),t&&t.uid===A?(S.avatar.current.style.cursor="pointer",S.removePhotoBtn.current.addEventListener("click",pe),S.removePhotoBtn.current.style.display=O.logo?"block":"none"):S.removePhotoBtn.current.style.display="none"}else document.getElementById("profileName").textContent="Usuário não encontrado"}).catch(x=>{console.error("Erro ao buscar dados do usuário:",x)})},pe=function(){lp(ke(Oe(),"usuarios/"+t.uid),{fotoPerfil:null}).then(()=>{S.avatar.current.src=jn,S.removePhotoBtn.current.style.display="none"}).catch(A=>{console.error("Erro ao remover foto de perfil:",A)})};const N=K("id");te(N||t.uid)}},[t]),E.jsxs(E.Fragment,{children:[E.jsxs("main",{id:"perfil-page",className:"page",children:[E.jsxs("section",{id:"perfil",children:[E.jsxs("div",{id:"profile-content",children:[E.jsx("div",{className:"avatar-container",children:E.jsxs("div",{className:"avatar-wrapper",children:[E.jsx("img",{onClick:()=>t&&v&&t.uid===v.uid&&S.fileInput.current.click(),src:d,alt:"Avatar do usuário",id:"avatar",style:{cursor:t&&v&&t.uid===v.uid?"pointer":"default"}}),t&&v&&t.uid===v.uid&&E.jsx("div",{className:"edit-icon",id:"editIcon",onClick:L,style:{cursor:"pointer"},children:E.jsx("i",{className:"fas fa-pencil-alt"})}),E.jsx("div",{className:"user-type-indicator",children:v&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"aluno-tag alunotag",children:[E.jsx("i",{className:"fa-solid fa-user-graduate"})," Aluno"]}),E.jsxs("div",{className:"aluno-tag",children:[E.jsx("i",{className:"fa-solid fa-user"})," ",vq[v.matricula.split("111")[1].split("0")[0]]]}),E.jsxs("div",{id:"go-to-chat",className:"aluno-tag",onClick:k,children:[E.jsx("i",{className:"fa-solid fa-message"})," Mensagem"]})]})})]})}),E.jsxs("div",{id:"profile-info",children:[E.jsx("span",{id:"displayName",children:i}),E.jsxs("div",{id:"n-divs",children:[E.jsxs("div",{id:"n-friends",children:[E.jsx("div",{className:"value",children:a}),E.jsx("div",{className:"label",children:"Amigos"})]}),E.jsxs("div",{id:"n-comunitys",children:[E.jsx("div",{className:"value",children:"0"}),E.jsx("div",{className:"label",children:"Comunidades"})]})]})]})]}),p&&E.jsx("button",{id:"removePhotoBtn",onClick:z,style:{marginTop:"10px",backgroundColor:"red",color:"white",border:"none",padding:"5px 10px",borderRadius:"5px",cursor:"pointer"},children:"Remover Foto"}),E.jsx("input",{ref:S.fileInput,type:"file",id:"fileInput",style:{display:"none"},accept:"image/*",onChange:B}),E.jsx("br",{}),E.jsx(Mt,{to:"/settings",children:E.jsx("i",{id:"btn-menu",className:"fa-solid fa-ellipsis-vertical"})})]}),E.jsx(WN,{userPerfilUid:v?v.uid:""})]}),E.jsx(gk,{})]})},OA={ISINF:140,ISSEG:50,ISADM:50,ISMEC:50,ISL:50,TADS:50,TSEG:50,ISDEV:50};function Tq(){const n=V.useRef(null),{worker_server:e,usuarioLogado:t,setUsuarioLogado:i}=yi(),[s,a]=V.useState(!1),c={matricula:V.useRef(null)},d=f=>{var D;if(f.preventDefault(),t)return;const p=document.getElementById("regNome").value,_=document.getElementById("regEmail").value,v=document.getElementById("regSenha").value,T="ID-"+Date.now()+"-"+Math.floor(Math.random()*1e3),R=c.matricula.current.value;if(!/^20[0-9]{2}(1|2)(1|2)(1|2)[A-Z]+0(140|1[0-3][0-9]|0[0-9]{2})$/.test(R)){a(!0),(D=n.current)==null||D.call(n,"Matrícula inválida.");return}const S=R.match(/11([A-Z]+)0(\d+)$/);S[1]in OA&&Number(S[2])<=OA[S[1]]?xo.post(e+"/registro",{email:_,id:T,matricula:R,name:p,password:v}).then(k=>{if(k.data.result)i(k.data.user);else switch(k.data.reason){case"email-already-in-use":n.current("E-mail já está em uso.");break}}):a(!0)};return t?null:E.jsxs(E.Fragment,{children:[E.jsx("div",{id:"signup",className:"page",children:E.jsxs("form",{onSubmit:d,id:"sign-container",children:[E.jsx("img",{id:"logo",src:Jd,width:"150px"}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Nome:"}),E.jsx("input",{type:"text",id:"regNome",required:!0})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"E-mail:"}),E.jsx("input",{type:"email",id:"regEmail",required:!0})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Matrícula:"}),E.jsx("input",{ref:c.matricula,type:"text",id:"regMatricula",required:!0,style:{border:s?"1px solid red":void 0,outlineColor:s?"red":void 0},onChange:()=>a(!1)}),s&&E.jsx("p",{style:{color:"red",fontSize:"13px"},children:"Matrícula inválida"})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Senha:"}),E.jsx("input",{type:"password",id:"regSenha",required:!0})]}),E.jsxs("p",{children:["Já possui conta? ",E.jsx(Mt,{to:"/login",children:"Fazer login"})]}),E.jsx("button",{id:"btn-submit",type:"submit",children:"Registrar"})]})}),E.jsx(Nc,{showPopup:n})]})}var DA;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(DA||(DA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MA;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(MA||(MA={}));var PA;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(PA||(PA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=["user","model","function","system"];var UA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(UA||(UA={}));var VA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(VA||(VA={}));var jA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(jA||(jA={}));var BA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(BA||(BA={}));var od;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(od||(od={}));var FA;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(FA||(FA={}));var zA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(zA||(zA={}));var qA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(qA||(qA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class zl extends Qn{constructor(e,t){super(e),this.response=t}}class _k extends Qn{constructor(e,t,i,s){super(e),this.status=t,this.statusText=i,this.errorDetails=s}}class No extends Qn{}class yk extends Qn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="https://generativelanguage.googleapis.com",wq="v1beta",Sq="0.24.1",Cq="genai-js";var Fa;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Fa||(Fa={}));class Aq{constructor(e,t,i,s,a){this.model=e,this.task=t,this.apiKey=i,this.stream=s,this.requestOptions=a}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||wq;let a=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||bq}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function Rq(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${Cq}/${Sq}`),e.join(" ")}async function Iq(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",Rq(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new No(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,a]of i.entries()){if(s==="x-goog-api-key")throw new No(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new No(`Header name ${s} can only be set using the apiClient field`);t.append(s,a)}}return t}async function xq(n,e,t,i,s,a){const c=new Aq(n,e,t,i,a);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},Dq(a)),{method:"POST",headers:await Iq(c),body:s})}}async function eh(n,e,t,i,s,a={},c=fetch){const{url:d,fetchOptions:f}=await xq(n,e,t,i,s,a);return Nq(d,f,c)}async function Nq(n,e,t=fetch){let i;try{i=await t(n,e)}catch(s){kq(s,n)}return i.ok||await Oq(i,n),i}function kq(n,e){let t=n;throw t.name==="AbortError"?(t=new yk(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof _k||n instanceof No||(t=new Qn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function Oq(n,e){let t="",i;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new _k(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function Dq(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Xf(n.candidates[0]))throw new zl(`${po(n)}`,n);return Mq(n)}else if(n.promptFeedback)throw new zl(`Text not available. ${po(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Xf(n.candidates[0]))throw new zl(`${po(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),HA(n)[0]}else if(n.promptFeedback)throw new zl(`Function call not available. ${po(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Xf(n.candidates[0]))throw new zl(`${po(n)}`,n);return HA(n)}else if(n.promptFeedback)throw new zl(`Function call not available. ${po(n)}`,n)},n}function Mq(n){var e,t,i,s;const a=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)c.text&&a.push(c.text),c.executableCode&&a.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&a.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function HA(n){var e,t,i,s;const a=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&a.push(c.functionCall);if(a.length>0)return a}const Pq=[od.RECITATION,od.SAFETY,od.LANGUAGE];function Xf(n){return!!n.finishReason&&Pq.includes(n.finishReason)}function po(n){var e,t,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const a=n.candidates[0];Xf(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function xd(n){return this instanceof xd?(this.v=n,this):new xd(n)}function Lq(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,a=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(T){i[T]&&(s[T]=function(R){return new Promise(function(S,D){a.push([T,R,S,D])>1||d(T,R)})})}function d(T,R){try{f(i[T](R))}catch(S){v(a[0][3],S)}}function f(T){T.value instanceof xd?Promise.resolve(T.value.v).then(p,_):v(a[0][2],T)}function p(T){d("next",T)}function _(T){d("throw",T)}function v(T,R){T(R),a.shift(),a.length&&d(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Uq(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=Bq(e),[i,s]=t.tee();return{stream:jq(i),response:Vq(s)}}async function Vq(n){const e=[],t=n.getReader();for(;;){const{done:i,value:s}=await t.read();if(i)return T0(Fq(e));e.push(s)}}function jq(n){return Lq(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:s}=yield xd(t.read());if(s)break;yield yield xd(T0(i))}})}function Bq(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return a();function a(){return e.read().then(({value:c,done:d})=>{if(d){if(s.trim()){i.error(new Qn("Failed to parse stream"));return}i.close();return}s+=c;let f=s.match(GA),p;for(;f;){try{p=JSON.parse(f[1])}catch{i.error(new Qn(`Error parsing JSON response: "${f[1]}"`));return}i.enqueue(p),s=s.substring(f[0].length),f=s.match(GA)}return a()}).catch(c=>{let d=c;throw d.stack=c.stack,d.name==="AbortError"?d=new yk("Request aborted when reading from the stream"):d=new Qn("Error reading from the stream"),d})}}})}function Fq(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const a of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=a.citationMetadata,t.candidates[s].groundingMetadata=a.groundingMetadata,t.candidates[s].finishReason=a.finishReason,t.candidates[s].finishMessage=a.finishMessage,t.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){t.candidates[s].content||(t.candidates[s].content={role:a.content.role||"user",parts:[]});const c={};for(const d of a.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(n,e,t,i){const s=await eh(e,Fa.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return Uq(s)}async function Ek(n,e,t,i){const a=await(await eh(e,Fa.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:T0(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Nd(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return zq(e)}function zq(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,s=!1;for(const a of n)"functionResponse"in a?(t.parts.push(a),s=!0):(e.parts.push(a),i=!0);if(i&&s)throw new Qn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new Qn("No content is provided for sending chat message.");return i?e:t}function qq(n,e){var t;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new No("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const a=Nd(n);i.contents=[a]}return{generateContentRequest:i}}function $A(n){let e;return n.contents?e=n:e={contents:[Nd(n)]},n.systemInstruction&&(e.systemInstruction=Tk(n.systemInstruction)),e}function Hq(n){return typeof n=="string"||Array.isArray(n)?{content:Nd(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Gq={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function $q(n){let e=!1;for(const t of n){const{role:i,parts:s}=t;if(!e&&i!=="user")throw new Qn(`First content should be with role 'user', got ${i}`);if(!LA.includes(i))throw new Qn(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(LA)}`);if(!Array.isArray(s))throw new Qn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Qn("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of s)for(const f of KA)f in d&&(a[f]+=1);const c=Gq[i];for(const d of KA)if(!c.includes(d)&&a[d]>0)throw new Qn(`Content with role '${i}' can't contain '${d}' part`);e=!0}}function QA(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const i of t.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="SILENT_ERROR";class Kq{constructor(e,t,i,s={}){this.model=t,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&($q(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,s,a,c,d,f;await this._sendPromise;const p=Nd(e),_={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),t);let T;return this._sendPromise=this._sendPromise.then(()=>Ek(this._apiKey,this.model,_,v)).then(R=>{var S;if(QA(R.response)){this._history.push(p);const D=Object.assign({parts:[],role:"model"},(S=R.response.candidates)===null||S===void 0?void 0:S[0].content);this._history.push(D)}else{const D=po(R.response);D&&console.warn(`sendMessage() was unsuccessful. ${D}. Inspect response object for details.`)}T=R}).catch(R=>{throw this._sendPromise=Promise.resolve(),R}),await this._sendPromise,T}async sendMessageStream(e,t={}){var i,s,a,c,d,f;await this._sendPromise;const p=Nd(e),_={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),t),T=vk(this._apiKey,this.model,_,v);return this._sendPromise=this._sendPromise.then(()=>T).catch(R=>{throw new Error(YA)}).then(R=>R.response).then(R=>{if(QA(R)){this._history.push(p);const S=Object.assign({},R.candidates[0].content);S.role||(S.role="model"),this._history.push(S)}else{const S=po(R);S&&console.warn(`sendMessageStream() was unsuccessful. ${S}. Inspect response object for details.`)}}).catch(R=>{R.message!==YA&&console.error(R)}),T}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qq(n,e,t,i){return(await eh(e,Fa.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yq(n,e,t,i){return(await eh(e,Fa.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function Wq(n,e,t,i){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await eh(e,Fa.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Tk(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const s=$A(e),a=Object.assign(Object.assign({},this._requestOptions),t);return Ek(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),a)}async generateContentStream(e,t={}){var i;const s=$A(e),a=Object.assign(Object.assign({},this._requestOptions),t);return vk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),a)}startChat(e){var t;return new Kq(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=qq(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return Qq(this.apiKey,this.model,i,s)}async embedContent(e,t={}){const i=Hq(e),s=Object.assign(Object.assign({},this._requestOptions),t);return Yq(this.apiKey,this.model,i,s)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return Wq(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Qn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new WA(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new No("Cached content must contain a `name` field.");if(!e.model)throw new No("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t!=null&&t[c]&&e[c]&&(t==null?void 0:t[c])!==e[c]){if(c==="model"){const d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===f)continue}throw new No(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const a=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new WA(this.apiKey,a,i)}}const Jq="AIzaSyA8ABX5SrNQ1x14aMuUb0xJBeERPVzQtuE";function Zq(){const{usuarioLogado:n}=yi(),e=V.useRef(null),[t,i]=V.useState(!0),[s,a]=V.useState([]),[c,d]=V.useState(""),[f,p]=V.useState(0),[_,v]=V.useState("decks"),[T,R]=V.useState(!1),[S,D]=V.useState(!1),[k,L]=V.useState("0"),[B,z]=V.useState(!1),K={ask:V.useRef(null)};function te(){pe()}function pe(){const Z=localStorage.getItem("flashcardDecks");if(Z){const ce=JSON.parse(Z);a(ce),se(ce)}}function N(Z){localStorage.setItem("flashcardDecks",JSON.stringify(Z))}function A(Z){document.getElementById("deckForm").classList.toggle("hidden",!Z)}function x(Z){document.getElementById("flashcardForm").classList.toggle("hidden",!Z)}function O(){document.getElementById("deckName").value="",document.getElementById("deckDescription").value=""}function U(){document.getElementById("cardFront").value="",document.getElementById("cardBack").value=""}function q(){const Z=document.getElementById("deckName").value.trim(),ce=document.getElementById("deckDescription").value.trim();if(!Z){e.current("Por favor, insira um nome para o deck.");return}const ae={id:Date.now().toString(),name:Z,description:ce,flashcards:[]},be=[...s,ae];a(be),N(be),se(be),A(!1),O()}function M(){const Z=document.getElementById("cardFront").value.trim(),ce=document.getElementById("cardBack").value.trim();if(!Z||!ce){e.current("Por favor, preencha ambos os lados do flashcard.");return}a(ae=>{console.log(c,ae);const be=ae.find(Xe=>Xe.id===c);if(console.log(be),be){be.flashcards.push({id:Date.now().toString(),front:Z,back:ce});const Xe=ae.map(ct=>ct.id===c?be:ct);return N(Xe),xe(be.id,Xe),x(!1),U(),Xe}return ae})}function it(Z){const ce=s.filter(ae=>ae.id!==Z);a(ce),N(ce),se(ce)}function _t(Z){const ce=s.find(ae=>ae.id===c);if(ce){ce.flashcards=ce.flashcards.filter(be=>be.id!==Z);const ae=s.map(be=>be.id==c?ce:be);N(ae),xe(ce.id)}}function se(Z){i(Z.length>0)}function Te(Z){const ce=s.find(ae=>ae.id===Z);console.log(ce,Z),ce&&(d(Z),xe(Z),v("flashcards"))}function xe(Z,ce=null){const be=(ce||s).find(ct=>ct.id===Z);if(console.log(be),!be)return;const Xe=be.flashcards;for(let ct=Xe.length-1;ct>0;ct--){const xn=Math.floor(Math.random()*(ct+1));[Xe[ct],Xe[xn]]=[Xe[xn],Xe[ct]]}be.flashcards=Xe,a(ct=>(ce||ct).map(xn=>xn.id==be.id?be:xn))}function rt(){const Z=s.find(ae=>ae.id===c);if(!Z||Z.flashcards.length===0){e.current("Este deck não possui flashcards para estudar.");return}const ce=0;p(ce),j(ce),ue(ce),v("study")}function j(Z){const ce=s.find(ae=>ae.id===c);!ce||!ce.flashcards[Z]||D(!1)}function ue(Z){const ce=s.find(be=>be.id===c);if(!ce)return;const ae=Z/ce.flashcards.length*100;L(`${ae}%`)}function re(){if(f>0){const Z=f-1;j(Z),ue(Z)}}function H(){const Z=s.find(ce=>ce.id===c);if(Z)if(f<Z.flashcards.length-1){const ce=f+1;p(ce),j(ce),ue(ce)}else v("flashcards")}function ge(){D(!0)}const _e=async()=>{R(!1);const Z=K.ask.current.value,ce=new Xq(Jq);try{const be=ce.getGenerativeModel({model:"gemini-2.5-flash-preview-05-20"}),Xe=`Gere 3 flashcards sobre o assunto: ${Z}. OBS: Sua respoosta dese seguir o seguinte formato: "{Pergunta}"//"{Resposta}"`;z(!0);const ct=await be.generateContent(Xe);z(!1);var ae=ct.response.text();ae='"'+ae.split('"').splice(1).join('"');const oi=/"([^"]+)"\/\/\s*"([^"]+)"/g,Ji=[...ae.matchAll(oi)].map(ai=>({front:ai[1],back:ai[2],id:Date.now().toString()})),gr=s.map(ai=>ai.id==c?{...ai,flashcards:[...ai.flashcards,...Ji]}:ai);N(gr),a(gr)}catch(be){console.error("Erro ao gerar conteúdo:",be)}};return V.useEffect(()=>{n&&te()},[n]),E.jsxs(E.Fragment,{children:[E.jsxs("div",{id:"flash",className:"container page",children:[E.jsx("main",{children:_=="decks"?E.jsx("div",{id:"decksView",children:E.jsxs("div",{className:"card",children:[E.jsx("h2",{children:"Meus decks"}),E.jsxs("button",{id:"createDeckBtn",className:"btn",onClick:()=>A(!0),children:[E.jsx("i",{className:"fas fa-plus"})," Criar novo deck"]}),E.jsxs("div",{id:"deckForm",className:"hidden",children:[E.jsx("div",{className:"flex-row",children:E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"deckName",placeholder:"Nome do deck",required:!0}),E.jsx("textarea",{id:"deckDescription",placeholder:"Descrição (opcional)",rows:3})]})}),E.jsxs("div",{children:[E.jsx("button",{id:"saveDeckBtn",className:"btn btn-success",onClick:()=>q(),children:"Criar"}),E.jsx("button",{id:"cancelDeckBtn",className:"btn btn-outline",onClick:()=>{A(!1),O()},children:"Cancelar"})]})]}),E.jsx("div",{id:"decksList",className:"decks-container",children:t?s.map((Z,ce)=>E.jsxs("div",{className:"deck",onClick:()=>Te(Z.id),children:[E.jsx("div",{className:"deck-actions",children:E.jsx("button",{onClick:()=>it(Z.id),children:E.jsx("i",{className:"fas fa-trash"})})}),E.jsx("h3",{children:Z.name}),E.jsx("p",{children:Z.description||"Sem descrição"}),E.jsxs("p",{children:[E.jsx("strong",{children:Z.flashcards.length})," flashcards"]})]},ce)):E.jsxs("div",{className:"empty-state",children:[E.jsx("i",{className:"fas fa-inbox"}),E.jsx("h3",{children:"Nenhum deck encontrado"}),E.jsx("p",{children:"Crie seu primeiro deck para começar a adicionar flashcards"}),E.jsx("button",{className:"btn",onClick:()=>A(!0),children:"Criar deck"})]})})]})}):_=="flashcards"?E.jsx("div",{id:"flashcardsView",children:E.jsxs("div",{className:"card",children:[E.jsx("h2",{id:"currentDeckName",children:s.filter(Z=>Z.id==c)[0].name}),E.jsxs("div",{id:"flash-btns",children:[E.jsxs("button",{id:"backToDecksBtn",className:"btn btn-outline",onClick:()=>v("decks"),children:[E.jsx("i",{className:"fas fa-arrow-left"})," Voltar para Decks"]}),E.jsxs("button",{id:"addFlashcardBtn",className:"btn",onClick:()=>x(!0),children:[E.jsx("i",{className:"fas fa-plus"})," Adicionar flashcard"]}),E.jsxs("button",{id:"studyDeckBtn",className:"btn btn-success",onClick:()=>rt(),children:[E.jsx("i",{className:"fas fa-graduation-cap"})," Estudar deck"]}),E.jsx("button",{id:"generateFlashCard",onClick:()=>R(!0),children:B?"Gerando...":"Gerar flashcards"})]}),E.jsxs("div",{id:"flashcardForm",children:[E.jsxs("div",{className:"flex-row",children:[E.jsxs("div",{children:[E.jsx("h3",{children:"Frente do card"}),E.jsx("textarea",{id:"cardFront",placeholder:"Pergunta",rows:3,required:!0})]}),E.jsxs("div",{children:[E.jsx("h3",{children:"Verso do card"}),E.jsx("textarea",{id:"cardBack",placeholder:"Resposta",rows:3,required:!0})]})]}),E.jsxs("div",{children:[E.jsx("button",{id:"saveFlashcardBtn",className:"btn btn-success",onClick:()=>M(),children:"Salvar flashcard"}),E.jsx("button",{id:"cancelFlashcardBtn",className:"btn btn-outline",onClick:()=>{x(!1),U()},children:"Cancelar"})]})]}),E.jsx("div",{id:"flashcardsList",className:"flashcards-container",children:c==""?E.jsxs("div",{className:"empty-state",children:[E.jsx("i",{className:"fas fa-sticky-note"}),E.jsx("h3",{children:"Nenhum flashcard neste deck"}),E.jsx("p",{children:"Adicione seu primeiro flashcard para começar a estudar"}),E.jsx("button",{className:"btn",onClick:()=>x(!0),children:"Adicionar flashcard"})]}):s.filter(Z=>Z.id==c)[0].flashcards.map((Z,ce)=>E.jsxs("div",{className:"flashcard",onClick:ae=>!ae.target.closest(".card-actions")&&ae.target.classList.toggle("show-back"),children:[E.jsx("div",{className:"flashcard-front",children:E.jsx("h3",{children:Z.front})}),E.jsx("div",{className:"flashcard-back",children:E.jsx("h3",{children:Z.back})}),E.jsx("div",{className:"card-actions",children:E.jsx("button",{className:"btn btn-danger",onClick:()=>_t(Z.id),children:E.jsx("i",{className:"fas fa-trash"})})})]},ce))})]})}):E.jsx("div",{id:"studyView",children:E.jsxs("div",{className:"card study-mode",children:[E.jsxs("h2",{children:["Estudando: ",E.jsx("span",{id:"studyDeckName",children:s.filter(Z=>Z.id==c)[0].name})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:"progress",id:"studyProgress",children:k})}),E.jsxs("p",{children:[" Progresso: ",E.jsx("span",{id:"currentCard",children:f+1})," de ",E.jsx("span",{id:"totalCards",children:s.filter(Z=>Z.id==c)[0].flashcards.length})]}),E.jsxs("div",{className:"study-card",id:"studyCard",onClick:()=>ge(),children:[E.jsxs("div",{className:"study-card-front",style:{display:S?"none":"block"},children:[E.jsx("h3",{id:"studyFront",children:s.filter(Z=>Z.id==c)[0].flashcards[f].front}),E.jsx("p",{children:"Clique no card para ver a resposta"})]}),E.jsxs("div",{className:"study-card-back",style:{display:S?"block":"none"},children:[E.jsx("h3",{id:"studyBack",children:s.filter(Z=>Z.id==c)[0].flashcards[f].back}),E.jsx("p",{children:"Clique no card para voltar"})]})]}),E.jsxs("div",{className:"study-controls",children:[E.jsxs("button",{id:"prevCardBtn",className:"btn btn-outline",onClick:()=>re(),children:[E.jsx("i",{className:"fas fa-arrow-left"})," Anterior"]}),E.jsxs("button",{id:"nextCardBtn",className:"btn",onClick:()=>H(),children:["Próximo ",E.jsx("i",{className:"fas fa-arrow-right"})]}),E.jsxs("button",{id:"endStudyBtn",className:"btn btn-danger",onClick:()=>v("flashcards"),children:[E.jsx("i",{className:"fas fa-times"})," Sair"]})]})]})})}),E.jsxs("div",{style:{display:T?"block":"none"},id:"flashcard-menu",children:[E.jsx("input",{ref:K.ask,placeholder:"Digite o assunto..."}),E.jsxs("div",{id:"fm-btns",children:[E.jsx("div",{id:"fm-ask",onClick:_e,children:"Perguntar"}),E.jsx("div",{id:"fm-cancel",onClick:()=>R(!1),children:"Cancelar"})]})]})]}),E.jsx(Nc,{showPopup:e})]})}function eH(){return E.jsx("div",{id:"tools",className:"page",children:E.jsxs("div",{id:"tools-list",children:[E.jsx(Mt,{to:"/flashcards",className:"tools-item",children:"FlashCards"}),E.jsx(Mt,{to:"/add-posts",className:"tools-item",children:"Adicionar Posts"})]})})}const tH="/assets/no-image-BguYpm9N.jpg";function nH(){const{db:n,server:e,usuarioLogado:t}=yi(),[i,s]=V.useState(tH),a={file:V.useRef(null),description:V.useRef(null)},c=()=>{const f=a.file.current.files[0];if(!f)return;const p=new FileReader;p.onload=_=>{typeof _.target.result=="string"&&s(_.target.result)},p.readAsDataURL(f)},d=()=>{if(!t)return;const f=a.file.current.files[0],p=a.description.current.value,_=new Date().getTime(),v=new FormData;v.append("type","upload"),v.append("timestamp",_.toString()),v.append("file",f),xo.post(e+"/posts",v).then(T=>{const R={type:0,userUid:t.uid,user:t.name||"",image:T.data.file_id,description:p,description_lower:p.toLowerCase(),timestamp:_};hF(Pm(n.current,"posts"),R)})};return E.jsxs("div",{id:"add-post",className:"page",children:[E.jsx("img",{id:"img-view",src:i}),E.jsx("div",{id:"label-description",children:"Descrição:"}),E.jsx("input",{ref:a.description,id:"description"}),E.jsx("div",{id:"add-image",onClick:()=>a.file.current.click(),children:"Adicionar imagem"}),E.jsx("input",{id:"input-file",ref:a.file,onChange:c,type:"file",accept:"image/jpeg"}),E.jsx("div",{id:"btn-submit",onClick:d,children:"Enviar"})]})}const iH=(n,e)=>E.jsxs("select",{id:"filtroOrdenacao",value:n,onChange:t=>e(t.target.value),style:{width:"100%",padding:"10px",marginBottom:"10px"},children:[E.jsx("option",{value:"maisNovos",children:"Mais Novos"}),E.jsx("option",{value:"maisAntigos",children:"Mais Antigos"}),E.jsx("option",{value:"maisMembros",children:"Mais Membros"}),E.jsx("option",{value:"menosMembros",children:"Menos Membros"})]});function rH(){const[n,e]=V.useState(!1),t=V.useRef(null),i={createButton:V.useRef(null),listaComunidades:V.useRef(null)},s=()=>{e(!0),i.createButton.current.style.display="none"},a=()=>{const z=document.getElementById("containerFormComunidade");z&&z.remove();const K=document.querySelector('button[onclick="mostrarFormularioCriarComunidade()"]');K.style.display="inline-block"},c=()=>{const z=document.getElementById("nomeComunidade").value.trim(),K=document.getElementById("descricaoComunidade").value.trim(),pe=document.getElementById("imagemComunidade").files[0],N=document.getElementById("tipoPrivacidade").value;if(!z){t.current("A comunidade deve ter um nome.");return}if(z.length<3||z.length>50){t.current("O nome da comunidade deve ter entre 3 e 50 caracteres.");return}if(K.length>200){t.current("A descrição deve ter no máximo 200 caracteres.");return}const A=Ry().currentUser;if(!A){t.current("Você não está autenticado.");return}const x=lr(ke(Oe(),"comunidades")).key;function O(U){const q=Date.now(),M={nome:z,descricao:K,imagem:U,privacidade:N,criador:A.uid,membros:{[A.uid]:!0},timestamp:q},it={};it[`comunidades/${x}`]=M,it[`usuarios/${A.uid}/comunidades/${x}`]=!0,lp(ke(Oe()),it).then(()=>{console.log("Comunidade criada com sucesso!"),a()}).catch(_t=>{console.error("Erro ao criar comunidade:",_t),t.current("Erro ao criar comunidade: "+_t.message)})}if(pe){const U=pe.name.split(".").pop(),q=`comunidades/${x}/imagem.${U}`;rd(qi(Hi(),q),pe).then(M=>Pr(M.ref)).then(M=>{O(M)}).catch(M=>{console.error("Erro ao fazer upload da imagem:",M),t.current("Erro ao enviar imagem. A comunidade será criada com imagem padrão."),O(Wf)})}else O(Wf)},d=z=>z.membros?Object.keys(z.membros).length:0,[f,p]=V.useState([]),[_,v]=V.useState(!1),[T,R]=V.useState(""),[S,D]=V.useState("maisNovos");V.useEffect(()=>{const z=Oe(),K=ke(z,"comunidades"),te=oc(K,pe=>{const N=[];switch(pe.forEach(A=>{const x=A.val();x.id=A.key,x.membroCount=d(x);const O=T.toLowerCase().trim();(O===""||x.nome.toLowerCase().includes(O)||x.descricao&&x.descricao.toLowerCase().includes(O))&&N.push(x)}),S){case"maisNovos":N.sort((A,x)=>(x.timestamp||0)-(A.timestamp||0));break;case"maisAntigos":N.sort((A,x)=>(A.timestamp||0)-(x.timestamp||0));break;case"maisMembros":N.sort((A,x)=>x.membroCount-A.membroCount);break;case"menosMembros":N.sort((A,x)=>A.membroCount-x.membroCount);break}p(N)});return()=>te()},[T,S]);const k=z=>{if(window.confirm("Tem certeza que deseja excluir esta comunidade?")){const K=Oe();Pn(ke(K,"comunidades/"+z)).then(()=>{console.log("Comunidade excluída")}).catch(te=>{console.error("Erro ao excluir comunidade:",te)})}},L=Ry().currentUser,B=_?f:f.slice(0,10);return E.jsxs("div",{id:"comunitys",children:[E.jsx("div",{id:"novacomunidade",children:n?E.jsx("div",{id:"containerFormComunidade",children:E.jsxs("div",{id:"formCriarComunidade",style:{border:"1px solid #ccc",padding:"20px",marginTop:"10px",borderRadius:"5px"},children:[E.jsx("h3",{children:"Criar Nova Comunidade"}),E.jsxs("form",{id:"comunidadeForm",children:[E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Nome da comunidade:"}),E.jsx("input",{type:"text",id:"nomeComunidade",required:!0,style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Descrição:"}),E.jsx("textarea",{id:"descricaoComunidade",rows:3,style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Imagem da comunidade (opcional):"}),E.jsx("input",{type:"file",id:"imagemComunidade",accept:"image/*",style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Tipo de privacidade:"}),E.jsxs("select",{id:"tipoPrivacidade",style:{width:"100%",padding:"8px",marginTop:"5px"},children:[E.jsx("option",{value:"publica",children:"Pública"}),E.jsx("option",{value:"privada",children:"Privada"})]})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"spaceBetween"},children:[E.jsx("button",{type:"button",onClick:a,style:{padding:"8px 15px"},children:"Cancelar"}),E.jsx("button",{type:"button",onClick:c,style:{padding:"8px 15px",backgroundColor:"#4CAF50",color:"white",border:"none"},children:"Criar"})]})]})]})}):E.jsx(E.Fragment,{})}),E.jsx("section",{id:"comunidades",children:E.jsxs("div",{children:[E.jsxs("div",{children:[E.jsx("input",{type:"text",placeholder:"Pesquisar comunidades...",value:T,onChange:z=>R(z.target.value),style:{width:"calc(100% - 42px",padding:"10px",marginBottom:"10px"}}),E.jsx("button",{id:"btn-show-form-comunity",ref:i.createButton,onClick:s,children:E.jsx("i",{className:"fa-solid fa-plus"})})]}),iH(S,D),E.jsx("div",{id:"comunity-list",ref:i.listaComunidades,children:B.length===0?E.jsx("p",{children:"Nenhuma comunidade encontrada."}):B.map(z=>E.jsxs(Mt,{to:"/comunidade?id="+z.id,className:"comunity-item",children:[E.jsx("img",{src:z.banner||jn,alt:z.nome,className:"banner"}),E.jsx("img",{className:"photo",src:z.imagem||Wf,alt:z.nome}),E.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:z.nome}),E.jsxs("div",{style:{color:"#666",fontSize:"0.8em"},children:["Membros: ",z.membroCount]}),L&&z.criador===L.uid&&E.jsx("button",{style:{marginTop:"10px"},onClick:K=>{K.stopPropagation(),k(z.id)},children:"Excluir"})]},z.id))}),f.length>10&&E.jsx("button",{style:{marginTop:"10px",width:"100%"},onClick:()=>v(!_),children:_?"Mostrar menos":"Mostrar todas as comunidades"})]})}),E.jsx(Nc,{showPopup:t})]})}function sH(){return E.jsx("div",{id:"search",className:"page",children:E.jsx(rH,{})})}function oH(){const{logout:n}=yi();return E.jsx("div",{id:"settings",className:"page",children:E.jsxs("div",{className:"setting-item",children:[E.jsxs(Mt,{to:"/login",onClick:e=>{e.preventDefault(),n()},id:"logoutBtn",children:[E.jsx("i",{className:"fa-solid fa-arrow-right-from-bracket"})," "]}),E.jsx("div",{id:"sair",children:"Sair"})]})})}const Ri=({Element:n})=>E.jsxs(E.Fragment,{children:[E.jsx(n,{}),E.jsx(gk,{}),E.jsx(X5,{})]});function aH(){const[n,e]=V.useState(!1);return V.useEffect(()=>{Ry().onAuthStateChanged(t=>{pv(t)})},[]),E.jsx(W5,{setShow:e,children:n?E.jsx(yM,{children:E.jsxs(QD,{children:[E.jsx(fi,{path:"/",element:E.jsx(Ri,{Element:J5})}),E.jsx(fi,{path:"/search",element:E.jsx(Ri,{Element:sH})}),E.jsx(fi,{path:"/amigos",element:E.jsx(Ri,{Element:Z5})}),E.jsx(fi,{path:"/chats",element:E.jsx(Ri,{Element:kA})}),E.jsx(fi,{path:"/chat/:id/",element:E.jsx(Ri,{Element:kA})}),E.jsx(fi,{path:"/comunidade",element:E.jsx(Ri,{Element:_q})}),E.jsx(fi,{path:"/login",element:E.jsx(Ri,{Element:yq})}),E.jsx(fi,{path:"/registro",element:E.jsx(Ri,{Element:Tq})}),E.jsx(fi,{path:"/perfil",element:E.jsx(Ri,{Element:Eq})}),E.jsx(fi,{path:"/settings",element:E.jsx(Ri,{Element:oH})}),E.jsx(fi,{path:"/ferramentas",element:E.jsx(Ri,{Element:eH})}),E.jsx(fi,{path:"/flashcards",element:E.jsx(Ri,{Element:Zq})}),E.jsx(fi,{path:"/add-posts",element:E.jsx(Ri,{Element:nH})})]})}):E.jsx("div",{id:"loading",children:E.jsx("div",{className:"header_logo",children:E.jsx("img",{src:Jd,width:"150px"})})})})}iD.createRoot(document.getElementById("root")).render(E.jsx(aH,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(n=>{console.log("[SW] Registrado com sucesso:",n.scope)}).catch(n=>{console.error("[SW] Falha no registro:",n)})});
