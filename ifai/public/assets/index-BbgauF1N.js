var WO=Object.defineProperty;var XO=(n,e,t)=>e in n?WO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var N_=(n,e,t)=>XO(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var k_={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nw;function JO(){if(Nw)return Nu;Nw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var h in s)h!=="key"&&(a[h]=s[h])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:a}}return Nu.Fragment=e,Nu.jsx=t,Nu.jsxs=t,Nu}var kw;function ZO(){return kw||(kw=1,k_.exports=JO()),k_.exports}var E=ZO(),O_={exports:{}},ku={},D_={exports:{}},M_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function eD(){return Ow||(Ow=1,function(n){function e(ne,be){var ke=ne.length;ne.push(be);e:for(;0<ke;){var st=ke-1>>>1,U=ne[st];if(0<s(U,be))ne[st]=be,ne[ke]=U,ke=st;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var be=ne[0],ke=ne.pop();if(ke!==be){ne[0]=ke;e:for(var st=0,U=ne.length,ce=U>>>1;st<ce;){var we=2*(st+1)-1,me=ne[we],Z=we+1,se=ne[Z];if(0>s(me,ke))Z<U&&0>s(se,me)?(ne[st]=se,ne[Z]=ke,st=Z):(ne[st]=me,ne[we]=ke,st=we);else if(Z<U&&0>s(se,ke))ne[st]=se,ne[Z]=ke,st=Z;else break e}}return be}function s(ne,be){var ke=ne.sortIndex-be.sortIndex;return ke!==0?ke:ne.id-be.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],p=[],_=1,v=null,T=3,A=!1,S=!1,P=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function re(ne){for(var be=t(p);be!==null;){if(be.callback===null)i(p);else if(be.startTime<=ne)i(p),be.sortIndex=be.expirationTime,e(f,be);else break;be=t(p)}}function ie(ne){if(P=!1,re(ne),!S)if(t(f)!==null)S=!0,ye||(ye=!0,j());else{var be=t(p);be!==null&&yt(ie,be.startTime-ne)}}var ye=!1,k=-1,R=5,I=-1;function N(){return D?!0:!(n.unstable_now()-I<R)}function O(){if(D=!1,ye){var ne=n.unstable_now();I=ne;var be=!0;try{e:{S=!1,P&&(P=!1,z(k),k=-1),A=!0;var ke=T;try{t:{for(re(ne),v=t(f);v!==null&&!(v.expirationTime>ne&&N());){var st=v.callback;if(typeof st=="function"){v.callback=null,T=v.priorityLevel;var U=st(v.expirationTime<=ne);if(ne=n.unstable_now(),typeof U=="function"){v.callback=U,re(ne),be=!0;break t}v===t(f)&&i(f),re(ne)}else i(f);v=t(f)}if(v!==null)be=!0;else{var ce=t(p);ce!==null&&yt(ie,ce.startTime-ne),be=!1}}break e}finally{v=null,T=ke,A=!1}be=void 0}}finally{be?j():ye=!1}}}var j;if(typeof G=="function")j=function(){G(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Ze=M.port2;M.port1.onmessage=O,j=function(){Ze.postMessage(null)}}else j=function(){F(O,0)};function yt(ne,be){k=F(function(){ne(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(ne){switch(T){case 1:case 2:case 3:var be=3;break;default:be=T}var ke=T;T=be;try{return ne()}finally{T=ke}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(ne,be){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ke=T;T=ne;try{return be()}finally{T=ke}},n.unstable_scheduleCallback=function(ne,be,ke){var st=n.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?st+ke:st):ke=st,ne){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ke+U,ne={id:_++,callback:be,priorityLevel:ne,startTime:ke,expirationTime:U,sortIndex:-1},ke>st?(ne.sortIndex=ke,e(p,ne),t(f)===null&&ne===t(p)&&(P?(z(k),k=-1):P=!0,yt(ie,ke-st))):(ne.sortIndex=U,e(f,ne),S||A||(S=!0,ye||(ye=!0,j()))),ne},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(ne){var be=T;return function(){var ke=T;T=be;try{return ne.apply(this,arguments)}finally{T=ke}}}}(M_)),M_}var Dw;function tD(){return Dw||(Dw=1,D_.exports=eD()),D_.exports}var P_={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function nD(){if(Mw)return We;Mw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function T(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,P={};function D(U,ce,we){this.props=U,this.context=ce,this.refs=P,this.updater=we||A}D.prototype.isReactComponent={},D.prototype.setState=function(U,ce){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ce,"setState")},D.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function F(){}F.prototype=D.prototype;function z(U,ce,we){this.props=U,this.context=ce,this.refs=P,this.updater=we||A}var G=z.prototype=new F;G.constructor=z,S(G,D.prototype),G.isPureReactComponent=!0;var re=Array.isArray,ie={H:null,A:null,T:null,S:null,V:null},ye=Object.prototype.hasOwnProperty;function k(U,ce,we,me,Z,se){return we=se.ref,{$$typeof:n,type:U,key:ce,ref:we!==void 0?we:null,props:se}}function R(U,ce){return k(U.type,ce,void 0,void 0,void 0,U.props)}function I(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function N(U){var ce={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(we){return ce[we]})}var O=/\/+/g;function j(U,ce){return typeof U=="object"&&U!==null&&U.key!=null?N(""+U.key):ce.toString(36)}function M(){}function Ze(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(M,M):(U.status="pending",U.then(function(ce){U.status==="pending"&&(U.status="fulfilled",U.value=ce)},function(ce){U.status==="pending"&&(U.status="rejected",U.reason=ce)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function yt(U,ce,we,me,Z){var se=typeof U;(se==="undefined"||se==="boolean")&&(U=null);var W=!1;if(U===null)W=!0;else switch(se){case"bigint":case"string":case"number":W=!0;break;case"object":switch(U.$$typeof){case n:case e:W=!0;break;case _:return W=U._init,yt(W(U._payload),ce,we,me,Z)}}if(W)return Z=Z(U),W=me===""?"."+j(U,0):me,re(Z)?(we="",W!=null&&(we=W.replace(O,"$&/")+"/"),yt(Z,ce,we,"",function(pe){return pe})):Z!=null&&(I(Z)&&(Z=R(Z,we+(Z.key==null||U&&U.key===Z.key?"":(""+Z.key).replace(O,"$&/")+"/")+W)),ce.push(Z)),1;W=0;var le=me===""?".":me+":";if(re(U))for(var ge=0;ge<U.length;ge++)me=U[ge],se=le+j(me,ge),W+=yt(me,ce,we,se,Z);else if(ge=T(U),typeof ge=="function")for(U=ge.call(U),ge=0;!(me=U.next()).done;)me=me.value,se=le+j(me,ge++),W+=yt(me,ce,we,se,Z);else if(se==="object"){if(typeof U.then=="function")return yt(Ze(U),ce,we,me,Z);throw ce=String(U),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return W}function ne(U,ce,we){if(U==null)return U;var me=[],Z=0;return yt(U,me,"","",function(se){return ce.call(we,se,Z++)}),me}function be(U){if(U._status===-1){var ce=U._result;ce=ce(),ce.then(function(we){(U._status===0||U._status===-1)&&(U._status=1,U._result=we)},function(we){(U._status===0||U._status===-1)&&(U._status=2,U._result=we)}),U._status===-1&&(U._status=0,U._result=ce)}if(U._status===1)return U._result.default;throw U._result}var ke=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function st(){}return We.Children={map:ne,forEach:function(U,ce,we){ne(U,function(){ce.apply(this,arguments)},we)},count:function(U){var ce=0;return ne(U,function(){ce++}),ce},toArray:function(U){return ne(U,function(ce){return ce})||[]},only:function(U){if(!I(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},We.Component=D,We.Fragment=t,We.Profiler=s,We.PureComponent=z,We.StrictMode=i,We.Suspense=f,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,We.__COMPILER_RUNTIME={__proto__:null,c:function(U){return ie.H.useMemoCache(U)}},We.cache=function(U){return function(){return U.apply(null,arguments)}},We.cloneElement=function(U,ce,we){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var me=S({},U.props),Z=U.key,se=void 0;if(ce!=null)for(W in ce.ref!==void 0&&(se=void 0),ce.key!==void 0&&(Z=""+ce.key),ce)!ye.call(ce,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&ce.ref===void 0||(me[W]=ce[W]);var W=arguments.length-2;if(W===1)me.children=we;else if(1<W){for(var le=Array(W),ge=0;ge<W;ge++)le[ge]=arguments[ge+2];me.children=le}return k(U.type,Z,void 0,void 0,se,me)},We.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},We.createElement=function(U,ce,we){var me,Z={},se=null;if(ce!=null)for(me in ce.key!==void 0&&(se=""+ce.key),ce)ye.call(ce,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Z[me]=ce[me]);var W=arguments.length-2;if(W===1)Z.children=we;else if(1<W){for(var le=Array(W),ge=0;ge<W;ge++)le[ge]=arguments[ge+2];Z.children=le}if(U&&U.defaultProps)for(me in W=U.defaultProps,W)Z[me]===void 0&&(Z[me]=W[me]);return k(U,se,void 0,void 0,null,Z)},We.createRef=function(){return{current:null}},We.forwardRef=function(U){return{$$typeof:h,render:U}},We.isValidElement=I,We.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:be}},We.memo=function(U,ce){return{$$typeof:p,type:U,compare:ce===void 0?null:ce}},We.startTransition=function(U){var ce=ie.T,we={};ie.T=we;try{var me=U(),Z=ie.S;Z!==null&&Z(we,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(st,ke)}catch(se){ke(se)}finally{ie.T=ce}},We.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},We.use=function(U){return ie.H.use(U)},We.useActionState=function(U,ce,we){return ie.H.useActionState(U,ce,we)},We.useCallback=function(U,ce){return ie.H.useCallback(U,ce)},We.useContext=function(U){return ie.H.useContext(U)},We.useDebugValue=function(){},We.useDeferredValue=function(U,ce){return ie.H.useDeferredValue(U,ce)},We.useEffect=function(U,ce,we){var me=ie.H;if(typeof we=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(U,ce)},We.useId=function(){return ie.H.useId()},We.useImperativeHandle=function(U,ce,we){return ie.H.useImperativeHandle(U,ce,we)},We.useInsertionEffect=function(U,ce){return ie.H.useInsertionEffect(U,ce)},We.useLayoutEffect=function(U,ce){return ie.H.useLayoutEffect(U,ce)},We.useMemo=function(U,ce){return ie.H.useMemo(U,ce)},We.useOptimistic=function(U,ce){return ie.H.useOptimistic(U,ce)},We.useReducer=function(U,ce,we){return ie.H.useReducer(U,ce,we)},We.useRef=function(U){return ie.H.useRef(U)},We.useState=function(U){return ie.H.useState(U)},We.useSyncExternalStore=function(U,ce,we){return ie.H.useSyncExternalStore(U,ce,we)},We.useTransition=function(){return ie.H.useTransition()},We.version="19.1.0",We}var Pw;function bv(){return Pw||(Pw=1,P_.exports=nD()),P_.exports}var L_={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function iD(){if(Lw)return qn;Lw=1;var n=bv();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,p,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:p,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qn.createPortal=function(f,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(f,p,null,_)},qn.flushSync=function(f){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=_,i.d.f()}},qn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},qn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},qn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var _=p.as,v=h(_,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:A}):_==="script"&&i.d.X(f,{crossOrigin:v,integrity:T,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},qn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},qn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,v=h(_,p.crossOrigin);i.d.L(f,_,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},qn.preloadModule=function(f,p){if(typeof f=="string")if(p){var _=h(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},qn.requestFormReset=function(f){i.d.r(f)},qn.unstable_batchedUpdates=function(f,p){return f(p)},qn.useFormState=function(f,p,_){return c.H.useFormState(f,p,_)},qn.useFormStatus=function(){return c.H.useHostTransitionStatus()},qn.version="19.1.0",qn}var Uw;function rD(){if(Uw)return L_.exports;Uw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),L_.exports=iD(),L_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function sD(){if(Vw)return ku;Vw=1;var n=tD(),e=bv(),t=rD();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function h(r){if(a(r)!==r)throw Error(i(188))}function f(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,u=o;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return h(m),r;if(g===u)return h(m),o;g=g.sibling}throw Error(i(188))}if(l.return!==u.return)l=m,u=g;else{for(var w=!1,C=m.child;C;){if(C===l){w=!0,l=m,u=g;break}if(C===u){w=!0,u=m,l=g;break}C=C.sibling}if(!w){for(C=g.child;C;){if(C===l){w=!0,l=g,u=m;break}if(C===u){w=!0,u=g,l=m;break}C=C.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function p(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=p(r),o!==null)return o;r=r.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),G=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function Ze(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case D:return"Profiler";case P:return"StrictMode";case ie:return"Suspense";case ye:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case G:return(r.displayName||"Context")+".Provider";case z:return(r._context.displayName||"Context")+".Consumer";case re:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case k:return o=r.displayName||null,o!==null?o:Ze(r.type)||"Memo";case R:o=r._payload,r=r._init;try{return Ze(r(o))}catch{}}return null}var yt=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},st=[],U=-1;function ce(r){return{current:r}}function we(r){0>U||(r.current=st[U],st[U]=null,U--)}function me(r,o){U++,st[U]=r.current,r.current=o}var Z=ce(null),se=ce(null),W=ce(null),le=ce(null);function ge(r,o){switch(me(W,o),me(se,r),me(Z,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?rw(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=rw(o),r=sw(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}we(Z),me(Z,r)}function pe(){we(Z),we(se),we(W)}function Ee(r){r.memoizedState!==null&&me(le,r);var o=Z.current,l=sw(o,r.type);o!==l&&(me(se,r),me(Z,l))}function Ae(r){se.current===r&&(we(Z),we(se)),le.current===r&&(we(le),Cu._currentValue=ke)}var mt=Object.prototype.hasOwnProperty,Ht=n.unstable_scheduleCallback,Wi=n.unstable_cancelCallback,mr=n.unstable_shouldYield,ai=n.unstable_requestPaint,li=n.unstable_now,Nc=n.unstable_getCurrentPriorityLevel,zo=n.unstable_ImmediatePriority,js=n.unstable_UserBlockingPriority,$r=n.unstable_NormalPriority,X=n.unstable_LowPriority,q=n.unstable_IdlePriority,Ce=n.log,Re=n.unstable_setDisableYieldValue,Se=null,ve=null;function fe(r){if(typeof Ce=="function"&&Re(r),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Se,r)}catch{}}var Ie=Math.clz32?Math.clz32:et,vt=Math.log,pt=Math.LN2;function et(r){return r>>>=0,r===0?32:31-(vt(r)/pt|0)|0}var Xi=256,pr=4194304;function It(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ni(r,o,l){var u=r.pendingLanes;if(u===0)return 0;var m=0,g=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=It(u):(w&=C,w!==0?m=It(w):l||(l=C&~r,l!==0&&(m=It(l))))):(C=u&~g,C!==0?m=It(C):w!==0?m=It(w):l||(l=u&~r,l!==0&&(m=It(l)))),m===0?0:o!==0&&o!==m&&(o&g)===0&&(g=m&-m,l=o&-o,g>=l||g===32&&(l&4194048)!==0)?o:m}function ci(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function St(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pt(){var r=Xi;return Xi<<=1,(Xi&4194048)===0&&(Xi=256),r}function He(){var r=pr;return pr<<=1,(pr&62914560)===0&&(pr=4194304),r}function Tt(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Me(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ke(r,o,l,u,m,g){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var C=r.entanglements,L=r.expirationTimes,Q=r.hiddenUpdates;for(l=w&~l;0<l;){var oe=31-Ie(l),ue=1<<oe;C[oe]=0,L[oe]=-1;var Y=Q[oe];if(Y!==null)for(Q[oe]=null,oe=0;oe<Y.length;oe++){var J=Y[oe];J!==null&&(J.lane&=-536870913)}l&=~ue}u!==0&&Ye(r,u,0),g!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=g&~(w&~o))}function Ye(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var u=31-Ie(o);r.entangledLanes|=o,r.entanglements[u]=r.entanglements[u]|1073741824|l&4194090}function Lt(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var u=31-Ie(l),m=1<<u;m&o|r[u]&o&&(r[u]|=o),l&=~m}}function ln(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Xn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function cn(){var r=be.p;return r!==0?r:(r=window.event,r===void 0?32:Sw(r.type))}function qo(r,o){var l=be.p;try{return be.p=r,o()}finally{be.p=l}}var Ut=Math.random().toString(36).slice(2),nn="__reactFiber$"+Ut,Jt="__reactProps$"+Ut,wn="__reactContainer$"+Ut,Ji="__reactEvents$"+Ut,Wa="__reactListeners$"+Ut,Kr="__reactHandles$"+Ut,Xa="__reactResources$"+Ut,Ho="__reactMarker$"+Ut;function Bs(r){delete r[nn],delete r[Jt],delete r[Ji],delete r[Wa],delete r[Kr]}function Qr(r){var o=r[nn];if(o)return o;for(var l=r.parentNode;l;){if(o=l[wn]||l[nn]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=cw(r);r!==null;){if(l=r[nn])return l;r=cw(r)}return o}r=l,l=r.parentNode}return null}function gr(r){if(r=r[nn]||r[wn]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function _r(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Jn(r){var o=r[Xa];return o||(o=r[Xa]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function rn(r){r[Ho]=!0}var kc=new Set,Ja={};function Zi(r,o){Yr(r,o),Yr(r+"Capture",o)}function Yr(r,o){for(Ja[r]=o,r=0;r<o.length;r++)kc.add(o[r])}var ed=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),td={},Go={};function nd(r){return mt.call(Go,r)?!0:mt.call(td,r)?!1:ed.test(r)?Go[r]=!0:(td[r]=!0,!1)}function Fs(r,o,l){if(nd(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function yr(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function kn(r,o,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+u)}}var $o,id;function Wr(r){if($o===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);$o=o&&o[1]||"",id=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$o+r+id}var Za=!1;function el(r,o){if(!r||Za)return"";Za=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(J){var Y=J}Reflect.construct(r,[],ue)}else{try{ue.call()}catch(J){Y=J}r.call(ue.prototype)}}else{try{throw Error()}catch(J){Y=J}(ue=r())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(J){if(J&&Y&&typeof J.stack=="string")return[J.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],C=g[1];if(w&&C){var L=w.split(`
`),Q=C.split(`
`);for(m=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(u===L.length||m===Q.length)for(u=L.length-1,m=Q.length-1;1<=u&&0<=m&&L[u]!==Q[m];)m--;for(;1<=u&&0<=m;u--,m--)if(L[u]!==Q[m]){if(u!==1||m!==1)do if(u--,m--,0>m||L[u]!==Q[m]){var oe=`
`+L[u].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=u&&0<=m);break}}}finally{Za=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Wr(l):""}function Oc(r){switch(r.tag){case 26:case 27:case 5:return Wr(r.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return el(r.type,!1);case 11:return el(r.type.render,!1);case 1:return el(r.type,!0);case 31:return Wr("Activity");default:return""}}function tl(r){try{var o="";do o+=Oc(r),r=r.return;while(r);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Zn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Dc(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Mp(r){var o=Dc(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),u=""+r[o];if(!r.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return m.call(this)},set:function(w){u=""+w,g.call(this,w)}}),Object.defineProperty(r,o,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function nl(r){r._valueTracker||(r._valueTracker=Mp(r))}function Mc(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),u="";return r&&(u=Dc(r)?r.checked?"true":"false":r.value),r=u,r!==l?(o.setValue(r),!0):!1}function Ko(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Pp=/[\n"\\]/g;function un(r){return r.replace(Pp,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function yi(r,o,l,u,m,g,w,C){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),o!=null?w==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Zn(o)):r.value!==""+Zn(o)&&(r.value=""+Zn(o)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),o!=null?zs(r,w,Zn(o)):l!=null?zs(r,w,Zn(l)):u!=null&&r.removeAttribute("value"),m==null&&g!=null&&(r.defaultChecked=!!g),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+Zn(C):r.removeAttribute("name")}function Qo(r,o,l,u,m,g,w,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),o!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||o!=null))return;l=l!=null?""+Zn(l):"",o=o!=null?""+Zn(o):l,C||o===r.value||(r.value=o),r.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function zs(r,o,l){o==="number"&&Ko(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Xr(r,o,l,u){if(r=r.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=o.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&u&&(r[l].defaultSelected=!0)}else{for(l=""+Zn(l),o=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}o!==null||r[m].disabled||(o=r[m])}o!==null&&(o.selected=!0)}}function xt(r,o,l){if(o!=null&&(o=""+Zn(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+Zn(l):""}function Yo(r,o,l,u){if(o==null){if(u!=null){if(l!=null)throw Error(i(92));if(yt(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),o=l}l=Zn(o),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u)}function ki(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var Wo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rd(r,o,l){var u=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":u?r.setProperty(o,l):typeof l!="number"||l===0||Wo.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function Pc(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&l[m]!==u&&rd(r,m,u)}else for(var g in o)o.hasOwnProperty(g)&&rd(r,g,o[g])}function Lc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Up=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function il(r){return Up.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Jr=null;function Oi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Zr=null,es=null;function Uc(r){var o=gr(r);if(o&&(r=o.stateNode)){var l=r[Jt]||null;e:switch(r=o.stateNode,o.type){case"input":if(yi(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+un(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var u=l[o];if(u!==r&&u.form===r.form){var m=u[Jt]||null;if(!m)throw Error(i(90));yi(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<l.length;o++)u=l[o],u.form===r.form&&Mc(u)}break e;case"textarea":xt(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Xr(r,!!l.multiple,o,!1)}}}var vr=!1;function sd(r,o,l){if(vr)return r(o,l);vr=!0;try{var u=r(o);return u}finally{if(vr=!1,(Zr!==null||es!==null)&&(Jd(),Zr&&(o=Zr,r=es,es=Zr=null,Uc(o),r)))for(o=0;o<r.length;o++)Uc(r[o])}}function Xo(r,o){var l=r.stateNode;if(l===null)return null;var u=l[Jt]||null;if(u===null)return null;l=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Di=!1;if(er)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){Di=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{Di=!1}var Er=null,qs=null,ts=null;function Vc(){if(ts)return ts;var r,o=qs,l=o.length,u,m="value"in Er?Er.value:Er.textContent,g=m.length;for(r=0;r<l&&o[r]===m[r];r++);var w=l-r;for(u=1;u<=w&&o[l-u]===m[g-u];u++);return ts=m.slice(r,1<u?1-u:void 0)}function Tr(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function br(){return!0}function jc(){return!1}function Sn(r){function o(l,u,m,g,w){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?br:jc,this.isPropagationStopped=jc,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),o}var bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rl=Sn(bt),Zo=_({},bt,{view:0,detail:0}),od=Sn(Zo),sl,ol,wr,ea=_({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ia,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==wr&&(wr&&r.type==="mousemove"?(sl=r.screenX-wr.screenX,ol=r.screenY-wr.screenY):ol=sl=0,wr=r),sl)},movementY:function(r){return"movementY"in r?r.movementY:ol}}),Mi=Sn(ea),ad=_({},ea,{dataTransfer:0}),Vp=Sn(ad),ta=_({},Zo,{relatedTarget:0}),al=Sn(ta),Bc=_({},bt,{animationName:0,elapsedTime:0,pseudoElement:0}),ll=Sn(Bc),ld=_({},bt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),cl=Sn(ld),jp=_({},bt,{data:0}),Fc=Sn(jp),na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=ud[r])?!!o[r]:!1}function ia(){return zc}var hd=_({},Zo,{key:function(r){if(r.key){var o=na[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Tr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?cd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ia,charCode:function(r){return r.type==="keypress"?Tr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Tr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ul=Sn(hd),dd=_({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=Sn(dd),ns=_({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ia}),fd=Sn(ns),md=_({},bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),pd=Sn(md),gd=_({},ea,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),hl=Sn(gd),ei=_({},bt,{newState:0,oldState:0}),_d=Sn(ei),yd=[9,13,27,32],Sr=er&&"CompositionEvent"in window,d=null;er&&"documentMode"in document&&(d=document.documentMode);var y=er&&"TextEvent"in window&&!d,b=er&&(!Sr||d&&8<d&&11>=d),x=" ",$=!1;function ee(r,o){switch(r){case"keyup":return yd.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Te(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ut=!1;function pn(r,o){switch(r){case"compositionend":return Te(o);case"keypress":return o.which!==32?null:($=!0,x);case"textInput":return r=o.data,r===x&&$?null:r;default:return null}}function ht(r,o){if(ut)return r==="compositionend"||!Sr&&ee(r,o)?(r=Vc(),ts=qs=Er=null,ut=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return b&&o.locale!=="ko"?null:o.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gn(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!Cn[r.type]:o==="textarea"}function is(r,o,l,u){Zr?es?es.push(u):es=[u]:Zr=u,o=sf(o,"onChange"),0<o.length&&(l=new rl("onChange","change",null,l,u),r.push({event:l,listeners:o}))}var On=null,Cr=null;function Hc(r){Zb(r,0)}function vd(r){var o=_r(r);if(Mc(o))return r}function E0(r,o){if(r==="change")return o}var T0=!1;if(er){var Bp;if(er){var Fp="oninput"in document;if(!Fp){var b0=document.createElement("div");b0.setAttribute("oninput","return;"),Fp=typeof b0.oninput=="function"}Bp=Fp}else Bp=!1;T0=Bp&&(!document.documentMode||9<document.documentMode)}function w0(){On&&(On.detachEvent("onpropertychange",S0),Cr=On=null)}function S0(r){if(r.propertyName==="value"&&vd(Cr)){var o=[];is(o,Cr,r,Oi(r)),sd(Hc,o)}}function Ak(r,o,l){r==="focusin"?(w0(),On=o,Cr=l,On.attachEvent("onpropertychange",S0)):r==="focusout"&&w0()}function Rk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vd(Cr)}function Ik(r,o){if(r==="click")return vd(o)}function xk(r,o){if(r==="input"||r==="change")return vd(o)}function Nk(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var vi=typeof Object.is=="function"?Object.is:Nk;function Gc(r,o){if(vi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),u=Object.keys(o);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!mt.call(o,m)||!vi(r[m],o[m]))return!1}return!0}function C0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function A0(r,o){var l=C0(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=o&&u>=o)return{node:l,offset:o-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=C0(l)}}function R0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?R0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function I0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ko(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=Ko(r.document)}return o}function zp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var kk=er&&"documentMode"in document&&11>=document.documentMode,dl=null,qp=null,$c=null,Hp=!1;function x0(r,o,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Hp||dl==null||dl!==Ko(u)||(u=dl,"selectionStart"in u&&zp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$c&&Gc($c,u)||($c=u,u=sf(qp,"onSelect"),0<u.length&&(o=new rl("onSelect","select",null,o,l),r.push({event:o,listeners:u}),o.target=dl)))}function ra(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var fl={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionrun:ra("Transition","TransitionRun"),transitionstart:ra("Transition","TransitionStart"),transitioncancel:ra("Transition","TransitionCancel"),transitionend:ra("Transition","TransitionEnd")},Gp={},N0={};er&&(N0=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function sa(r){if(Gp[r])return Gp[r];if(!fl[r])return r;var o=fl[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in N0)return Gp[r]=o[l];return r}var k0=sa("animationend"),O0=sa("animationiteration"),D0=sa("animationstart"),Ok=sa("transitionrun"),Dk=sa("transitionstart"),Mk=sa("transitioncancel"),M0=sa("transitionend"),P0=new Map,$p="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$p.push("scrollEnd");function tr(r,o){P0.set(r,o),Zi(o,[r])}var L0=new WeakMap;function Pi(r,o){if(typeof r=="object"&&r!==null){var l=L0.get(r);return l!==void 0?l:(o={value:r,source:o,stack:tl(o)},L0.set(r,o),o)}return{value:r,source:o,stack:tl(o)}}var Li=[],ml=0,Kp=0;function Ed(){for(var r=ml,o=Kp=ml=0;o<r;){var l=Li[o];Li[o++]=null;var u=Li[o];Li[o++]=null;var m=Li[o];Li[o++]=null;var g=Li[o];if(Li[o++]=null,u!==null&&m!==null){var w=u.pending;w===null?m.next=m:(m.next=w.next,w.next=m),u.pending=m}g!==0&&U0(l,m,g)}}function Td(r,o,l,u){Li[ml++]=r,Li[ml++]=o,Li[ml++]=l,Li[ml++]=u,Kp|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Qp(r,o,l,u){return Td(r,o,l,u),bd(r)}function pl(r,o){return Td(r,null,null,o),bd(r)}function U0(r,o,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var m=!1,g=r.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(m=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,m&&o!==null&&(m=31-Ie(l),r=g.hiddenUpdates,u=r[m],u===null?r[m]=[o]:u.push(o),o.lane=l|536870912),g):null}function bd(r){if(50<_u)throw _u=0,e_=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var gl={};function Pk(r,o,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(r,o,l,u){return new Pk(r,o,l,u)}function Yp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rs(r,o){var l=r.alternate;return l===null?(l=Ei(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function V0(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function wd(r,o,l,u,m,g){var w=0;if(u=r,typeof r=="function")Yp(r)&&(w=1);else if(typeof r=="string")w=UO(r,l,Z.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=Ei(31,l,o,m),r.elementType=I,r.lanes=g,r;case S:return oa(l.children,m,g,o);case P:w=8,m|=24;break;case D:return r=Ei(12,l,o,m|2),r.elementType=D,r.lanes=g,r;case ie:return r=Ei(13,l,o,m),r.elementType=ie,r.lanes=g,r;case ye:return r=Ei(19,l,o,m),r.elementType=ye,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case F:case G:w=10;break e;case z:w=9;break e;case re:w=11;break e;case k:w=14;break e;case R:w=16,u=null;break e}w=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return o=Ei(w,l,o,m),o.elementType=r,o.type=u,o.lanes=g,o}function oa(r,o,l,u){return r=Ei(7,r,u,o),r.lanes=l,r}function Wp(r,o,l){return r=Ei(6,r,null,o),r.lanes=l,r}function Xp(r,o,l){return o=Ei(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var _l=[],yl=0,Sd=null,Cd=0,Ui=[],Vi=0,aa=null,ss=1,os="";function la(r,o){_l[yl++]=Cd,_l[yl++]=Sd,Sd=r,Cd=o}function j0(r,o,l){Ui[Vi++]=ss,Ui[Vi++]=os,Ui[Vi++]=aa,aa=r;var u=ss;r=os;var m=32-Ie(u)-1;u&=~(1<<m),l+=1;var g=32-Ie(o)+m;if(30<g){var w=m-m%5;g=(u&(1<<w)-1).toString(32),u>>=w,m-=w,ss=1<<32-Ie(o)+m|l<<m|u,os=g+r}else ss=1<<g|l<<m|u,os=r}function Jp(r){r.return!==null&&(la(r,1),j0(r,1,0))}function Zp(r){for(;r===Sd;)Sd=_l[--yl],_l[yl]=null,Cd=_l[--yl],_l[yl]=null;for(;r===aa;)aa=Ui[--Vi],Ui[Vi]=null,os=Ui[--Vi],Ui[Vi]=null,ss=Ui[--Vi],Ui[Vi]=null}var ti=null,Zt=null,Et=!1,ca=null,Ar=!1,eg=Error(i(519));function ua(r){var o=Error(i(418,""));throw Yc(Pi(o,r)),eg}function B0(r){var o=r.stateNode,l=r.type,u=r.memoizedProps;switch(o[nn]=r,o[Jt]=u,l){case"dialog":at("cancel",o),at("close",o);break;case"iframe":case"object":case"embed":at("load",o);break;case"video":case"audio":for(l=0;l<vu.length;l++)at(vu[l],o);break;case"source":at("error",o);break;case"img":case"image":case"link":at("error",o),at("load",o);break;case"details":at("toggle",o);break;case"input":at("invalid",o),Qo(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),nl(o);break;case"select":at("invalid",o);break;case"textarea":at("invalid",o),Yo(o,u.value,u.defaultValue,u.children),nl(o)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||u.suppressHydrationWarning===!0||iw(o.textContent,l)?(u.popover!=null&&(at("beforetoggle",o),at("toggle",o)),u.onScroll!=null&&at("scroll",o),u.onScrollEnd!=null&&at("scrollend",o),u.onClick!=null&&(o.onclick=of),o=!0):o=!1,o||ua(r)}function F0(r){for(ti=r.return;ti;)switch(ti.tag){case 5:case 13:Ar=!1;return;case 27:case 3:Ar=!0;return;default:ti=ti.return}}function Kc(r){if(r!==ti)return!1;if(!Et)return F0(r),Et=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||g_(r.type,r.memoizedProps)),l=!l),l&&Zt&&ua(r),F0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(o===0){Zt=ir(r.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;r=r.nextSibling}Zt=null}}else o===27?(o=Zt,so(r.type)?(r=E_,E_=null,Zt=r):Zt=o):Zt=ti?ir(r.stateNode.nextSibling):null;return!0}function Qc(){Zt=ti=null,Et=!1}function z0(){var r=ca;return r!==null&&(di===null?di=r:di.push.apply(di,r),ca=null),r}function Yc(r){ca===null?ca=[r]:ca.push(r)}var tg=ce(null),ha=null,as=null;function Hs(r,o,l){me(tg,o._currentValue),o._currentValue=l}function ls(r){r._currentValue=tg.current,we(tg)}function ng(r,o,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),r===l)break;r=r.return}}function ig(r,o,l,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var g=m.dependencies;if(g!==null){var w=m.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=m;for(var L=0;L<o.length;L++)if(C.context===o[L]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),ng(g.return,l,r),u||(w=null);break e}g=C.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(i(341));w.lanes|=l,g=w.alternate,g!==null&&(g.lanes|=l),ng(w,l,r),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===r){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function Wc(r,o,l,u){r=null;for(var m=o,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var C=m.type;vi(m.pendingProps.value,w.value)||(r!==null?r.push(C):r=[C])}}else if(m===le.current){if(w=m.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Cu):r=[Cu])}m=m.return}r!==null&&ig(o,r,l,u),o.flags|=262144}function Ad(r){for(r=r.firstContext;r!==null;){if(!vi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function da(r){ha=r,as=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function zn(r){return q0(ha,r)}function Rd(r,o){return ha===null&&da(r),q0(r,o)}function q0(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},as===null){if(r===null)throw Error(i(308));as=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else as=as.next=o;return l}var Lk=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},Uk=n.unstable_scheduleCallback,Vk=n.unstable_NormalPriority,_n={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rg(){return{controller:new Lk,data:new Map,refCount:0}}function Xc(r){r.refCount--,r.refCount===0&&Uk(Vk,function(){r.controller.abort()})}var Jc=null,sg=0,vl=0,El=null;function jk(r,o){if(Jc===null){var l=Jc=[];sg=0,vl=a_(),El={status:"pending",value:void 0,then:function(u){l.push(u)}}}return sg++,o.then(H0,H0),o}function H0(){if(--sg===0&&Jc!==null){El!==null&&(El.status="fulfilled");var r=Jc;Jc=null,vl=0,El=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Bk(r,o){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return r.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<l.length;m++)(0,l[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var G0=ne.S;ne.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&jk(r,o),G0!==null&&G0(r,o)};var fa=ce(null);function og(){var r=fa.current;return r!==null?r:Vt.pooledCache}function Id(r,o){o===null?me(fa,fa.current):me(fa,o.pool)}function $0(){var r=og();return r===null?null:{parent:_n._currentValue,pool:r}}var Zc=Error(i(460)),K0=Error(i(474)),xd=Error(i(542)),ag={then:function(){}};function Q0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Nd(){}function Y0(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(Nd,Nd),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,X0(r),r;default:if(typeof o.status=="string")o.then(Nd,Nd);else{if(r=Vt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,X0(r),r}throw eu=o,Zc}}var eu=null;function W0(){if(eu===null)throw Error(i(459));var r=eu;return eu=null,r}function X0(r){if(r===Zc||r===xd)throw Error(i(483))}var Gs=!1;function lg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cg(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function $s(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ks(r,o,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Ct&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=bd(r),U0(r,null,l),o}return Td(r,u,o,l),bd(r)}function tu(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var u=o.lanes;u&=r.pendingLanes,l|=u,o.lanes=l,Lt(r,l)}}function ug(r,o){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?m=g=o:g=g.next=o}else m=g=o;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var hg=!1;function nu(){if(hg){var r=El;if(r!==null)throw r}}function iu(r,o,l,u){hg=!1;var m=r.updateQueue;Gs=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var L=C,Q=L.next;L.next=null,w===null?g=Q:w.next=Q,w=L;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,C=oe.lastBaseUpdate,C!==w&&(C===null?oe.firstBaseUpdate=Q:C.next=Q,oe.lastBaseUpdate=L))}if(g!==null){var ue=m.baseState;w=0,oe=Q=L=null,C=g;do{var Y=C.lane&-536870913,J=Y!==C.lane;if(J?(dt&Y)===Y:(u&Y)===Y){Y!==0&&Y===vl&&(hg=!0),oe!==null&&(oe=oe.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Be=r,Le=C;Y=o;var Ot=l;switch(Le.tag){case 1:if(Be=Le.payload,typeof Be=="function"){ue=Be.call(Ot,ue,Y);break e}ue=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Le.payload,Y=typeof Be=="function"?Be.call(Ot,ue,Y):Be,Y==null)break e;ue=_({},ue,Y);break e;case 2:Gs=!0}}Y=C.callback,Y!==null&&(r.flags|=64,J&&(r.flags|=8192),J=m.callbacks,J===null?m.callbacks=[Y]:J.push(Y))}else J={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},oe===null?(Q=oe=J,L=ue):oe=oe.next=J,w|=Y;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;J=C,C=J.next,J.next=null,m.lastBaseUpdate=J,m.shared.pending=null}}while(!0);oe===null&&(L=ue),m.baseState=L,m.firstBaseUpdate=Q,m.lastBaseUpdate=oe,g===null&&(m.shared.lanes=0),to|=w,r.lanes=w,r.memoizedState=ue}}function J0(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Z0(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)J0(l[r],o)}var Tl=ce(null),kd=ce(0);function eT(r,o){r=ps,me(kd,r),me(Tl,o),ps=r|o.baseLanes}function dg(){me(kd,ps),me(Tl,Tl.current)}function fg(){ps=kd.current,we(Tl),we(kd)}var Qs=0,Xe=null,Nt=null,hn=null,Od=!1,bl=!1,ma=!1,Dd=0,ru=0,wl=null,Fk=0;function sn(){throw Error(i(321))}function mg(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!vi(r[l],o[l]))return!1;return!0}function pg(r,o,l,u,m,g){return Qs=g,Xe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ne.H=r===null||r.memoizedState===null?UT:VT,ma=!1,g=l(u,m),ma=!1,bl&&(g=nT(o,l,u,m)),tT(r),g}function tT(r){ne.H=jd;var o=Nt!==null&&Nt.next!==null;if(Qs=0,hn=Nt=Xe=null,Od=!1,ru=0,wl=null,o)throw Error(i(300));r===null||An||(r=r.dependencies,r!==null&&Ad(r)&&(An=!0))}function nT(r,o,l,u){Xe=r;var m=0;do{if(bl&&(wl=null),ru=0,bl=!1,25<=m)throw Error(i(301));if(m+=1,hn=Nt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ne.H=Qk,g=o(l,u)}while(bl);return g}function zk(){var r=ne.H,o=r.useState()[0];return o=typeof o.then=="function"?su(o):o,r=r.useState()[0],(Nt!==null?Nt.memoizedState:null)!==r&&(Xe.flags|=1024),o}function gg(){var r=Dd!==0;return Dd=0,r}function _g(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function yg(r){if(Od){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Od=!1}Qs=0,hn=Nt=Xe=null,bl=!1,ru=Dd=0,wl=null}function ui(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Xe.memoizedState=hn=r:hn=hn.next=r,hn}function dn(){if(Nt===null){var r=Xe.alternate;r=r!==null?r.memoizedState:null}else r=Nt.next;var o=hn===null?Xe.memoizedState:hn.next;if(o!==null)hn=o,Nt=r;else{if(r===null)throw Xe.alternate===null?Error(i(467)):Error(i(310));Nt=r,r={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},hn===null?Xe.memoizedState=hn=r:hn=hn.next=r}return hn}function vg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(r){var o=ru;return ru+=1,wl===null&&(wl=[]),r=Y0(wl,r,o),o=Xe,(hn===null?o.memoizedState:hn.next)===null&&(o=o.alternate,ne.H=o===null||o.memoizedState===null?UT:VT),r}function Md(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return su(r);if(r.$$typeof===G)return zn(r)}throw Error(i(438,String(r)))}function Eg(r){var o=null,l=Xe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var u=Xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=vg(),Xe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),u=0;u<r;u++)l[u]=N;return o.index++,l}function cs(r,o){return typeof o=="function"?o(r):o}function Pd(r){var o=dn();return Tg(o,Nt,r)}function Tg(r,o,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var m=r.baseQueue,g=u.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}o.baseQueue=m=g,u.pending=null}if(g=r.baseState,m===null)r.memoizedState=g;else{o=m.next;var C=w=null,L=null,Q=o,oe=!1;do{var ue=Q.lane&-536870913;if(ue!==Q.lane?(dt&ue)===ue:(Qs&ue)===ue){var Y=Q.revertLane;if(Y===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ue===vl&&(oe=!0);else if((Qs&Y)===Y){Q=Q.next,Y===vl&&(oe=!0);continue}else ue={lane:0,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(C=L=ue,w=g):L=L.next=ue,Xe.lanes|=Y,to|=Y;ue=Q.action,ma&&l(g,ue),g=Q.hasEagerState?Q.eagerState:l(g,ue)}else Y={lane:ue,revertLane:Q.revertLane,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(C=L=Y,w=g):L=L.next=Y,Xe.lanes|=ue,to|=ue;Q=Q.next}while(Q!==null&&Q!==o);if(L===null?w=g:L.next=C,!vi(g,r.memoizedState)&&(An=!0,oe&&(l=El,l!==null)))throw l;r.memoizedState=g,r.baseState=w,r.baseQueue=L,u.lastRenderedState=g}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function bg(r){var o=dn(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,m=l.pending,g=o.memoizedState;if(m!==null){l.pending=null;var w=m=m.next;do g=r(g,w.action),w=w.next;while(w!==m);vi(g,o.memoizedState)||(An=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),l.lastRenderedState=g}return[g,u]}function iT(r,o,l){var u=Xe,m=dn(),g=Et;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=o();var w=!vi((Nt||m).memoizedState,l);w&&(m.memoizedState=l,An=!0),m=m.queue;var C=oT.bind(null,u,m,r);if(ou(2048,8,C,[r]),m.getSnapshot!==o||w||hn!==null&&hn.memoizedState.tag&1){if(u.flags|=2048,Sl(9,Ld(),sT.bind(null,u,m,l,o),null),Vt===null)throw Error(i(349));g||(Qs&124)!==0||rT(u,o,l)}return l}function rT(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=Xe.updateQueue,o===null?(o=vg(),Xe.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function sT(r,o,l,u){o.value=l,o.getSnapshot=u,aT(o)&&lT(r)}function oT(r,o,l){return l(function(){aT(o)&&lT(r)})}function aT(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!vi(r,l)}catch{return!0}}function lT(r){var o=pl(r,2);o!==null&&Ci(o,r,2)}function wg(r){var o=ui();if(typeof r=="function"){var l=r;if(r=l(),ma){fe(!0);try{l()}finally{fe(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:r},o}function cT(r,o,l,u){return r.baseState=l,Tg(r,Nt,typeof u=="function"?u:cs)}function qk(r,o,l,u,m){if(Vd(r))throw Error(i(485));if(r=o.action,r!==null){var g={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};ne.T!==null?l(!0):g.isTransition=!1,u(g),l=o.pending,l===null?(g.next=o.pending=g,uT(o,g)):(g.next=l.next,o.pending=l.next=g)}}function uT(r,o){var l=o.action,u=o.payload,m=r.state;if(o.isTransition){var g=ne.T,w={};ne.T=w;try{var C=l(m,u),L=ne.S;L!==null&&L(w,C),hT(r,o,C)}catch(Q){Sg(r,o,Q)}finally{ne.T=g}}else try{g=l(m,u),hT(r,o,g)}catch(Q){Sg(r,o,Q)}}function hT(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){dT(r,o,u)},function(u){return Sg(r,o,u)}):dT(r,o,l)}function dT(r,o,l){o.status="fulfilled",o.value=l,fT(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,uT(r,l)))}function Sg(r,o,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=l,fT(o),o=o.next;while(o!==u)}r.action=null}function fT(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function mT(r,o){return o}function pT(r,o){if(Et){var l=Vt.formState;if(l!==null){e:{var u=Xe;if(Et){if(Zt){t:{for(var m=Zt,g=Ar;m.nodeType!==8;){if(!g){m=null;break t}if(m=ir(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Zt=ir(m.nextSibling),u=m.data==="F!";break e}}ua(u)}u=!1}u&&(o=l[0])}}return l=ui(),l.memoizedState=l.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mT,lastRenderedState:o},l.queue=u,l=MT.bind(null,Xe,u),u.dispatch=l,u=wg(!1),g=xg.bind(null,Xe,!1,u.queue),u=ui(),m={state:o,dispatch:null,action:r,pending:null},u.queue=m,l=qk.bind(null,Xe,m,g,l),m.dispatch=l,u.memoizedState=r,[o,l,!1]}function gT(r){var o=dn();return _T(o,Nt,r)}function _T(r,o,l){if(o=Tg(r,o,mT)[0],r=Pd(cs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=su(o)}catch(w){throw w===Zc?xd:w}else u=o;o=dn();var m=o.queue,g=m.dispatch;return l!==o.memoizedState&&(Xe.flags|=2048,Sl(9,Ld(),Hk.bind(null,m,l),null)),[u,g,r]}function Hk(r,o){r.action=o}function yT(r){var o=dn(),l=Nt;if(l!==null)return _T(o,l,r);dn(),o=o.memoizedState,l=dn();var u=l.queue.dispatch;return l.memoizedState=r,[o,u,!1]}function Sl(r,o,l,u){return r={tag:r,create:l,deps:u,inst:o,next:null},o=Xe.updateQueue,o===null&&(o=vg(),Xe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,o.lastEffect=r),r}function Ld(){return{destroy:void 0,resource:void 0}}function vT(){return dn().memoizedState}function Ud(r,o,l,u){var m=ui();u=u===void 0?null:u,Xe.flags|=r,m.memoizedState=Sl(1|o,Ld(),l,u)}function ou(r,o,l,u){var m=dn();u=u===void 0?null:u;var g=m.memoizedState.inst;Nt!==null&&u!==null&&mg(u,Nt.memoizedState.deps)?m.memoizedState=Sl(o,g,l,u):(Xe.flags|=r,m.memoizedState=Sl(1|o,g,l,u))}function ET(r,o){Ud(8390656,8,r,o)}function TT(r,o){ou(2048,8,r,o)}function bT(r,o){return ou(4,2,r,o)}function wT(r,o){return ou(4,4,r,o)}function ST(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function CT(r,o,l){l=l!=null?l.concat([r]):null,ou(4,4,ST.bind(null,o,r),l)}function Cg(){}function AT(r,o){var l=dn();o=o===void 0?null:o;var u=l.memoizedState;return o!==null&&mg(o,u[1])?u[0]:(l.memoizedState=[r,o],r)}function RT(r,o){var l=dn();o=o===void 0?null:o;var u=l.memoizedState;if(o!==null&&mg(o,u[1]))return u[0];if(u=r(),ma){fe(!0);try{r()}finally{fe(!1)}}return l.memoizedState=[u,o],u}function Ag(r,o,l){return l===void 0||(Qs&1073741824)!==0?r.memoizedState=o:(r.memoizedState=l,r=Nb(),Xe.lanes|=r,to|=r,l)}function IT(r,o,l,u){return vi(l,o)?l:Tl.current!==null?(r=Ag(r,l,u),vi(r,o)||(An=!0),r):(Qs&42)===0?(An=!0,r.memoizedState=l):(r=Nb(),Xe.lanes|=r,to|=r,o)}function xT(r,o,l,u,m){var g=be.p;be.p=g!==0&&8>g?g:8;var w=ne.T,C={};ne.T=C,xg(r,!1,o,l);try{var L=m(),Q=ne.S;if(Q!==null&&Q(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var oe=Bk(L,u);au(r,o,oe,Si(r))}else au(r,o,u,Si(r))}catch(ue){au(r,o,{then:function(){},status:"rejected",reason:ue},Si())}finally{be.p=g,ne.T=w}}function Gk(){}function Rg(r,o,l,u){if(r.tag!==5)throw Error(i(476));var m=NT(r).queue;xT(r,m,o,ke,l===null?Gk:function(){return kT(r),l(u)})}function NT(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:ke},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function kT(r){var o=NT(r).next.queue;au(r,o,{},Si())}function Ig(){return zn(Cu)}function OT(){return dn().memoizedState}function DT(){return dn().memoizedState}function $k(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Si();r=$s(l);var u=Ks(o,r,l);u!==null&&(Ci(u,o,l),tu(u,o,l)),o={cache:rg()},r.payload=o;return}o=o.return}}function Kk(r,o,l){var u=Si();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Vd(r)?PT(o,l):(l=Qp(r,o,l,u),l!==null&&(Ci(l,r,u),LT(l,o,u)))}function MT(r,o,l){var u=Si();au(r,o,l,u)}function au(r,o,l,u){var m={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vd(r))PT(o,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var w=o.lastRenderedState,C=g(w,l);if(m.hasEagerState=!0,m.eagerState=C,vi(C,w))return Td(r,o,m,0),Vt===null&&Ed(),!1}catch{}finally{}if(l=Qp(r,o,m,u),l!==null)return Ci(l,r,u),LT(l,o,u),!0}return!1}function xg(r,o,l,u){if(u={lane:2,revertLane:a_(),action:u,hasEagerState:!1,eagerState:null,next:null},Vd(r)){if(o)throw Error(i(479))}else o=Qp(r,l,u,2),o!==null&&Ci(o,r,2)}function Vd(r){var o=r.alternate;return r===Xe||o!==null&&o===Xe}function PT(r,o){bl=Od=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function LT(r,o,l){if((l&4194048)!==0){var u=o.lanes;u&=r.pendingLanes,l|=u,o.lanes=l,Lt(r,l)}}var jd={readContext:zn,use:Md,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn},UT={readContext:zn,use:Md,useCallback:function(r,o){return ui().memoizedState=[r,o===void 0?null:o],r},useContext:zn,useEffect:ET,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,Ud(4194308,4,ST.bind(null,o,r),l)},useLayoutEffect:function(r,o){return Ud(4194308,4,r,o)},useInsertionEffect:function(r,o){Ud(4,2,r,o)},useMemo:function(r,o){var l=ui();o=o===void 0?null:o;var u=r();if(ma){fe(!0);try{r()}finally{fe(!1)}}return l.memoizedState=[u,o],u},useReducer:function(r,o,l){var u=ui();if(l!==void 0){var m=l(o);if(ma){fe(!0);try{l(o)}finally{fe(!1)}}}else m=o;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=Kk.bind(null,Xe,r),[u.memoizedState,r]},useRef:function(r){var o=ui();return r={current:r},o.memoizedState=r},useState:function(r){r=wg(r);var o=r.queue,l=MT.bind(null,Xe,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:Cg,useDeferredValue:function(r,o){var l=ui();return Ag(l,r,o)},useTransition:function(){var r=wg(!1);return r=xT.bind(null,Xe,r.queue,!0,!1),ui().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var u=Xe,m=ui();if(Et){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),Vt===null)throw Error(i(349));(dt&124)!==0||rT(u,o,l)}m.memoizedState=l;var g={value:l,getSnapshot:o};return m.queue=g,ET(oT.bind(null,u,g,r),[r]),u.flags|=2048,Sl(9,Ld(),sT.bind(null,u,g,l,o),null),l},useId:function(){var r=ui(),o=Vt.identifierPrefix;if(Et){var l=os,u=ss;l=(u&~(1<<32-Ie(u)-1)).toString(32)+l,o="«"+o+"R"+l,l=Dd++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=Fk++,o="«"+o+"r"+l.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:Ig,useFormState:pT,useActionState:pT,useOptimistic:function(r){var o=ui();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=xg.bind(null,Xe,!0,l),l.dispatch=o,[r,o]},useMemoCache:Eg,useCacheRefresh:function(){return ui().memoizedState=$k.bind(null,Xe)}},VT={readContext:zn,use:Md,useCallback:AT,useContext:zn,useEffect:TT,useImperativeHandle:CT,useInsertionEffect:bT,useLayoutEffect:wT,useMemo:RT,useReducer:Pd,useRef:vT,useState:function(){return Pd(cs)},useDebugValue:Cg,useDeferredValue:function(r,o){var l=dn();return IT(l,Nt.memoizedState,r,o)},useTransition:function(){var r=Pd(cs)[0],o=dn().memoizedState;return[typeof r=="boolean"?r:su(r),o]},useSyncExternalStore:iT,useId:OT,useHostTransitionStatus:Ig,useFormState:gT,useActionState:gT,useOptimistic:function(r,o){var l=dn();return cT(l,Nt,r,o)},useMemoCache:Eg,useCacheRefresh:DT},Qk={readContext:zn,use:Md,useCallback:AT,useContext:zn,useEffect:TT,useImperativeHandle:CT,useInsertionEffect:bT,useLayoutEffect:wT,useMemo:RT,useReducer:bg,useRef:vT,useState:function(){return bg(cs)},useDebugValue:Cg,useDeferredValue:function(r,o){var l=dn();return Nt===null?Ag(l,r,o):IT(l,Nt.memoizedState,r,o)},useTransition:function(){var r=bg(cs)[0],o=dn().memoizedState;return[typeof r=="boolean"?r:su(r),o]},useSyncExternalStore:iT,useId:OT,useHostTransitionStatus:Ig,useFormState:yT,useActionState:yT,useOptimistic:function(r,o){var l=dn();return Nt!==null?cT(l,Nt,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Eg,useCacheRefresh:DT},Cl=null,lu=0;function Bd(r){var o=lu;return lu+=1,Cl===null&&(Cl=[]),Y0(Cl,r,o)}function cu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Fd(r,o){throw o.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function jT(r){var o=r._init;return o(r._payload)}function BT(r){function o(H,B){if(r){var K=H.deletions;K===null?(H.deletions=[B],H.flags|=16):K.push(B)}}function l(H,B){if(!r)return null;for(;B!==null;)o(H,B),B=B.sibling;return null}function u(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function m(H,B){return H=rs(H,B),H.index=0,H.sibling=null,H}function g(H,B,K){return H.index=K,r?(K=H.alternate,K!==null?(K=K.index,K<B?(H.flags|=67108866,B):K):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function w(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function C(H,B,K,ae){return B===null||B.tag!==6?(B=Wp(K,H.mode,ae),B.return=H,B):(B=m(B,K),B.return=H,B)}function L(H,B,K,ae){var Ne=K.type;return Ne===S?oe(H,B,K.props.children,ae,K.key):B!==null&&(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&jT(Ne)===B.type)?(B=m(B,K.props),cu(B,K),B.return=H,B):(B=wd(K.type,K.key,K.props,null,H.mode,ae),cu(B,K),B.return=H,B)}function Q(H,B,K,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Xp(K,H.mode,ae),B.return=H,B):(B=m(B,K.children||[]),B.return=H,B)}function oe(H,B,K,ae,Ne){return B===null||B.tag!==7?(B=oa(K,H.mode,ae,Ne),B.return=H,B):(B=m(B,K),B.return=H,B)}function ue(H,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Wp(""+B,H.mode,K),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case T:return K=wd(B.type,B.key,B.props,null,H.mode,K),cu(K,B),K.return=H,K;case A:return B=Xp(B,H.mode,K),B.return=H,B;case R:var ae=B._init;return B=ae(B._payload),ue(H,B,K)}if(yt(B)||j(B))return B=oa(B,H.mode,K,null),B.return=H,B;if(typeof B.then=="function")return ue(H,Bd(B),K);if(B.$$typeof===G)return ue(H,Rd(H,B),K);Fd(H,B)}return null}function Y(H,B,K,ae){var Ne=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ne!==null?null:C(H,B,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case T:return K.key===Ne?L(H,B,K,ae):null;case A:return K.key===Ne?Q(H,B,K,ae):null;case R:return Ne=K._init,K=Ne(K._payload),Y(H,B,K,ae)}if(yt(K)||j(K))return Ne!==null?null:oe(H,B,K,ae,null);if(typeof K.then=="function")return Y(H,B,Bd(K),ae);if(K.$$typeof===G)return Y(H,B,Rd(H,K),ae);Fd(H,K)}return null}function J(H,B,K,ae,Ne){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return H=H.get(K)||null,C(B,H,""+ae,Ne);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case T:return H=H.get(ae.key===null?K:ae.key)||null,L(B,H,ae,Ne);case A:return H=H.get(ae.key===null?K:ae.key)||null,Q(B,H,ae,Ne);case R:var tt=ae._init;return ae=tt(ae._payload),J(H,B,K,ae,Ne)}if(yt(ae)||j(ae))return H=H.get(K)||null,oe(B,H,ae,Ne,null);if(typeof ae.then=="function")return J(H,B,K,Bd(ae),Ne);if(ae.$$typeof===G)return J(H,B,K,Rd(B,ae),Ne);Fd(B,ae)}return null}function Be(H,B,K,ae){for(var Ne=null,tt=null,De=B,Ue=B=0,In=null;De!==null&&Ue<K.length;Ue++){De.index>Ue?(In=De,De=null):In=De.sibling;var gt=Y(H,De,K[Ue],ae);if(gt===null){De===null&&(De=In);break}r&&De&&gt.alternate===null&&o(H,De),B=g(gt,B,Ue),tt===null?Ne=gt:tt.sibling=gt,tt=gt,De=In}if(Ue===K.length)return l(H,De),Et&&la(H,Ue),Ne;if(De===null){for(;Ue<K.length;Ue++)De=ue(H,K[Ue],ae),De!==null&&(B=g(De,B,Ue),tt===null?Ne=De:tt.sibling=De,tt=De);return Et&&la(H,Ue),Ne}for(De=u(De);Ue<K.length;Ue++)In=J(De,H,Ue,K[Ue],ae),In!==null&&(r&&In.alternate!==null&&De.delete(In.key===null?Ue:In.key),B=g(In,B,Ue),tt===null?Ne=In:tt.sibling=In,tt=In);return r&&De.forEach(function(uo){return o(H,uo)}),Et&&la(H,Ue),Ne}function Le(H,B,K,ae){if(K==null)throw Error(i(151));for(var Ne=null,tt=null,De=B,Ue=B=0,In=null,gt=K.next();De!==null&&!gt.done;Ue++,gt=K.next()){De.index>Ue?(In=De,De=null):In=De.sibling;var uo=Y(H,De,gt.value,ae);if(uo===null){De===null&&(De=In);break}r&&De&&uo.alternate===null&&o(H,De),B=g(uo,B,Ue),tt===null?Ne=uo:tt.sibling=uo,tt=uo,De=In}if(gt.done)return l(H,De),Et&&la(H,Ue),Ne;if(De===null){for(;!gt.done;Ue++,gt=K.next())gt=ue(H,gt.value,ae),gt!==null&&(B=g(gt,B,Ue),tt===null?Ne=gt:tt.sibling=gt,tt=gt);return Et&&la(H,Ue),Ne}for(De=u(De);!gt.done;Ue++,gt=K.next())gt=J(De,H,Ue,gt.value,ae),gt!==null&&(r&&gt.alternate!==null&&De.delete(gt.key===null?Ue:gt.key),B=g(gt,B,Ue),tt===null?Ne=gt:tt.sibling=gt,tt=gt);return r&&De.forEach(function(YO){return o(H,YO)}),Et&&la(H,Ue),Ne}function Ot(H,B,K,ae){if(typeof K=="object"&&K!==null&&K.type===S&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case T:e:{for(var Ne=K.key;B!==null;){if(B.key===Ne){if(Ne=K.type,Ne===S){if(B.tag===7){l(H,B.sibling),ae=m(B,K.props.children),ae.return=H,H=ae;break e}}else if(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&jT(Ne)===B.type){l(H,B.sibling),ae=m(B,K.props),cu(ae,K),ae.return=H,H=ae;break e}l(H,B);break}else o(H,B);B=B.sibling}K.type===S?(ae=oa(K.props.children,H.mode,ae,K.key),ae.return=H,H=ae):(ae=wd(K.type,K.key,K.props,null,H.mode,ae),cu(ae,K),ae.return=H,H=ae)}return w(H);case A:e:{for(Ne=K.key;B!==null;){if(B.key===Ne)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){l(H,B.sibling),ae=m(B,K.children||[]),ae.return=H,H=ae;break e}else{l(H,B);break}else o(H,B);B=B.sibling}ae=Xp(K,H.mode,ae),ae.return=H,H=ae}return w(H);case R:return Ne=K._init,K=Ne(K._payload),Ot(H,B,K,ae)}if(yt(K))return Be(H,B,K,ae);if(j(K)){if(Ne=j(K),typeof Ne!="function")throw Error(i(150));return K=Ne.call(K),Le(H,B,K,ae)}if(typeof K.then=="function")return Ot(H,B,Bd(K),ae);if(K.$$typeof===G)return Ot(H,B,Rd(H,K),ae);Fd(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(l(H,B.sibling),ae=m(B,K),ae.return=H,H=ae):(l(H,B),ae=Wp(K,H.mode,ae),ae.return=H,H=ae),w(H)):l(H,B)}return function(H,B,K,ae){try{lu=0;var Ne=Ot(H,B,K,ae);return Cl=null,Ne}catch(De){if(De===Zc||De===xd)throw De;var tt=Ei(29,De,null,H.mode);return tt.lanes=ae,tt.return=H,tt}finally{}}}var Al=BT(!0),FT=BT(!1),ji=ce(null),Rr=null;function Ys(r){var o=r.alternate;me(yn,yn.current&1),me(ji,r),Rr===null&&(o===null||Tl.current!==null||o.memoizedState!==null)&&(Rr=r)}function zT(r){if(r.tag===22){if(me(yn,yn.current),me(ji,r),Rr===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(Rr=r)}}else Ws()}function Ws(){me(yn,yn.current),me(ji,ji.current)}function us(r){we(ji),Rr===r&&(Rr=null),we(yn)}var yn=ce(0);function zd(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||v_(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Ng(r,o,l,u){o=r.memoizedState,l=l(u,o),l=l==null?o:_({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var kg={enqueueSetState:function(r,o,l){r=r._reactInternals;var u=Si(),m=$s(u);m.payload=o,l!=null&&(m.callback=l),o=Ks(r,m,u),o!==null&&(Ci(o,r,u),tu(o,r,u))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var u=Si(),m=$s(u);m.tag=1,m.payload=o,l!=null&&(m.callback=l),o=Ks(r,m,u),o!==null&&(Ci(o,r,u),tu(o,r,u))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Si(),u=$s(l);u.tag=2,o!=null&&(u.callback=o),o=Ks(r,u,l),o!==null&&(Ci(o,r,l),tu(o,r,l))}};function qT(r,o,l,u,m,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,w):o.prototype&&o.prototype.isPureReactComponent?!Gc(l,u)||!Gc(m,g):!0}function HT(r,o,l,u){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,u),o.state!==r&&kg.enqueueReplaceState(o,o.state,null)}function pa(r,o){var l=o;if("ref"in o){l={};for(var u in o)u!=="ref"&&(l[u]=o[u])}if(r=r.defaultProps){l===o&&(l=_({},l));for(var m in r)l[m]===void 0&&(l[m]=r[m])}return l}var qd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function GT(r){qd(r)}function $T(r){console.error(r)}function KT(r){qd(r)}function Hd(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function QT(r,o,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Og(r,o,l){return l=$s(l),l.tag=3,l.payload={element:null},l.callback=function(){Hd(r,o)},l}function YT(r){return r=$s(r),r.tag=3,r}function WT(r,o,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;r.payload=function(){return m(g)},r.callback=function(){QT(o,l,u)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){QT(o,l,u),typeof m!="function"&&(no===null?no=new Set([this]):no.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function Yk(r,o,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=l.alternate,o!==null&&Wc(o,l,m,!0),l=ji.current,l!==null){switch(l.tag){case 13:return Rr===null?n_():l.alternate===null&&en===0&&(en=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===ag?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([u]):o.add(u),r_(r,u,m)),!1;case 22:return l.flags|=65536,u===ag?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([u]):l.add(u)),r_(r,u,m)),!1}throw Error(i(435,l.tag))}return r_(r,u,m),n_(),!1}if(Et)return o=ji.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==eg&&(r=Error(i(422),{cause:u}),Yc(Pi(r,l)))):(u!==eg&&(o=Error(i(423),{cause:u}),Yc(Pi(o,l))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Pi(u,l),m=Og(r.stateNode,u,m),ug(r,m),en!==4&&(en=2)),!1;var g=Error(i(520),{cause:u});if(g=Pi(g,l),gu===null?gu=[g]:gu.push(g),en!==4&&(en=2),o===null)return!0;u=Pi(u,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=m&-m,l.lanes|=r,r=Og(l.stateNode,u,r),ug(l,r),!1;case 1:if(o=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(no===null||!no.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=YT(m),WT(m,r,l,u),ug(l,m),!1}l=l.return}while(l!==null);return!1}var XT=Error(i(461)),An=!1;function Dn(r,o,l,u){o.child=r===null?FT(o,null,l,u):Al(o,r.child,l,u)}function JT(r,o,l,u,m){l=l.render;var g=o.ref;if("ref"in u){var w={};for(var C in u)C!=="ref"&&(w[C]=u[C])}else w=u;return da(o),u=pg(r,o,l,w,g,m),C=gg(),r!==null&&!An?(_g(r,o,m),hs(r,o,m)):(Et&&C&&Jp(o),o.flags|=1,Dn(r,o,u,m),o.child)}function ZT(r,o,l,u,m){if(r===null){var g=l.type;return typeof g=="function"&&!Yp(g)&&g.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=g,eb(r,o,g,u,m)):(r=wd(l.type,null,u,o,o.mode,m),r.ref=o.ref,r.return=o,o.child=r)}if(g=r.child,!Bg(r,m)){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:Gc,l(w,u)&&r.ref===o.ref)return hs(r,o,m)}return o.flags|=1,r=rs(g,u),r.ref=o.ref,r.return=o,o.child=r}function eb(r,o,l,u,m){if(r!==null){var g=r.memoizedProps;if(Gc(g,u)&&r.ref===o.ref)if(An=!1,o.pendingProps=u=g,Bg(r,m))(r.flags&131072)!==0&&(An=!0);else return o.lanes=r.lanes,hs(r,o,m)}return Dg(r,o,l,u,m)}function tb(r,o,l){var u=o.pendingProps,m=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((o.flags&128)!==0){if(u=g!==null?g.baseLanes|l:l,r!==null){for(m=o.child=r.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;o.childLanes=g&~u}else o.childLanes=0,o.child=null;return nb(r,o,u,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Id(o,g!==null?g.cachePool:null),g!==null?eT(o,g):dg(),zT(o);else return o.lanes=o.childLanes=536870912,nb(r,o,g!==null?g.baseLanes|l:l,l)}else g!==null?(Id(o,g.cachePool),eT(o,g),Ws(),o.memoizedState=null):(r!==null&&Id(o,null),dg(),Ws());return Dn(r,o,m,l),o.child}function nb(r,o,l,u){var m=og();return m=m===null?null:{parent:_n._currentValue,pool:m},o.memoizedState={baseLanes:l,cachePool:m},r!==null&&Id(o,null),dg(),zT(o),r!==null&&Wc(r,o,u,!0),null}function Gd(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function Dg(r,o,l,u,m){return da(o),l=pg(r,o,l,u,void 0,m),u=gg(),r!==null&&!An?(_g(r,o,m),hs(r,o,m)):(Et&&u&&Jp(o),o.flags|=1,Dn(r,o,l,m),o.child)}function ib(r,o,l,u,m,g){return da(o),o.updateQueue=null,l=nT(o,u,l,m),tT(r),u=gg(),r!==null&&!An?(_g(r,o,g),hs(r,o,g)):(Et&&u&&Jp(o),o.flags|=1,Dn(r,o,l,g),o.child)}function rb(r,o,l,u,m){if(da(o),o.stateNode===null){var g=gl,w=l.contextType;typeof w=="object"&&w!==null&&(g=zn(w)),g=new l(u,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=kg,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=u,g.state=o.memoizedState,g.refs={},lg(o),w=l.contextType,g.context=typeof w=="object"&&w!==null?zn(w):gl,g.state=o.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Ng(o,l,w,u),g.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&kg.enqueueReplaceState(g,g.state,null),iu(o,u,g,m),nu(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(r===null){g=o.stateNode;var C=o.memoizedProps,L=pa(l,C);g.props=L;var Q=g.context,oe=l.contextType;w=gl,typeof oe=="object"&&oe!==null&&(w=zn(oe));var ue=l.getDerivedStateFromProps;oe=typeof ue=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=o.pendingProps!==C,oe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||Q!==w)&&HT(o,g,u,w),Gs=!1;var Y=o.memoizedState;g.state=Y,iu(o,u,g,m),nu(),Q=o.memoizedState,C||Y!==Q||Gs?(typeof ue=="function"&&(Ng(o,l,ue,u),Q=o.memoizedState),(L=Gs||qT(o,l,L,u,Y,Q,w))?(oe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=Q),g.props=u,g.state=Q,g.context=w,u=L):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{g=o.stateNode,cg(r,o),w=o.memoizedProps,oe=pa(l,w),g.props=oe,ue=o.pendingProps,Y=g.context,Q=l.contextType,L=gl,typeof Q=="object"&&Q!==null&&(L=zn(Q)),C=l.getDerivedStateFromProps,(Q=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==ue||Y!==L)&&HT(o,g,u,L),Gs=!1,Y=o.memoizedState,g.state=Y,iu(o,u,g,m),nu();var J=o.memoizedState;w!==ue||Y!==J||Gs||r!==null&&r.dependencies!==null&&Ad(r.dependencies)?(typeof C=="function"&&(Ng(o,l,C,u),J=o.memoizedState),(oe=Gs||qT(o,l,oe,u,Y,J,L)||r!==null&&r.dependencies!==null&&Ad(r.dependencies))?(Q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,J,L),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,J,L)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&Y===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Y===r.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=J),g.props=u,g.state=J,g.context=L,u=oe):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&Y===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Y===r.memoizedState||(o.flags|=1024),u=!1)}return g=u,Gd(r,o),u=(o.flags&128)!==0,g||u?(g=o.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,r!==null&&u?(o.child=Al(o,r.child,null,m),o.child=Al(o,null,l,m)):Dn(r,o,l,m),o.memoizedState=g.state,r=o.child):r=hs(r,o,m),r}function sb(r,o,l,u){return Qc(),o.flags|=256,Dn(r,o,l,u),o.child}var Mg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pg(r){return{baseLanes:r,cachePool:$0()}}function Lg(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=Bi),r}function ob(r,o,l){var u=o.pendingProps,m=!1,g=(o.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(yn.current&2)!==0),w&&(m=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,r===null){if(Et){if(m?Ys(o):Ws(),Et){var C=Zt,L;if(L=C){e:{for(L=C,C=Ar;L.nodeType!==8;){if(!C){C=null;break e}if(L=ir(L.nextSibling),L===null){C=null;break e}}C=L}C!==null?(o.memoizedState={dehydrated:C,treeContext:aa!==null?{id:ss,overflow:os}:null,retryLane:536870912,hydrationErrors:null},L=Ei(18,null,null,0),L.stateNode=C,L.return=o,o.child=L,ti=o,Zt=null,L=!0):L=!1}L||ua(o)}if(C=o.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return v_(C)?o.lanes=32:o.lanes=536870912,null;us(o)}return C=u.children,u=u.fallback,m?(Ws(),m=o.mode,C=$d({mode:"hidden",children:C},m),u=oa(u,m,l,null),C.return=o,u.return=o,C.sibling=u,o.child=C,m=o.child,m.memoizedState=Pg(l),m.childLanes=Lg(r,w,l),o.memoizedState=Mg,u):(Ys(o),Ug(o,C))}if(L=r.memoizedState,L!==null&&(C=L.dehydrated,C!==null)){if(g)o.flags&256?(Ys(o),o.flags&=-257,o=Vg(r,o,l)):o.memoizedState!==null?(Ws(),o.child=r.child,o.flags|=128,o=null):(Ws(),m=u.fallback,C=o.mode,u=$d({mode:"visible",children:u.children},C),m=oa(m,C,l,null),m.flags|=2,u.return=o,m.return=o,u.sibling=m,o.child=u,Al(o,r.child,null,l),u=o.child,u.memoizedState=Pg(l),u.childLanes=Lg(r,w,l),o.memoizedState=Mg,o=m);else if(Ys(o),v_(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var Q=w.dgst;w=Q,u=Error(i(419)),u.stack="",u.digest=w,Yc({value:u,source:null,stack:null}),o=Vg(r,o,l)}else if(An||Wc(r,o,l,!1),w=(l&r.childLanes)!==0,An||w){if(w=Vt,w!==null&&(u=l&-l,u=(u&42)!==0?1:ln(u),u=(u&(w.suspendedLanes|l))!==0?0:u,u!==0&&u!==L.retryLane))throw L.retryLane=u,pl(r,u),Ci(w,r,u),XT;C.data==="$?"||n_(),o=Vg(r,o,l)}else C.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=L.treeContext,Zt=ir(C.nextSibling),ti=o,Et=!0,ca=null,Ar=!1,r!==null&&(Ui[Vi++]=ss,Ui[Vi++]=os,Ui[Vi++]=aa,ss=r.id,os=r.overflow,aa=o),o=Ug(o,u.children),o.flags|=4096);return o}return m?(Ws(),m=u.fallback,C=o.mode,L=r.child,Q=L.sibling,u=rs(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,Q!==null?m=rs(Q,m):(m=oa(m,C,l,null),m.flags|=2),m.return=o,u.return=o,u.sibling=m,o.child=u,u=m,m=o.child,C=r.child.memoizedState,C===null?C=Pg(l):(L=C.cachePool,L!==null?(Q=_n._currentValue,L=L.parent!==Q?{parent:Q,pool:Q}:L):L=$0(),C={baseLanes:C.baseLanes|l,cachePool:L}),m.memoizedState=C,m.childLanes=Lg(r,w,l),o.memoizedState=Mg,u):(Ys(o),l=r.child,r=l.sibling,l=rs(l,{mode:"visible",children:u.children}),l.return=o,l.sibling=null,r!==null&&(w=o.deletions,w===null?(o.deletions=[r],o.flags|=16):w.push(r)),o.child=l,o.memoizedState=null,l)}function Ug(r,o){return o=$d({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function $d(r,o){return r=Ei(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Vg(r,o,l){return Al(o,r.child,null,l),r=Ug(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function ab(r,o,l){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o),ng(r.return,o,l)}function jg(r,o,l,u,m){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=m)}function lb(r,o,l){var u=o.pendingProps,m=u.revealOrder,g=u.tail;if(Dn(r,o,u.children,l),u=yn.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ab(r,l,o);else if(r.tag===19)ab(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(me(yn,u),m){case"forwards":for(l=o.child,m=null;l!==null;)r=l.alternate,r!==null&&zd(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),jg(o,!1,m,l,g);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(r=m.alternate,r!==null&&zd(r)===null){o.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}jg(o,!0,l,null,g);break;case"together":jg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function hs(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),to|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(Wc(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=rs(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=rs(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function Bg(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Ad(r)))}function Wk(r,o,l){switch(o.tag){case 3:ge(o,o.stateNode.containerInfo),Hs(o,_n,r.memoizedState.cache),Qc();break;case 27:case 5:Ee(o);break;case 4:ge(o,o.stateNode.containerInfo);break;case 10:Hs(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Ys(o),o.flags|=128,null):(l&o.child.childLanes)!==0?ob(r,o,l):(Ys(o),r=hs(r,o,l),r!==null?r.sibling:null);Ys(o);break;case 19:var m=(r.flags&128)!==0;if(u=(l&o.childLanes)!==0,u||(Wc(r,o,l,!1),u=(l&o.childLanes)!==0),m){if(u)return lb(r,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),me(yn,yn.current),u)break;return null;case 22:case 23:return o.lanes=0,tb(r,o,l);case 24:Hs(o,_n,r.memoizedState.cache)}return hs(r,o,l)}function cb(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)An=!0;else{if(!Bg(r,l)&&(o.flags&128)===0)return An=!1,Wk(r,o,l);An=(r.flags&131072)!==0}else An=!1,Et&&(o.flags&1048576)!==0&&j0(o,Cd,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var u=o.elementType,m=u._init;if(u=m(u._payload),o.type=u,typeof u=="function")Yp(u)?(r=pa(u,r),o.tag=1,o=rb(null,o,u,r,l)):(o.tag=0,o=Dg(null,o,u,r,l));else{if(u!=null){if(m=u.$$typeof,m===re){o.tag=11,o=JT(null,o,u,r,l);break e}else if(m===k){o.tag=14,o=ZT(null,o,u,r,l);break e}}throw o=Ze(u)||u,Error(i(306,o,""))}}return o;case 0:return Dg(r,o,o.type,o.pendingProps,l);case 1:return u=o.type,m=pa(u,o.pendingProps),rb(r,o,u,m,l);case 3:e:{if(ge(o,o.stateNode.containerInfo),r===null)throw Error(i(387));u=o.pendingProps;var g=o.memoizedState;m=g.element,cg(r,o),iu(o,u,null,l);var w=o.memoizedState;if(u=w.cache,Hs(o,_n,u),u!==g.cache&&ig(o,[_n],l,!0),nu(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=sb(r,o,u,l);break e}else if(u!==m){m=Pi(Error(i(424)),o),Yc(m),o=sb(r,o,u,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Zt=ir(r.firstChild),ti=o,Et=!0,ca=null,Ar=!0,l=FT(o,null,u,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Qc(),u===m){o=hs(r,o,l);break e}Dn(r,o,u,l)}o=o.child}return o;case 26:return Gd(r,o),r===null?(l=fw(o.type,null,o.pendingProps,null))?o.memoizedState=l:Et||(l=o.type,r=o.pendingProps,u=af(W.current).createElement(l),u[nn]=o,u[Jt]=r,Pn(u,l,r),rn(u),o.stateNode=u):o.memoizedState=fw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Ee(o),r===null&&Et&&(u=o.stateNode=uw(o.type,o.pendingProps,W.current),ti=o,Ar=!0,m=Zt,so(o.type)?(E_=m,Zt=ir(u.firstChild)):Zt=m),Dn(r,o,o.pendingProps.children,l),Gd(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Et&&((m=u=Zt)&&(u=SO(u,o.type,o.pendingProps,Ar),u!==null?(o.stateNode=u,ti=o,Zt=ir(u.firstChild),Ar=!1,m=!0):m=!1),m||ua(o)),Ee(o),m=o.type,g=o.pendingProps,w=r!==null?r.memoizedProps:null,u=g.children,g_(m,g)?u=null:w!==null&&g_(m,w)&&(o.flags|=32),o.memoizedState!==null&&(m=pg(r,o,zk,null,null,l),Cu._currentValue=m),Gd(r,o),Dn(r,o,u,l),o.child;case 6:return r===null&&Et&&((r=l=Zt)&&(l=CO(l,o.pendingProps,Ar),l!==null?(o.stateNode=l,ti=o,Zt=null,r=!0):r=!1),r||ua(o)),null;case 13:return ob(r,o,l);case 4:return ge(o,o.stateNode.containerInfo),u=o.pendingProps,r===null?o.child=Al(o,null,u,l):Dn(r,o,u,l),o.child;case 11:return JT(r,o,o.type,o.pendingProps,l);case 7:return Dn(r,o,o.pendingProps,l),o.child;case 8:return Dn(r,o,o.pendingProps.children,l),o.child;case 12:return Dn(r,o,o.pendingProps.children,l),o.child;case 10:return u=o.pendingProps,Hs(o,o.type,u.value),Dn(r,o,u.children,l),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,da(o),m=zn(m),u=u(m),o.flags|=1,Dn(r,o,u,l),o.child;case 14:return ZT(r,o,o.type,o.pendingProps,l);case 15:return eb(r,o,o.type,o.pendingProps,l);case 19:return lb(r,o,l);case 31:return u=o.pendingProps,l=o.mode,u={mode:u.mode,children:u.children},r===null?(l=$d(u,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=rs(r.child,u),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return tb(r,o,l);case 24:return da(o),u=zn(_n),r===null?(m=og(),m===null&&(m=Vt,g=rg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),o.memoizedState={parent:u,cache:m},lg(o),Hs(o,_n,m)):((r.lanes&l)!==0&&(cg(r,o),iu(o,null,null,l),nu()),m=r.memoizedState,g=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Hs(o,_n,u)):(u=g.cache,Hs(o,_n,u),u!==m.cache&&ig(o,[_n],l,!0))),Dn(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ds(r){r.flags|=4}function ub(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!yw(o)){if(o=ji.current,o!==null&&((dt&4194048)===dt?Rr!==null:(dt&62914560)!==dt&&(dt&536870912)===0||o!==Rr))throw eu=ag,K0;r.flags|=8192}}function Kd(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?He():536870912,r.lanes|=o,Nl|=o)}function uu(r,o){if(!Et)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function $t(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(o)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=l,o}function Xk(r,o,l){var u=o.pendingProps;switch(Zp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(o),null;case 1:return $t(o),null;case 3:return l=o.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ls(_n),pe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Kc(o)?ds(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,z0())),$t(o),null;case 26:return l=o.memoizedState,r===null?(ds(o),l!==null?($t(o),ub(o,l)):($t(o),o.flags&=-16777217)):l?l!==r.memoizedState?(ds(o),$t(o),ub(o,l)):($t(o),o.flags&=-16777217):(r.memoizedProps!==u&&ds(o),$t(o),o.flags&=-16777217),null;case 27:Ae(o),l=W.current;var m=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==u&&ds(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return $t(o),null}r=Z.current,Kc(o)?B0(o):(r=uw(m,u,l),o.stateNode=r,ds(o))}return $t(o),null;case 5:if(Ae(o),l=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==u&&ds(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return $t(o),null}if(r=Z.current,Kc(o))B0(o);else{switch(m=af(W.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?m.createElement(l,{is:u.is}):m.createElement(l)}}r[nn]=o,r[Jt]=u;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=r;e:switch(Pn(r,l,u),l){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ds(o)}}return $t(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==u&&ds(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(i(166));if(r=W.current,Kc(o)){if(r=o.stateNode,l=o.memoizedProps,u=null,m=ti,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[nn]=o,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||iw(r.nodeValue,l)),r||ua(o)}else r=af(r).createTextNode(u),r[nn]=o,o.stateNode=r}return $t(o),null;case 13:if(u=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Kc(o),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[nn]=o}else Qc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;$t(o),m=!1}else m=z0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(us(o),o):(us(o),null)}if(us(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=u!==null,r=r!==null&&r.memoizedState!==null,l){u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)}return l!==r&&l&&(o.child.flags|=8192),Kd(o,o.updateQueue),$t(o),null;case 4:return pe(),r===null&&h_(o.stateNode.containerInfo),$t(o),null;case 10:return ls(o.type),$t(o),null;case 19:if(we(yn),m=o.memoizedState,m===null)return $t(o),null;if(u=(o.flags&128)!==0,g=m.rendering,g===null)if(u)uu(m,!1);else{if(en!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(g=zd(r),g!==null){for(o.flags|=128,uu(m,!1),r=g.updateQueue,o.updateQueue=r,Kd(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)V0(l,r),l=l.sibling;return me(yn,yn.current&1|2),o.child}r=r.sibling}m.tail!==null&&li()>Wd&&(o.flags|=128,u=!0,uu(m,!1),o.lanes=4194304)}else{if(!u)if(r=zd(g),r!==null){if(o.flags|=128,u=!0,r=r.updateQueue,o.updateQueue=r,Kd(o,r),uu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!Et)return $t(o),null}else 2*li()-m.renderingStartTime>Wd&&l!==536870912&&(o.flags|=128,u=!0,uu(m,!1),o.lanes=4194304);m.isBackwards?(g.sibling=o.child,o.child=g):(r=m.last,r!==null?r.sibling=g:o.child=g,m.last=g)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=li(),o.sibling=null,r=yn.current,me(yn,u?r&1|2:r&1),o):($t(o),null);case 22:case 23:return us(o),fg(),u=o.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(l&536870912)!==0&&(o.flags&128)===0&&($t(o),o.subtreeFlags&6&&(o.flags|=8192)):$t(o),l=o.updateQueue,l!==null&&Kd(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==l&&(o.flags|=2048),r!==null&&we(fa),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),ls(_n),$t(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Jk(r,o){switch(Zp(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ls(_n),pe(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Ae(o),null;case 13:if(us(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Qc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return we(yn),null;case 4:return pe(),null;case 10:return ls(o.type),null;case 22:case 23:return us(o),fg(),r!==null&&we(fa),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ls(_n),null;case 25:return null;default:return null}}function hb(r,o){switch(Zp(o),o.tag){case 3:ls(_n),pe();break;case 26:case 27:case 5:Ae(o);break;case 4:pe();break;case 13:us(o);break;case 19:we(yn);break;case 10:ls(o.type);break;case 22:case 23:us(o),fg(),r!==null&&we(fa);break;case 24:ls(_n)}}function hu(r,o){try{var l=o.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&r)===r){u=void 0;var g=l.create,w=l.inst;u=g(),w.destroy=u}l=l.next}while(l!==m)}}catch(C){Mt(o,o.return,C)}}function Xs(r,o,l){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&r)===r){var w=u.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,m=o;var L=l,Q=C;try{Q()}catch(oe){Mt(m,L,oe)}}}u=u.next}while(u!==g)}}catch(oe){Mt(o,o.return,oe)}}function db(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{Z0(o,l)}catch(u){Mt(r,r.return,u)}}}function fb(r,o,l){l.props=pa(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){Mt(r,o,u)}}function du(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(m){Mt(r,o,m)}}function Ir(r,o){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){Mt(r,o,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Mt(r,o,m)}else l.current=null}function mb(r){var o=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){Mt(r,r.return,m)}}function Fg(r,o,l){try{var u=r.stateNode;vO(u,r.type,l,o),u[Jt]=o}catch(m){Mt(r,r.return,m)}}function pb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&so(r.type)||r.tag===4}function zg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||pb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&so(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function qg(r,o,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=of));else if(u!==4&&(u===27&&so(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(qg(r,o,l),r=r.sibling;r!==null;)qg(r,o,l),r=r.sibling}function Qd(r,o,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(u!==4&&(u===27&&so(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Qd(r,o,l),r=r.sibling;r!==null;)Qd(r,o,l),r=r.sibling}function gb(r){var o=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);Pn(o,u,l),o[nn]=r,o[Jt]=l}catch(g){Mt(r,r.return,g)}}var fs=!1,on=!1,Hg=!1,_b=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function Zk(r,o){if(r=r.containerInfo,m_=ff,r=I0(r),zp(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,C=-1,L=-1,Q=0,oe=0,ue=r,Y=null;t:for(;;){for(var J;ue!==l||m!==0&&ue.nodeType!==3||(C=w+m),ue!==g||u!==0&&ue.nodeType!==3||(L=w+u),ue.nodeType===3&&(w+=ue.nodeValue.length),(J=ue.firstChild)!==null;)Y=ue,ue=J;for(;;){if(ue===r)break t;if(Y===l&&++Q===m&&(C=w),Y===g&&++oe===u&&(L=w),(J=ue.nextSibling)!==null)break;ue=Y,Y=ue.parentNode}ue=J}l=C===-1||L===-1?null:{start:C,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(p_={focusedElem:r,selectionRange:l},ff=!1,Rn=o;Rn!==null;)if(o=Rn,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,Rn=r;else for(;Rn!==null;){switch(o=Rn,g=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=o,m=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var Be=pa(l.type,m,l.elementType===l.type);r=u.getSnapshotBeforeUpdate(Be,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(Le){Mt(l,l.return,Le)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)y_(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":y_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Rn=r;break}Rn=o.return}}function yb(r,o,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Js(r,l),u&4&&hu(5,l);break;case 1:if(Js(r,l),u&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(w){Mt(l,l.return,w)}else{var m=pa(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(m,o,r.__reactInternalSnapshotBeforeUpdate)}catch(w){Mt(l,l.return,w)}}u&64&&db(l),u&512&&du(l,l.return);break;case 3:if(Js(r,l),u&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Z0(r,o)}catch(w){Mt(l,l.return,w)}}break;case 27:o===null&&u&4&&gb(l);case 26:case 5:Js(r,l),o===null&&u&4&&mb(l),u&512&&du(l,l.return);break;case 12:Js(r,l);break;case 13:Js(r,l),u&4&&Tb(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=lO.bind(null,l),AO(r,l))));break;case 22:if(u=l.memoizedState!==null||fs,!u){o=o!==null&&o.memoizedState!==null||on,m=fs;var g=on;fs=u,(on=o)&&!g?Zs(r,l,(l.subtreeFlags&8772)!==0):Js(r,l),fs=m,on=g}break;case 30:break;default:Js(r,l)}}function vb(r){var o=r.alternate;o!==null&&(r.alternate=null,vb(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Bs(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Gt=null,hi=!1;function ms(r,o,l){for(l=l.child;l!==null;)Eb(r,o,l),l=l.sibling}function Eb(r,o,l){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Se,l)}catch{}switch(l.tag){case 26:on||Ir(l,o),ms(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||Ir(l,o);var u=Gt,m=hi;so(l.type)&&(Gt=l.stateNode,hi=!1),ms(r,o,l),Tu(l.stateNode),Gt=u,hi=m;break;case 5:on||Ir(l,o);case 6:if(u=Gt,m=hi,Gt=null,ms(r,o,l),Gt=u,hi=m,Gt!==null)if(hi)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(l.stateNode)}catch(g){Mt(l,o,g)}else try{Gt.removeChild(l.stateNode)}catch(g){Mt(l,o,g)}break;case 18:Gt!==null&&(hi?(r=Gt,lw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),xu(r)):lw(Gt,l.stateNode));break;case 4:u=Gt,m=hi,Gt=l.stateNode.containerInfo,hi=!0,ms(r,o,l),Gt=u,hi=m;break;case 0:case 11:case 14:case 15:on||Xs(2,l,o),on||Xs(4,l,o),ms(r,o,l);break;case 1:on||(Ir(l,o),u=l.stateNode,typeof u.componentWillUnmount=="function"&&fb(l,o,u)),ms(r,o,l);break;case 21:ms(r,o,l);break;case 22:on=(u=on)||l.memoizedState!==null,ms(r,o,l),on=u;break;default:ms(r,o,l)}}function Tb(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{xu(r)}catch(l){Mt(o,o.return,l)}}function eO(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new _b),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new _b),o;default:throw Error(i(435,r.tag))}}function Gg(r,o){var l=eO(r);o.forEach(function(u){var m=cO.bind(null,r,u);l.has(u)||(l.add(u),u.then(m,m))})}function Ti(r,o){var l=o.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],g=r,w=o,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(so(C.type)){Gt=C.stateNode,hi=!1;break e}break;case 5:Gt=C.stateNode,hi=!1;break e;case 3:case 4:Gt=C.stateNode.containerInfo,hi=!0;break e}C=C.return}if(Gt===null)throw Error(i(160));Eb(g,w,m),Gt=null,hi=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)bb(o,r),o=o.sibling}var nr=null;function bb(r,o){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ti(o,r),bi(r),u&4&&(Xs(3,r,r.return),hu(3,r),Xs(5,r,r.return));break;case 1:Ti(o,r),bi(r),u&512&&(on||l===null||Ir(l,l.return)),u&64&&fs&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=nr;if(Ti(o,r),bi(r),u&512&&(on||l===null||Ir(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Ho]||g[nn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),Pn(g,u,l),g[nn]=r,rn(g),u=g;break e;case"link":var w=gw("link","href",m).get(u+(l.href||""));if(w){for(var C=0;C<w.length;C++)if(g=w[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(C,1);break t}}g=m.createElement(u),Pn(g,u,l),m.head.appendChild(g);break;case"meta":if(w=gw("meta","content",m).get(u+(l.content||""))){for(C=0;C<w.length;C++)if(g=w[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(C,1);break t}}g=m.createElement(u),Pn(g,u,l),m.head.appendChild(g);break;default:throw Error(i(468,u))}g[nn]=r,rn(g),u=g}r.stateNode=u}else _w(m,r.type,r.stateNode);else r.stateNode=pw(m,u,r.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?_w(m,r.type,r.stateNode):pw(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Fg(r,r.memoizedProps,l.memoizedProps)}break;case 27:Ti(o,r),bi(r),u&512&&(on||l===null||Ir(l,l.return)),l!==null&&u&4&&Fg(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Ti(o,r),bi(r),u&512&&(on||l===null||Ir(l,l.return)),r.flags&32){m=r.stateNode;try{ki(m,"")}catch(J){Mt(r,r.return,J)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Fg(r,m,l!==null?l.memoizedProps:m)),u&1024&&(Hg=!0);break;case 6:if(Ti(o,r),bi(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(J){Mt(r,r.return,J)}}break;case 3:if(uf=null,m=nr,nr=lf(o.containerInfo),Ti(o,r),nr=m,bi(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{xu(o.containerInfo)}catch(J){Mt(r,r.return,J)}Hg&&(Hg=!1,wb(r));break;case 4:u=nr,nr=lf(r.stateNode.containerInfo),Ti(o,r),bi(r),nr=u;break;case 12:Ti(o,r),bi(r);break;case 13:Ti(o,r),bi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Xg=li()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Gg(r,u)));break;case 22:m=r.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Q=fs,oe=on;if(fs=Q||m,on=oe||L,Ti(o,r),on=oe,fs=Q,bi(r),u&8192)e:for(o=r.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(l===null||L||fs||on||ga(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){L=l=o;try{if(g=L.stateNode,m)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=L.stateNode;var ue=L.memoizedProps.style,Y=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(J){Mt(L,L.return,J)}}}else if(o.tag===6){if(l===null){L=o;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(J){Mt(L,L.return,J)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Gg(r,l))));break;case 19:Ti(o,r),bi(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Gg(r,u)));break;case 30:break;case 21:break;default:Ti(o,r),bi(r)}}function bi(r){var o=r.flags;if(o&2){try{for(var l,u=r.return;u!==null;){if(pb(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,g=zg(r);Qd(r,g,m);break;case 5:var w=l.stateNode;l.flags&32&&(ki(w,""),l.flags&=-33);var C=zg(r);Qd(r,C,w);break;case 3:case 4:var L=l.stateNode.containerInfo,Q=zg(r);qg(r,Q,L);break;default:throw Error(i(161))}}catch(oe){Mt(r,r.return,oe)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function wb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;wb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Js(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)yb(r,o.alternate,o),o=o.sibling}function ga(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Xs(4,o,o.return),ga(o);break;case 1:Ir(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&fb(o,o.return,l),ga(o);break;case 27:Tu(o.stateNode);case 26:case 5:Ir(o,o.return),ga(o);break;case 22:o.memoizedState===null&&ga(o);break;case 30:ga(o);break;default:ga(o)}r=r.sibling}}function Zs(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=r,g=o,w=g.flags;switch(g.tag){case 0:case 11:case 15:Zs(m,g,l),hu(4,g);break;case 1:if(Zs(m,g,l),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){Mt(u,u.return,Q)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)J0(L[m],C)}catch(Q){Mt(u,u.return,Q)}}l&&w&64&&db(g),du(g,g.return);break;case 27:gb(g);case 26:case 5:Zs(m,g,l),l&&u===null&&w&4&&mb(g),du(g,g.return);break;case 12:Zs(m,g,l);break;case 13:Zs(m,g,l),l&&w&4&&Tb(m,g);break;case 22:g.memoizedState===null&&Zs(m,g,l),du(g,g.return);break;case 30:break;default:Zs(m,g,l)}o=o.sibling}}function $g(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Xc(l))}function Kg(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Xc(r))}function xr(r,o,l,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Sb(r,o,l,u),o=o.sibling}function Sb(r,o,l,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:xr(r,o,l,u),m&2048&&hu(9,o);break;case 1:xr(r,o,l,u);break;case 3:xr(r,o,l,u),m&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Xc(r)));break;case 12:if(m&2048){xr(r,o,l,u),r=o.stateNode;try{var g=o.memoizedProps,w=g.id,C=g.onPostCommit;typeof C=="function"&&C(w,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){Mt(o,o.return,L)}}else xr(r,o,l,u);break;case 13:xr(r,o,l,u);break;case 23:break;case 22:g=o.stateNode,w=o.alternate,o.memoizedState!==null?g._visibility&2?xr(r,o,l,u):fu(r,o):g._visibility&2?xr(r,o,l,u):(g._visibility|=2,Rl(r,o,l,u,(o.subtreeFlags&10256)!==0)),m&2048&&$g(w,o);break;case 24:xr(r,o,l,u),m&2048&&Kg(o.alternate,o);break;default:xr(r,o,l,u)}}function Rl(r,o,l,u,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var g=r,w=o,C=l,L=u,Q=w.flags;switch(w.tag){case 0:case 11:case 15:Rl(g,w,C,L,m),hu(8,w);break;case 23:break;case 22:var oe=w.stateNode;w.memoizedState!==null?oe._visibility&2?Rl(g,w,C,L,m):fu(g,w):(oe._visibility|=2,Rl(g,w,C,L,m)),m&&Q&2048&&$g(w.alternate,w);break;case 24:Rl(g,w,C,L,m),m&&Q&2048&&Kg(w.alternate,w);break;default:Rl(g,w,C,L,m)}o=o.sibling}}function fu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,u=o,m=u.flags;switch(u.tag){case 22:fu(l,u),m&2048&&$g(u.alternate,u);break;case 24:fu(l,u),m&2048&&Kg(u.alternate,u);break;default:fu(l,u)}o=o.sibling}}var mu=8192;function Il(r){if(r.subtreeFlags&mu)for(r=r.child;r!==null;)Cb(r),r=r.sibling}function Cb(r){switch(r.tag){case 26:Il(r),r.flags&mu&&r.memoizedState!==null&&jO(nr,r.memoizedState,r.memoizedProps);break;case 5:Il(r);break;case 3:case 4:var o=nr;nr=lf(r.stateNode.containerInfo),Il(r),nr=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=mu,mu=16777216,Il(r),mu=o):Il(r));break;default:Il(r)}}function Ab(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function pu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];Rn=u,Ib(u,r)}Ab(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Rb(r),r=r.sibling}function Rb(r){switch(r.tag){case 0:case 11:case 15:pu(r),r.flags&2048&&Xs(9,r,r.return);break;case 3:pu(r);break;case 12:pu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Yd(r)):pu(r);break;default:pu(r)}}function Yd(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];Rn=u,Ib(u,r)}Ab(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Xs(8,o,o.return),Yd(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Yd(o));break;default:Yd(o)}r=r.sibling}}function Ib(r,o){for(;Rn!==null;){var l=Rn;switch(l.tag){case 0:case 11:case 15:Xs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Xc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Rn=u;else e:for(l=r;Rn!==null;){u=Rn;var m=u.sibling,g=u.return;if(vb(u),u===l){Rn=null;break e}if(m!==null){m.return=g,Rn=m;break e}Rn=g}}}var tO={getCacheForType:function(r){var o=zn(_n),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l}},nO=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Vt=null,ot=null,dt=0,At=0,wi=null,eo=!1,xl=!1,Qg=!1,ps=0,en=0,to=0,_a=0,Yg=0,Bi=0,Nl=0,gu=null,di=null,Wg=!1,Xg=0,Wd=1/0,Xd=null,no=null,Mn=0,io=null,kl=null,Ol=0,Jg=0,Zg=null,xb=null,_u=0,e_=null;function Si(){if((Ct&2)!==0&&dt!==0)return dt&-dt;if(ne.T!==null){var r=vl;return r!==0?r:a_()}return cn()}function Nb(){Bi===0&&(Bi=(dt&536870912)===0||Et?Pt():536870912);var r=ji.current;return r!==null&&(r.flags|=32),Bi}function Ci(r,o,l){(r===Vt&&(At===2||At===9)||r.cancelPendingCommit!==null)&&(Dl(r,0),ro(r,dt,Bi,!1)),Me(r,l),((Ct&2)===0||r!==Vt)&&(r===Vt&&((Ct&2)===0&&(_a|=l),en===4&&ro(r,dt,Bi,!1)),Nr(r))}function kb(r,o,l){if((Ct&6)!==0)throw Error(i(327));var u=!l&&(o&124)===0&&(o&r.expiredLanes)===0||ci(r,o),m=u?sO(r,o):i_(r,o,!0),g=u;do{if(m===0){xl&&!u&&ro(r,o,0,!1);break}else{if(l=r.current.alternate,g&&!iO(l)){m=i_(r,o,!1),g=!1;continue}if(m===2){if(g=o,r.errorRecoveryDisabledLanes&g)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var C=r;m=gu;var L=C.current.memoizedState.isDehydrated;if(L&&(Dl(C,w).flags|=256),w=i_(C,w,!1),w!==2){if(Qg&&!L){C.errorRecoveryDisabledLanes|=g,_a|=g,m=4;break e}g=di,di=m,g!==null&&(di===null?di=g:di.push.apply(di,g))}m=w}if(g=!1,m!==2)continue}}if(m===1){Dl(r,0),ro(r,o,0,!0);break}e:{switch(u=r,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ro(u,o,Bi,!eo);break e;case 2:di=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(m=Xg+300-li(),10<m)){if(ro(u,o,Bi,!eo),Ni(u,0,!0)!==0)break e;u.timeoutHandle=ow(Ob.bind(null,u,l,di,Xd,Wg,o,Bi,_a,Nl,eo,g,2,-0,0),m);break e}Ob(u,l,di,Xd,Wg,o,Bi,_a,Nl,eo,g,0,-0,0)}}break}while(!0);Nr(r)}function Ob(r,o,l,u,m,g,w,C,L,Q,oe,ue,Y,J){if(r.timeoutHandle=-1,ue=o.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(Su={stylesheets:null,count:0,unsuspend:VO},Cb(o),ue=BO(),ue!==null)){r.cancelPendingCommit=ue(jb.bind(null,r,o,g,l,u,m,w,C,L,oe,1,Y,J)),ro(r,g,w,!Q);return}jb(r,o,g,l,u,m,w,C,L)}function iO(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],g=m.getSnapshot;m=m.value;try{if(!vi(g(),m))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ro(r,o,l,u){o&=~Yg,o&=~_a,r.suspendedLanes|=o,r.pingedLanes&=~o,u&&(r.warmLanes|=o),u=r.expirationTimes;for(var m=o;0<m;){var g=31-Ie(m),w=1<<g;u[g]=-1,m&=~w}l!==0&&Ye(r,l,o)}function Jd(){return(Ct&6)===0?(yu(0),!1):!0}function t_(){if(ot!==null){if(At===0)var r=ot.return;else r=ot,as=ha=null,yg(r),Cl=null,lu=0,r=ot;for(;r!==null;)hb(r.alternate,r),r=r.return;ot=null}}function Dl(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,TO(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),t_(),Vt=r,ot=l=rs(r.current,null),dt=o,At=0,wi=null,eo=!1,xl=ci(r,o),Qg=!1,Nl=Bi=Yg=_a=to=en=0,di=gu=null,Wg=!1,(o&8)!==0&&(o|=o&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=o;0<u;){var m=31-Ie(u),g=1<<m;o|=r[m],u&=~g}return ps=o,Ed(),l}function Db(r,o){Xe=null,ne.H=jd,o===Zc||o===xd?(o=W0(),At=3):o===K0?(o=W0(),At=4):At=o===XT?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,wi=o,ot===null&&(en=1,Hd(r,Pi(o,r.current)))}function Mb(){var r=ne.H;return ne.H=jd,r===null?jd:r}function Pb(){var r=ne.A;return ne.A=tO,r}function n_(){en=4,eo||(dt&4194048)!==dt&&ji.current!==null||(xl=!0),(to&134217727)===0&&(_a&134217727)===0||Vt===null||ro(Vt,dt,Bi,!1)}function i_(r,o,l){var u=Ct;Ct|=2;var m=Mb(),g=Pb();(Vt!==r||dt!==o)&&(Xd=null,Dl(r,o)),o=!1;var w=en;e:do try{if(At!==0&&ot!==null){var C=ot,L=wi;switch(At){case 8:t_(),w=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(o=!0);var Q=At;if(At=0,wi=null,Ml(r,C,L,Q),l&&xl){w=0;break e}break;default:Q=At,At=0,wi=null,Ml(r,C,L,Q)}}rO(),w=en;break}catch(oe){Db(r,oe)}while(!0);return o&&r.shellSuspendCounter++,as=ha=null,Ct=u,ne.H=m,ne.A=g,ot===null&&(Vt=null,dt=0,Ed()),w}function rO(){for(;ot!==null;)Lb(ot)}function sO(r,o){var l=Ct;Ct|=2;var u=Mb(),m=Pb();Vt!==r||dt!==o?(Xd=null,Wd=li()+500,Dl(r,o)):xl=ci(r,o);e:do try{if(At!==0&&ot!==null){o=ot;var g=wi;t:switch(At){case 1:At=0,wi=null,Ml(r,o,g,1);break;case 2:case 9:if(Q0(g)){At=0,wi=null,Ub(o);break}o=function(){At!==2&&At!==9||Vt!==r||(At=7),Nr(r)},g.then(o,o);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:Q0(g)?(At=0,wi=null,Ub(o)):(At=0,wi=null,Ml(r,o,g,7));break;case 5:var w=null;switch(ot.tag){case 26:w=ot.memoizedState;case 5:case 27:var C=ot;if(!w||yw(w)){At=0,wi=null;var L=C.sibling;if(L!==null)ot=L;else{var Q=C.return;Q!==null?(ot=Q,Zd(Q)):ot=null}break t}}At=0,wi=null,Ml(r,o,g,5);break;case 6:At=0,wi=null,Ml(r,o,g,6);break;case 8:t_(),en=6;break e;default:throw Error(i(462))}}oO();break}catch(oe){Db(r,oe)}while(!0);return as=ha=null,ne.H=u,ne.A=m,Ct=l,ot!==null?0:(Vt=null,dt=0,Ed(),en)}function oO(){for(;ot!==null&&!mr();)Lb(ot)}function Lb(r){var o=cb(r.alternate,r,ps);r.memoizedProps=r.pendingProps,o===null?Zd(r):ot=o}function Ub(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=ib(l,o,o.pendingProps,o.type,void 0,dt);break;case 11:o=ib(l,o,o.pendingProps,o.type.render,o.ref,dt);break;case 5:yg(o);default:hb(l,o),o=ot=V0(o,ps),o=cb(l,o,ps)}r.memoizedProps=r.pendingProps,o===null?Zd(r):ot=o}function Ml(r,o,l,u){as=ha=null,yg(o),Cl=null,lu=0;var m=o.return;try{if(Yk(r,m,o,l,dt)){en=1,Hd(r,Pi(l,r.current)),ot=null;return}}catch(g){if(m!==null)throw ot=m,g;en=1,Hd(r,Pi(l,r.current)),ot=null;return}o.flags&32768?(Et||u===1?r=!0:xl||(dt&536870912)!==0?r=!1:(eo=r=!0,(u===2||u===9||u===3||u===6)&&(u=ji.current,u!==null&&u.tag===13&&(u.flags|=16384))),Vb(o,r)):Zd(o)}function Zd(r){var o=r;do{if((o.flags&32768)!==0){Vb(o,eo);return}r=o.return;var l=Xk(o.alternate,o,ps);if(l!==null){ot=l;return}if(o=o.sibling,o!==null){ot=o;return}ot=o=r}while(o!==null);en===0&&(en=5)}function Vb(r,o){do{var l=Jk(r.alternate,r);if(l!==null){l.flags&=32767,ot=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){ot=r;return}ot=r=l}while(r!==null);en=6,ot=null}function jb(r,o,l,u,m,g,w,C,L){r.cancelPendingCommit=null;do ef();while(Mn!==0);if((Ct&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(g=o.lanes|o.childLanes,g|=Kp,Ke(r,l,g,w,C,L),r===Vt&&(ot=Vt=null,dt=0),kl=o,io=r,Ol=l,Jg=g,Zg=m,xb=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,uO($r,function(){return Hb(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=ne.T,ne.T=null,m=be.p,be.p=2,w=Ct,Ct|=4;try{Zk(r,o,l)}finally{Ct=w,be.p=m,ne.T=u}}Mn=1,Bb(),Fb(),zb()}}function Bb(){if(Mn===1){Mn=0;var r=io,o=kl,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null;var u=be.p;be.p=2;var m=Ct;Ct|=4;try{bb(o,r);var g=p_,w=I0(r.containerInfo),C=g.focusedElem,L=g.selectionRange;if(w!==C&&C&&C.ownerDocument&&R0(C.ownerDocument.documentElement,C)){if(L!==null&&zp(C)){var Q=L.start,oe=L.end;if(oe===void 0&&(oe=Q),"selectionStart"in C)C.selectionStart=Q,C.selectionEnd=Math.min(oe,C.value.length);else{var ue=C.ownerDocument||document,Y=ue&&ue.defaultView||window;if(Y.getSelection){var J=Y.getSelection(),Be=C.textContent.length,Le=Math.min(L.start,Be),Ot=L.end===void 0?Le:Math.min(L.end,Be);!J.extend&&Le>Ot&&(w=Ot,Ot=Le,Le=w);var H=A0(C,Le),B=A0(C,Ot);if(H&&B&&(J.rangeCount!==1||J.anchorNode!==H.node||J.anchorOffset!==H.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var K=ue.createRange();K.setStart(H.node,H.offset),J.removeAllRanges(),Le>Ot?(J.addRange(K),J.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),J.addRange(K))}}}}for(ue=[],J=C;J=J.parentNode;)J.nodeType===1&&ue.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ue.length;C++){var ae=ue[C];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}ff=!!m_,p_=m_=null}finally{Ct=m,be.p=u,ne.T=l}}r.current=o,Mn=2}}function Fb(){if(Mn===2){Mn=0;var r=io,o=kl,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=ne.T,ne.T=null;var u=be.p;be.p=2;var m=Ct;Ct|=4;try{yb(r,o.alternate,o)}finally{Ct=m,be.p=u,ne.T=l}}Mn=3}}function zb(){if(Mn===4||Mn===3){Mn=0,ai();var r=io,o=kl,l=Ol,u=xb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Mn=5:(Mn=0,kl=io=null,qb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(no=null),Xn(l),o=o.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Se,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=ne.T,m=be.p,be.p=2,ne.T=null;try{for(var g=r.onRecoverableError,w=0;w<u.length;w++){var C=u[w];g(C.value,{componentStack:C.stack})}}finally{ne.T=o,be.p=m}}(Ol&3)!==0&&ef(),Nr(r),m=r.pendingLanes,(l&4194090)!==0&&(m&42)!==0?r===e_?_u++:(_u=0,e_=r):_u=0,yu(0)}}function qb(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Xc(o)))}function ef(r){return Bb(),Fb(),zb(),Hb()}function Hb(){if(Mn!==5)return!1;var r=io,o=Jg;Jg=0;var l=Xn(Ol),u=ne.T,m=be.p;try{be.p=32>l?32:l,ne.T=null,l=Zg,Zg=null;var g=io,w=Ol;if(Mn=0,kl=io=null,Ol=0,(Ct&6)!==0)throw Error(i(331));var C=Ct;if(Ct|=4,Rb(g.current),Sb(g,g.current,w,l),Ct=C,yu(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Se,g)}catch{}return!0}finally{be.p=m,ne.T=u,qb(r,o)}}function Gb(r,o,l){o=Pi(l,o),o=Og(r.stateNode,o,2),r=Ks(r,o,2),r!==null&&(Me(r,2),Nr(r))}function Mt(r,o,l){if(r.tag===3)Gb(r,r,l);else for(;o!==null;){if(o.tag===3){Gb(o,r,l);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(no===null||!no.has(u))){r=Pi(l,r),l=YT(2),u=Ks(o,l,2),u!==null&&(WT(l,u,o,r),Me(u,2),Nr(u));break}}o=o.return}}function r_(r,o,l){var u=r.pingCache;if(u===null){u=r.pingCache=new nO;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(l)||(Qg=!0,m.add(l),r=aO.bind(null,r,o,l),o.then(r,r))}function aO(r,o,l){var u=r.pingCache;u!==null&&u.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,Vt===r&&(dt&l)===l&&(en===4||en===3&&(dt&62914560)===dt&&300>li()-Xg?(Ct&2)===0&&Dl(r,0):Yg|=l,Nl===dt&&(Nl=0)),Nr(r)}function $b(r,o){o===0&&(o=He()),r=pl(r,o),r!==null&&(Me(r,o),Nr(r))}function lO(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),$b(r,l)}function cO(r,o){var l=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(o),$b(r,l)}function uO(r,o){return Ht(r,o)}var tf=null,Pl=null,s_=!1,nf=!1,o_=!1,ya=0;function Nr(r){r!==Pl&&r.next===null&&(Pl===null?tf=Pl=r:Pl=Pl.next=r),nf=!0,s_||(s_=!0,dO())}function yu(r,o){if(!o_&&nf){o_=!0;do for(var l=!1,u=tf;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var w=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-Ie(42|r)+1)-1,g&=m&~(w&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Wb(u,g))}else g=dt,g=Ni(u,u===Vt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ci(u,g)||(l=!0,Wb(u,g));u=u.next}while(l);o_=!1}}function hO(){Kb()}function Kb(){nf=s_=!1;var r=0;ya!==0&&(EO()&&(r=ya),ya=0);for(var o=li(),l=null,u=tf;u!==null;){var m=u.next,g=Qb(u,o);g===0?(u.next=null,l===null?tf=m:l.next=m,m===null&&(Pl=l)):(l=u,(r!==0||(g&3)!==0)&&(nf=!0)),u=m}yu(r)}function Qb(r,o){for(var l=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var w=31-Ie(g),C=1<<w,L=m[w];L===-1?((C&l)===0||(C&u)!==0)&&(m[w]=St(C,o)):L<=o&&(r.expiredLanes|=C),g&=~C}if(o=Vt,l=dt,l=Ni(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===o&&(At===2||At===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Wi(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ci(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(u!==null&&Wi(u),Xn(l)){case 2:case 8:l=js;break;case 32:l=$r;break;case 268435456:l=q;break;default:l=$r}return u=Yb.bind(null,r),l=Ht(l,u),r.callbackPriority=o,r.callbackNode=l,o}return u!==null&&u!==null&&Wi(u),r.callbackPriority=2,r.callbackNode=null,2}function Yb(r,o){if(Mn!==0&&Mn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(ef()&&r.callbackNode!==l)return null;var u=dt;return u=Ni(r,r===Vt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(kb(r,u,o),Qb(r,li()),r.callbackNode!=null&&r.callbackNode===l?Yb.bind(null,r):null)}function Wb(r,o){if(ef())return null;kb(r,o,!0)}function dO(){bO(function(){(Ct&6)!==0?Ht(zo,hO):Kb()})}function a_(){return ya===0&&(ya=Pt()),ya}function Xb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:il(""+r)}function Jb(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function fO(r,o,l,u,m){if(o==="submit"&&l&&l.stateNode===m){var g=Xb((m[Jt]||null).action),w=u.submitter;w&&(o=(o=w[Jt]||null)?Xb(o.formAction):w.getAttribute("formAction"),o!==null&&(g=o,w=null));var C=new rl("action","action",null,u,m);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ya!==0){var L=w?Jb(m,w):new FormData(m);Rg(l,{pending:!0,data:L,method:m.method,action:g},null,L)}}else typeof g=="function"&&(C.preventDefault(),L=w?Jb(m,w):new FormData(m),Rg(l,{pending:!0,data:L,method:m.method,action:g},g,L))},currentTarget:m}]})}}for(var l_=0;l_<$p.length;l_++){var c_=$p[l_],mO=c_.toLowerCase(),pO=c_[0].toUpperCase()+c_.slice(1);tr(mO,"on"+pO)}tr(k0,"onAnimationEnd"),tr(O0,"onAnimationIteration"),tr(D0,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(Ok,"onTransitionRun"),tr(Dk,"onTransitionStart"),tr(Mk,"onTransitionCancel"),tr(M0,"onTransitionEnd"),Yr("onMouseEnter",["mouseout","mouseover"]),Yr("onMouseLeave",["mouseout","mouseover"]),Yr("onPointerEnter",["pointerout","pointerover"]),Yr("onPointerLeave",["pointerout","pointerover"]),Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function Zb(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],m=u.event;u=u.listeners;e:{var g=void 0;if(o)for(var w=u.length-1;0<=w;w--){var C=u[w],L=C.instance,Q=C.currentTarget;if(C=C.listener,L!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=Q;try{g(m)}catch(oe){qd(oe)}m.currentTarget=null,g=L}else for(w=0;w<u.length;w++){if(C=u[w],L=C.instance,Q=C.currentTarget,C=C.listener,L!==g&&m.isPropagationStopped())break e;g=C,m.currentTarget=Q;try{g(m)}catch(oe){qd(oe)}m.currentTarget=null,g=L}}}}function at(r,o){var l=o[Ji];l===void 0&&(l=o[Ji]=new Set);var u=r+"__bubble";l.has(u)||(ew(o,r,2,!1),l.add(u))}function u_(r,o,l){var u=0;o&&(u|=4),ew(l,r,u,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function h_(r){if(!r[rf]){r[rf]=!0,kc.forEach(function(l){l!=="selectionchange"&&(gO.has(l)||u_(l,!1,r),u_(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[rf]||(o[rf]=!0,u_("selectionchange",!1,o))}}function ew(r,o,l,u){switch(Sw(o)){case 2:var m=qO;break;case 8:m=HO;break;default:m=C_}l=m.bind(null,o,l,r),m=void 0,!Di||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(o,l,{capture:!0,passive:m}):r.addEventListener(o,l,!0):m!==void 0?r.addEventListener(o,l,{passive:m}):r.addEventListener(o,l,!1)}function d_(r,o,l,u,m){var g=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var C=u.stateNode.containerInfo;if(C===m)break;if(w===4)for(w=u.return;w!==null;){var L=w.tag;if((L===3||L===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;C!==null;){if(w=Qr(C),w===null)return;if(L=w.tag,L===5||L===6||L===26||L===27){u=g=w;continue e}C=C.parentNode}}u=u.return}sd(function(){var Q=g,oe=Oi(l),ue=[];e:{var Y=P0.get(r);if(Y!==void 0){var J=rl,Be=r;switch(r){case"keypress":if(Tr(l)===0)break e;case"keydown":case"keyup":J=ul;break;case"focusin":Be="focus",J=al;break;case"focusout":Be="blur",J=al;break;case"beforeblur":case"afterblur":J=al;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Vp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=fd;break;case k0:case O0:case D0:J=ll;break;case M0:J=pd;break;case"scroll":case"scrollend":J=od;break;case"wheel":J=hl;break;case"copy":case"cut":case"paste":J=cl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=qc;break;case"toggle":case"beforetoggle":J=_d}var Le=(o&4)!==0,Ot=!Le&&(r==="scroll"||r==="scrollend"),H=Le?Y!==null?Y+"Capture":null:Y;Le=[];for(var B=Q,K;B!==null;){var ae=B;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||H===null||(ae=Xo(B,H),ae!=null&&Le.push(Eu(B,ae,K))),Ot)break;B=B.return}0<Le.length&&(Y=new J(Y,Be,null,l,oe),ue.push({event:Y,listeners:Le}))}}if((o&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",Y&&l!==Jr&&(Be=l.relatedTarget||l.fromElement)&&(Qr(Be)||Be[wn]))break e;if((J||Y)&&(Y=oe.window===oe?oe:(Y=oe.ownerDocument)?Y.defaultView||Y.parentWindow:window,J?(Be=l.relatedTarget||l.toElement,J=Q,Be=Be?Qr(Be):null,Be!==null&&(Ot=a(Be),Le=Be.tag,Be!==Ot||Le!==5&&Le!==27&&Le!==6)&&(Be=null)):(J=null,Be=Q),J!==Be)){if(Le=Mi,ae="onMouseLeave",H="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Le=qc,ae="onPointerLeave",H="onPointerEnter",B="pointer"),Ot=J==null?Y:_r(J),K=Be==null?Y:_r(Be),Y=new Le(ae,B+"leave",J,l,oe),Y.target=Ot,Y.relatedTarget=K,ae=null,Qr(oe)===Q&&(Le=new Le(H,B+"enter",Be,l,oe),Le.target=K,Le.relatedTarget=Ot,ae=Le),Ot=ae,J&&Be)t:{for(Le=J,H=Be,B=0,K=Le;K;K=Ll(K))B++;for(K=0,ae=H;ae;ae=Ll(ae))K++;for(;0<B-K;)Le=Ll(Le),B--;for(;0<K-B;)H=Ll(H),K--;for(;B--;){if(Le===H||H!==null&&Le===H.alternate)break t;Le=Ll(Le),H=Ll(H)}Le=null}else Le=null;J!==null&&tw(ue,Y,J,Le,!1),Be!==null&&Ot!==null&&tw(ue,Ot,Be,Le,!0)}}e:{if(Y=Q?_r(Q):window,J=Y.nodeName&&Y.nodeName.toLowerCase(),J==="select"||J==="input"&&Y.type==="file")var Ne=E0;else if(gn(Y))if(T0)Ne=xk;else{Ne=Rk;var tt=Ak}else J=Y.nodeName,!J||J.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?Q&&Lc(Q.elementType)&&(Ne=E0):Ne=Ik;if(Ne&&(Ne=Ne(r,Q))){is(ue,Ne,l,oe);break e}tt&&tt(r,Y,Q),r==="focusout"&&Q&&Y.type==="number"&&Q.memoizedProps.value!=null&&zs(Y,"number",Y.value)}switch(tt=Q?_r(Q):window,r){case"focusin":(gn(tt)||tt.contentEditable==="true")&&(dl=tt,qp=Q,$c=null);break;case"focusout":$c=qp=dl=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,x0(ue,l,oe);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":x0(ue,l,oe)}var De;if(Sr)e:{switch(r){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ut?ee(r,l)&&(Ue="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ue="onCompositionStart");Ue&&(b&&l.locale!=="ko"&&(ut||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ut&&(De=Vc()):(Er=oe,qs="value"in Er?Er.value:Er.textContent,ut=!0)),tt=sf(Q,Ue),0<tt.length&&(Ue=new Fc(Ue,r,null,l,oe),ue.push({event:Ue,listeners:tt}),De?Ue.data=De:(De=Te(l),De!==null&&(Ue.data=De)))),(De=y?pn(r,l):ht(r,l))&&(Ue=sf(Q,"onBeforeInput"),0<Ue.length&&(tt=new Fc("onBeforeInput","beforeinput",null,l,oe),ue.push({event:tt,listeners:Ue}),tt.data=De)),fO(ue,r,Q,l,oe)}Zb(ue,o)})}function Eu(r,o,l){return{instance:r,listener:o,currentTarget:l}}function sf(r,o){for(var l=o+"Capture",u=[];r!==null;){var m=r,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Xo(r,l),m!=null&&u.unshift(Eu(r,m,g)),m=Xo(r,o),m!=null&&u.push(Eu(r,m,g))),r.tag===3)return u;r=r.return}return[]}function Ll(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function tw(r,o,l,u,m){for(var g=o._reactName,w=[];l!==null&&l!==u;){var C=l,L=C.alternate,Q=C.stateNode;if(C=C.tag,L!==null&&L===u)break;C!==5&&C!==26&&C!==27||Q===null||(L=Q,m?(Q=Xo(l,g),Q!=null&&w.unshift(Eu(l,Q,L))):m||(Q=Xo(l,g),Q!=null&&w.push(Eu(l,Q,L)))),l=l.return}w.length!==0&&r.push({event:o,listeners:w})}var _O=/\r\n?/g,yO=/\u0000|\uFFFD/g;function nw(r){return(typeof r=="string"?r:""+r).replace(_O,`
`).replace(yO,"")}function iw(r,o){return o=nw(o),nw(r)===o}function of(){}function kt(r,o,l,u,m,g){switch(l){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||ki(r,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&ki(r,""+u);break;case"className":yr(r,"class",u);break;case"tabIndex":yr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(r,l,u);break;case"style":Pc(r,u,g);break;case"data":if(o!=="object"){yr(r,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=il(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(o!=="input"&&kt(r,o,"name",m.name,m,null),kt(r,o,"formEncType",m.formEncType,m,null),kt(r,o,"formMethod",m.formMethod,m,null),kt(r,o,"formTarget",m.formTarget,m,null)):(kt(r,o,"encType",m.encType,m,null),kt(r,o,"method",m.method,m,null),kt(r,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=il(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=of);break;case"onScroll":u!=null&&at("scroll",r);break;case"onScrollEnd":u!=null&&at("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=il(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":at("beforetoggle",r),at("toggle",r),Fs(r,"popover",u);break;case"xlinkActuate":kn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fs(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Lp.get(l)||l,Fs(r,l,u))}}function f_(r,o,l,u,m,g){switch(l){case"style":Pc(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?ki(r,u):(typeof u=="number"||typeof u=="bigint")&&ki(r,""+u);break;case"onScroll":u!=null&&at("scroll",r);break;case"onScrollEnd":u!=null&&at("scrollend",r);break;case"onClick":u!=null&&(r.onclick=of);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ja.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),o=l.slice(2,m?l.length-7:void 0),g=r[Jt]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(o,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,u,m);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Fs(r,l,u)}}}function Pn(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",r),at("load",r);var u=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var w=l[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:kt(r,o,g,w,l,null)}}m&&kt(r,o,"srcSet",l.srcSet,l,null),u&&kt(r,o,"src",l.src,l,null);return;case"input":at("invalid",r);var C=g=w=m=null,L=null,Q=null;for(u in l)if(l.hasOwnProperty(u)){var oe=l[u];if(oe!=null)switch(u){case"name":m=oe;break;case"type":w=oe;break;case"checked":L=oe;break;case"defaultChecked":Q=oe;break;case"value":g=oe;break;case"defaultValue":C=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,o));break;default:kt(r,o,u,oe,l,null)}}Qo(r,g,C,L,Q,w,m,!1),nl(r);return;case"select":at("invalid",r),u=w=g=null;for(m in l)if(l.hasOwnProperty(m)&&(C=l[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":w=C;break;case"multiple":u=C;default:kt(r,o,m,C,l,null)}o=g,l=w,r.multiple=!!u,o!=null?Xr(r,!!u,o,!1):l!=null&&Xr(r,!!u,l,!0);return;case"textarea":at("invalid",r),g=m=u=null;for(w in l)if(l.hasOwnProperty(w)&&(C=l[w],C!=null))switch(w){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:kt(r,o,w,C,l,null)}Yo(r,u,m,g),nl(r);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(u=l[L],u!=null))switch(L){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:kt(r,o,L,u,l,null)}return;case"dialog":at("beforetoggle",r),at("toggle",r),at("cancel",r),at("close",r);break;case"iframe":case"object":at("load",r);break;case"video":case"audio":for(u=0;u<vu.length;u++)at(vu[u],r);break;case"image":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"embed":case"source":case"link":at("error",r),at("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(u=l[Q],u!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:kt(r,o,Q,u,l,null)}return;default:if(Lc(o)){for(oe in l)l.hasOwnProperty(oe)&&(u=l[oe],u!==void 0&&f_(r,o,oe,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&kt(r,o,C,u,l,null))}function vO(r,o,l,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,w=null,C=null,L=null,Q=null,oe=null;for(J in l){var ue=l[J];if(l.hasOwnProperty(J)&&ue!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":L=ue;default:u.hasOwnProperty(J)||kt(r,o,J,null,u,ue)}}for(var Y in u){var J=u[Y];if(ue=l[Y],u.hasOwnProperty(Y)&&(J!=null||ue!=null))switch(Y){case"type":g=J;break;case"name":m=J;break;case"checked":Q=J;break;case"defaultChecked":oe=J;break;case"value":w=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,o));break;default:J!==ue&&kt(r,o,Y,J,u,ue)}}yi(r,w,C,L,Q,oe,g,m);return;case"select":J=w=C=Y=null;for(g in l)if(L=l[g],l.hasOwnProperty(g)&&L!=null)switch(g){case"value":break;case"multiple":J=L;default:u.hasOwnProperty(g)||kt(r,o,g,null,u,L)}for(m in u)if(g=u[m],L=l[m],u.hasOwnProperty(m)&&(g!=null||L!=null))switch(m){case"value":Y=g;break;case"defaultValue":C=g;break;case"multiple":w=g;default:g!==L&&kt(r,o,m,g,u,L)}o=C,l=w,u=J,Y!=null?Xr(r,!!l,Y,!1):!!u!=!!l&&(o!=null?Xr(r,!!l,o,!0):Xr(r,!!l,l?[]:"",!1));return;case"textarea":J=Y=null;for(C in l)if(m=l[C],l.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:kt(r,o,C,null,u,m)}for(w in u)if(m=u[w],g=l[w],u.hasOwnProperty(w)&&(m!=null||g!=null))switch(w){case"value":Y=m;break;case"defaultValue":J=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&kt(r,o,w,m,u,g)}xt(r,Y,J);return;case"option":for(var Be in l)if(Y=l[Be],l.hasOwnProperty(Be)&&Y!=null&&!u.hasOwnProperty(Be))switch(Be){case"selected":r.selected=!1;break;default:kt(r,o,Be,null,u,Y)}for(L in u)if(Y=u[L],J=l[L],u.hasOwnProperty(L)&&Y!==J&&(Y!=null||J!=null))switch(L){case"selected":r.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:kt(r,o,L,Y,u,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)Y=l[Le],l.hasOwnProperty(Le)&&Y!=null&&!u.hasOwnProperty(Le)&&kt(r,o,Le,null,u,Y);for(Q in u)if(Y=u[Q],J=l[Q],u.hasOwnProperty(Q)&&Y!==J&&(Y!=null||J!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,o));break;default:kt(r,o,Q,Y,u,J)}return;default:if(Lc(o)){for(var Ot in l)Y=l[Ot],l.hasOwnProperty(Ot)&&Y!==void 0&&!u.hasOwnProperty(Ot)&&f_(r,o,Ot,void 0,u,Y);for(oe in u)Y=u[oe],J=l[oe],!u.hasOwnProperty(oe)||Y===J||Y===void 0&&J===void 0||f_(r,o,oe,Y,u,J);return}}for(var H in l)Y=l[H],l.hasOwnProperty(H)&&Y!=null&&!u.hasOwnProperty(H)&&kt(r,o,H,null,u,Y);for(ue in u)Y=u[ue],J=l[ue],!u.hasOwnProperty(ue)||Y===J||Y==null&&J==null||kt(r,o,ue,Y,u,J)}var m_=null,p_=null;function af(r){return r.nodeType===9?r:r.ownerDocument}function rw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sw(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function g_(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var __=null;function EO(){var r=window.event;return r&&r.type==="popstate"?r===__?!1:(__=r,!0):(__=null,!1)}var ow=typeof setTimeout=="function"?setTimeout:void 0,TO=typeof clearTimeout=="function"?clearTimeout:void 0,aw=typeof Promise=="function"?Promise:void 0,bO=typeof queueMicrotask=="function"?queueMicrotask:typeof aw<"u"?function(r){return aw.resolve(null).then(r).catch(wO)}:ow;function wO(r){setTimeout(function(){throw r})}function so(r){return r==="head"}function lw(r,o){var l=o,u=0,m=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<u&&8>u){l=u;var w=r.ownerDocument;if(l&1&&Tu(w.documentElement),l&2&&Tu(w.body),l&4)for(l=w.head,Tu(l),w=l.firstChild;w;){var C=w.nextSibling,L=w.nodeName;w[Ho]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=C}}if(m===0){r.removeChild(g),xu(o);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:u=l.charCodeAt(0)-48;else u=0;l=g}while(l);xu(o)}function y_(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":y_(l),Bs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function SO(r,o,l,u){for(;r.nodeType===1;){var m=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ho])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=ir(r.nextSibling),r===null)break}return null}function CO(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=ir(r.nextSibling),r===null))return null;return r}function v_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function AO(r,o){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")o();else{var u=function(){o(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function ir(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var E_=null;function cw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return r;o--}else l==="/$"&&o++}r=r.previousSibling}return null}function uw(r,o,l){switch(o=af(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Tu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Bs(r)}var Fi=new Map,hw=new Set;function lf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var gs=be.d;be.d={f:RO,r:IO,D:xO,C:NO,L:kO,m:OO,X:MO,S:DO,M:PO};function RO(){var r=gs.f(),o=Jd();return r||o}function IO(r){var o=gr(r);o!==null&&o.tag===5&&o.type==="form"?kT(o):gs.r(r)}var Ul=typeof document>"u"?null:document;function dw(r,o,l){var u=Ul;if(u&&typeof o=="string"&&o){var m=un(o);m='link[rel="'+r+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),hw.has(m)||(hw.add(m),r={rel:r,crossOrigin:l,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),Pn(o,"link",r),rn(o),u.head.appendChild(o)))}}function xO(r){gs.D(r),dw("dns-prefetch",r,null)}function NO(r,o){gs.C(r,o),dw("preconnect",r,o)}function kO(r,o,l){gs.L(r,o,l);var u=Ul;if(u&&r&&o){var m='link[rel="preload"][as="'+un(o)+'"]';o==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+un(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+un(l.imageSizes)+'"]')):m+='[href="'+un(r)+'"]';var g=m;switch(o){case"style":g=Vl(r);break;case"script":g=jl(r)}Fi.has(g)||(r=_({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),Fi.set(g,r),u.querySelector(m)!==null||o==="style"&&u.querySelector(bu(g))||o==="script"&&u.querySelector(wu(g))||(o=u.createElement("link"),Pn(o,"link",r),rn(o),u.head.appendChild(o)))}}function OO(r,o){gs.m(r,o);var l=Ul;if(l&&r){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+un(u)+'"][href="'+un(r)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=jl(r)}if(!Fi.has(g)&&(r=_({rel:"modulepreload",href:r},o),Fi.set(g,r),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(wu(g)))return}u=l.createElement("link"),Pn(u,"link",r),rn(u),l.head.appendChild(u)}}}function DO(r,o,l){gs.S(r,o,l);var u=Ul;if(u&&r){var m=Jn(u).hoistableStyles,g=Vl(r);o=o||"default";var w=m.get(g);if(!w){var C={loading:0,preload:null};if(w=u.querySelector(bu(g)))C.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":o},l),(l=Fi.get(g))&&T_(r,l);var L=w=u.createElement("link");rn(L),Pn(L,"link",r),L._p=new Promise(function(Q,oe){L.onload=Q,L.onerror=oe}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,cf(w,o,u)}w={type:"stylesheet",instance:w,count:1,state:C},m.set(g,w)}}}function MO(r,o){gs.X(r,o);var l=Ul;if(l&&r){var u=Jn(l).hoistableScripts,m=jl(r),g=u.get(m);g||(g=l.querySelector(wu(m)),g||(r=_({src:r,async:!0},o),(o=Fi.get(m))&&b_(r,o),g=l.createElement("script"),rn(g),Pn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function PO(r,o){gs.M(r,o);var l=Ul;if(l&&r){var u=Jn(l).hoistableScripts,m=jl(r),g=u.get(m);g||(g=l.querySelector(wu(m)),g||(r=_({src:r,async:!0,type:"module"},o),(o=Fi.get(m))&&b_(r,o),g=l.createElement("script"),rn(g),Pn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function fw(r,o,l,u){var m=(m=W.current)?lf(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Vl(l.href),l=Jn(m).hoistableStyles,u=l.get(o),u||(u={type:"style",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Vl(l.href);var g=Jn(m).hoistableStyles,w=g.get(r);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,w),(g=m.querySelector(bu(r)))&&!g._p&&(w.instance=g,w.state.loading=5),Fi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Fi.set(r,l),g||LO(m,r,l,w.state))),o&&u===null)throw Error(i(528,""));return w}if(o&&u!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=jl(l),l=Jn(m).hoistableScripts,u=l.get(o),u||(u={type:"script",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Vl(r){return'href="'+un(r)+'"'}function bu(r){return'link[rel="stylesheet"]['+r+"]"}function mw(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function LO(r,o,l,u){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=r.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Pn(o,"link",l),rn(o),r.head.appendChild(o))}function jl(r){return'[src="'+un(r)+'"]'}function wu(r){return"script[async]"+r}function pw(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var u=r.querySelector('style[data-href~="'+un(l.href)+'"]');if(u)return o.instance=u,rn(u),u;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),rn(u),Pn(u,"style",m),cf(u,l.precedence,r),o.instance=u;case"stylesheet":m=Vl(l.href);var g=r.querySelector(bu(m));if(g)return o.state.loading|=4,o.instance=g,rn(g),g;u=mw(l),(m=Fi.get(m))&&T_(u,m),g=(r.ownerDocument||r).createElement("link"),rn(g);var w=g;return w._p=new Promise(function(C,L){w.onload=C,w.onerror=L}),Pn(g,"link",u),o.state.loading|=4,cf(g,l.precedence,r),o.instance=g;case"script":return g=jl(l.src),(m=r.querySelector(wu(g)))?(o.instance=m,rn(m),m):(u=l,(m=Fi.get(g))&&(u=_({},l),b_(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),rn(m),Pn(m,"link",u),r.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,cf(u,l.precedence,r));return o.instance}function cf(r,o,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,w=0;w<u.length;w++){var C=u[w];if(C.dataset.precedence===o)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(r,g.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function T_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function b_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var uf=null;function gw(r,o,l){if(uf===null){var u=new Map,m=uf=new Map;m.set(l,u)}else m=uf,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),m=0;m<l.length;m++){var g=l[m];if(!(g[Ho]||g[nn]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(o)||"";w=r+w;var C=u.get(w);C?C.push(g):u.set(w,[g])}}return u}function _w(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function UO(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function yw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Su=null;function VO(){}function jO(r,o,l){if(Su===null)throw Error(i(475));var u=Su;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Vl(l.href),g=r.querySelector(bu(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=hf.bind(u),r.then(u,u)),o.state.loading|=4,o.instance=g,rn(g);return}g=r.ownerDocument||r,l=mw(l),(m=Fi.get(m))&&T_(l,m),g=g.createElement("link"),rn(g);var w=g;w._p=new Promise(function(C,L){w.onload=C,w.onerror=L}),Pn(g,"link",l),o.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=hf.bind(u),r.addEventListener("load",o),r.addEventListener("error",o))}}function BO(){if(Su===null)throw Error(i(475));var r=Su;return r.stylesheets&&r.count===0&&w_(r,r.stylesheets),0<r.count?function(o){var l=setTimeout(function(){if(r.stylesheets&&w_(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(l)}}:null}function hf(){if(this.count--,this.count===0){if(this.stylesheets)w_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var df=null;function w_(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,df=new Map,o.forEach(FO,r),df=null,hf.call(r))}function FO(r,o){if(!(o.state.loading&4)){var l=df.get(r);if(l)var u=l.get(null);else{l=new Map,df.set(r,l);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var w=m[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),u=w)}u&&l.set(null,u)}m=o.instance,w=m.getAttribute("data-precedence"),g=l.get(w)||u,g===u&&l.set(null,m),l.set(w,m),this.count++,u=hf.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),o.state.loading|=4}}var Cu={$$typeof:G,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function zO(r,o,l,u,m,g,w,C){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function vw(r,o,l,u,m,g,w,C,L,Q,oe,ue){return r=new zO(r,o,l,w,C,L,Q,ue),o=1,g===!0&&(o|=24),g=Ei(3,null,null,o),r.current=g,g.stateNode=r,o=rg(),o.refCount++,r.pooledCache=o,o.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:o},lg(g),r}function Ew(r){return r?(r=gl,r):gl}function Tw(r,o,l,u,m,g){m=Ew(m),u.context===null?u.context=m:u.pendingContext=m,u=$s(o),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Ks(r,u,o),l!==null&&(Ci(l,r,o),tu(l,r,o))}function bw(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function S_(r,o){bw(r,o),(r=r.alternate)&&bw(r,o)}function ww(r){if(r.tag===13){var o=pl(r,67108864);o!==null&&Ci(o,r,67108864),S_(r,67108864)}}var ff=!0;function qO(r,o,l,u){var m=ne.T;ne.T=null;var g=be.p;try{be.p=2,C_(r,o,l,u)}finally{be.p=g,ne.T=m}}function HO(r,o,l,u){var m=ne.T;ne.T=null;var g=be.p;try{be.p=8,C_(r,o,l,u)}finally{be.p=g,ne.T=m}}function C_(r,o,l,u){if(ff){var m=A_(u);if(m===null)d_(r,o,u,mf,l),Cw(r,u);else if($O(m,r,o,l,u))u.stopPropagation();else if(Cw(r,u),o&4&&-1<GO.indexOf(r)){for(;m!==null;){var g=gr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=It(g.pendingLanes);if(w!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var L=1<<31-Ie(w);C.entanglements[1]|=L,w&=~L}Nr(g),(Ct&6)===0&&(Wd=li()+500,yu(0))}}break;case 13:C=pl(g,2),C!==null&&Ci(C,g,2),Jd(),S_(g,2)}if(g=A_(u),g===null&&d_(r,o,u,mf,l),g===m)break;m=g}m!==null&&u.stopPropagation()}else d_(r,o,u,null,l)}}function A_(r){return r=Oi(r),R_(r)}var mf=null;function R_(r){if(mf=null,r=Qr(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=c(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return mf=r,null}function Sw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nc()){case zo:return 2;case js:return 8;case $r:case X:return 32;case q:return 268435456;default:return 32}default:return 32}}var I_=!1,oo=null,ao=null,lo=null,Au=new Map,Ru=new Map,co=[],GO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cw(r,o){switch(r){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Au.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(o.pointerId)}}function Iu(r,o,l,u,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:o,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},o!==null&&(o=gr(o),o!==null&&ww(o)),r):(r.eventSystemFlags|=u,o=r.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),r)}function $O(r,o,l,u,m){switch(o){case"focusin":return oo=Iu(oo,r,o,l,u,m),!0;case"dragenter":return ao=Iu(ao,r,o,l,u,m),!0;case"mouseover":return lo=Iu(lo,r,o,l,u,m),!0;case"pointerover":var g=m.pointerId;return Au.set(g,Iu(Au.get(g)||null,r,o,l,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Ru.set(g,Iu(Ru.get(g)||null,r,o,l,u,m)),!0}return!1}function Aw(r){var o=Qr(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){r.blockedOn=o,qo(r.priority,function(){if(l.tag===13){var u=Si();u=ln(u);var m=pl(l,u);m!==null&&Ci(m,l,u),S_(l,u)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pf(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=A_(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);Jr=u,l.target.dispatchEvent(u),Jr=null}else return o=gr(l),o!==null&&ww(o),r.blockedOn=l,!1;o.shift()}return!0}function Rw(r,o,l){pf(r)&&l.delete(o)}function KO(){I_=!1,oo!==null&&pf(oo)&&(oo=null),ao!==null&&pf(ao)&&(ao=null),lo!==null&&pf(lo)&&(lo=null),Au.forEach(Rw),Ru.forEach(Rw)}function gf(r,o){r.blockedOn===o&&(r.blockedOn=null,I_||(I_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,KO)))}var _f=null;function Iw(r){_f!==r&&(_f=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_f===r&&(_f=null);for(var o=0;o<r.length;o+=3){var l=r[o],u=r[o+1],m=r[o+2];if(typeof u!="function"){if(R_(u||l)===null)continue;break}var g=gr(l);g!==null&&(r.splice(o,3),o-=3,Rg(g,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function xu(r){function o(L){return gf(L,r)}oo!==null&&gf(oo,r),ao!==null&&gf(ao,r),lo!==null&&gf(lo,r),Au.forEach(o),Ru.forEach(o);for(var l=0;l<co.length;l++){var u=co[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<co.length&&(l=co[0],l.blockedOn===null);)Aw(l),l.blockedOn===null&&co.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],g=l[u+1],w=m[Jt]||null;if(typeof g=="function")w||Iw(l);else if(w){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,w=g[Jt]||null)C=w.formAction;else if(R_(m)!==null)continue}else C=w.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),Iw(l)}}}function x_(r){this._internalRoot=r}yf.prototype.render=x_.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,u=Si();Tw(l,u,r,o,null,null)},yf.prototype.unmount=x_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Tw(r.current,2,null,r,null,null),Jd(),o[wn]=null}};function yf(r){this._internalRoot=r}yf.prototype.unstable_scheduleHydration=function(r){if(r){var o=cn();r={blockedOn:null,target:r,priority:o};for(var l=0;l<co.length&&o!==0&&o<co[l].priority;l++);co.splice(l,0,r),l===0&&Aw(r)}};var xw=e.version;if(xw!=="19.1.0")throw Error(i(527,xw,"19.1.0"));be.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(o),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var QO={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vf.isDisabled&&vf.supportsFiber)try{Se=vf.inject(QO),ve=vf}catch{}}return ku.createRoot=function(r,o){if(!s(r))throw Error(i(299));var l=!1,u="",m=GT,g=$T,w=KT,C=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks)),o=vw(r,1,!1,null,null,l,u,m,g,w,C,null),r[wn]=o.current,h_(r),new x_(o)},ku.hydrateRoot=function(r,o,l){if(!s(r))throw Error(i(299));var u=!1,m="",g=GT,w=$T,C=KT,L=null,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(L=l.unstable_transitionCallbacks),l.formState!==void 0&&(Q=l.formState)),o=vw(r,1,!0,o,l??null,u,m,g,w,C,L,Q),o.context=Ew(null),l=o.current,u=Si(),u=ln(u),m=$s(u),m.callback=null,Ks(l,m,u),l=u,o.current.lanes=l,Me(o,l),Nr(o),r[wn]=o.current,h_(r),new yf(o)},ku.version="19.1.0",ku}var jw;function oD(){if(jw)return O_.exports;jw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),O_.exports=sD(),O_.exports}var aD=oD(),V=bv(),Ou={},Bw;function lD(){if(Bw)return Ou;Bw=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.parse=c,Ou.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function c(T,A){const S=new a,P=T.length;if(P<2)return S;const D=(A==null?void 0:A.decode)||_;let F=0;do{const z=T.indexOf("=",F);if(z===-1)break;const G=T.indexOf(";",F),re=G===-1?P:G;if(z>re){F=T.lastIndexOf(";",z-1)+1;continue}const ie=h(T,F,z),ye=f(T,z,ie),k=T.slice(ie,ye);if(S[k]===void 0){let R=h(T,z+1,re),I=f(T,re,R);const N=D(T.slice(R,I));S[k]=N}F=re+1}while(F<P);return S}function h(T,A,S){do{const P=T.charCodeAt(A);if(P!==32&&P!==9)return A}while(++A<S);return S}function f(T,A,S){for(;A>S;){const P=T.charCodeAt(--A);if(P!==32&&P!==9)return A+1}return S}function p(T,A,S){const P=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const D=P(A);if(!e.test(D))throw new TypeError(`argument val is invalid: ${A}`);let F=T+"="+D;if(!S)return F;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);F+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);F+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);F+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);F+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(F+="; HttpOnly"),S.secure&&(F+="; Secure"),S.partitioned&&(F+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return F}function _(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function v(T){return s.call(T)==="[object Date]"}return Ou}lD();var Fw="popstate";function cD(n={}){function e(i,s){let{pathname:a,search:c,hash:h}=i.location;return gy("",{pathname:a,search:c,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:oh(s)}return hD(e,t,null,n)}function Qt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function zr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uD(){return Math.random().toString(36).substring(2,10)}function zw(n,e){return{usr:n.state,key:n.key,idx:e}}function gy(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?fc(e):e,state:t,key:e&&e.key||i||uD()}}function oh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function fc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function hD(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,c=s.history,h="POP",f=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function v(){h="POP";let D=_(),F=D==null?null:D-p;p=D,f&&f({action:h,location:P.location,delta:F})}function T(D,F){h="PUSH";let z=gy(P.location,D,F);p=_()+1;let G=zw(z,p),re=P.createHref(z);try{c.pushState(G,"",re)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;s.location.assign(re)}a&&f&&f({action:h,location:P.location,delta:1})}function A(D,F){h="REPLACE";let z=gy(P.location,D,F);p=_();let G=zw(z,p),re=P.createHref(z);c.replaceState(G,"",re),a&&f&&f({action:h,location:P.location,delta:0})}function S(D){return dD(D)}let P={get action(){return h},get location(){return n(s,c)},listen(D){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Fw,v),f=D,()=>{s.removeEventListener(Fw,v),f=null}},createHref(D){return e(s,D)},createURL:S,encodeLocation(D){let F=S(D);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:A,go(D){return c.go(D)}};return P}function dD(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:oh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function ZA(n,e,t="/"){return fD(n,e,t,!1)}function fD(n,e,t,i){let s=typeof e=="string"?fc(e):e,a=Is(s.pathname||"/",t);if(a==null)return null;let c=eR(n);mD(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let p=CD(a);h=wD(c[f],p,i)}return h}function eR(n,e=[],t=[],i=""){let s=(a,c,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Qt(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let p=ws([i,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Qt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),eR(a.children,e,_,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:TD(p,a.index),routesMeta:_})};return n.forEach((a,c)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))s(a,c);else for(let f of tR(a.path))s(a,c,f)}),e}function tR(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let c=tR(i.join("/")),h=[];return h.push(...c.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...c),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function mD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bD(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var pD=/^:[\w-]+$/,gD=3,_D=2,yD=1,vD=10,ED=-2,qw=n=>n==="*";function TD(n,e){let t=n.split("/"),i=t.length;return t.some(qw)&&(i+=ED),e&&(i+=_D),t.filter(s=>!qw(s)).reduce((s,a)=>s+(pD.test(a)?gD:a===""?yD:vD),i)}function bD(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function wD(n,e,t=!1){let{routesMeta:i}=n,s={},a="/",c=[];for(let h=0;h<i.length;++h){let f=i[h],p=h===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",v=Xf({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},_),T=f.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=Xf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:ws([a,v.pathname]),pathnameBase:xD(ws([a,v.pathnameBase])),route:T}),v.pathnameBase!=="/"&&(a=ws([a,v.pathnameBase]))}return c}function Xf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=SD(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:v},T)=>{if(_==="*"){let S=h[T]||"";c=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const A=h[T];return v&&!A?p[_]=void 0:p[_]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function SD(n,e=!1,t=!0){zr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function CD(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Is(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function AD(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?fc(n):n;return{pathname:t?t.startsWith("/")?t:RD(t,e):e,search:ND(i),hash:kD(s)}}function RD(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function U_(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ID(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function nR(n){let e=ID(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function iR(n,e,t,i=!1){let s;typeof n=="string"?s=fc(n):(s={...n},Qt(!s.pathname||!s.pathname.includes("?"),U_("?","pathname","search",s)),Qt(!s.pathname||!s.pathname.includes("#"),U_("#","pathname","hash",s)),Qt(!s.search||!s.search.includes("#"),U_("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,h;if(c==null)h=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),v-=1;s.pathname=T.join("/")}h=v>=0?e[v]:"/"}let f=AD(s,h),p=c&&c!=="/"&&c.endsWith("/"),_=(a||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||_)&&(f.pathname+="/"),f}var ws=n=>n.join("/").replace(/\/\/+/g,"/"),xD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),ND=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function OD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var rR=["POST","PUT","PATCH","DELETE"];new Set(rR);var DD=["GET",...rR];new Set(DD);var mc=V.createContext(null);mc.displayName="DataRouter";var jm=V.createContext(null);jm.displayName="DataRouterState";var sR=V.createContext({isTransitioning:!1});sR.displayName="ViewTransition";var MD=V.createContext(new Map);MD.displayName="Fetchers";var PD=V.createContext(null);PD.displayName="Await";var Hr=V.createContext(null);Hr.displayName="Navigation";var Nh=V.createContext(null);Nh.displayName="Location";var Ps=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ps.displayName="Route";var wv=V.createContext(null);wv.displayName="RouteError";function LD(n,{relative:e}={}){Qt(kh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=V.useContext(Hr),{hash:s,pathname:a,search:c}=Oh(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:ws([t,a])),i.createHref({pathname:h,search:c,hash:s})}function kh(){return V.useContext(Nh)!=null}function hr(){return Qt(kh(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Nh).location}var oR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aR(n){V.useContext(Hr).static||V.useLayoutEffect(n)}function Ls(){let{isDataRoute:n}=V.useContext(Ps);return n?YD():UD()}function UD(){Qt(kh(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(mc),{basename:e,navigator:t}=V.useContext(Hr),{matches:i}=V.useContext(Ps),{pathname:s}=hr(),a=JSON.stringify(nR(i)),c=V.useRef(!1);return aR(()=>{c.current=!0}),V.useCallback((f,p={})=>{if(zr(c.current,oR),!c.current)return;if(typeof f=="number"){t.go(f);return}let _=iR(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:ws([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,a,s,n])}V.createContext(null);function Oh(n,{relative:e}={}){let{matches:t}=V.useContext(Ps),{pathname:i}=hr(),s=JSON.stringify(nR(t));return V.useMemo(()=>iR(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function VD(n,e){return lR(n,e)}function lR(n,e,t,i){var F;Qt(kh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=V.useContext(Hr),{matches:a}=V.useContext(Ps),c=a[a.length-1],h=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",_=c&&c.route;{let z=_&&_.path||"";cR(f,!_||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let v=hr(),T;if(e){let z=typeof e=="string"?fc(e):e;Qt(p==="/"||((F=z.pathname)==null?void 0:F.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=v;let A=T.pathname||"/",S=A;if(p!=="/"){let z=p.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(z.length).join("/")}let P=ZA(n,{pathname:S});zr(_||P!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),zr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=qD(P&&P.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:ws([p,s.encodeLocation?s.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?p:ws([p,s.encodeLocation?s.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),a,t,i);return e&&D?V.createElement(Nh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},D):D}function jD(){let n=QD(),e=OD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:a},"ErrorBoundary")," or"," ",V.createElement("code",{style:a},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:s},t):null,c)}var BD=V.createElement(jD,null),FD=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(Ps.Provider,{value:this.props.routeContext},V.createElement(wv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zD({routeContext:n,match:e,children:t}){let i=V.useContext(mc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ps.Provider,{value:n},t)}function qD(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);Qt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,h=-1;if(t)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:_,errors:v}=t,T=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||T){c=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,p,_)=>{let v,T=!1,A=null,S=null;t&&(v=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||BD,c&&(h<0&&_===0?(cR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,S=null):h===_&&(T=!0,S=p.route.hydrateFallbackElement||null)));let P=e.concat(s.slice(0,_+1)),D=()=>{let F;return v?F=A:T?F=S:p.route.Component?F=V.createElement(p.route.Component,null):p.route.element?F=p.route.element:F=f,V.createElement(zD,{match:p,routeContext:{outlet:f,matches:P,isDataRoute:t!=null},children:F})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?V.createElement(FD,{location:t.location,revalidation:t.revalidation,component:A,error:v,children:D(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):D()},null)}function Sv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HD(n){let e=V.useContext(mc);return Qt(e,Sv(n)),e}function GD(n){let e=V.useContext(jm);return Qt(e,Sv(n)),e}function $D(n){let e=V.useContext(Ps);return Qt(e,Sv(n)),e}function Cv(n){let e=$D(n),t=e.matches[e.matches.length-1];return Qt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function KD(){return Cv("useRouteId")}function QD(){var i;let n=V.useContext(wv),e=GD("useRouteError"),t=Cv("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function YD(){let{router:n}=HD("useNavigate"),e=Cv("useNavigate"),t=V.useRef(!1);return aR(()=>{t.current=!0}),V.useCallback(async(s,a={})=>{zr(t.current,oR),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var Hw={};function cR(n,e,t){!e&&!Hw[n]&&(Hw[n]=!0,zr(!1,t))}V.memo(WD);function WD({routes:n,future:e,state:t}){return lR(n,void 0,t,e)}function fi(n){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1}){Qt(!kh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=V.useMemo(()=>({basename:c,navigator:s,static:a,future:{}}),[c,s,a]);typeof t=="string"&&(t=fc(t));let{pathname:f="/",search:p="",hash:_="",state:v=null,key:T="default"}=t,A=V.useMemo(()=>{let S=Is(f,c);return S==null?null:{location:{pathname:S,search:p,hash:_,state:v,key:T},navigationType:i}},[c,f,p,_,v,T,i]);return zr(A!=null,`<Router basename="${c}"> is not able to match the URL "${f}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:V.createElement(Hr.Provider,{value:h},V.createElement(Nh.Provider,{children:e,value:A}))}function JD({children:n,location:e}){return VD(_y(n),e)}function _y(n,e=[]){let t=[];return V.Children.forEach(n,(i,s)=>{if(!V.isValidElement(i))return;let a=[...e,s];if(i.type===V.Fragment){t.push.apply(t,_y(i.props.children,a));return}Qt(i.type===fi,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=_y(i.props.children,a)),t.push(c)}),t}var Of="get",Df="application/x-www-form-urlencoded";function Bm(n){return n!=null&&typeof n.tagName=="string"}function ZD(n){return Bm(n)&&n.tagName.toLowerCase()==="button"}function eM(n){return Bm(n)&&n.tagName.toLowerCase()==="form"}function tM(n){return Bm(n)&&n.tagName.toLowerCase()==="input"}function nM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iM(n,e){return n.button===0&&(!e||e==="_self")&&!nM(n)}var Ef=null;function rM(){if(Ef===null)try{new FormData(document.createElement("form"),0),Ef=!1}catch{Ef=!0}return Ef}var sM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V_(n){return n!=null&&!sM.has(n)?(zr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Df}"`),null):n}function oM(n,e){let t,i,s,a,c;if(eM(n)){let h=n.getAttribute("action");i=h?Is(h,e):null,t=n.getAttribute("method")||Of,s=V_(n.getAttribute("enctype"))||Df,a=new FormData(n)}else if(ZD(n)||tM(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(i=f?Is(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Of,s=V_(n.getAttribute("formenctype"))||V_(h.getAttribute("enctype"))||Df,a=new FormData(h,n),!rM()){let{name:p,type:_,value:v}=n;if(_==="image"){let T=p?`${p}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else p&&a.append(p,v)}}else{if(Bm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Of,i=null,s=Df,c=n}return a&&s==="text/plain"&&(c=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:c}}function Av(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function aM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function cM(n,e,t){let i=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await aM(a,t);return c.links?c.links():[]}return[]}));return fM(i.flat(1).filter(lM).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Gw(n,e,t,i,s,a){let c=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>{var _;return t[p].pathname!==f.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>c(f,p)||h(f,p)):a==="data"?e.filter((f,p)=>{var v;let _=i.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(c(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function uM(n,e,{includeHydrateFallback:t}={}){return hM(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function hM(n){return[...new Set(n)]}function dM(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function fM(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let a=JSON.stringify(dM(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mM=new Set([100,101,204,205]);function pM(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Is(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function uR(){let n=V.useContext(mc);return Av(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gM(){let n=V.useContext(jm);return Av(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Rv=V.createContext(void 0);Rv.displayName="FrameworkContext";function hR(){let n=V.useContext(Rv);return Av(n,"You must render this element inside a <HydratedRouter> element"),n}function _M(n,e){let t=V.useContext(Rv),[i,s]=V.useState(!1),[a,c]=V.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:_,onTouchStart:v}=e,T=V.useRef(null);V.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let P=F=>{F.forEach(z=>{c(z.isIntersecting)})},D=new IntersectionObserver(P,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[n]),V.useEffect(()=>{if(i){let P=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(P)}}},[i]);let A=()=>{s(!0)},S=()=>{s(!1),c(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:Du(h,A),onBlur:Du(f,S),onMouseEnter:Du(p,A),onMouseLeave:Du(_,S),onTouchStart:Du(v,A)}]:[!1,T,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function yM({page:n,...e}){let{router:t}=uR(),i=V.useMemo(()=>ZA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?V.createElement(EM,{page:n,matches:i,...e}):null}function vM(n){let{manifest:e,routeModules:t}=hR(),[i,s]=V.useState([]);return V.useEffect(()=>{let a=!1;return cM(n,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[n,e,t]),i}function EM({page:n,matches:e,...t}){let i=hr(),{manifest:s,routeModules:a}=hR(),{basename:c}=uR(),{loaderData:h,matches:f}=gM(),p=V.useMemo(()=>Gw(n,e,f,s,i,"data"),[n,e,f,s,i]),_=V.useMemo(()=>Gw(n,e,f,s,i,"assets"),[n,e,f,s,i]),v=V.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,P=!1;if(e.forEach(F=>{var G;let z=s.routes[F.route.id];!z||!z.hasLoader||(!p.some(re=>re.route.id===F.route.id)&&F.route.id in h&&((G=a[F.route.id])!=null&&G.shouldRevalidate)||z.hasClientLoader?P=!0:S.add(F.route.id))}),S.size===0)return[];let D=pM(n,c);return P&&S.size>0&&D.searchParams.set("_routes",e.filter(F=>S.has(F.route.id)).map(F=>F.route.id).join(",")),[D.pathname+D.search]},[c,h,i,s,p,e,n,a]),T=V.useMemo(()=>uM(_,s),[_,s]),A=vM(_);return V.createElement(V.Fragment,null,v.map(S=>V.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),T.map(S=>V.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),A.map(({key:S,link:P})=>V.createElement("link",{key:S,...P})))}function TM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var dR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dR&&(window.__reactRouterVersion="7.6.1")}catch{}function bM({basename:n,children:e,window:t}){let i=V.useRef();i.current==null&&(i.current=cD({window:t,v5Compat:!0}));let s=i.current,[a,c]=V.useState({action:s.action,location:s.location}),h=V.useCallback(f=>{V.startTransition(()=>c(f))},[c]);return V.useLayoutEffect(()=>s.listen(h),[s,h]),V.createElement(XD,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var fR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ft=V.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:c,state:h,target:f,to:p,preventScrollReset:_,viewTransition:v,...T},A){let{basename:S}=V.useContext(Hr),P=typeof p=="string"&&fR.test(p),D,F=!1;if(typeof p=="string"&&P&&(D=p,dR))try{let I=new URL(window.location.href),N=p.startsWith("//")?new URL(I.protocol+p):new URL(p),O=Is(N.pathname,S);N.origin===I.origin&&O!=null?p=O+N.search+N.hash:F=!0}catch{zr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=LD(p,{relative:s}),[G,re,ie]=_M(i,T),ye=AM(p,{replace:c,state:h,target:f,preventScrollReset:_,relative:s,viewTransition:v});function k(I){e&&e(I),I.defaultPrevented||ye(I)}let R=V.createElement("a",{...T,...ie,href:D||z,onClick:F||a?e:k,ref:TM(A,re),target:f,"data-discover":!P&&t==="render"?"true":void 0});return G&&!P?V.createElement(V.Fragment,null,R,V.createElement(yM,{page:z})):R});Ft.displayName="Link";var wM=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:c,viewTransition:h,children:f,...p},_){let v=Oh(c,{relative:p.relative}),T=hr(),A=V.useContext(jm),{navigator:S,basename:P}=V.useContext(Hr),D=A!=null&&kM(v)&&h===!0,F=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,z=T.pathname,G=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(z=z.toLowerCase(),G=G?G.toLowerCase():null,F=F.toLowerCase()),G&&P&&(G=Is(G,P)||G);const re=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let ie=z===F||!s&&z.startsWith(F)&&z.charAt(re)==="/",ye=G!=null&&(G===F||!s&&G.startsWith(F)&&G.charAt(F.length)==="/"),k={isActive:ie,isPending:ye,isTransitioning:D},R=ie?e:void 0,I;typeof i=="function"?I=i(k):I=[i,ie?"active":null,ye?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(k):a;return V.createElement(Ft,{...p,"aria-current":R,className:I,ref:_,style:N,to:c,viewTransition:h},typeof f=="function"?f(k):f)});wM.displayName="NavLink";var SM=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:c=Of,action:h,onSubmit:f,relative:p,preventScrollReset:_,viewTransition:v,...T},A)=>{let S=xM(),P=NM(h,{relative:p}),D=c.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&fR.test(h),z=G=>{if(f&&f(G),G.defaultPrevented)return;G.preventDefault();let re=G.nativeEvent.submitter,ie=(re==null?void 0:re.getAttribute("formmethod"))||c;S(re||G.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:s,state:a,relative:p,preventScrollReset:_,viewTransition:v})};return V.createElement("form",{ref:A,method:D,action:P,onSubmit:i?f:z,...T,"data-discover":!F&&n==="render"?"true":void 0})});SM.displayName="Form";function CM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mR(n){let e=V.useContext(mc);return Qt(e,CM(n)),e}function AM(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:c}={}){let h=Ls(),f=hr(),p=Oh(n,{relative:a});return V.useCallback(_=>{if(iM(_,e)){_.preventDefault();let v=t!==void 0?t:oh(f)===oh(p);h(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:c})}},[f,h,p,t,i,e,n,s,a,c])}var RM=0,IM=()=>`__${String(++RM)}__`;function xM(){let{router:n}=mR("useSubmit"),{basename:e}=V.useContext(Hr),t=KD();return V.useCallback(async(i,s={})=>{let{action:a,method:c,encType:h,formData:f,body:p}=oM(i,e);if(s.navigate===!1){let _=s.fetcherKey||IM();await n.fetch(_,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function NM(n,{relative:e}={}){let{basename:t}=V.useContext(Hr),i=V.useContext(Ps);Qt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Oh(n||".",{relative:e})},c=hr();if(n==null){a.search=c.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(_=>_==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let _=h.toString();a.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ws([t,a.pathname])),oh(a)}function kM(n,e={}){let t=V.useContext(sR);Qt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mR("useViewTransitionState"),s=Oh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Is(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Is(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Xf(s.pathname,c)!=null||Xf(s.pathname,a)!=null}[...mM];const OM=()=>{};var $w={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _e=function(n,e){if(!n)throw pc(e)},pc=function(n){return new Error("Firebase Database ("+pR.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},DM=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Iv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,h=c?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,_=a>>2,v=(a&3)<<4|h>>4;let T=(h&15)<<2|p>>6,A=p&63;f||(A=64,c||(T=64)),i.push(t[_],t[v],t[T],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||p==null||v==null)throw new MM;const T=a<<2|h>>4;if(i.push(T),p!==64){const A=h<<4&240|p>>2;if(i.push(A),v!==64){const S=p<<6&192|v;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _R=function(n){const e=gR(n);return Iv.encodeByteArray(e,!0)},Jf=function(n){return _R(n).replace(/\./g,"")},Zf=function(n){try{return Iv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){return yR(void 0,n)}function yR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!LM(t)||(n[t]=yR(n[t],e[t]));return n}function LM(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=()=>UM().__FIREBASE_DEFAULTS__,jM=()=>{if(typeof process>"u"||typeof $w>"u")return;const n=$w.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Zf(n[1]);return e&&JSON.parse(e)},Fm=()=>{try{return OM()||VM()||jM()||BM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vR=n=>{var e,t;return(t=(e=Fm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},xv=n=>{const e=vR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ER=()=>{var n;return(n=Fm())===null||n===void 0?void 0:n.config},TR=n=>{var e;return(e=Fm())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(n){return n.endsWith(".cloudworkstations.dev")}async function zm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Jf(JSON.stringify(t)),Jf(JSON.stringify(c)),""].join(".")}const Gu={};function FM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function zM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Kw=!1;function qm(n,e){if(typeof window>"u"||typeof document>"u"||!Us(window.location.host)||Gu[n]===e||Gu[n]||Kw)return;Gu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=FM().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,A){T.setAttribute("width","24"),T.setAttribute("id",A),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Kw=!0,c()},T}function _(T,A){T.setAttribute("id",A),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=zM(i),A=t("text"),S=document.getElementById(A)||document.createElement("span"),P=t("learnmore"),D=document.getElementById(P)||document.createElement("a"),F=t("preprendIcon"),z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const G=T.element;h(G),_(D,P);const re=p();f(z,F),G.append(z,S,D,re),document.body.appendChild(G)}a?(S.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function qM(){var n;const e=(n=Fm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $M(){const n=Wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KM(){return pR.NODE_ADMIN===!0}function QM(){return!qM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wR(){try{return typeof indexedDB=="object"}catch{return!1}}function SR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}function YM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="FirebaseError";class dr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=WM,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,za.prototype.create)}}class za{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?XM(a,i):"Error",h=`${this.serviceName}: ${c} (${s}).`;return new dr(s,h,i)}}function XM(n,e){return n.replace(JM,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const JM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n){return JSON.parse(n)}function En(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=function(n){let e={},t={},i={},s="";try{const a=n.split(".");e=ah(Zf(a[0])||""),t=ah(Zf(a[1])||""),s=a[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}},ZM=function(n){const e=CR(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},eP=function(n){const e=CR(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ec(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function yy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function em(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function xo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],c=e[s];if(Qw(a)&&Qw(c)){if(!xo(a,c))return!1}else if(a!==c)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Qw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const T=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(T<<1|T>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4],p,_;for(let v=0;v<80;v++){v<40?v<20?(p=h^a&(c^h),_=1518500249):(p=a^c^h,_=1859775393):v<60?(p=a&c|h&(a|c),_=2400959708):(p=a^c^h,_=3395469782);const T=(s<<5|s>>>27)+p+f+_+i[v]&4294967295;f=h,h=c,c=(a<<30|a>>>2)&4294967295,a=s,s=T}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let s=0;const a=this.buf_;let c=this.inbuf_;for(;s<t;){if(c===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(a[c]=e.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(a),c=0;break}}else for(;s<t;)if(a[c]=e[s],++c,++s,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)e[i]=this.chain_[s]>>a&255,++i;return e}}function nP(n,e){const t=new iP(n,e);return t.subscribe.bind(t)}class iP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");rP(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=j_),s.error===void 0&&(s.error=j_),s.complete===void 0&&(s.complete=j_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function j_(){}function Hm(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const a=s-55296;i++,_e(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;s=65536+(a<<10)+c}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Gm=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n){return n&&n._delegate?n._delegate:n}class xi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Dh;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lP(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&c.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aP(n){return n===va?void 0:n}function lP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const uP={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},hP=lt.INFO,dP={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},fP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=dP[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $m{constructor(e){this.name=e,this._logLevel=hP,this._logHandler=fP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const mP=(n,e)=>e.some(t=>n instanceof t);let Yw,Ww;function pP(){return Yw||(Yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gP(){return Ww||(Ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AR=new WeakMap,vy=new WeakMap,RR=new WeakMap,B_=new WeakMap,Ov=new WeakMap;function _P(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Ss(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&AR.set(t,n)}).catch(()=>{}),Ov.set(e,n),e}function yP(n){if(vy.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});vy.set(n,e)}let Ey={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vP(n){Ey=n(Ey)}function EP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(F_(this),e,...t);return RR.set(i,e.sort?e.sort():[e]),Ss(i)}:gP().includes(n)?function(...e){return n.apply(F_(this),e),Ss(AR.get(this))}:function(...e){return Ss(n.apply(F_(this),e))}}function TP(n){return typeof n=="function"?EP(n):(n instanceof IDBTransaction&&yP(n),mP(n,pP())?new Proxy(n,Ey):n)}function Ss(n){if(n instanceof IDBRequest)return _P(n);if(B_.has(n))return B_.get(n);const e=TP(n);return e!==n&&(B_.set(n,e),Ov.set(e,n)),e}const F_=n=>Ov.get(n);function Km(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),h=Ss(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Ss(c.result),f.oldVersion,f.newVersion,Ss(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}function z_(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),Ss(t).then(()=>{})}const bP=["get","getKey","getAll","getAllKeys","count"],wP=["put","add","delete","clear"],q_=new Map;function Xw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(q_.get(e))return q_.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=wP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||bP.includes(t)))return;const a=async function(c,...h){const f=this.transaction(c,s?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&f.done]))[0]};return q_.set(e,a),a}vP(n=>({...n,get:(e,t,i)=>Xw(e,t)||n.get(e,t,i),has:(e,t)=>!!Xw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function CP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ty="@firebase/app",Jw="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new $m("@firebase/app"),AP="@firebase/app-compat",RP="@firebase/analytics-compat",IP="@firebase/analytics",xP="@firebase/app-check-compat",NP="@firebase/app-check",kP="@firebase/auth",OP="@firebase/auth-compat",DP="@firebase/database",MP="@firebase/data-connect",PP="@firebase/database-compat",LP="@firebase/functions",UP="@firebase/functions-compat",VP="@firebase/installations",jP="@firebase/installations-compat",BP="@firebase/messaging",FP="@firebase/messaging-compat",zP="@firebase/performance",qP="@firebase/performance-compat",HP="@firebase/remote-config",GP="@firebase/remote-config-compat",$P="@firebase/storage",KP="@firebase/storage-compat",QP="@firebase/firestore",YP="@firebase/ai",WP="@firebase/firestore-compat",XP="firebase",JP="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="[DEFAULT]",ZP={[Ty]:"fire-core",[AP]:"fire-core-compat",[IP]:"fire-analytics",[RP]:"fire-analytics-compat",[NP]:"fire-app-check",[xP]:"fire-app-check-compat",[kP]:"fire-auth",[OP]:"fire-auth-compat",[DP]:"fire-rtdb",[MP]:"fire-data-connect",[PP]:"fire-rtdb-compat",[LP]:"fire-fn",[UP]:"fire-fn-compat",[VP]:"fire-iid",[jP]:"fire-iid-compat",[BP]:"fire-fcm",[FP]:"fire-fcm-compat",[zP]:"fire-perf",[qP]:"fire-perf-compat",[HP]:"fire-rc",[GP]:"fire-rc-compat",[$P]:"fire-gcs",[KP]:"fire-gcs-compat",[QP]:"fire-fst",[WP]:"fire-fst-compat",[YP]:"fire-vertex","fire-js":"fire-js",[XP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=new Map,e2=new Map,wy=new Map;function Zw(n,e){try{n.container.addComponent(e)}catch(t){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qi(n){const e=n.name;if(wy.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;wy.set(e,n);for(const t of tm.values())Zw(t,n);for(const t of e2.values())Zw(t,n);return!0}function Bo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new za("app","Firebase",t2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=JP;function IR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:by,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw bo.create("bad-app-name",{appName:String(s)});if(t||(t=ER()),!t)throw bo.create("no-options");const a=tm.get(s);if(a){if(xo(t,a.options)&&xo(i,a.config))return a;throw bo.create("duplicate-app",{appName:s})}const c=new cP(s);for(const f of wy.values())c.addComponent(f);const h=new n2(t,i,c);return tm.set(s,h),h}function Mh(n=by){const e=tm.get(n);if(!e&&n===by&&ER())return IR();if(!e)throw bo.create("no-app",{appName:n});return e}function Yn(n,e,t){var i;let s=(i=ZP[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(h.join(" "));return}Qi(new xi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="firebase-heartbeat-database",r2=1,lh="firebase-heartbeat-store";let H_=null;function xR(){return H_||(H_=Km(i2,r2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(lh)}catch(t){console.warn(t)}}}}).catch(n=>{throw bo.create("idb-open",{originalErrorMessage:n.message})})),H_}async function s2(n){try{const t=(await xR()).transaction(lh),i=await t.objectStore(lh).get(NR(n));return await t.done,i}catch(e){if(e instanceof dr)xs.warn(e.message);else{const t=bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(t.message)}}}async function eS(n,e){try{const i=(await xR()).transaction(lh,"readwrite");await i.objectStore(lh).put(e,NR(n)),await i.done}catch(t){if(t instanceof dr)xs.warn(t.message);else{const i=bo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xs.warn(i.message)}}}function NR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=1024,a2=30;class l2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new u2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>a2){const c=h2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=tS(),{heartbeatsToSend:i,unsentEntries:s}=c2(this._heartbeatsCache.heartbeats),a=Jf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return xs.warn(t),""}}}function tS(){return new Date().toISOString().substring(0,10)}function c2(n,e=o2){const t=[];let i=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),nS(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),nS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class u2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wR()?SR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await s2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return eS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return eS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nS(n){return Jf(JSON.stringify({version:2,heartbeats:n})).length}function h2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(n){Qi(new xi("platform-logger",e=>new SP(e),"PRIVATE")),Qi(new xi("heartbeat",e=>new l2(e),"PRIVATE")),Yn(Ty,Jw,n),Yn(Ty,Jw,"esm2017"),Yn("fire-js","")}d2("");function Dv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function kR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f2=kR,OR=new za("auth","Firebase",kR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new $m("@firebase/auth");function m2(n,...e){nm.logLevel<=lt.WARN&&nm.warn(`Auth (${Fo}): ${n}`,...e)}function Mf(n,...e){nm.logLevel<=lt.ERROR&&nm.error(`Auth (${Fo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(n,...e){throw Mv(n,...e)}function Vr(n,...e){return Mv(n,...e)}function DR(n,e,t){const i=Object.assign(Object.assign({},f2()),{[e]:t});return new za("auth","Firebase",i).create(e,{appName:n.name})}function Aa(n){return DR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return OR.create(n,...e)}function Fe(n,e,...t){if(!n)throw Mv(e,...t)}function vs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Mf(e),new Error(e)}function ks(n,e){n||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function p2(){return iS()==="http:"||iS()==="https:"}function iS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p2()||GM()||"connection"in navigator)?navigator.onLine:!0}function _2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.shortDelay=e,this.longDelay=t,ks(t>e,"Short delay should be less than long delay!"),this.isMobile=kv()||bR()}get(){return g2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(n,e){ks(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E2=new Ph(3e4,6e4);function Lv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function _c(n,e,t,i,s={}){return PR(n,s,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const h=gc(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},a);return HM()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Us(n.emulatorConfig.host)&&(p.credentials="include"),MR.fetch()(await LR(n,n.config.apiHost,t,h),p)})}async function PR(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},y2),e);try{const s=new b2(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Tf(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Tf(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Tf(n,"user-disabled",c);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw DR(n,_,p);Ns(n,_)}}catch(s){if(s instanceof dr)throw s;Ns(n,"network-request-failed",{message:String(s)})}}async function T2(n,e,t,i,s={}){const a=await _c(n,e,t,i,s);return"mfaPendingCredential"in a&&Ns(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function LR(n,e,t,i){const s=`${e}${t}?${i}`,a=n,c=a.config.emulator?Pv(n.config,s):`${n.config.apiScheme}://${s}`;return v2.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class b2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Vr(this.auth,"network-request-failed")),E2.get())})}}function Tf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Vr(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(n,e){return _c(n,"POST","/v1/accounts:delete",e)}async function im(n,e){return _c(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S2(n,e=!1){const t=Dt(n),i=await t.getIdToken(e),s=Uv(i);Fe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:$u(G_(s.auth_time)),issuedAtTime:$u(G_(s.iat)),expirationTime:$u(G_(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function G_(n){return Number(n)*1e3}function Uv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{const s=Zf(t);return s?JSON.parse(s):(Mf("Failed to decode base64 JWT payload"),null)}catch(s){return Mf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rS(n){const e=Uv(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof dr&&C2(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function C2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rm(n){var e;const t=n.auth,i=await n.getIdToken(),s=await ch(n,im(t,{idToken:i}));Fe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?UR(a.providerUserInfo):[],h=I2(n.providerData,c),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(h!=null&&h.length),_=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Cy(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function R2(n){const e=Dt(n);await rm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I2(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function UR(n){return n.map(e=>{var{providerId:t}=e,i=Dv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(n,e){const t=await PR(n,{},async()=>{const i=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await LR(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",MR.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function N2(n,e){return _c(n,"POST","/v2/accounts:revokeToken",Lv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=rS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await x2(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,c=new Yl;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(Fe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Fe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class or{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,a=Dv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Cy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ch(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return S2(this,e)}reload(){return R2(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await rm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hi(this.auth.app))return Promise.reject(Aa(this.auth));const e=await this.getIdToken();return await ch(this,w2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,a,c,h,f,p,_;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(s=t.email)!==null&&s!==void 0?s:void 0,A=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,S=(c=t.photoURL)!==null&&c!==void 0?c:void 0,P=(h=t.tenantId)!==null&&h!==void 0?h:void 0,D=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,F=(p=t.createdAt)!==null&&p!==void 0?p:void 0,z=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:G,emailVerified:re,isAnonymous:ie,providerData:ye,stsTokenManager:k}=t;Fe(G&&k,e,"internal-error");const R=Yl.fromJSON(this.name,k);Fe(typeof G=="string",e,"internal-error"),ho(v,e.name),ho(T,e.name),Fe(typeof re=="boolean",e,"internal-error"),Fe(typeof ie=="boolean",e,"internal-error"),ho(A,e.name),ho(S,e.name),ho(P,e.name),ho(D,e.name),ho(F,e.name),ho(z,e.name);const I=new or({uid:G,auth:e,email:T,emailVerified:re,displayName:v,isAnonymous:ie,photoURL:S,phoneNumber:A,tenantId:P,stsTokenManager:R,createdAt:F,lastLoginAt:z});return ye&&Array.isArray(ye)&&(I.providerData=ye.map(N=>Object.assign({},N))),D&&(I._redirectEventId=D),I}static async _fromIdTokenResponse(e,t,i=!1){const s=new Yl;s.updateFromServerResponse(t);const a=new or({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await rm(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Fe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?UR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),h=new Yl;h.updateFromIdToken(i);const f=new or({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=new Map;function Es(n){ks(n instanceof Function,"Expected a class definition");let e=sS.get(n);return e?(ks(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VR.type="NONE";const oS=VR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(n,e,t){return`firebase:${n}:${e}:${t}`}class Wl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Pf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Pf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await im(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wl(Es(oS),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||Es(oS);const c=Pf(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(c);if(_){let v;if(typeof _=="string"){const T=await im(e,{idToken:_}).catch(()=>{});if(!T)break;v=await or._fromGetAccountInfoResponse(e,T,_)}else v=or._fromJSON(e,_);p!==a&&(h=v),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Wl(a,e,i):(a=f[0],h&&await a._set(c,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new Wl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HR(e))return"Blackberry";if(GR(e))return"Webos";if(BR(e))return"Safari";if((e.includes("chrome/")||FR(e))&&!e.includes("edge/"))return"Chrome";if(qR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function jR(n=Wn()){return/firefox\//i.test(n)}function BR(n=Wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FR(n=Wn()){return/crios\//i.test(n)}function zR(n=Wn()){return/iemobile/i.test(n)}function qR(n=Wn()){return/android/i.test(n)}function HR(n=Wn()){return/blackberry/i.test(n)}function GR(n=Wn()){return/webos/i.test(n)}function Vv(n=Wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function k2(n=Wn()){var e;return Vv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function O2(){return $M()&&document.documentMode===10}function $R(n=Wn()){return Vv(n)||qR(n)||GR(n)||HR(n)||/windows phone/i.test(n)||zR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n,e=[]){let t;switch(n){case"Browser":t=aS(Wn());break;case"Worker":t=`${aS(Wn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,h)=>{try{const f=e(a);c(f)}catch(f){h(f)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(n,e={}){return _c(n,"GET","/v2/passwordPolicy",Lv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=6;class L2{constructor(e){var t,i,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:P2,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,a,c,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lS(this),this.idTokenSubscription=new lS(this),this.beforeStateQueue=new D2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await im(this,{idToken:e}),i=await or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===h)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hi(this.app))return Promise.reject(Aa(this));const t=e?Dt(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hi(this.app)?Promise.reject(Aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hi(this.app)?Promise.reject(Aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M2(this),t=new L2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new za("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await N2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Es(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,s);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&m2(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function jv(n){return Dt(n)}class lS{constructor(e){this.auth=e,this.observer=null,this.addObserver=nP(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V2(n){Bv=n}function j2(n){return Bv.loadJS(n)}function B2(){return Bv.gapiScript}function F2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n,e){const t=Bo(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(xo(a,e??{}))return s;Ns(s,"already-initialized")}return t.initialize({options:e})}function q2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Es);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function H2(n,e,t){const i=jv(n);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=QR(e),{host:c,port:h}=G2(e),f=h===null?"":`:${h}`,p={url:`${a}//${c}${f}/`},_=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(xo(p,i.config.emulator)&&xo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Us(c)?(zm(`${a}//${c}${f}`),qm("Auth",!0)):$2()}function QR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function G2(n){const e=QR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:cS(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:cS(c)}}}function cS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function $2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,t){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,e){return T2(n,"POST","/v1/accounts:signInWithIdp",Lv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="http://localhost";class ka extends YR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ns("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,a=Dv(t,["providerId","signInMethod"]);if(!i||!s)return null;const c=new ka(i,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Xl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Xl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xl(e,t)}buildRequest(){const e={requestUri:K2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends WR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends Lh{constructor(){super("facebook.com")}static credential(e){return ka._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Lh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ka._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return go.credential(t,i)}catch{return null}}}go.GOOGLE_SIGN_IN_METHOD="google.com";go.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Lh{constructor(){super("github.com")}static credential(e){return ka._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.GITHUB_SIGN_IN_METHOD="github.com";_o.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Lh{constructor(){super("twitter.com")}static credential(e,t){return ka._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yo.credential(t,i)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await or._fromIdTokenResponse(e,i,s),c=uS(i);return new tc({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=uS(i);return new tc({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function uS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends dr{constructor(e,t,i,s){var a;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,sm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new sm(e,t,i,s)}}function XR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?sm._fromErrorAndOperation(n,a,e,i):a})}async function Q2(n,e,t=!1){const i=await ch(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return tc._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(n,e,t=!1){const{auth:i}=n;if(Hi(i.app))return Promise.reject(Aa(i));const s="reauthenticate";try{const a=await ch(n,XR(i,s,e,n),t);Fe(a.idToken,i,"internal-error");const c=Uv(a.idToken);Fe(c,i,"internal-error");const{sub:h}=c;return Fe(n.uid===h,i,"user-mismatch"),tc._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ns(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(n,e,t=!1){if(Hi(n.app))return Promise.reject(Aa(n));const i="signIn",s=await XR(n,i,e),a=await tc._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}function X2(n,e,t,i){return Dt(n).onIdTokenChanged(e,t,i)}function J2(n,e,t){return Dt(n).beforeAuthStateChanged(e,t)}const om="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(om,"1"),this.storage.removeItem(om),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=1e3,eL=10;class ZR extends JR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$R(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);O2()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eL):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZR.type="LOCAL";const tL=ZR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI extends JR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}eI.type="SESSION";const tI=eI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Qm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(c).map(async p=>p(t.origin,a)),f=await nL(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((h,f)=>{const p=Fv("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(v){const T=v;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function rL(n){jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function sL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function aL(){return nI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="firebaseLocalStorageDb",lL=1,am="firebaseLocalStorage",rI="fbase_key";class Uh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ym(n,e){return n.transaction([am],e?"readwrite":"readonly").objectStore(am)}function cL(){const n=indexedDB.deleteDatabase(iI);return new Uh(n).toPromise()}function Ay(){const n=indexedDB.open(iI,lL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(am,{keyPath:rI})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(am)?e(i):(i.close(),await cL(),e(await Ay()))})})}async function hS(n,e,t){const i=Ym(n,!0).put({[rI]:e,value:t});return new Uh(i).toPromise()}async function uL(n,e){const t=Ym(n,!1).get(e),i=await new Uh(t).toPromise();return i===void 0?null:i.value}function dS(n,e){const t=Ym(n,!0).delete(e);return new Uh(t).toPromise()}const hL=800,dL=3;class sI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ay(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>dL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qm._getInstance(aL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await sL(),!this.activeServiceWorker)return;this.sender=new iL(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ay();return await hS(e,om,"1"),await dS(e,om),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>uL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Ym(s,!1).getAll();return new Uh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sI.type="LOCAL";const fL=sI;new Ph(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(n,e){return e?Es(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends YR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pL(n){return W2(n.auth,new zv(n),n.bypassAuthState)}function gL(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),Y2(t,new zv(n),n.bypassAuthState)}async function _L(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),Q2(t,new zv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pL;case"linkViaPopup":case"linkViaRedirect":return _L;case"reauthViaPopup":case"reauthViaRedirect":return gL;default:Ns(this.auth,"internal-error")}}resolve(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new Ph(2e3,1e4);class Kl extends oI{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Kl.currentPopupAction&&Kl.currentPopupAction.cancel(),Kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ks(this.filter.length===1,"Popup operations only handle one event");const e=Fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yL.get())};e()}}Kl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="pendingRedirect",Lf=new Map;class EL extends oI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Lf.get(this.auth._key());if(!e){try{const i=await TL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Lf.set(this.auth._key(),e)}return this.bypassAuthState||Lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TL(n,e){const t=SL(e),i=wL(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function bL(n,e){Lf.set(n._key(),e)}function wL(n){return Es(n._redirectPersistence)}function SL(n){return Pf(vL,n.config.apiKey,n.name)}async function CL(n,e,t=!1){if(Hi(n.app))return Promise.reject(Aa(n));const i=jv(n),s=mL(i,e),c=await new EL(i,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=10*60*1e3;class RL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!aI(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Vr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AL&&this.cachedEventUids.clear(),this.cachedEventUids.has(fS(e))}saveEventToCache(e){this.cachedEventUids.add(fS(e)),this.lastProcessedEventTime=Date.now()}}function fS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(n,e={}){return _c(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kL=/^https?/;async function OL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xL(n);for(const t of e)try{if(DL(t))return}catch{}Ns(n,"unauthorized-domain")}function DL(n){const e=Sy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!kL.test(t))return!1;if(NL.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new Ph(3e4,6e4);function mS(){const n=jr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function PL(n){return new Promise((e,t)=>{var i,s,a;function c(){mS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mS(),t(Vr(n,"network-request-failed"))},timeout:ML.get()})}if(!((s=(i=jr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=jr().gapi)===null||a===void 0)&&a.load)c();else{const h=F2("iframefcb");return jr()[h]=()=>{gapi.load?c():t(Vr(n,"network-request-failed"))},j2(`${B2()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Uf=null,e})}let Uf=null;function LL(n){return Uf=Uf||PL(n),Uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Ph(5e3,15e3),VL="__/auth/iframe",jL="emulator/auth/iframe",BL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zL(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Pv(e,jL):`https://${n.config.authDomain}/${VL}`,i={apiKey:e.apiKey,appName:n.name,v:Fo},s=FL.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${gc(i).slice(1)}`}async function qL(n){const e=await LL(n),t=jr().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:zL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BL,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const c=Vr(n,"network-request-failed"),h=jr().setTimeout(()=>{a(c)},UL.get());function f(){jr().clearTimeout(h),s(i)}i.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GL=500,$L=600,KL="_blank",QL="http://localhost";class pS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YL(n,e,t,i=GL,s=$L){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f=Object.assign(Object.assign({},HL),{width:i.toString(),height:s.toString(),top:a,left:c}),p=Wn().toLowerCase();t&&(h=FR(p)?KL:t),jR(p)&&(e=e||QL,f.scrollbars="yes");const _=Object.entries(f).reduce((T,[A,S])=>`${T}${A}=${S},`,"");if(k2(p)&&h!=="_self")return WL(e||"",h),new pS(null);const v=window.open(e||"",h,_);Fe(v,n,"popup-blocked");try{v.focus()}catch{}return new pS(v)}function WL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL="__/auth/handler",JL="emulator/auth/handler",ZL=encodeURIComponent("fac");async function gS(n,e,t,i,s,a){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Fo,eventId:s};if(e instanceof WR){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",yy(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(e instanceof Lh){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),p=f?`#${ZL}=${encodeURIComponent(f)}`:"";return`${eU(n)}?${gc(h).slice(1)}${p}`}function eU({config:n}){return n.emulator?Pv(n,JL):`https://${n.authDomain}/${XL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="webStorageSupport";class tU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tI,this._completeRedirectFn=CL,this._overrideRedirectResult=bL}async _openPopup(e,t,i,s){var a;ks((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await gS(e,t,i,Sy(),s);return YL(e,c,Fv())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await gS(e,t,i,Sy(),s);return rL(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ks(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await qL(e),i=new RL(e);return t.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($_,{type:$_},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[$_];c!==void 0&&t(!!c),Ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=OL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $R()||BR()||Vv()}}const nU=tU;var _S="@firebase/auth",yS="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sU(n){Qi(new xi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Fe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KR(n)},p=new U2(i,s,a,f);return q2(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Qi(new xi("auth-internal",e=>{const t=jv(e.getProvider("auth").getImmediate());return(i=>new iU(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(_S,yS,rU(n)),Yn(_S,yS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=5*60,aU=TR("authIdTokenMaxAge")||oU;let vS=null;const lU=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>aU)return;const s=t==null?void 0:t.token;vS!==s&&(vS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ry(n=Mh()){const e=Bo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=z2(n,{popupRedirectResolver:nU,persistence:[fL,tL,tI]}),i=TR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=lU(a.toString());J2(t,c,()=>c(t.currentUser)),X2(t,h=>c(h))}}const s=vR("auth");return s&&H2(t,`http://${s}`),t}function cU(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}V2({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=Vr("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",cU().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sU("Browser");var ES={};const TS="@firebase/database",bS="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lI="";function uU(n){lI=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),En(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ah(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Gr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hU(e)}}catch{}return new dU},ba=cI("localStorage"),fU=cI("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new $m("@firebase/database"),mU=function(){let n=1;return function(){return n++}}(),uI=function(n){const e=sP(n),t=new tP;t.update(e);const i=t.digest();return Iv.encodeByteArray(i)},Vh=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Vh.apply(null,i):typeof i=="object"?e+=En(i):e+=i,e+=" "}return e};let Ku=null,wS=!0;const pU=function(n,e){_e(!0,"Can't turn on custom loggers persistently."),Jl.logLevel=lt.VERBOSE,Ku=Jl.log.bind(Jl)},Un=function(...n){if(wS===!0&&(wS=!1,Ku===null&&fU.get("logging_enabled")===!0&&pU()),Ku){const e=Vh.apply(null,n);Ku(e)}},jh=function(n){return function(...e){Un(n,...e)}},Iy=function(...n){const e="FIREBASE INTERNAL ERROR: "+Vh(...n);Jl.error(e)},Os=function(...n){const e=`FIREBASE FATAL ERROR: ${Vh(...n)}`;throw Jl.error(e),new Error(e)},ri=function(...n){const e="FIREBASE WARNING: "+Vh(...n);Jl.warn(e)},gU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ri("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},qv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_U=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Oa="[MIN_NAME]",No="[MAX_NAME]",qa=function(n,e){if(n===e)return 0;if(n===Oa||e===No)return-1;if(e===Oa||n===No)return 1;{const t=SS(n),i=SS(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},yU=function(n,e){return n===e?0:n<e?-1:1},Mu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+En(e))},Hv=function(n){if(typeof n!="object"||n===null)return En(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=En(e[i]),t+=":",t+=Hv(n[e[i]]);return t+="}",t},hI=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function Bn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const dI=function(n){_e(!qv(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,a,c,h,f;n===0?(a=0,c=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=h+i,c=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(a=0,c=Math.round(n/Math.pow(2,1-i-t))));const p=[];for(f=t;f;f-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(f=e;f;f-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(s?1:0),p.reverse();const _=p.join("");let v="";for(f=0;f<64;f+=8){let T=parseInt(_.substr(f,8),2).toString(16);T.length===1&&(T="0"+T),v=v+T}return v.toLowerCase()},vU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},EU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function TU(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const bU=new RegExp("^-?(0*)\\d{1,10}$"),wU=-2147483648,SU=2147483647,SS=function(n){if(bU.test(n)){const e=Number(n);if(e>=wU&&e<=SU)return e}return null},yc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ri("Exception was thrown by user callback.",t),e},Math.floor(0))}},CU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Hi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ri(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Un("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ri(e)}}class Vf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Vf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="5",fI="v",mI="s",pI="r",gI="f",_I=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yI="ls",vI="p",xy="ac",EI="websocket",TI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,t,i,s,a=!1,c="",h=!1,f=!1,p=null){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=f,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ba.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ba.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function IU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function wI(n,e,t){_e(typeof e=="string","typeof type must == string"),_e(typeof t=="object","typeof params must == object");let i;if(e===EI)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===TI)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);IU(n)&&(t.ns=n.namespace);const s=[];return Bn(t,(a,c)=>{s.push(a+"="+c)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(){this.counters_={}}incrementCounter(e,t=1){Gr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return PM(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_={},Q_={};function $v(n){const e=n.toString();return K_[e]||(K_[e]=new xU),K_[e]}function NU(n,e){const t=n.toString();return Q_[t]||(Q_[t]=e()),Q_[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&yc(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="start",OU="close",DU="pLPCommand",MU="pRTLPCB",SI="id",CI="pw",AI="ser",PU="cb",LU="seg",UU="ts",VU="d",jU="dframe",RI=1870,II=30,BU=RI-II,FU=25e3,zU=3e4;class Ql{constructor(e,t,i,s,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jh(e),this.stats_=$v(t),this.urlFn=f=>(this.appCheckToken&&(f[xy]=this.appCheckToken),wI(t,TI,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new kU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zU)),_U(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Kv((...a)=>{const[c,h,f,p,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===CS)this.id=h,this.password=f;else if(c===OU)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[CS]="t",i[AI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[PU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[fI]=Gv,this.transportSessionId&&(i[mI]=this.transportSessionId),this.lastSessionId&&(i[yI]=this.lastSessionId),this.applicationId&&(i[vI]=this.applicationId),this.appCheckToken&&(i[xy]=this.appCheckToken),typeof location<"u"&&location.hostname&&_I.test(location.hostname)&&(i[pI]=gI);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ql.forceAllow_=!0}static forceDisallow(){Ql.forceDisallow_=!0}static isAvailable(){return Ql.forceAllow_?!0:!Ql.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vU()&&!EU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=En(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=_R(t),s=hI(i,BU);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[jU]="t",i[SI]=e,i[CI]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=En(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Kv{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mU(),window[DU+this.uniqueCallbackIdentifier]=e,window[MU+this.uniqueCallbackIdentifier]=t,this.myIFrame=Kv.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Un("frame writing exception"),h.stack&&Un(h.stack),Un(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Un("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[SI]=this.myID,e[CI]=this.myPW,e[AI]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+II+i.length<=RI;){const c=this.pendingSegs.shift();i=i+"&"+LU+s+"="+c.seg+"&"+UU+s+"="+c.ts+"&"+VU+s+"="+c.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(FU)),a=()=>{clearTimeout(s),i()};this.addTag(e,a)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Un("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=16384,HU=45e3;let lm=null;typeof MozWebSocket<"u"?lm=MozWebSocket:typeof WebSocket<"u"&&(lm=WebSocket);class sr{constructor(e,t,i,s,a,c,h){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jh(this.connId),this.stats_=$v(t),this.connURL=sr.connectionURL_(t,c,h,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,a){const c={};return c[fI]=Gv,typeof location<"u"&&location.hostname&&_I.test(location.hostname)&&(c[pI]=gI),t&&(c[mI]=t),i&&(c[yI]=i),s&&(c[xy]=s),a&&(c[vI]=a),wI(e,EI,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ba.set("previous_websocket_failure",!0);try{let i;KM(),this.mySock=new lm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){sr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&lm!==null&&!sr.forceDisallow_}static previouslyFailed(){return ba.isInMemoryStorage||ba.get("previous_websocket_failure")===!0}markConnectionHealthy(){ba.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=ah(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(_e(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=En(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=hI(t,qU);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(HU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}sr.responsesRequiredToBeHealthy=2;sr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{static get ALL_TRANSPORTS(){return[Ql,sr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=sr&&sr.isAvailable();let i=t&&!sr.previouslyFailed();if(e.webSocketOnly&&(t||ri("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[sr];else{const s=this.transports_=[];for(const a of uh.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);uh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}uh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=6e4,$U=5e3,KU=10*1024,QU=100*1024,Y_="t",AS="d",YU="s",RS="r",WU="e",IS="o",xS="a",NS="n",kS="p",XU="h";class JU{constructor(e,t,i,s,a,c,h,f,p,_){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=f,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jh("c:"+this.id+":"),this.transportManager_=new uh(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Qu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>QU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>KU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Y_ in e){const t=e[Y_];t===xS?this.upgradeIfSecondaryHealthy_():t===RS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===IS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Mu("t",e),i=Mu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:kS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:NS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Mu("t",e),i=Mu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Mu(Y_,e);if(AS in e){const i=e[AS];if(t===XU){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===NS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===YU?this.onConnectionShutdown_(i):t===RS?this.onReset_(i):t===WU?Iy("Server Error: "+i):t===IS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Iy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Gv!==i&&ri("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Qu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(GU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor($U))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:kS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ba.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.allowedEvents_=e,this.listeners_={},_e(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let a=0;a<s.length;a++)if(s[a].callback===t&&(!i||i===s[a].context)){s.splice(a,1);return}}validateEventType_(e){_e(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends NI{static getInstance(){return new cm}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!kv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return _e(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=32,DS=768;class Rt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function _t(){return new Rt("")}function nt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ko(n){return n.pieces_.length-n.pieceNum_}function Bt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Rt(n.pieces_,e)}function Qv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ZU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function hh(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function kI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Rt(e,0)}function tn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Rt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new Rt(t,0)}function it(n){return n.pieceNum_>=n.pieces_.length}function ii(n,e){const t=nt(n),i=nt(e);if(t===null)return e;if(t===i)return ii(Bt(n),Bt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function e4(n,e){const t=hh(n,0),i=hh(e,0);for(let s=0;s<t.length&&s<i.length;s++){const a=qa(t[s],i[s]);if(a!==0)return a}return t.length===i.length?0:t.length<i.length?-1:1}function Yv(n,e){if(ko(n)!==ko(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function $i(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ko(n)>ko(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class t4{constructor(e,t){this.errorPrefix_=t,this.parts_=hh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Gm(this.parts_[i]);OI(this)}}function n4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Gm(e),OI(n)}function i4(n){const e=n.parts_.pop();n.byteLength_-=Gm(e),n.parts_.length>0&&(n.byteLength_-=1)}function OI(n){if(n.byteLength_>DS)throw new Error(n.errorPrefix_+"has a key path longer than "+DS+" bytes ("+n.byteLength_+").");if(n.parts_.length>OS)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+OS+") or object contains a cycle "+Ea(n))}function Ea(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends NI{static getInstance(){return new Wv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return _e(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=1e3,r4=60*5*1e3,MS=30*1e3,s4=1.3,o4=3e4,a4="server_kill",PS=3;class Cs extends xI{constructor(e,t,i,s,a,c,h,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=f,this.id=Cs.nextPersistentConnectionId_++,this.log_=jh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pu,this.maxReconnectDelay_=r4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Wv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,a={r:s,a:e,b:t};this.log_(En(a)),_e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new Dh,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),t.promise}listen(e,t,i,s){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_e(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const a={p:i},c="q";e.tag&&(a.q=t._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const f=h.d,p=h.s;Cs.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(p,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Gr(e,"w")){const i=ec(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();ri(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||eP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=MS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=ZM(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const a=s.s,c=s.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),_e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const a={p:e},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const a={p:t,d:i};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,a){this.initConnection_();const c={p:t,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:s}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,a=>{this.log_(t+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+En(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Iy("Unrecognized action received from server: "+En(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){_e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>o4&&(this.reconnectDelay_=Pu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*s4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Cs.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const f=function(){h?h.close():(c=!0,i())},p=function(v){_e(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:f,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,T]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Un("getToken() completed but was canceled"):(Un("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=T&&T.token,h=new JU(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,A=>{ri(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(a4)},a))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&ri(v),f())}}}interrupt(e){Un("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Un("Resuming connection for reason: "+e),delete this.interruptReasons_[e],yy(this.interruptReasons_)&&(this.reconnectDelay_=Pu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(a=>Hv(a)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new Rt(e).toString();let s;if(this.listens.has(i)){const a=this.listens.get(i);s=a.get(t),a.delete(t),a.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){Un("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=PS&&(this.reconnectDelay_=MS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Un("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=PS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+lI.replace(/\./g,"-")]=1,kv()?e["framework.cordova"]=1:bR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cm.getInstance().currentlyOnline();return yy(this.interruptReasons_)&&e}}Cs.nextPersistentConnectionId_=0;Cs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new rt(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new rt(Oa,e),s=new rt(Oa,t);return this.compare(i,s)!==0}minPost(){return rt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf;class DI extends Wm{static get __EMPTY_NODE(){return bf}static set __EMPTY_NODE(e){bf=e}compare(e,t){return qa(e.name,t.name)}isDefinedOn(e){throw pc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return rt.MIN}maxPost(){return new rt(No,bf)}makePost(e,t){return _e(typeof e=="string","KeyIndex indexValue must always be a string."),new rt(e,bf)}toString(){return".key"}}const Ra=new DI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf=class{constructor(e,t,i,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,s&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ri=class Fu{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??Fu.RED,this.left=s??Pr.EMPTY_NODE,this.right=a??Pr.EMPTY_NODE}copy(e,t,i,s,a){return new Fu(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Pr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Pr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Fu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Fu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Ri.RED=!0;Ri.BLACK=!1;class l4{copy(e,t,i,s,a){return this}insert(e,t,i){return new Ri(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Pr=class jf{constructor(e,t=jf.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new jf(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ri.BLACK,null,null))}remove(e){return new jf(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ri.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new wf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new wf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new wf(this.root_,null,this.comparator_,!0,e)}};Pr.EMPTY_NODE=new l4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(n,e){return qa(n.name,e.name)}function Xv(n,e){return qa(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ny;function u4(n){Ny=n}const MI=function(n){return typeof n=="number"?"number:"+dI(n):"string:"+n},PI=function(n){if(n.isLeafNode()){const e=n.val();_e(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gr(e,".sv"),"Priority must be a string or number.")}else _e(n===Ny||n.isEmpty(),"priority of unexpected type.");_e(n===Ny||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LS;class xn{static set __childrenNodeConstructor(e){LS=e}static get __childrenNodeConstructor(){return LS}constructor(e,t=xn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,_e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),PI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return it(e)?this:nt(e)===".priority"?this.priorityNode_:xn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:xn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=nt(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(_e(i!==".priority"||ko(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,xn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+MI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=dI(this.value_):e+=this.value_,this.lazyHash_=uI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xn.__childrenNodeConstructor?-1:(_e(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=xn.VALUE_TYPE_ORDER.indexOf(t),a=xn.VALUE_TYPE_ORDER.indexOf(i);return _e(s>=0,"Unknown leaf type: "+t),_e(a>=0,"Unknown leaf type: "+i),s===a?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}xn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LI,UI;function h4(n){LI=n}function d4(n){UI=n}class f4 extends Wm{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),a=i.compareTo(s);return a===0?qa(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return rt.MIN}maxPost(){return new rt(No,new xn("[PRIORITY-POST]",UI))}makePost(e,t){const i=LI(e);return new rt(t,new xn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Kt=new f4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=Math.log(2);class p4{constructor(e){const t=a=>parseInt(Math.log(a)/m4,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const um=function(n,e,t,i){n.sort(e);const s=function(f,p){const _=p-f;let v,T;if(_===0)return null;if(_===1)return v=n[f],T=t?t(v):v,new Ri(T,v.node,Ri.BLACK,null,null);{const A=parseInt(_/2,10)+f,S=s(f,A),P=s(A+1,p);return v=n[A],T=t?t(v):v,new Ri(T,v.node,Ri.BLACK,S,P)}},a=function(f){let p=null,_=null,v=n.length;const T=function(S,P){const D=v-S,F=v;v-=S;const z=s(D+1,F),G=n[D],re=t?t(G):G;A(new Ri(re,G.node,P,null,z))},A=function(S){p?(p.left=S,p=S):(_=S,p=S)};for(let S=0;S<f.count;++S){const P=f.nextBitIsOne(),D=Math.pow(2,f.count-(S+1));P?T(D,Ri.BLACK):(T(D,Ri.BLACK),T(D,Ri.RED))}return _},c=new p4(n.length),h=a(c);return new Pr(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W_;const Bl={};class Ts{static get Default(){return _e(Bl&&Kt,"ChildrenNode.ts has not been loaded"),W_=W_||new Ts({".priority":Bl},{".priority":Kt}),W_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=ec(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Pr?t:null}hasIndex(e){return Gr(this.indexSet_,e.toString())}addIndex(e,t){_e(e!==Ra,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const a=t.getIterator(rt.Wrap);let c=a.getNext();for(;c;)s=s||e.isDefinedOn(c.node),i.push(c),c=a.getNext();let h;s?h=um(i,e.getCompare()):h=Bl;const f=e.toString(),p=Object.assign({},this.indexSet_);p[f]=e;const _=Object.assign({},this.indexes_);return _[f]=h,new Ts(_,p)}addToIndexes(e,t){const i=em(this.indexes_,(s,a)=>{const c=ec(this.indexSet_,a);if(_e(c,"Missing index implementation for "+a),s===Bl)if(c.isDefinedOn(e.node)){const h=[],f=t.getIterator(rt.Wrap);let p=f.getNext();for(;p;)p.name!==e.name&&h.push(p),p=f.getNext();return h.push(e),um(h,c.getCompare())}else return Bl;else{const h=t.get(e.name);let f=s;return h&&(f=f.remove(new rt(e.name,h))),f.insert(e,e.node)}});return new Ts(i,this.indexSet_)}removeFromIndexes(e,t){const i=em(this.indexes_,s=>{if(s===Bl)return s;{const a=t.get(e.name);return a?s.remove(new rt(e.name,a)):s}});return new Ts(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu;class Ve{static get EMPTY_NODE(){return Lu||(Lu=new Ve(new Pr(Xv),null,Ts.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&PI(this.priorityNode_),this.children_.isEmpty()&&_e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Lu}updatePriority(e){return this.children_.isEmpty()?this:new Ve(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Lu:t}}getChild(e){const t=nt(e);return t===null?this:this.getImmediateChild(t).getChild(Bt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(_e(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new rt(e,t);let s,a;t.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),a=this.indexMap_.addToIndexes(i,this.children_));const c=s.isEmpty()?Lu:this.priorityNode_;return new Ve(s,c,a)}}updateChild(e,t){const i=nt(e);if(i===null)return t;{_e(nt(e)!==".priority"||ko(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Bt(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,a=!0;if(this.forEachChild(Kt,(c,h)=>{t[c]=h.val(e),i++,a&&Ve.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):a=!1}),!e&&a&&s<2*i){const c=[];for(const h in t)c[h]=t[h];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+MI(this.getPriority().val())+":"),this.forEachChild(Kt,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":uI(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const a=s.getPredecessorKey(new rt(e,t));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new rt(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new rt(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,rt.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,rt.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Bh?-1:0}withIndex(e){if(e===Ra||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ve(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ra||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Kt),s=t.getIterator(Kt);let a=i.getNext(),c=s.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=i.getNext(),c=s.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Ra?null:this.indexMap_.get(e.toString())}}Ve.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class g4 extends Ve{constructor(){super(new Pr(Xv),Ve.EMPTY_NODE,Ts.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ve.EMPTY_NODE}isEmpty(){return!1}}const Bh=new g4;Object.defineProperties(rt,{MIN:{value:new rt(Oa,Ve.EMPTY_NODE)},MAX:{value:new rt(No,Bh)}});DI.__EMPTY_NODE=Ve.EMPTY_NODE;xn.__childrenNodeConstructor=Ve;u4(Bh);d4(Bh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=!0;function vn(n,e=null){if(n===null)return Ve.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),_e(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new xn(t,vn(e))}if(!(n instanceof Array)&&_4){const t=[];let i=!1;if(Bn(n,(c,h)=>{if(c.substring(0,1)!=="."){const f=vn(h);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new rt(c,f)))}}),t.length===0)return Ve.EMPTY_NODE;const a=um(t,c4,c=>c.name,Xv);if(i){const c=um(t,Kt.getCompare());return new Ve(a,vn(e),new Ts({".priority":c},{".priority":Kt}))}else return new Ve(a,vn(e),Ts.Default)}else{let t=Ve.EMPTY_NODE;return Bn(n,(i,s)=>{if(Gr(n,i)&&i.substring(0,1)!=="."){const a=vn(s);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(vn(e))}}h4(vn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Wm{constructor(e){super(),this.indexPath_=e,_e(!it(e)&&nt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),a=i.compareTo(s);return a===0?qa(e.name,t.name):a}makePost(e,t){const i=vn(e),s=Ve.EMPTY_NODE.updateChild(this.indexPath_,i);return new rt(t,s)}maxPost(){const e=Ve.EMPTY_NODE.updateChild(this.indexPath_,Bh);return new rt(No,e)}toString(){return hh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4 extends Wm{compare(e,t){const i=e.node.compareTo(t.node);return i===0?qa(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return rt.MIN}maxPost(){return rt.MAX}makePost(e,t){const i=vn(e);return new rt(t,i)}toString(){return".value"}}const VI=new y4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(n){return{type:"value",snapshotNode:n}}function nc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function dh(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function fh(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function v4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this.index_=e}updateChild(e,t,i,s,a,c){_e(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(s).equals(i.getChild(s))&&h.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(dh(t,h)):_e(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(nc(t,i)):c.trackChildChange(fh(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Kt,(s,a)=>{t.hasChild(s)||i.trackChildChange(dh(s,a))}),t.isLeafNode()||t.forEachChild(Kt,(s,a)=>{if(e.hasChild(s)){const c=e.getImmediateChild(s);c.equals(a)||i.trackChildChange(fh(s,a,c))}else i.trackChildChange(nc(s,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ve.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.indexedFilter_=new Zv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mh.getStartPost_(e),this.endPost_=mh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,a,c){return this.matches(new rt(t,i))||(i=Ve.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,a,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Ve.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(Ve.EMPTY_NODE);const a=this;return t.forEachChild(Kt,(c,h)=>{a.matches(new rt(c,h))||(s=s.updateImmediateChild(c,Ve.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new mh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,a,c){return this.rangedFilter_.matches(new rt(t,i))||(i=Ve.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,a,c):this.fullLimitUpdateChild_(e,t,i,a,c)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=Ve.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=Ve.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))s=s.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(Ve.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:s=s.updateImmediateChild(h.name,Ve.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,a){let c;if(this.reverse_){const v=this.index_.getCompare();c=(T,A)=>v(A,T)}else c=this.index_.getCompare();const h=e;_e(h.numChildren()===this.limit_,"");const f=new rt(t,i),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(f);if(h.hasChild(t)){const v=h.getImmediateChild(t);let T=s.getChildAfterChild(this.index_,p,this.reverse_);for(;T!=null&&(T.name===t||h.hasChild(T.name));)T=s.getChildAfterChild(this.index_,T,this.reverse_);const A=T==null?1:c(T,f);if(_&&!i.isEmpty()&&A>=0)return a!=null&&a.trackChildChange(fh(t,i,v)),h.updateImmediateChild(t,i);{a!=null&&a.trackChildChange(dh(t,v));const P=h.updateImmediateChild(t,Ve.EMPTY_NODE);return T!=null&&this.rangedFilter_.matches(T)?(a!=null&&a.trackChildChange(nc(T.name,T.node)),P.updateImmediateChild(T.name,T.node)):P}}else return i.isEmpty()?e:_&&c(p,f)>=0?(a!=null&&(a.trackChildChange(dh(p.name,p.node)),a.trackChildChange(nc(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(p.name,Ve.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oa}hasEnd(){return this.endSet_}getIndexEndValue(){return _e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:No}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kt}copy(){const e=new eE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function T4(n){return n.loadsAllData()?new Zv(n.getIndex()):n.hasLimit()?new E4(n):new mh(n)}function b4(n,e){const t=n.copy();return t.index_=e,t}function US(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Kt?t="$priority":n.index_===VI?t="$value":n.index_===Ra?t="$key":(_e(n.index_ instanceof Jv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=En(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=En(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+En(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=En(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+En(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function VS(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Kt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends xI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(_e(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=jh("p:rest:"),this.listens_={}}listen(e,t,i,s){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=hm.getListenId_(e,i),h={};this.listens_[c]=h;const f=US(e._queryParams);this.restRequest_(a+".json",f,(p,_)=>{let v=_;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(a,v,!1,i),ec(this.listens_,c)===h){let T;p?p===401?T="permission_denied":T="rest_error:"+p:T="ok",s(T,null)}})}unlisten(e,t){const i=hm.getListenId_(e,t);delete this.listens_[i]}get(e){const t=US(e._queryParams),i=e._path.toString(),s=new Dh;return this.restRequest_(i+".json",t,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(i,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(t.auth=s.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gc(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let f=null;if(h.status>=200&&h.status<300){try{f=ah(h.responseText)}catch{ri("Failed to parse JSON response for "+c+": "+h.responseText)}i(null,f)}else h.status!==401&&h.status!==404&&ri("Got unsuccessful REST response for "+c+" Status: "+h.status),i(h.status);i=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.rootNode_=Ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(){return{value:null,children:new Map}}function BI(n,e,t){if(it(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=nt(e);n.children.has(i)||n.children.set(i,dm());const s=n.children.get(i);e=Bt(e),BI(s,e,t)}}function ky(n,e,t){n.value!==null?t(e,n.value):S4(n,(i,s)=>{const a=new Rt(e.toString()+"/"+i);ky(s,a,t)})}function S4(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bn(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=10*1e3,A4=30*1e3,R4=5*60*1e3;class I4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new C4(e);const i=jS+(A4-jS)*Math.random();Qu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Bn(e,(s,a)=>{a>0&&Gr(this.statsToReport_,s)&&(t[s]=a,i=!0)}),i&&this.server_.reportStats(t),Qu(this.reportStats_.bind(this),Math.floor(Math.random()*2*R4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ar||(ar={}));function tE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function nE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function iE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ar.ACK_USER_WRITE,this.source=tE()}operationForChild(e){if(it(this.path)){if(this.affectedTree.value!=null)return _e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Rt(e));return new fm(_t(),t,this.revert)}}else return _e(nt(this.path)===e,"operationForChild called for unrelated child."),new fm(Bt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.source=e,this.path=t,this.type=ar.LISTEN_COMPLETE}operationForChild(e){return it(this.path)?new ph(this.source,_t()):new ph(this.source,Bt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ar.OVERWRITE}operationForChild(e){return it(this.path)?new Da(this.source,_t(),this.snap.getImmediateChild(e)):new Da(this.source,Bt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ar.MERGE}operationForChild(e){if(it(this.path)){const t=this.children.subtree(new Rt(e));return t.isEmpty()?null:t.value?new Da(this.source,_t(),t.value):new ic(this.source,_t(),t)}else return _e(nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ic(this.source,Bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(it(e))return this.isFullyInitialized()&&!this.filtered_;const t=nt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function N4(n,e,t,i){const s=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(v4(c.childName,c.snapshotNode))}),Uu(n,s,"child_removed",e,i,t),Uu(n,s,"child_added",e,i,t),Uu(n,s,"child_moved",a,i,t),Uu(n,s,"child_changed",e,i,t),Uu(n,s,"value",e,i,t),s}function Uu(n,e,t,i,s,a){const c=i.filter(h=>h.type===t);c.sort((h,f)=>O4(n,h,f)),c.forEach(h=>{const f=k4(n,h,a);s.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(f,n.query_))})})}function k4(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function O4(n,e,t){if(e.childName==null||t.childName==null)throw pc("Should only compare child_ events.");const i=new rt(e.childName,e.snapshotNode),s=new rt(t.childName,t.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e){return{eventCache:n,serverCache:e}}function Yu(n,e,t,i){return Xm(new Oo(e,t,i),n.serverCache)}function FI(n,e,t,i){return Xm(n.eventCache,new Oo(e,t,i))}function mm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ma(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X_;const D4=()=>(X_||(X_=new Pr(yU)),X_);class jt{static fromObject(e){let t=new jt(null);return Bn(e,(i,s)=>{t=t.set(new Rt(i),s)}),t}constructor(e,t=D4()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:_t(),value:this.value};if(it(e))return null;{const i=nt(e),s=this.children.get(i);if(s!==null){const a=s.findRootMostMatchingPathAndValue(Bt(e),t);return a!=null?{path:tn(new Rt(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(it(e))return this;{const t=nt(e),i=this.children.get(t);return i!==null?i.subtree(Bt(e)):new jt(null)}}set(e,t){if(it(e))return new jt(t,this.children);{const i=nt(e),a=(this.children.get(i)||new jt(null)).set(Bt(e),t),c=this.children.insert(i,a);return new jt(this.value,c)}}remove(e){if(it(e))return this.children.isEmpty()?new jt(null):new jt(null,this.children);{const t=nt(e),i=this.children.get(t);if(i){const s=i.remove(Bt(e));let a;return s.isEmpty()?a=this.children.remove(t):a=this.children.insert(t,s),this.value===null&&a.isEmpty()?new jt(null):new jt(this.value,a)}else return this}}get(e){if(it(e))return this.value;{const t=nt(e),i=this.children.get(t);return i?i.get(Bt(e)):null}}setTree(e,t){if(it(e))return t;{const i=nt(e),a=(this.children.get(i)||new jt(null)).setTree(Bt(e),t);let c;return a.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,a),new jt(this.value,c)}}fold(e){return this.fold_(_t(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,a)=>{i[s]=a.fold_(tn(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,_t(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(it(e))return null;{const a=nt(e),c=this.children.get(a);return c?c.findOnPath_(Bt(e),tn(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_t(),t)}foreachOnPath_(e,t,i){if(it(e))return this;{this.value&&i(t,this.value);const s=nt(e),a=this.children.get(s);return a?a.foreachOnPath_(Bt(e),tn(t,s),i):new jt(null)}}foreach(e){this.foreach_(_t(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(tn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.writeTree_=e}static empty(){return new cr(new jt(null))}}function Wu(n,e,t){if(it(e))return new cr(new jt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let a=i.value;const c=ii(s,e);return a=a.updateChild(c,t),new cr(n.writeTree_.set(s,a))}else{const s=new jt(t),a=n.writeTree_.setTree(e,s);return new cr(a)}}}function Oy(n,e,t){let i=n;return Bn(t,(s,a)=>{i=Wu(i,tn(e,s),a)}),i}function BS(n,e){if(it(e))return cr.empty();{const t=n.writeTree_.setTree(e,new jt(null));return new cr(t)}}function Dy(n,e){return Ha(n,e)!=null}function Ha(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ii(t.path,e)):null}function FS(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Kt,(i,s)=>{e.push(new rt(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new rt(i,s.value))}),e}function wo(n,e){if(it(e))return n;{const t=Ha(n,e);return t!=null?new cr(new jt(t)):new cr(n.writeTree_.subtree(e))}}function My(n){return n.writeTree_.isEmpty()}function rc(n,e){return zI(_t(),n.writeTree_,e)}function zI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,a)=>{s===".priority"?(_e(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):t=zI(tn(n,s),a,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(tn(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(n,e){return $I(e,n)}function M4(n,e,t,i,s){_e(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Wu(n.visibleWrites,e,t)),n.lastWriteId=i}function P4(n,e,t,i){_e(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Oy(n.visibleWrites,e,t),n.lastWriteId=i}function L4(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function U4(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);_e(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,a=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&V4(h,i.path)?s=!1:$i(i.path,h.path)&&(a=!0)),c--}if(s){if(a)return j4(n),!0;if(i.snap)n.visibleWrites=BS(n.visibleWrites,i.path);else{const h=i.children;Bn(h,f=>{n.visibleWrites=BS(n.visibleWrites,tn(i.path,f))})}return!0}else return!1}function V4(n,e){if(n.snap)return $i(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&$i(tn(n.path,t),e))return!0;return!1}function j4(n){n.visibleWrites=qI(n.allWrites,B4,_t()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function B4(n){return n.visible}function qI(n,e,t){let i=cr.empty();for(let s=0;s<n.length;++s){const a=n[s];if(e(a)){const c=a.path;let h;if(a.snap)$i(t,c)?(h=ii(t,c),i=Wu(i,h,a.snap)):$i(c,t)&&(h=ii(c,t),i=Wu(i,_t(),a.snap.getChild(h)));else if(a.children){if($i(t,c))h=ii(t,c),i=Oy(i,h,a.children);else if($i(c,t))if(h=ii(c,t),it(h))i=Oy(i,_t(),a.children);else{const f=ec(a.children,nt(h));if(f){const p=f.getChild(Bt(h));i=Wu(i,_t(),p)}}}else throw pc("WriteRecord should have .snap or .children")}}return i}function HI(n,e,t,i,s){if(!i&&!s){const a=Ha(n.visibleWrites,e);if(a!=null)return a;{const c=wo(n.visibleWrites,e);if(My(c))return t;if(t==null&&!Dy(c,_t()))return null;{const h=t||Ve.EMPTY_NODE;return rc(c,h)}}}else{const a=wo(n.visibleWrites,e);if(!s&&My(a))return t;if(!s&&t==null&&!Dy(a,_t()))return null;{const c=function(p){return(p.visible||s)&&(!i||!~i.indexOf(p.writeId))&&($i(p.path,e)||$i(e,p.path))},h=qI(n.allWrites,c,e),f=t||Ve.EMPTY_NODE;return rc(h,f)}}}function F4(n,e,t){let i=Ve.EMPTY_NODE;const s=Ha(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Kt,(a,c)=>{i=i.updateImmediateChild(a,c)}),i;if(t){const a=wo(n.visibleWrites,e);return t.forEachChild(Kt,(c,h)=>{const f=rc(wo(a,new Rt(c)),h);i=i.updateImmediateChild(c,f)}),FS(a).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const a=wo(n.visibleWrites,e);return FS(a).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function z4(n,e,t,i,s){_e(i||s,"Either existingEventSnap or existingServerSnap must exist");const a=tn(e,t);if(Dy(n.visibleWrites,a))return null;{const c=wo(n.visibleWrites,a);return My(c)?s.getChild(t):rc(c,s.getChild(t))}}function q4(n,e,t,i){const s=tn(e,t),a=Ha(n.visibleWrites,s);if(a!=null)return a;if(i.isCompleteForChild(t)){const c=wo(n.visibleWrites,s);return rc(c,i.getNode().getImmediateChild(t))}else return null}function H4(n,e){return Ha(n.visibleWrites,e)}function G4(n,e,t,i,s,a,c){let h;const f=wo(n.visibleWrites,e),p=Ha(f,_t());if(p!=null)h=p;else if(t!=null)h=rc(f,t);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const _=[],v=c.getCompare(),T=a?h.getReverseIteratorFrom(i,c):h.getIteratorFrom(i,c);let A=T.getNext();for(;A&&_.length<s;)v(A,i)!==0&&_.push(A),A=T.getNext();return _}else return[]}function $4(){return{visibleWrites:cr.empty(),allWrites:[],lastWriteId:-1}}function pm(n,e,t,i){return HI(n.writeTree,n.treePath,e,t,i)}function rE(n,e){return F4(n.writeTree,n.treePath,e)}function zS(n,e,t,i){return z4(n.writeTree,n.treePath,e,t,i)}function gm(n,e){return H4(n.writeTree,tn(n.treePath,e))}function K4(n,e,t,i,s,a){return G4(n.writeTree,n.treePath,e,t,i,s,a)}function sE(n,e,t){return q4(n.writeTree,n.treePath,e,t)}function GI(n,e){return $I(tn(n.treePath,e),n.writeTree)}function $I(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;_e(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),_e(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const a=s.type;if(t==="child_added"&&a==="child_removed")this.changeMap.set(i,fh(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&a==="child_changed")this.changeMap.set(i,dh(i,s.oldSnap));else if(t==="child_changed"&&a==="child_added")this.changeMap.set(i,nc(i,e.snapshotNode));else if(t==="child_changed"&&a==="child_changed")this.changeMap.set(i,fh(i,e.snapshotNode,s.oldSnap));else throw pc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const KI=new Y4;class oE{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Oo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sE(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ma(this.viewCache_),a=K4(this.writes_,s,t,1,i,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(n){return{filter:n}}function X4(n,e){_e(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),_e(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function J4(n,e,t,i,s){const a=new Q4;let c,h;if(t.type===ar.OVERWRITE){const p=t;p.source.fromUser?c=Py(n,e,p.path,p.snap,i,s,a):(_e(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!it(p.path),c=_m(n,e,p.path,p.snap,i,s,h,a))}else if(t.type===ar.MERGE){const p=t;p.source.fromUser?c=eV(n,e,p.path,p.children,i,s,a):(_e(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),c=Ly(n,e,p.path,p.children,i,s,h,a))}else if(t.type===ar.ACK_USER_WRITE){const p=t;p.revert?c=iV(n,e,p.path,i,s,a):c=tV(n,e,p.path,p.affectedTree,i,s,a)}else if(t.type===ar.LISTEN_COMPLETE)c=nV(n,e,t.path,i,a);else throw pc("Unknown operation type: "+t.type);const f=a.getChanges();return Z4(e,c,f),{viewCache:c,changes:f}}function Z4(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=mm(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(jI(mm(e)))}}function QI(n,e,t,i,s,a){const c=e.eventCache;if(gm(i,t)!=null)return e;{let h,f;if(it(t))if(_e(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Ma(e),_=p instanceof Ve?p:Ve.EMPTY_NODE,v=rE(i,_);h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const p=pm(i,Ma(e));h=n.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=nt(t);if(p===".priority"){_e(ko(t)===1,"Can't have a priority with additional path components");const _=c.getNode();f=e.serverCache.getNode();const v=zS(i,t,_,f);v!=null?h=n.filter.updatePriority(_,v):h=c.getNode()}else{const _=Bt(t);let v;if(c.isCompleteForChild(p)){f=e.serverCache.getNode();const T=zS(i,t,c.getNode(),f);T!=null?v=c.getNode().getImmediateChild(p).updateChild(_,T):v=c.getNode().getImmediateChild(p)}else v=sE(i,p,e.serverCache);v!=null?h=n.filter.updateChild(c.getNode(),p,v,_,s,a):h=c.getNode()}}return Yu(e,h,c.isFullyInitialized()||it(t),n.filter.filtersNodes())}}function _m(n,e,t,i,s,a,c,h){const f=e.serverCache;let p;const _=c?n.filter:n.filter.getIndexedFilter();if(it(t))p=_.updateFullNode(f.getNode(),i,null);else if(_.filtersNodes()&&!f.isFiltered()){const A=f.getNode().updateChild(t,i);p=_.updateFullNode(f.getNode(),A,null)}else{const A=nt(t);if(!f.isCompleteForPath(t)&&ko(t)>1)return e;const S=Bt(t),D=f.getNode().getImmediateChild(A).updateChild(S,i);A===".priority"?p=_.updatePriority(f.getNode(),D):p=_.updateChild(f.getNode(),A,D,S,KI,null)}const v=FI(e,p,f.isFullyInitialized()||it(t),_.filtersNodes()),T=new oE(s,v,a);return QI(n,v,t,s,T,h)}function Py(n,e,t,i,s,a,c){const h=e.eventCache;let f,p;const _=new oE(s,e,a);if(it(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,c),f=Yu(e,p,!0,n.filter.filtersNodes());else{const v=nt(t);if(v===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),i),f=Yu(e,p,h.isFullyInitialized(),h.isFiltered());else{const T=Bt(t),A=h.getNode().getImmediateChild(v);let S;if(it(T))S=i;else{const P=_.getCompleteChild(v);P!=null?Qv(T)===".priority"&&P.getChild(kI(T)).isEmpty()?S=P:S=P.updateChild(T,i):S=Ve.EMPTY_NODE}if(A.equals(S))f=e;else{const P=n.filter.updateChild(h.getNode(),v,S,T,_,c);f=Yu(e,P,h.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function qS(n,e){return n.eventCache.isCompleteForChild(e)}function eV(n,e,t,i,s,a,c){let h=e;return i.foreach((f,p)=>{const _=tn(t,f);qS(e,nt(_))&&(h=Py(n,h,_,p,s,a,c))}),i.foreach((f,p)=>{const _=tn(t,f);qS(e,nt(_))||(h=Py(n,h,_,p,s,a,c))}),h}function HS(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Ly(n,e,t,i,s,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,p;it(t)?p=i:p=new jt(null).setTree(t,i);const _=e.serverCache.getNode();return p.children.inorderTraversal((v,T)=>{if(_.hasChild(v)){const A=e.serverCache.getNode().getImmediateChild(v),S=HS(n,A,T);f=_m(n,f,new Rt(v),S,s,a,c,h)}}),p.children.inorderTraversal((v,T)=>{const A=!e.serverCache.isCompleteForChild(v)&&T.value===null;if(!_.hasChild(v)&&!A){const S=e.serverCache.getNode().getImmediateChild(v),P=HS(n,S,T);f=_m(n,f,new Rt(v),P,s,a,c,h)}}),f}function tV(n,e,t,i,s,a,c){if(gm(s,t)!=null)return e;const h=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(it(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return _m(n,e,t,f.getNode().getChild(t),s,a,h,c);if(it(t)){let p=new jt(null);return f.getNode().forEachChild(Ra,(_,v)=>{p=p.set(new Rt(_),v)}),Ly(n,e,t,p,s,a,h,c)}else return e}else{let p=new jt(null);return i.foreach((_,v)=>{const T=tn(t,_);f.isCompleteForPath(T)&&(p=p.set(_,f.getNode().getChild(T)))}),Ly(n,e,t,p,s,a,h,c)}}function nV(n,e,t,i,s){const a=e.serverCache,c=FI(e,a.getNode(),a.isFullyInitialized()||it(t),a.isFiltered());return QI(n,c,t,i,KI,s)}function iV(n,e,t,i,s,a){let c;if(gm(i,t)!=null)return e;{const h=new oE(i,e,s),f=e.eventCache.getNode();let p;if(it(t)||nt(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=pm(i,Ma(e));else{const v=e.serverCache.getNode();_e(v instanceof Ve,"serverChildren would be complete if leaf node"),_=rE(i,v)}_=_,p=n.filter.updateFullNode(f,_,a)}else{const _=nt(t);let v=sE(i,_,e.serverCache);v==null&&e.serverCache.isCompleteForChild(_)&&(v=f.getImmediateChild(_)),v!=null?p=n.filter.updateChild(f,_,v,Bt(t),h,a):e.eventCache.getNode().hasChild(_)?p=n.filter.updateChild(f,_,Ve.EMPTY_NODE,Bt(t),h,a):p=f,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=pm(i,Ma(e)),c.isLeafNode()&&(p=n.filter.updateFullNode(p,c,a)))}return c=e.serverCache.isFullyInitialized()||gm(i,_t())!=null,Yu(e,p,c,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new Zv(i.getIndex()),a=T4(i);this.processor_=W4(a);const c=t.serverCache,h=t.eventCache,f=s.updateFullNode(Ve.EMPTY_NODE,c.getNode(),null),p=a.updateFullNode(Ve.EMPTY_NODE,h.getNode(),null),_=new Oo(f,c.isFullyInitialized(),s.filtersNodes()),v=new Oo(p,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Xm(v,_),this.eventGenerator_=new x4(this.query_)}get query(){return this.query_}}function sV(n){return n.viewCache_.serverCache.getNode()}function oV(n){return mm(n.viewCache_)}function aV(n,e){const t=Ma(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!it(e)&&!t.getImmediateChild(nt(e)).isEmpty())?t.getChild(e):null}function GS(n){return n.eventRegistrations_.length===0}function lV(n,e){n.eventRegistrations_.push(e)}function $S(n,e,t){const i=[];if(t){_e(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,s);c&&i.push(c)})}if(e){let s=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(!c.matches(e))s.push(c);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function KS(n,e,t,i){e.type===ar.MERGE&&e.source.queryId!==null&&(_e(Ma(n.viewCache_),"We should always have a full cache before handling merges"),_e(mm(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,a=J4(n.processor_,s,e,t,i);return X4(n.processor_,a.viewCache),_e(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,YI(n,a.changes,a.viewCache.eventCache.getNode(),null)}function cV(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kt,(a,c)=>{i.push(nc(a,c))}),t.isFullyInitialized()&&i.push(jI(t.getNode())),YI(n,i,t.getNode(),e)}function YI(n,e,t,i){const s=i?[i]:n.eventRegistrations_;return N4(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym;class WI{constructor(){this.views=new Map}}function uV(n){_e(!ym,"__referenceConstructor has already been defined"),ym=n}function hV(){return _e(ym,"Reference.ts has not been loaded"),ym}function dV(n){return n.views.size===0}function aE(n,e,t,i){const s=e.source.queryId;if(s!==null){const a=n.views.get(s);return _e(a!=null,"SyncTree gave us an op for an invalid query."),KS(a,e,t,i)}else{let a=[];for(const c of n.views.values())a=a.concat(KS(c,e,t,i));return a}}function XI(n,e,t,i,s){const a=e._queryIdentifier,c=n.views.get(a);if(!c){let h=pm(t,s?i:null),f=!1;h?f=!0:i instanceof Ve?(h=rE(t,i),f=!1):(h=Ve.EMPTY_NODE,f=!1);const p=Xm(new Oo(h,f,!1),new Oo(i,s,!1));return new rV(e,p)}return c}function fV(n,e,t,i,s,a){const c=XI(n,e,i,s,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),lV(c,t),cV(c,t)}function mV(n,e,t,i){const s=e._queryIdentifier,a=[];let c=[];const h=Do(n);if(s==="default")for(const[f,p]of n.views.entries())c=c.concat($S(p,t,i)),GS(p)&&(n.views.delete(f),p.query._queryParams.loadsAllData()||a.push(p.query));else{const f=n.views.get(s);f&&(c=c.concat($S(f,t,i)),GS(f)&&(n.views.delete(s),f.query._queryParams.loadsAllData()||a.push(f.query)))}return h&&!Do(n)&&a.push(new(hV())(e._repo,e._path)),{removed:a,events:c}}function JI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function So(n,e){let t=null;for(const i of n.views.values())t=t||aV(i,e);return t}function ZI(n,e){if(e._queryParams.loadsAllData())return Zm(n);{const i=e._queryIdentifier;return n.views.get(i)}}function ex(n,e){return ZI(n,e)!=null}function Do(n){return Zm(n)!=null}function Zm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm;function pV(n){_e(!vm,"__referenceConstructor has already been defined"),vm=n}function gV(){return _e(vm,"Reference.ts has not been loaded"),vm}let _V=1;class QS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jt(null),this.pendingWriteTree_=$4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tx(n,e,t,i,s){return M4(n.pendingWriteTree_,e,t,i,s),s?vc(n,new Da(tE(),e,t)):[]}function yV(n,e,t,i){P4(n.pendingWriteTree_,e,t,i);const s=jt.fromObject(t);return vc(n,new ic(tE(),e,s))}function Eo(n,e,t=!1){const i=L4(n.pendingWriteTree_,e);if(U4(n.pendingWriteTree_,e)){let a=new jt(null);return i.snap!=null?a=a.set(_t(),!0):Bn(i.children,c=>{a=a.set(new Rt(c),!0)}),vc(n,new fm(i.path,a,t))}else return[]}function Fh(n,e,t){return vc(n,new Da(nE(),e,t))}function vV(n,e,t){const i=jt.fromObject(t);return vc(n,new ic(nE(),e,i))}function EV(n,e){return vc(n,new ph(nE(),e))}function TV(n,e,t){const i=cE(n,t);if(i){const s=uE(i),a=s.path,c=s.queryId,h=ii(a,e),f=new ph(iE(c),h);return hE(n,a,f)}else return[]}function Em(n,e,t,i,s=!1){const a=e._path,c=n.syncPointTree_.get(a);let h=[];if(c&&(e._queryIdentifier==="default"||ex(c,e))){const f=mV(c,e,t,i);dV(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const p=f.removed;if(h=f.events,!s){const _=p.findIndex(T=>T._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(a,(T,A)=>Do(A));if(_&&!v){const T=n.syncPointTree_.subtree(a);if(!T.isEmpty()){const A=SV(T);for(let S=0;S<A.length;++S){const P=A[S],D=P.query,F=sx(n,P);n.listenProvider_.startListening(Xu(D),gh(n,D),F.hashFn,F.onComplete)}}}!v&&p.length>0&&!i&&(_?n.listenProvider_.stopListening(Xu(e),null):p.forEach(T=>{const A=n.queryToTagMap.get(ep(T));n.listenProvider_.stopListening(Xu(T),A)}))}CV(n,p)}return h}function nx(n,e,t,i){const s=cE(n,i);if(s!=null){const a=uE(s),c=a.path,h=a.queryId,f=ii(c,e),p=new Da(iE(h),f,t);return hE(n,c,p)}else return[]}function bV(n,e,t,i){const s=cE(n,i);if(s){const a=uE(s),c=a.path,h=a.queryId,f=ii(c,e),p=jt.fromObject(t),_=new ic(iE(h),f,p);return hE(n,c,_)}else return[]}function Uy(n,e,t,i=!1){const s=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(s,(T,A)=>{const S=ii(T,s);a=a||So(A,S),c=c||Do(A)});let h=n.syncPointTree_.get(s);h?(c=c||Do(h),a=a||So(h,_t())):(h=new WI,n.syncPointTree_=n.syncPointTree_.set(s,h));let f;a!=null?f=!0:(f=!1,a=Ve.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((A,S)=>{const P=So(S,_t());P&&(a=a.updateImmediateChild(A,P))}));const p=ex(h,e);if(!p&&!e._queryParams.loadsAllData()){const T=ep(e);_e(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const A=AV();n.queryToTagMap.set(T,A),n.tagToQueryMap.set(A,T)}const _=Jm(n.pendingWriteTree_,s);let v=fV(h,e,t,_,a,f);if(!p&&!c&&!i){const T=ZI(h,e);v=v.concat(RV(n,e,T))}return v}function lE(n,e,t){const s=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const f=ii(c,e),p=So(h,f);if(p)return p});return HI(s,e,a,t,!0)}function wV(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(p,_)=>{const v=ii(p,t);i=i||So(_,v)});let s=n.syncPointTree_.get(t);s?i=i||So(s,_t()):(s=new WI,n.syncPointTree_=n.syncPointTree_.set(t,s));const a=i!=null,c=a?new Oo(i,!0,!1):null,h=Jm(n.pendingWriteTree_,e._path),f=XI(s,e,h,a?c.getNode():Ve.EMPTY_NODE,a);return oV(f)}function vc(n,e){return ix(e,n.syncPointTree_,null,Jm(n.pendingWriteTree_,_t()))}function ix(n,e,t,i){if(it(n.path))return rx(n,e,t,i);{const s=e.get(_t());t==null&&s!=null&&(t=So(s,_t()));let a=[];const c=nt(n.path),h=n.operationForChild(c),f=e.children.get(c);if(f&&h){const p=t?t.getImmediateChild(c):null,_=GI(i,c);a=a.concat(ix(h,f,p,_))}return s&&(a=a.concat(aE(s,n,i,t))),a}}function rx(n,e,t,i){const s=e.get(_t());t==null&&s!=null&&(t=So(s,_t()));let a=[];return e.children.inorderTraversal((c,h)=>{const f=t?t.getImmediateChild(c):null,p=GI(i,c),_=n.operationForChild(c);_&&(a=a.concat(rx(_,h,f,p)))}),s&&(a=a.concat(aE(s,n,i,t))),a}function sx(n,e){const t=e.query,i=gh(n,t);return{hashFn:()=>(sV(e)||Ve.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?TV(n,t._path,i):EV(n,t._path);{const a=TU(s,t);return Em(n,t,null,a)}}}}function gh(n,e){const t=ep(e);return n.queryToTagMap.get(t)}function ep(n){return n._path.toString()+"$"+n._queryIdentifier}function cE(n,e){return n.tagToQueryMap.get(e)}function uE(n){const e=n.indexOf("$");return _e(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Rt(n.substr(0,e))}}function hE(n,e,t){const i=n.syncPointTree_.get(e);_e(i,"Missing sync point for query tag that we're tracking");const s=Jm(n.pendingWriteTree_,e);return aE(i,t,s,null)}function SV(n){return n.fold((e,t,i)=>{if(t&&Do(t))return[Zm(t)];{let s=[];return t&&(s=JI(t)),Bn(i,(a,c)=>{s=s.concat(c)}),s}})}function Xu(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(gV())(n._repo,n._path):n}function CV(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=ep(i),a=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(a)}}}function AV(){return _V++}function RV(n,e,t){const i=e._path,s=gh(n,e),a=sx(n,t),c=n.listenProvider_.startListening(Xu(e),s,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(i);if(s)_e(!Do(h.value),"If we're adding a query, it shouldn't be shadowed");else{const f=h.fold((p,_,v)=>{if(!it(p)&&_&&Do(_))return[Zm(_).query];{let T=[];return _&&(T=T.concat(JI(_).map(A=>A.query))),Bn(v,(A,S)=>{T=T.concat(S)}),T}});for(let p=0;p<f.length;++p){const _=f[p];n.listenProvider_.stopListening(Xu(_),gh(n,_))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dE(t)}node(){return this.node_}}class fE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=tn(this.path_,e);return new fE(this.syncTree_,t)}node(){return lE(this.syncTree_,this.path_)}}const IV=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},YS=function(n,e,t){if(!n||typeof n!="object")return n;if(_e(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return xV(n[".sv"],e,t);if(typeof n[".sv"]=="object")return NV(n[".sv"],e);_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},xV=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:_e(!1,"Unexpected server value: "+n)}},NV=function(n,e,t){n.hasOwnProperty("increment")||_e(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&_e(!1,"Unexpected increment value: "+i);const s=e.node();if(_e(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const c=s.getValue();return typeof c!="number"?i:c+i},ox=function(n,e,t,i){return mE(e,new fE(t,n),i)},ax=function(n,e,t){return mE(n,new dE(e),t)};function mE(n,e,t){const i=n.getPriority().val(),s=YS(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=YS(c.getValue(),e,t);return h!==c.getValue()||s!==c.getPriority().val()?new xn(h,vn(s)):n}else{const c=n;return a=c,s!==c.getPriority().val()&&(a=a.updatePriority(new xn(s))),c.forEachChild(Kt,(h,f)=>{const p=mE(f,e.getImmediateChild(h),t);p!==f&&(a=a.updateImmediateChild(h,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function gE(n,e){let t=e instanceof Rt?e:new Rt(e),i=n,s=nt(t);for(;s!==null;){const a=ec(i.node.children,s)||{children:{},childCount:0};i=new pE(s,i,a),t=Bt(t),s=nt(t)}return i}function Ec(n){return n.node.value}function lx(n,e){n.node.value=e,Vy(n)}function cx(n){return n.node.childCount>0}function kV(n){return Ec(n)===void 0&&!cx(n)}function tp(n,e){Bn(n.node.children,(t,i)=>{e(new pE(t,n,i))})}function ux(n,e,t,i){t&&e(n),tp(n,s=>{ux(s,e,!0)})}function OV(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function zh(n){return new Rt(n.parent===null?n.name:zh(n.parent)+"/"+n.name)}function Vy(n){n.parent!==null&&DV(n.parent,n.name,n)}function DV(n,e,t){const i=kV(t),s=Gr(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,Vy(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Vy(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=/[\[\].#$\/\u0000-\u001F\u007F]/,PV=/[\[\].#$\u0000-\u001F\u007F]/,J_=10*1024*1024,_E=function(n){return typeof n=="string"&&n.length!==0&&!MV.test(n)},hx=function(n){return typeof n=="string"&&n.length!==0&&!PV.test(n)},LV=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hx(n)},jy=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!qv(n)||n&&typeof n=="object"&&Gr(n,".sv")},dx=function(n,e,t,i){i&&e===void 0||np(Hm(n,"value"),e,t)},np=function(n,e,t){const i=t instanceof Rt?new t4(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ea(i));if(typeof e=="function")throw new Error(n+"contains a function "+Ea(i)+" with contents = "+e.toString());if(qv(e))throw new Error(n+"contains "+e.toString()+" "+Ea(i));if(typeof e=="string"&&e.length>J_/3&&Gm(e)>J_)throw new Error(n+"contains a string greater than "+J_+" utf8 bytes "+Ea(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,a=!1;if(Bn(e,(c,h)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!_E(c)))throw new Error(n+" contains an invalid key ("+c+") "+Ea(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);n4(i,c),np(n,h,i),i4(i)}),s&&a)throw new Error(n+' contains ".value" child '+Ea(i)+" in addition to actual children.")}},UV=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=hh(i);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!_E(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(e4);let s=null;for(t=0;t<e.length;t++){if(i=e[t],s!==null&&$i(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},VV=function(n,e,t,i){const s=Hm(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const a=[];Bn(e,(c,h)=>{const f=new Rt(c);if(np(s,h,tn(t,f)),Qv(f)===".priority"&&!jy(h))throw new Error(s+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),UV(s,a)},yE=function(n,e,t,i){if(!hx(t))throw new Error(Hm(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},jV=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yE(n,e,t)},vE=function(n,e){if(nt(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},BV=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_E(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!LV(t))throw new Error(Hm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ip(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],a=s.getPath();t!==null&&!Yv(a,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:a}),t.events.push(s)}t&&n.eventLists_.push(t)}function fx(n,e,t){ip(n,t),mx(n,i=>Yv(i,e))}function Yi(n,e,t){ip(n,t),mx(n,i=>$i(i,e)||$i(e,i))}function mx(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const a=s.path;e(a)?(zV(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function zV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Ku&&Un("event: "+t.toString()),yc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="repo_interrupt",HV=25;class GV{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dm(),this.transactionQueueTree_=new pE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $V(n,e,t){if(n.stats_=$v(n.repoInfo_),n.forceRestClient_||CU())n.server_=new hm(n.repoInfo_,(i,s,a,c)=>{WS(n,i,s,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>XS(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{En(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Cs(n.repoInfo_,e,(i,s,a,c)=>{WS(n,i,s,a,c)},i=>{XS(n,i)},i=>{KV(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=NU(n.repoInfo_,()=>new I4(n.stats_,n.server_)),n.infoData_=new w4,n.infoSyncTree_=new QS({startListening:(i,s,a,c)=>{let h=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(h=Fh(n.infoSyncTree_,i._path,f),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),EE(n,"connected",!1),n.serverSyncTree_=new QS({startListening:(i,s,a,c)=>(n.server_.listen(i,a,s,(h,f)=>{const p=c(h,f);Yi(n.eventQueue_,i._path,p)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function px(n){const t=n.infoData_.getNode(new Rt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function rp(n){return IV({timestamp:px(n)})}function WS(n,e,t,i,s){n.dataUpdateCount++;const a=new Rt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(i){const f=em(t,p=>vn(p));c=bV(n.serverSyncTree_,a,f,s)}else{const f=vn(t);c=nx(n.serverSyncTree_,a,f,s)}else if(i){const f=em(t,p=>vn(p));c=vV(n.serverSyncTree_,a,f)}else{const f=vn(t);c=Fh(n.serverSyncTree_,a,f)}let h=a;c.length>0&&(h=sc(n,a)),Yi(n.eventQueue_,h,c)}function XS(n,e){EE(n,"connected",e),e===!1&&XV(n)}function KV(n,e){Bn(e,(t,i)=>{EE(n,t,i)})}function EE(n,e,t){const i=new Rt("/.info/"+e),s=vn(t);n.infoData_.updateSnapshot(i,s);const a=Fh(n.infoSyncTree_,i,s);Yi(n.eventQueue_,i,a)}function TE(n){return n.nextWriteId_++}function QV(n,e,t){const i=wV(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{const a=vn(s).withIndex(e._queryParams.getIndex());Uy(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=Fh(n.serverSyncTree_,e._path,a);else{const h=gh(n.serverSyncTree_,e);c=nx(n.serverSyncTree_,e._path,a,h)}return Yi(n.eventQueue_,e._path,c),Em(n.serverSyncTree_,e,t,null,!0),a},s=>(qh(n,"get for query "+En(e)+" failed: "+s),Promise.reject(new Error(s))))}function YV(n,e,t,i,s){qh(n,"set",{path:e.toString(),value:t,priority:i});const a=rp(n),c=vn(t,i),h=lE(n.serverSyncTree_,e),f=ax(c,h,a),p=TE(n),_=tx(n.serverSyncTree_,e,f,p,!0);ip(n.eventQueue_,_),n.server_.put(e.toString(),c.val(!0),(T,A)=>{const S=T==="ok";S||ri("set at "+e+" failed: "+T);const P=Eo(n.serverSyncTree_,p,!S);Yi(n.eventQueue_,e,P),By(n,s,T,A)});const v=wE(n,e);sc(n,v),Yi(n.eventQueue_,v,[])}function WV(n,e,t,i){qh(n,"update",{path:e.toString(),value:t});let s=!0;const a=rp(n),c={};if(Bn(t,(h,f)=>{s=!1,c[h]=ox(tn(e,h),vn(f),n.serverSyncTree_,a)}),s)Un("update() called with empty data.  Don't do anything."),By(n,i,"ok",void 0);else{const h=TE(n),f=yV(n.serverSyncTree_,e,c,h);ip(n.eventQueue_,f),n.server_.merge(e.toString(),t,(p,_)=>{const v=p==="ok";v||ri("update at "+e+" failed: "+p);const T=Eo(n.serverSyncTree_,h,!v),A=T.length>0?sc(n,e):e;Yi(n.eventQueue_,A,T),By(n,i,p,_)}),Bn(t,p=>{const _=wE(n,tn(e,p));sc(n,_)}),Yi(n.eventQueue_,e,[])}}function XV(n){qh(n,"onDisconnectEvents");const e=rp(n),t=dm();ky(n.onDisconnect_,_t(),(s,a)=>{const c=ox(s,a,n.serverSyncTree_,e);BI(t,s,c)});let i=[];ky(t,_t(),(s,a)=>{i=i.concat(Fh(n.serverSyncTree_,s,a));const c=wE(n,s);sc(n,c)}),n.onDisconnect_=dm(),Yi(n.eventQueue_,_t(),i)}function JV(n,e,t){let i;nt(e._path)===".info"?i=Uy(n.infoSyncTree_,e,t):i=Uy(n.serverSyncTree_,e,t),fx(n.eventQueue_,e._path,i)}function ZV(n,e,t){let i;nt(e._path)===".info"?i=Em(n.infoSyncTree_,e,t):i=Em(n.serverSyncTree_,e,t),fx(n.eventQueue_,e._path,i)}function e3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(qV)}function qh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Un(t,...e)}function By(n,e,t,i){e&&yc(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let a=s;i&&(a+=": "+i);const c=new Error(a);c.code=s,e(c)}})}function gx(n,e,t){return lE(n.serverSyncTree_,e,t)||Ve.EMPTY_NODE}function bE(n,e=n.transactionQueueTree_){if(e||sp(n,e),Ec(e)){const t=yx(n,e);_e(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&t3(n,zh(e),t)}else cx(e)&&tp(e,t=>{bE(n,t)})}function t3(n,e,t){const i=t.map(p=>p.currentWriteId),s=gx(n,e,i);let a=s;const c=s.hash();for(let p=0;p<t.length;p++){const _=t[p];_e(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const v=ii(e,_.path);a=a.updateChild(v,_.currentOutputSnapshotRaw)}const h=a.val(!0),f=e;n.server_.put(f.toString(),h,p=>{qh(n,"transaction put response",{path:f.toString(),status:p});let _=[];if(p==="ok"){const v=[];for(let T=0;T<t.length;T++)t[T].status=2,_=_.concat(Eo(n.serverSyncTree_,t[T].currentWriteId)),t[T].onComplete&&v.push(()=>t[T].onComplete(null,!0,t[T].currentOutputSnapshotResolved)),t[T].unwatcher();sp(n,gE(n.transactionQueueTree_,e)),bE(n,n.transactionQueueTree_),Yi(n.eventQueue_,e,_);for(let T=0;T<v.length;T++)yc(v[T])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{ri("transaction at "+f.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}sc(n,e)}},c)}function sc(n,e){const t=_x(n,e),i=zh(t),s=yx(n,t);return n3(n,s,i),i}function n3(n,e,t){if(e.length===0)return;const i=[];let s=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const f=e[h],p=ii(t,f.path);let _=!1,v;if(_e(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)_=!0,v=f.abortReason,s=s.concat(Eo(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=HV)_=!0,v="maxretry",s=s.concat(Eo(n.serverSyncTree_,f.currentWriteId,!0));else{const T=gx(n,f.path,c);f.currentInputSnapshot=T;const A=e[h].update(T.val());if(A!==void 0){np("transaction failed: Data returned ",A,f.path);let S=vn(A);typeof A=="object"&&A!=null&&Gr(A,".priority")||(S=S.updatePriority(T.getPriority()));const D=f.currentWriteId,F=rp(n),z=ax(S,T,F);f.currentOutputSnapshotRaw=S,f.currentOutputSnapshotResolved=z,f.currentWriteId=TE(n),c.splice(c.indexOf(D),1),s=s.concat(tx(n.serverSyncTree_,f.path,z,f.currentWriteId,f.applyLocally)),s=s.concat(Eo(n.serverSyncTree_,D,!0))}else _=!0,v="nodata",s=s.concat(Eo(n.serverSyncTree_,f.currentWriteId,!0))}Yi(n.eventQueue_,t,s),s=[],_&&(e[h].status=2,function(T){setTimeout(T,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(v),!1,null))))}sp(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)yc(i[h]);bE(n,n.transactionQueueTree_)}function _x(n,e){let t,i=n.transactionQueueTree_;for(t=nt(e);t!==null&&Ec(i)===void 0;)i=gE(i,t),e=Bt(e),t=nt(e);return i}function yx(n,e){const t=[];return vx(n,e,t),t.sort((i,s)=>i.order-s.order),t}function vx(n,e,t){const i=Ec(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);tp(e,s=>{vx(n,s,t)})}function sp(n,e){const t=Ec(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,lx(e,t.length>0?t:void 0)}tp(e,i=>{sp(n,i)})}function wE(n,e){const t=zh(_x(n,e)),i=gE(n.transactionQueueTree_,e);return OV(i,s=>{Z_(n,s)}),Z_(n,i),ux(i,s=>{Z_(n,s)}),t}function Z_(n,e){const t=Ec(e);if(t){const i=[];let s=[],a=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(_e(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):(_e(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(Eo(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?lx(e,void 0):t.length=a+1,Yi(n.eventQueue_,zh(e),s);for(let c=0;c<i.length;c++)yc(i[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function r3(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ri(`Invalid query segment '${t}' in query '${n}'`)}return e}const JS=function(n,e){const t=s3(n),i=t.namespace;t.domain==="firebase.com"&&Os(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Os("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||gU();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new bI(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new Rt(t.pathString)}},s3=function(n){let e="",t="",i="",s="",a="",c=!0,h="https",f=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(h=n.substring(0,p-1),n=n.substring(p+2));let _=n.indexOf("/");_===-1&&(_=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(_,v)),_<v&&(s=i3(n.substring(_,v)));const T=r3(n.substring(Math.min(n.length,v)));p=e.indexOf(":"),p>=0?(c=h==="https"||h==="wss",f=parseInt(e.substring(p+1),10)):p=e.length;const A=e.slice(0,p);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),t=e.substring(S+1),a=i}"ns"in T&&(a=T.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:c,scheme:h,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",o3=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let s;const a=new Array(8);for(s=7;s>=0;s--)a[s]=ZS.charAt(t%64),t=Math.floor(t/64);_e(t===0,"Cannot push at time == 0");let c=a.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)c+=ZS.charAt(e[s]);return _e(c.length===20,"nextPushId: Length should be 20."),c}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+En(this.snapshot.exportVal())}}class l3{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return _e(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return it(this._path)?null:Qv(this._path)}get ref(){return new Vs(this._repo,this._path)}get _queryIdentifier(){const e=VS(this._queryParams),t=Hv(e);return t==="{}"?"default":t}get _queryObject(){return VS(this._queryParams)}isEqual(e){if(e=Dt(e),!(e instanceof op))return!1;const t=this._repo===e._repo,i=Yv(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+ZU(this._path)}}function c3(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function u3(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ra){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Oa)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==No)throw new Error(i);if(typeof t!="string")throw new Error(s)}}else if(n.getIndex()===Kt){if(e!=null&&!jy(e)||t!=null&&!jy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(_e(n.getIndex()instanceof Jv||n.getIndex()===VI,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class Vs extends op{constructor(e,t){super(e,t,new eE,!1)}get parent(){const e=kI(this._path);return e===null?null:new Vs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class _h{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Rt(e),i=yh(this.ref,e);return new _h(this._node.getChild(t),i,Kt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new _h(s,yh(this.ref,i),Kt)))}hasChild(e){const t=new Rt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ge(n,e){return n=Dt(n),n._checkNotDeleted("ref"),e!==void 0?yh(n._root,e):n._root}function yh(n,e){return n=Dt(n),nt(n._path)===null?jV("child","path",e):yE("child","path",e),new Vs(n._repo,tn(n._path,e))}function Dr(n,e){n=Dt(n),vE("push",n._path),dx("push",e,n._path,!0);const t=px(n._repo),i=o3(t),s=yh(n,i),a=yh(n,i);let c;return e!=null?c=bs(a,e).then(()=>a):c=Promise.resolve(a),s.then=c.then.bind(c),s.catch=c.then.bind(c,void 0),s}function rr(n){return vE("remove",n._path),bs(n,null)}function bs(n,e){n=Dt(n),vE("set",n._path),dx("set",e,n._path,!1);const t=new Dh;return YV(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ap(n,e){VV("update",e,n._path);const t=new Dh;return WV(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Ta(n){n=Dt(n);const e=new Ex(()=>{}),t=new lp(e);return QV(n._repo,n,t).then(i=>new _h(i,new Vs(n._repo,n._path),n._queryParams.getIndex()))}class lp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new a3("value",this,new _h(e.snapshotNode,new Vs(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new l3(this,e,t):null}matches(e){return e instanceof lp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function h3(n,e,t,i,s){const a=new Ex(t,void 0),c=new lp(a);return JV(n._repo,n,c),()=>ZV(n._repo,n,c)}function cp(n,e,t,i){return h3(n,"value",e)}let d3=class{};class f3 extends d3{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){c3(e,"orderByChild");const t=new Rt(this._path);if(it(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Jv(t),s=b4(e._queryParams,i);return u3(s),new op(e._repo,e._path,s,!0)}}function Tx(n){return yE("orderByChild","path",n),new f3(n)}function bx(n,...e){let t=Dt(n);for(const i of e)t=i._apply(t);return t}uV(Vs);pV(Vs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="FIREBASE_DATABASE_EMULATOR_HOST",Fy={};let p3=!1;function g3(n,e,t,i){const s=e.lastIndexOf(":"),a=e.substring(0,s),c=Us(a);n.repoInfo_=new bI(e,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function _3(n,e,t,i,s){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||Os("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Un("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=JS(a,s),h=c.repoInfo,f;typeof process<"u"&&ES&&(f=ES[m3]),f?(a=`http://${f}?ns=${h.namespace}`,c=JS(a,s),h=c.repoInfo):c.repoInfo.secure;const p=new RU(n.name,n.options,e);BV("Invalid Firebase Database URL",c),it(c.path)||Os("Database URL must point to the root of a Firebase Database (not including a child path).");const _=v3(h,n,p,new AU(n,t));return new E3(_,n)}function y3(n,e){const t=Fy[e];(!t||t[n.key]!==n)&&Os(`Database ${e}(${n.repoInfo_}) has already been deleted.`),e3(n),delete t[n.key]}function v3(n,e,t,i){let s=Fy[e.name];s||(s={},Fy[e.name]=s);let a=s[n.toURLString()];return a&&Os("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new GV(n,p3,t,i),s[n.toURLString()]=a,a}class E3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($V(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vs(this._repo,_t())),this._rootInternal}_delete(){return this._rootInternal!==null&&(y3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Os("Cannot call "+e+" on a deleted database.")}}function $e(n=Mh(),e){const t=Bo(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=xv("database");i&&T3(t,...i)}return t}function T3(n,e,t,i={}){n=Dt(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,a=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&xo(i,a.repoInfo_.emulatorOptions))return;Os("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&Os('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Vf(Vf.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:Nv(i.mockUserToken,n.app.options.projectId);c=new Vf(h)}Us(e)&&(zm(e),qm("Database",!0)),g3(a,s,i,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(n){uU(Fo),Qi(new xi("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return _3(i,s,a,t)},"PUBLIC").setMultipleInstances(!0)),Yn(TS,bS,n),Yn(TS,bS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3={".sv":"timestamp"};function fo(){return w3}Cs.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Cs.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};b3();var S3="firebase",C3="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(S3,C3,"app");const wx="@firebase/installations",SE="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=1e4,Cx=`w:${SE}`,Ax="FIS_v2",A3="https://firebaseinstallations.googleapis.com/v1",R3=60*60*1e3,I3="installations",x3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pa=new za(I3,x3,N3);function Rx(n){return n instanceof dr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix({projectId:n}){return`${A3}/projects/${n}/installations`}function xx(n){return{token:n.token,requestStatus:2,expiresIn:O3(n.expiresIn),creationTime:Date.now()}}async function Nx(n,e){const i=(await e.json()).error;return Pa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function kx({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function k3(n,{refreshToken:e}){const t=kx(n);return t.append("Authorization",D3(e)),t}async function Ox(n){const e=await n();return e.status>=500&&e.status<600?n():e}function O3(n){return Number(n.replace("s","000"))}function D3(n){return`${Ax} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=Ix(n),s=kx(n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const c={fid:t,authVersion:Ax,appId:n.appId,sdkVersion:Cx},h={method:"POST",headers:s,body:JSON.stringify(c)},f=await Ox(()=>fetch(i,h));if(f.ok){const p=await f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:xx(p.authToken)}}else throw await Nx("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/^[cdef][\w-]{21}$/,zy="";function U3(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=V3(n);return L3.test(t)?t:zy}catch{return zy}}function V3(n){return P3(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Map;function Px(n,e){const t=up(n);Lx(t,e),j3(t,e)}function Lx(n,e){const t=Mx.get(n);if(t)for(const i of t)i(e)}function j3(n,e){const t=B3();t&&t.postMessage({key:n,fid:e}),F3()}let wa=null;function B3(){return!wa&&"BroadcastChannel"in self&&(wa=new BroadcastChannel("[Firebase] FID Change"),wa.onmessage=n=>{Lx(n.data.key,n.data.fid)}),wa}function F3(){Mx.size===0&&wa&&(wa.close(),wa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="firebase-installations-database",q3=1,La="firebase-installations-store";let ey=null;function CE(){return ey||(ey=Km(z3,q3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(La)}}})),ey}async function Tm(n,e){const t=up(n),s=(await CE()).transaction(La,"readwrite"),a=s.objectStore(La),c=await a.get(t);return await a.put(e,t),await s.done,(!c||c.fid!==e.fid)&&Px(n,e.fid),e}async function Ux(n){const e=up(n),i=(await CE()).transaction(La,"readwrite");await i.objectStore(La).delete(e),await i.done}async function hp(n,e){const t=up(n),s=(await CE()).transaction(La,"readwrite"),a=s.objectStore(La),c=await a.get(t),h=e(c);return h===void 0?await a.delete(t):await a.put(h,t),await s.done,h&&(!c||c.fid!==h.fid)&&Px(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AE(n){let e;const t=await hp(n.appConfig,i=>{const s=H3(i),a=G3(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===zy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function H3(n){const e=n||{fid:U3(),registrationStatus:0};return Vx(e)}function G3(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Pa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=$3(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:K3(n)}:{installationEntry:e}}async function $3(n,e){try{const t=await M3(n,e);return Tm(n.appConfig,t)}catch(t){throw Rx(t)&&t.customData.serverCode===409?await Ux(n.appConfig):await Tm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function K3(n){let e=await eC(n.appConfig);for(;e.registrationStatus===1;)await Dx(100),e=await eC(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await AE(n);return i||t}return e}function eC(n){return hp(n,e=>{if(!e)throw Pa.create("installation-not-found");return Vx(e)})}function Vx(n){return Q3(n)?{fid:n.fid,registrationStatus:0}:n}function Q3(n){return n.registrationStatus===1&&n.registrationTime+Sx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y3({appConfig:n,heartbeatServiceProvider:e},t){const i=W3(n,t),s=k3(n,t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const c={installation:{sdkVersion:Cx,appId:n.appId}},h={method:"POST",headers:s,body:JSON.stringify(c)},f=await Ox(()=>fetch(i,h));if(f.ok){const p=await f.json();return xx(p)}else throw await Nx("Generate Auth Token",f)}function W3(n,{fid:e}){return`${Ix(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(n,e=!1){let t;const i=await hp(n.appConfig,a=>{if(!jx(a))throw Pa.create("not-registered");const c=a.authToken;if(!e&&Z3(c))return a;if(c.requestStatus===1)return t=X3(n,e),a;{if(!navigator.onLine)throw Pa.create("app-offline");const h=t6(a);return t=J3(n,h),h}});return t?await t:i.authToken}async function X3(n,e){let t=await tC(n.appConfig);for(;t.authToken.requestStatus===1;)await Dx(100),t=await tC(n.appConfig);const i=t.authToken;return i.requestStatus===0?RE(n,e):i}function tC(n){return hp(n,e=>{if(!jx(e))throw Pa.create("not-registered");const t=e.authToken;return n6(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function J3(n,e){try{const t=await Y3(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Tm(n.appConfig,i),t}catch(t){if(Rx(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Ux(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Tm(n.appConfig,i)}throw t}}function jx(n){return n!==void 0&&n.registrationStatus===2}function Z3(n){return n.requestStatus===2&&!e6(n)}function e6(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+R3}function t6(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function n6(n){return n.requestStatus===1&&n.requestTime+Sx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6(n){const e=n,{installationEntry:t,registrationPromise:i}=await AE(e);return i?i.catch(console.error):RE(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r6(n,e=!1){const t=n;return await s6(t),(await RE(t,e)).token}async function s6(n){const{registrationPromise:e}=await AE(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(n){if(!n||!n.options)throw ty("App Configuration");if(!n.name)throw ty("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ty(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ty(n){return Pa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="installations",a6="installations-internal",l6=n=>{const e=n.getProvider("app").getImmediate(),t=o6(e),i=Bo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},c6=n=>{const e=n.getProvider("app").getImmediate(),t=Bo(e,Bx).getImmediate();return{getId:()=>i6(t),getToken:s=>r6(t,s)}};function u6(){Qi(new xi(Bx,l6,"PUBLIC")),Qi(new xi(a6,c6,"PRIVATE"))}u6();Yn(wx,SE);Yn(wx,SE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="/firebase-messaging-sw.js",d6="/firebase-cloud-messaging-push-scope",Fx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",f6="https://fcmregistrations.googleapis.com/v1",zx="google.c.a.c_id",m6="google.c.a.c_l",p6="google.c.a.ts",g6="google.c.a.e",nC=1e4;var iC;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(iC||(iC={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var vh;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(vh||(vh={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _6(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),s=new Uint8Array(i.length);for(let a=0;a<i.length;++a)s[a]=i.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="fcm_token_details_db",y6=5,rC="fcm_token_object_Store";async function v6(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(ny))return null;let e=null;return(await Km(ny,y6,{upgrade:async(i,s,a,c)=>{var h;if(s<2||!i.objectStoreNames.contains(rC))return;const f=c.objectStore(rC),p=await f.index("fcmSenderId").get(n);if(await f.clear(),!!p){if(s===2){const _=p;if(!_.auth||!_.p256dh||!_.endpoint)return;e={token:_.fcmToken,createTime:(h=_.createTime)!==null&&h!==void 0?h:Date.now(),subscriptionOptions:{auth:_.auth,p256dh:_.p256dh,endpoint:_.endpoint,swScope:_.swScope,vapidKey:typeof _.vapidKey=="string"?_.vapidKey:_s(_.vapidKey)}}}else if(s===3){const _=p;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:_s(_.auth),p256dh:_s(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:_s(_.vapidKey)}}}else if(s===4){const _=p;e={token:_.fcmToken,createTime:_.createTime,subscriptionOptions:{auth:_s(_.auth),p256dh:_s(_.p256dh),endpoint:_.endpoint,swScope:_.swScope,vapidKey:_s(_.vapidKey)}}}}}})).close(),await z_(ny),await z_("fcm_vapid_details_db"),await z_("undefined"),E6(e)?e:null}function E6(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6="firebase-messaging-database",b6=1,Eh="firebase-messaging-store";let iy=null;function qx(){return iy||(iy=Km(T6,b6,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Eh)}}})),iy}async function w6(n){const e=Hx(n),i=await(await qx()).transaction(Eh).objectStore(Eh).get(e);if(i)return i;{const s=await v6(n.appConfig.senderId);if(s)return await IE(n,s),s}}async function IE(n,e){const t=Hx(n),s=(await qx()).transaction(Eh,"readwrite");return await s.objectStore(Eh).put(e,t),await s.done,e}function Hx({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},si=new za("messaging","Messaging",S6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6(n,e){const t=await NE(n),i=Gx(e),s={method:"POST",headers:t,body:JSON.stringify(i)};let a;try{a=await(await fetch(xE(n.appConfig),s)).json()}catch(c){throw si.create("token-subscribe-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw si.create("token-subscribe-failed",{errorInfo:c})}if(!a.token)throw si.create("token-subscribe-no-token");return a.token}async function A6(n,e){const t=await NE(n),i=Gx(e.subscriptionOptions),s={method:"PATCH",headers:t,body:JSON.stringify(i)};let a;try{a=await(await fetch(`${xE(n.appConfig)}/${e.token}`,s)).json()}catch(c){throw si.create("token-update-failed",{errorInfo:c==null?void 0:c.toString()})}if(a.error){const c=a.error.message;throw si.create("token-update-failed",{errorInfo:c})}if(!a.token)throw si.create("token-update-no-token");return a.token}async function R6(n,e){const i={method:"DELETE",headers:await NE(n)};try{const a=await(await fetch(`${xE(n.appConfig)}/${e}`,i)).json();if(a.error){const c=a.error.message;throw si.create("token-unsubscribe-failed",{errorInfo:c})}}catch(s){throw si.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function xE({projectId:n}){return`${f6}/projects/${n}/registrations`}async function NE({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function Gx({p256dh:n,auth:e,endpoint:t,vapidKey:i}){const s={web:{endpoint:t,auth:e,p256dh:n}};return i!==Fx&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=7*24*60*60*1e3;async function x6(n){const e=await k6(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:_s(e.getKey("auth")),p256dh:_s(e.getKey("p256dh"))},i=await w6(n.firebaseDependencies);if(i){if(O6(i.subscriptionOptions,t))return Date.now()>=i.createTime+I6?N6(n,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await R6(n.firebaseDependencies,i.token)}catch(s){console.warn(s)}return sC(n.firebaseDependencies,t)}else return sC(n.firebaseDependencies,t)}async function N6(n,e){try{const t=await A6(n.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await IE(n.firebaseDependencies,i),t}catch(t){throw t}}async function sC(n,e){const i={token:await C6(n,e),createTime:Date.now(),subscriptionOptions:e};return await IE(n,i),i.token}async function k6(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_6(e)})}function O6(n,e){const t=e.vapidKey===n.vapidKey,i=e.endpoint===n.endpoint,s=e.auth===n.auth,a=e.p256dh===n.p256dh;return t&&i&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return D6(e,n),M6(e,n),P6(e,n),e}function D6(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const i=e.notification.body;i&&(n.notification.body=i);const s=e.notification.image;s&&(n.notification.image=s);const a=e.notification.icon;a&&(n.notification.icon=a)}function M6(n,e){e.data&&(n.data=e.data)}function P6(n,e){var t,i,s,a,c;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const h=(s=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;h&&(n.fcmOptions.link=h);const f=(c=e.fcmOptions)===null||c===void 0?void 0:c.analytics_label;f&&(n.fcmOptions.analyticsLabel=f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(n){return typeof n=="object"&&!!n&&zx in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(n){if(!n||!n.options)throw ry("App Configuration Object");if(!n.name)throw ry("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const i of e)if(!t[i])throw ry(i);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ry(n){return si.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=U6(e);this.firebaseDependencies={app:e,appConfig:s,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j6(n){try{n.swRegistration=await navigator.serviceWorker.register(h6,{scope:d6}),n.swRegistration.update().catch(()=>{}),await B6(n.swRegistration)}catch(e){throw si.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function B6(n){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${nC} ms`)),nC),s=n.installing||n.waiting;n.active?(clearTimeout(i),e()):s?s.onstatechange=a=>{var c;((c=a.target)===null||c===void 0?void 0:c.state)==="activated"&&(s.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(n,e){if(!e&&!n.swRegistration&&await j6(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw si.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Fx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(n,e){if(!navigator)throw si.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw si.create("permission-blocked");return await z6(n,e==null?void 0:e.vapidKey),await F6(n,e==null?void 0:e.serviceWorkerRegistration),x6(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q6(n,e,t){const i=H6(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[zx],message_name:t[m6],message_time:t[p6],message_device_time:Math.floor(Date.now()/1e3)})}function H6(n){switch(n){case vh.NOTIFICATION_CLICKED:return"notification_open";case vh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===vh.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(oC(t)):n.onMessageHandler.next(oC(t)));const i=t.data;L6(i)&&i[g6]==="1"&&await q6(n,t.messageType,i)}const aC="@firebase/messaging",lC="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=n=>{const e=new V6(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>G6(e,t)),e},K6=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:i=>$x(e,i)}};function Q6(){Qi(new xi("messaging",$6,"PUBLIC")),Qi(new xi("messaging-internal",K6,"PRIVATE")),Yn(aC,lC),Yn(aC,lC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y6(){try{await SR()}catch{return!1}return typeof window<"u"&&wR()&&YM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(n=Mh()){return Y6().then(e=>{if(!e)throw si.create("unsupported-browser")},e=>{throw si.create("indexed-db-unsupported")}),Bo(Dt(n),"messaging").getImmediate()}async function X6(n,e){return n=Dt(n),$x(n,e)}Q6();var cC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Co,Kx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function I(){}I.prototype=R.prototype,k.D=R.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(N,O,j){for(var M=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)M[Ze-2]=arguments[Ze];return R.prototype[O].apply(N,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,R,I){I||(I=0);var N=Array(16);if(typeof R=="string")for(var O=0;16>O;++O)N[O]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(O=0;16>O;++O)N[O]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=k.g[0],I=k.g[1],O=k.g[2];var j=k.g[3],M=R+(j^I&(O^j))+N[0]+3614090360&4294967295;R=I+(M<<7&4294967295|M>>>25),M=j+(O^R&(I^O))+N[1]+3905402710&4294967295,j=R+(M<<12&4294967295|M>>>20),M=O+(I^j&(R^I))+N[2]+606105819&4294967295,O=j+(M<<17&4294967295|M>>>15),M=I+(R^O&(j^R))+N[3]+3250441966&4294967295,I=O+(M<<22&4294967295|M>>>10),M=R+(j^I&(O^j))+N[4]+4118548399&4294967295,R=I+(M<<7&4294967295|M>>>25),M=j+(O^R&(I^O))+N[5]+1200080426&4294967295,j=R+(M<<12&4294967295|M>>>20),M=O+(I^j&(R^I))+N[6]+2821735955&4294967295,O=j+(M<<17&4294967295|M>>>15),M=I+(R^O&(j^R))+N[7]+4249261313&4294967295,I=O+(M<<22&4294967295|M>>>10),M=R+(j^I&(O^j))+N[8]+1770035416&4294967295,R=I+(M<<7&4294967295|M>>>25),M=j+(O^R&(I^O))+N[9]+2336552879&4294967295,j=R+(M<<12&4294967295|M>>>20),M=O+(I^j&(R^I))+N[10]+4294925233&4294967295,O=j+(M<<17&4294967295|M>>>15),M=I+(R^O&(j^R))+N[11]+2304563134&4294967295,I=O+(M<<22&4294967295|M>>>10),M=R+(j^I&(O^j))+N[12]+1804603682&4294967295,R=I+(M<<7&4294967295|M>>>25),M=j+(O^R&(I^O))+N[13]+4254626195&4294967295,j=R+(M<<12&4294967295|M>>>20),M=O+(I^j&(R^I))+N[14]+2792965006&4294967295,O=j+(M<<17&4294967295|M>>>15),M=I+(R^O&(j^R))+N[15]+1236535329&4294967295,I=O+(M<<22&4294967295|M>>>10),M=R+(O^j&(I^O))+N[1]+4129170786&4294967295,R=I+(M<<5&4294967295|M>>>27),M=j+(I^O&(R^I))+N[6]+3225465664&4294967295,j=R+(M<<9&4294967295|M>>>23),M=O+(R^I&(j^R))+N[11]+643717713&4294967295,O=j+(M<<14&4294967295|M>>>18),M=I+(j^R&(O^j))+N[0]+3921069994&4294967295,I=O+(M<<20&4294967295|M>>>12),M=R+(O^j&(I^O))+N[5]+3593408605&4294967295,R=I+(M<<5&4294967295|M>>>27),M=j+(I^O&(R^I))+N[10]+38016083&4294967295,j=R+(M<<9&4294967295|M>>>23),M=O+(R^I&(j^R))+N[15]+3634488961&4294967295,O=j+(M<<14&4294967295|M>>>18),M=I+(j^R&(O^j))+N[4]+3889429448&4294967295,I=O+(M<<20&4294967295|M>>>12),M=R+(O^j&(I^O))+N[9]+568446438&4294967295,R=I+(M<<5&4294967295|M>>>27),M=j+(I^O&(R^I))+N[14]+3275163606&4294967295,j=R+(M<<9&4294967295|M>>>23),M=O+(R^I&(j^R))+N[3]+4107603335&4294967295,O=j+(M<<14&4294967295|M>>>18),M=I+(j^R&(O^j))+N[8]+1163531501&4294967295,I=O+(M<<20&4294967295|M>>>12),M=R+(O^j&(I^O))+N[13]+2850285829&4294967295,R=I+(M<<5&4294967295|M>>>27),M=j+(I^O&(R^I))+N[2]+4243563512&4294967295,j=R+(M<<9&4294967295|M>>>23),M=O+(R^I&(j^R))+N[7]+1735328473&4294967295,O=j+(M<<14&4294967295|M>>>18),M=I+(j^R&(O^j))+N[12]+2368359562&4294967295,I=O+(M<<20&4294967295|M>>>12),M=R+(I^O^j)+N[5]+4294588738&4294967295,R=I+(M<<4&4294967295|M>>>28),M=j+(R^I^O)+N[8]+2272392833&4294967295,j=R+(M<<11&4294967295|M>>>21),M=O+(j^R^I)+N[11]+1839030562&4294967295,O=j+(M<<16&4294967295|M>>>16),M=I+(O^j^R)+N[14]+4259657740&4294967295,I=O+(M<<23&4294967295|M>>>9),M=R+(I^O^j)+N[1]+2763975236&4294967295,R=I+(M<<4&4294967295|M>>>28),M=j+(R^I^O)+N[4]+1272893353&4294967295,j=R+(M<<11&4294967295|M>>>21),M=O+(j^R^I)+N[7]+4139469664&4294967295,O=j+(M<<16&4294967295|M>>>16),M=I+(O^j^R)+N[10]+3200236656&4294967295,I=O+(M<<23&4294967295|M>>>9),M=R+(I^O^j)+N[13]+681279174&4294967295,R=I+(M<<4&4294967295|M>>>28),M=j+(R^I^O)+N[0]+3936430074&4294967295,j=R+(M<<11&4294967295|M>>>21),M=O+(j^R^I)+N[3]+3572445317&4294967295,O=j+(M<<16&4294967295|M>>>16),M=I+(O^j^R)+N[6]+76029189&4294967295,I=O+(M<<23&4294967295|M>>>9),M=R+(I^O^j)+N[9]+3654602809&4294967295,R=I+(M<<4&4294967295|M>>>28),M=j+(R^I^O)+N[12]+3873151461&4294967295,j=R+(M<<11&4294967295|M>>>21),M=O+(j^R^I)+N[15]+530742520&4294967295,O=j+(M<<16&4294967295|M>>>16),M=I+(O^j^R)+N[2]+3299628645&4294967295,I=O+(M<<23&4294967295|M>>>9),M=R+(O^(I|~j))+N[0]+4096336452&4294967295,R=I+(M<<6&4294967295|M>>>26),M=j+(I^(R|~O))+N[7]+1126891415&4294967295,j=R+(M<<10&4294967295|M>>>22),M=O+(R^(j|~I))+N[14]+2878612391&4294967295,O=j+(M<<15&4294967295|M>>>17),M=I+(j^(O|~R))+N[5]+4237533241&4294967295,I=O+(M<<21&4294967295|M>>>11),M=R+(O^(I|~j))+N[12]+1700485571&4294967295,R=I+(M<<6&4294967295|M>>>26),M=j+(I^(R|~O))+N[3]+2399980690&4294967295,j=R+(M<<10&4294967295|M>>>22),M=O+(R^(j|~I))+N[10]+4293915773&4294967295,O=j+(M<<15&4294967295|M>>>17),M=I+(j^(O|~R))+N[1]+2240044497&4294967295,I=O+(M<<21&4294967295|M>>>11),M=R+(O^(I|~j))+N[8]+1873313359&4294967295,R=I+(M<<6&4294967295|M>>>26),M=j+(I^(R|~O))+N[15]+4264355552&4294967295,j=R+(M<<10&4294967295|M>>>22),M=O+(R^(j|~I))+N[6]+2734768916&4294967295,O=j+(M<<15&4294967295|M>>>17),M=I+(j^(O|~R))+N[13]+1309151649&4294967295,I=O+(M<<21&4294967295|M>>>11),M=R+(O^(I|~j))+N[4]+4149444226&4294967295,R=I+(M<<6&4294967295|M>>>26),M=j+(I^(R|~O))+N[11]+3174756917&4294967295,j=R+(M<<10&4294967295|M>>>22),M=O+(R^(j|~I))+N[2]+718787259&4294967295,O=j+(M<<15&4294967295|M>>>17),M=I+(j^(O|~R))+N[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+j&4294967295}i.prototype.u=function(k,R){R===void 0&&(R=k.length);for(var I=R-this.blockSize,N=this.B,O=this.h,j=0;j<R;){if(O==0)for(;j<=I;)s(this,k,j),j+=this.blockSize;if(typeof k=="string"){for(;j<R;)if(N[O++]=k.charCodeAt(j++),O==this.blockSize){s(this,N),O=0;break}}else for(;j<R;)if(N[O++]=k[j++],O==this.blockSize){s(this,N),O=0;break}}this.h=O,this.o+=R},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;var I=8*this.o;for(R=k.length-8;R<k.length;++R)k[R]=I&255,I/=256;for(this.u(k),k=Array(16),R=I=0;4>R;++R)for(var N=0;32>N;N+=8)k[I++]=this.g[R]>>>N&255;return k};function a(k,R){var I=h;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=R(k)}function c(k,R){this.h=R;for(var I=[],N=!0,O=k.length-1;0<=O;O--){var j=k[O]|0;N&&j==R||(I[O]=j,N=!1)}this.g=I}var h={};function f(k){return-128<=k&&128>k?a(k,function(R){return new c([R|0],0>R?-1:0)}):new c([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return v;if(0>k)return D(p(-k));for(var R=[],I=1,N=0;k>=I;N++)R[N]=k/I|0,I*=4294967296;return new c(R,0)}function _(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return D(_(k.substring(1),R));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=p(Math.pow(R,8)),N=v,O=0;O<k.length;O+=8){var j=Math.min(8,k.length-O),M=parseInt(k.substring(O,O+j),R);8>j?(j=p(Math.pow(R,j)),N=N.j(j).add(p(M))):(N=N.j(I),N=N.add(p(M)))}return N}var v=f(0),T=f(1),A=f(16777216);n=c.prototype,n.m=function(){if(P(this))return-D(this).m();for(var k=0,R=1,I=0;I<this.g.length;I++){var N=this.i(I);k+=(0<=N?N:4294967296+N)*R,R*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S(this))return"0";if(P(this))return"-"+D(this).toString(k);for(var R=p(Math.pow(k,6)),I=this,N="";;){var O=re(I,R).g;I=F(I,O.j(R));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=O,S(I))return j+N;for(;6>j.length;)j="0"+j;N=j+N}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function S(k){if(k.h!=0)return!1;for(var R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function P(k){return k.h==-1}n.l=function(k){return k=F(this,k),P(k)?-1:S(k)?0:1};function D(k){for(var R=k.g.length,I=[],N=0;N<R;N++)I[N]=~k.g[N];return new c(I,~k.h).add(T)}n.abs=function(){return P(this)?D(this):this},n.add=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],N=0,O=0;O<=R;O++){var j=N+(this.i(O)&65535)+(k.i(O)&65535),M=(j>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);N=M>>>16,j&=65535,M&=65535,I[O]=M<<16|j}return new c(I,I[I.length-1]&-2147483648?-1:0)};function F(k,R){return k.add(D(R))}n.j=function(k){if(S(this)||S(k))return v;if(P(this))return P(k)?D(this).j(D(k)):D(D(this).j(k));if(P(k))return D(this.j(D(k)));if(0>this.l(A)&&0>k.l(A))return p(this.m()*k.m());for(var R=this.g.length+k.g.length,I=[],N=0;N<2*R;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var O=0;O<k.g.length;O++){var j=this.i(N)>>>16,M=this.i(N)&65535,Ze=k.i(O)>>>16,yt=k.i(O)&65535;I[2*N+2*O]+=M*yt,z(I,2*N+2*O),I[2*N+2*O+1]+=j*yt,z(I,2*N+2*O+1),I[2*N+2*O+1]+=M*Ze,z(I,2*N+2*O+1),I[2*N+2*O+2]+=j*Ze,z(I,2*N+2*O+2)}for(N=0;N<R;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=R;N<2*R;N++)I[N]=0;return new c(I,0)};function z(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function G(k,R){this.g=k,this.h=R}function re(k,R){if(S(R))throw Error("division by zero");if(S(k))return new G(v,v);if(P(k))return R=re(D(k),R),new G(D(R.g),D(R.h));if(P(R))return R=re(k,D(R)),new G(D(R.g),R.h);if(30<k.g.length){if(P(k)||P(R))throw Error("slowDivide_ only works with positive integers.");for(var I=T,N=R;0>=N.l(k);)I=ie(I),N=ie(N);var O=ye(I,1),j=ye(N,1);for(N=ye(N,2),I=ye(I,2);!S(N);){var M=j.add(N);0>=M.l(k)&&(O=O.add(I),j=M),N=ye(N,1),I=ye(I,1)}return R=F(k,O.j(R)),new G(O,R)}for(O=v;0<=k.l(R);){for(I=Math.max(1,Math.floor(k.m()/R.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),j=p(I),M=j.j(R);P(M)||0<M.l(k);)I-=N,j=p(I),M=j.j(R);S(j)&&(j=T),O=O.add(j),k=F(k,M)}return new G(O,k)}n.A=function(k){return re(this,k).h},n.and=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)&k.i(N);return new c(I,this.h&k.h)},n.or=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)|k.i(N);return new c(I,this.h|k.h)},n.xor=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)^k.i(N);return new c(I,this.h^k.h)};function ie(k){for(var R=k.g.length+1,I=[],N=0;N<R;N++)I[N]=k.i(N)<<1|k.i(N-1)>>>31;return new c(I,k.h)}function ye(k,R){var I=R>>5;R%=32;for(var N=k.g.length-I,O=[],j=0;j<N;j++)O[j]=0<R?k.i(j+I)>>>R|k.i(j+I+1)<<32-R:k.i(j+I);return new c(O,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Kx=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,Co=c}).apply(typeof cC<"u"?cC:typeof self<"u"?self:typeof window<"u"?window:{});var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qx,zu,Yx,Bf,qy,Wx,Xx,Jx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,b){return d==Array.prototype||d==Object.prototype||(d[y]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sf=="object"&&Sf];for(var y=0;y<d.length;++y){var b=d[y];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function s(d,y){if(y)e:{var b=i;d=d.split(".");for(var x=0;x<d.length-1;x++){var $=d[x];if(!($ in b))break e;b=b[$]}d=d[d.length-1],x=b[d],y=y(x),y!=x&&y!=null&&e(b,d,{configurable:!0,writable:!0,value:y})}}function a(d,y){d instanceof String&&(d+="");var b=0,x=!1,$={next:function(){if(!x&&b<d.length){var ee=b++;return{value:y(ee,d[ee]),done:!1}}return x=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(d){return d||function(){return a(this,function(y,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function f(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function _(d,y,b){return d.call.apply(d.bind,arguments)}function v(d,y,b){if(!d)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,x),d.apply(y,$)}}return function(){return d.apply(y,arguments)}}function T(d,y,b){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,T.apply(null,arguments)}function A(d,y){var b=Array.prototype.slice.call(arguments,1);return function(){var x=b.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function S(d,y){function b(){}b.prototype=y.prototype,d.aa=y.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(x,$,ee){for(var Te=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Te[ut-2]=arguments[ut];return y.prototype[$].apply(x,Te)}}function P(d){const y=d.length;if(0<y){const b=Array(y);for(let x=0;x<y;x++)b[x]=d[x];return b}return[]}function D(d,y){for(let b=1;b<arguments.length;b++){const x=arguments[b];if(f(x)){const $=d.length||0,ee=x.length||0;d.length=$+ee;for(let Te=0;Te<ee;Te++)d[$+Te]=x[Te]}else d.push(x)}}class F{constructor(y,b){this.i=y,this.j=b,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(d){return/^[\s\xa0]*$/.test(d)}function G(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function re(d){return re[" "](d),d}re[" "]=function(){};var ie=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ye(d,y,b){for(const x in d)y.call(b,d[x],x,d)}function k(d,y){for(const b in d)y.call(void 0,d[b],b,d)}function R(d){const y={};for(const b in d)y[b]=d[b];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,y){let b,x;for(let $=1;$<arguments.length;$++){x=arguments[$];for(b in x)d[b]=x[b];for(let ee=0;ee<I.length;ee++)b=I[ee],Object.prototype.hasOwnProperty.call(x,b)&&(d[b]=x[b])}}function O(d){var y=1;d=d.split(":");const b=[];for(;0<y&&d.length;)b.push(d.shift()),y--;return d.length&&b.push(d.join(":")),b}function j(d){h.setTimeout(()=>{throw d},0)}function M(){var d=st;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Ze{constructor(){this.h=this.g=null}add(y,b){const x=yt.get();x.set(y,b),this.h?this.h.next=x:this.g=x,this.h=x}}var yt=new F(()=>new ne,d=>d.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,b){this.h=y,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let be,ke=!1,st=new Ze,U=()=>{const d=h.Promise.resolve(void 0);be=()=>{d.then(ce)}};var ce=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(b){j(b)}var y=yt;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}ke=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};h.addEventListener("test",b,y),h.removeEventListener("test",b,y)}catch{}return d}();function se(d,y){if(me.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(ie){e:{try{re(y.nodeName);var $=!0;break e}catch{}$=!1}$||(y=null)}}else b=="mouseover"?y=d.fromElement:b=="mouseout"&&(y=d.toElement);this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:W[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&se.aa.h.call(this)}}S(se,me);var W={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ge=0;function pe(d,y,b,x,$){this.listener=d,this.proxy=null,this.src=y,this.type=b,this.capture=!!x,this.ha=$,this.key=++ge,this.da=this.fa=!1}function Ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ae(d){this.src=d,this.g={},this.h=0}Ae.prototype.add=function(d,y,b,x,$){var ee=d.toString();d=this.g[ee],d||(d=this.g[ee]=[],this.h++);var Te=Ht(d,y,x,$);return-1<Te?(y=d[Te],b||(y.fa=!1)):(y=new pe(y,this.src,ee,!!x,$),y.fa=b,d.push(y)),y};function mt(d,y){var b=y.type;if(b in d.g){var x=d.g[b],$=Array.prototype.indexOf.call(x,y,void 0),ee;(ee=0<=$)&&Array.prototype.splice.call(x,$,1),ee&&(Ee(y),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Ht(d,y,b,x){for(var $=0;$<d.length;++$){var ee=d[$];if(!ee.da&&ee.listener==y&&ee.capture==!!b&&ee.ha==x)return $}return-1}var Wi="closure_lm_"+(1e6*Math.random()|0),mr={};function ai(d,y,b,x,$){if(Array.isArray(y)){for(var ee=0;ee<y.length;ee++)ai(d,y[ee],b,x,$);return null}return b=Re(b),d&&d[le]?d.K(y,b,p(x)?!!x.capture:!1,$):li(d,y,b,!1,x,$)}function li(d,y,b,x,$,ee){if(!y)throw Error("Invalid event type");var Te=p($)?!!$.capture:!!$,ut=q(d);if(ut||(d[Wi]=ut=new Ae(d)),b=ut.add(y,b,x,Te,ee),b.proxy)return b;if(x=Nc(),b.proxy=x,x.src=d,x.listener=b,d.addEventListener)Z||($=Te),$===void 0&&($=!1),d.addEventListener(y.toString(),x,$);else if(d.attachEvent)d.attachEvent($r(y.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Nc(){function d(b){return y.call(d.src,d.listener,b)}const y=X;return d}function zo(d,y,b,x,$){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)zo(d,y[ee],b,x,$);else x=p(x)?!!x.capture:!!x,b=Re(b),d&&d[le]?(d=d.i,y=String(y).toString(),y in d.g&&(ee=d.g[y],b=Ht(ee,b,x,$),-1<b&&(Ee(ee[b]),Array.prototype.splice.call(ee,b,1),ee.length==0&&(delete d.g[y],d.h--)))):d&&(d=q(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Ht(y,b,x,$)),(b=-1<d?y[d]:null)&&js(b))}function js(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[le])mt(y.i,d);else{var b=d.type,x=d.proxy;y.removeEventListener?y.removeEventListener(b,x,d.capture):y.detachEvent?y.detachEvent($r(b),x):y.addListener&&y.removeListener&&y.removeListener(x),(b=q(y))?(mt(b,d),b.h==0&&(b.src=null,y[Wi]=null)):Ee(d)}}}function $r(d){return d in mr?mr[d]:mr[d]="on"+d}function X(d,y){if(d.da)d=!0;else{y=new se(y,this);var b=d.listener,x=d.ha||d.src;d.fa&&js(d),d=b.call(x,y)}return d}function q(d){return d=d[Wi],d instanceof Ae?d:null}var Ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(d){return typeof d=="function"?d:(d[Ce]||(d[Ce]=function(y){return d.handleEvent(y)}),d[Ce])}function Se(){we.call(this),this.i=new Ae(this),this.M=this,this.F=null}S(Se,we),Se.prototype[le]=!0,Se.prototype.removeEventListener=function(d,y,b,x){zo(this,d,y,b,x)};function ve(d,y){var b,x=d.F;if(x)for(b=[];x;x=x.F)b.push(x);if(d=d.M,x=y.type||y,typeof y=="string")y=new me(y,d);else if(y instanceof me)y.target=y.target||d;else{var $=y;y=new me(x,d),N(y,$)}if($=!0,b)for(var ee=b.length-1;0<=ee;ee--){var Te=y.g=b[ee];$=fe(Te,x,!0,y)&&$}if(Te=y.g=d,$=fe(Te,x,!0,y)&&$,$=fe(Te,x,!1,y)&&$,b)for(ee=0;ee<b.length;ee++)Te=y.g=b[ee],$=fe(Te,x,!1,y)&&$}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var b=d.g[y],x=0;x<b.length;x++)Ee(b[x]);delete d.g[y],d.h--}}this.F=null},Se.prototype.K=function(d,y,b,x){return this.i.add(String(d),y,!1,b,x)},Se.prototype.L=function(d,y,b,x){return this.i.add(String(d),y,!0,b,x)};function fe(d,y,b,x){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,ee=0;ee<y.length;++ee){var Te=y[ee];if(Te&&!Te.da&&Te.capture==b){var ut=Te.listener,pn=Te.ha||Te.src;Te.fa&&mt(d.i,Te),$=ut.call(pn,x)!==!1&&$}}return $&&!x.defaultPrevented}function Ie(d,y,b){if(typeof d=="function")b&&(d=T(d,b));else if(d&&typeof d.handleEvent=="function")d=T(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(d,y||0)}function vt(d){d.g=Ie(()=>{d.g=null,d.i&&(d.i=!1,vt(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class pt extends we{constructor(y,b){super(),this.m=y,this.l=b,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(d){we.call(this),this.h=d,this.g={}}S(et,we);var Xi=[];function pr(d){ye(d.g,function(y,b){this.g.hasOwnProperty(b)&&js(y)},d),d.g={}}et.prototype.N=function(){et.aa.N.call(this),pr(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var It=h.JSON.stringify,Ni=h.JSON.parse,ci=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function St(){}St.prototype.h=null;function Pt(d){return d.h||(d.h=d.i())}function He(){}var Tt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Me(){me.call(this,"d")}S(Me,me);function Ke(){me.call(this,"c")}S(Ke,me);var Ye={},Lt=null;function ln(){return Lt=Lt||new Se}Ye.La="serverreachability";function Xn(d){me.call(this,Ye.La,d)}S(Xn,me);function cn(d){const y=ln();ve(y,new Xn(y))}Ye.STAT_EVENT="statevent";function qo(d,y){me.call(this,Ye.STAT_EVENT,d),this.stat=y}S(qo,me);function Ut(d){const y=ln();ve(y,new qo(y,d))}Ye.Ma="timingevent";function nn(d,y){me.call(this,Ye.Ma,d),this.size=y}S(nn,me);function Jt(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function Ji(d,y,b,x,$,ee){d.info(function(){if(d.g)if(ee)for(var Te="",ut=ee.split("&"),pn=0;pn<ut.length;pn++){var ht=ut[pn].split("=");if(1<ht.length){var Cn=ht[0];ht=ht[1];var gn=Cn.split("_");Te=2<=gn.length&&gn[1]=="type"?Te+(Cn+"="+ht+"&"):Te+(Cn+"=redacted&")}}else Te=null;else Te=ee;return"XMLHTTP REQ ("+x+") [attempt "+$+"]: "+y+`
`+b+`
`+Te})}function Wa(d,y,b,x,$,ee,Te){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+$+"]: "+y+`
`+b+`
`+ee+" "+Te})}function Kr(d,y,b,x){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ho(d,b)+(x?" "+x:"")})}function Xa(d,y){d.info(function(){return"TIMEOUT: "+y})}wn.prototype.info=function(){};function Ho(d,y){if(!d.g)return y;if(!y)return null;try{var b=JSON.parse(y);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var x=b[d];if(!(2>x.length)){var $=x[1];if(Array.isArray($)&&!(1>$.length)){var ee=$[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var Te=1;Te<$.length;Te++)$[Te]=""}}}}return It(b)}catch{return y}}var Bs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gr;function _r(){}S(_r,St),_r.prototype.g=function(){return new XMLHttpRequest},_r.prototype.i=function(){return{}},gr=new _r;function Jn(d,y,b,x){this.j=d,this.i=y,this.l=b,this.R=x||1,this.U=new et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rn}function rn(){this.i=null,this.g="",this.h=!1}var kc={},Ja={};function Zi(d,y,b){d.L=1,d.v=Yo(yi(y)),d.m=b,d.P=!0,Yr(d,null)}function Yr(d,y){d.F=Date.now(),Go(d),d.A=yi(d.v);var b=d.A,x=d.R;Array.isArray(x)||(x=[String(x)]),Uc(b.i,"t",x),d.C=0,b=d.j.J,d.h=new rn,d.g=pd(d.j,b?y:null,!d.m),0<d.O&&(d.M=new pt(T(d.Y,d,d.g),d.O)),y=d.U,b=d.g,x=d.ca;var $="readystatechange";Array.isArray($)||($&&(Xi[0]=$.toString()),$=Xi);for(var ee=0;ee<$.length;ee++){var Te=ai(b,$[ee],x||y.handleEvent,!1,y.h||y);if(!Te)break;y.g[Te.key]=Te}y=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),cn(),Ji(d.i,d.u,d.A,d.l,d.R,d.m)}Jn.prototype.ca=function(d){d=d.target;const y=this.M;y&&Mi(d)==3?y.j():this.Y(d)},Jn.prototype.Y=function(d){try{if(d==this.g)e:{const gn=Mi(this.g);var y=this.g.Ba();const is=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||gn!=4||y==7||(y==8||0>=is?cn(3):cn(2)),Fs(this);var b=this.g.Z();this.X=b;t:if(ed(this)){var x=ad(this.g);d="";var $=x.length,ee=Mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),yr(this);var Te="";break t}this.h.i=new h.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,d+=this.h.i.decode(x[y],{stream:!(ee&&y==$-1)});x.length=0,this.h.g+=d,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=b==200,Wa(this.i,this.u,this.A,this.l,this.R,gn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,pn=this.g;if((ut=pn.g?pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(ut)){var ht=ut;break t}}ht=null}if(b=ht)Kr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$o(this,b);else{this.o=!1,this.s=3,Ut(12),kn(this),yr(this);break e}}if(this.P){b=!0;let On;for(;!this.J&&this.C<Te.length;)if(On=td(this,Te),On==Ja){gn==4&&(this.s=4,Ut(14),b=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(On==kc){this.s=4,Ut(15),Kr(this.i,this.l,Te,"[Invalid Chunk]"),b=!1;break}else Kr(this.i,this.l,On,null),$o(this,On);if(ed(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||Te.length!=0||this.h.h||(this.s=1,Ut(16),b=!1),this.o=this.o&&b,!b)Kr(this.i,this.l,Te,"[Invalid Chunked Response]"),kn(this),yr(this);else if(0<Te.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),ia(Cn),Cn.M=!0,Ut(11))}}else Kr(this.i,this.l,Te,null),$o(this,Te);gn==4&&kn(this),this.o&&!this.J&&(gn==4?dd(this.j,this):(this.o=!1,Go(this)))}else Vp(this.g),b==400&&0<Te.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),kn(this),yr(this)}}}catch{}finally{}};function ed(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function td(d,y){var b=d.C,x=y.indexOf(`
`,b);return x==-1?Ja:(b=Number(y.substring(b,x)),isNaN(b)?kc:(x+=1,x+b>y.length?Ja:(y=y.slice(x,x+b),d.C=x+b,y)))}Jn.prototype.cancel=function(){this.J=!0,kn(this)};function Go(d){d.S=Date.now()+d.I,nd(d,d.I)}function nd(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Jt(T(d.ba,d),y)}function Fs(d){d.B&&(h.clearTimeout(d.B),d.B=null)}Jn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Xa(this.i,this.A),this.L!=2&&(cn(),Ut(17)),kn(this),this.s=2,yr(this)):nd(this,this.S-d)};function yr(d){d.j.G==0||d.J||dd(d.j,d)}function kn(d){Fs(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,pr(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function $o(d,y){try{var b=d.j;if(b.G!=0&&(b.g==d||Oc(b.h,d))){if(!d.K&&Oc(b.h,d)&&b.G==3){try{var x=b.Da.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var $=x;if($[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)ul(b),ll(b);else break e;zc(b),Ut(18)}}else b.za=$[1],0<b.za-b.T&&37500>$[2]&&b.F&&b.v==0&&!b.C&&(b.C=Jt(T(b.Za,b),6e3));if(1>=el(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ns(b,11)}else if((d.K||b.g==d)&&ul(b),!z(y))for($=b.Da.g.parse(y),y=0;y<$.length;y++){let ht=$[y];if(b.T=ht[0],ht=ht[1],b.G==2)if(ht[0]=="c"){b.K=ht[1],b.ia=ht[2];const Cn=ht[3];Cn!=null&&(b.la=Cn,b.j.info("VER="+b.la));const gn=ht[4];gn!=null&&(b.Aa=gn,b.j.info("SVER="+b.Aa));const is=ht[5];is!=null&&typeof is=="number"&&0<is&&(x=1.5*is,b.L=x,b.j.info("backChannelRequestTimeoutMs_="+x)),x=b;const On=d.g;if(On){const Cr=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cr){var ee=x.h;ee.g||Cr.indexOf("spdy")==-1&&Cr.indexOf("quic")==-1&&Cr.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(tl(ee,ee.h),ee.h=null))}if(x.D){const Hc=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;Hc&&(x.ya=Hc,xt(x.I,x.D,Hc))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),x=b;var Te=d;if(x.qa=md(x,x.J?x.ia:null,x.W),Te.K){Zn(x.h,Te);var ut=Te,pn=x.L;pn&&(ut.I=pn),ut.B&&(Fs(ut),Go(ut)),x.g=Te}else ud(x);0<b.i.length&&cl(b)}else ht[0]!="stop"&&ht[0]!="close"||ns(b,7);else b.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?ns(b,7):Bc(b):ht[0]!="noop"&&b.l&&b.l.ta(ht),b.v=0)}}cn(4)}catch{}}var id=class{constructor(d,y){this.g=d,this.map=y}};function Wr(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Za(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function el(d){return d.h?1:d.g?d.g.size:0}function Oc(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function tl(d,y){d.g?d.g.add(y):d.h=y}function Zn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Wr.prototype.cancel=function(){if(this.i=Dc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Dc(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const b of d.g.values())y=y.concat(b.D);return y}return P(d.i)}function Mp(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var y=[],b=d.length,x=0;x<b;x++)y.push(d[x]);return y}y=[],b=0;for(x in d)y[b++]=d[x];return y}function nl(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var y=[];d=d.length;for(var b=0;b<d;b++)y.push(b);return y}y=[],b=0;for(const x in d)y[b++]=x;return y}}}function Mc(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var b=nl(d),x=Mp(d),$=x.length,ee=0;ee<$;ee++)y.call(void 0,x[ee],b&&b[ee],d)}var Ko=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pp(d,y){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var x=d[b].indexOf("="),$=null;if(0<=x){var ee=d[b].substring(0,x);$=d[b].substring(x+1)}else ee=d[b];y(ee,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function un(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof un){this.h=d.h,Qo(this,d.j),this.o=d.o,this.g=d.g,zs(this,d.s),this.l=d.l;var y=d.i,b=new Jr;b.i=y.i,y.g&&(b.g=new Map(y.g),b.h=y.h),Xr(this,b),this.m=d.m}else d&&(y=String(d).match(Ko))?(this.h=!1,Qo(this,y[1]||"",!0),this.o=ki(y[2]||""),this.g=ki(y[3]||"",!0),zs(this,y[4]),this.l=ki(y[5]||"",!0),Xr(this,y[6]||"",!0),this.m=ki(y[7]||"")):(this.h=!1,this.i=new Jr(null,this.h))}un.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Wo(y,Pc,!0),":");var b=this.g;return(b||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Wo(y,Pc,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Wo(b,b.charAt(0)=="/"?Lp:Lc,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Wo(b,il)),d.join("")};function yi(d){return new un(d)}function Qo(d,y,b){d.j=b?ki(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function zs(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Xr(d,y,b){y instanceof Jr?(d.i=y,sd(d.i,d.h)):(b||(y=Wo(y,Up)),d.i=new Jr(y,d.h))}function xt(d,y,b){d.i.set(y,b)}function Yo(d){return xt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ki(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Wo(d,y,b){return typeof d=="string"?(d=encodeURI(d).replace(y,rd),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function rd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Pc=/[#\/\?@]/g,Lc=/[#\?:]/g,Lp=/[#\?]/g,Up=/[#\?@]/g,il=/#/g;function Jr(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Oi(d){d.g||(d.g=new Map,d.h=0,d.i&&Pp(d.i,function(y,b){d.add(decodeURIComponent(y.replace(/\+/g," ")),b)}))}n=Jr.prototype,n.add=function(d,y){Oi(this),this.i=null,d=vr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(y),this.h+=1,this};function Zr(d,y){Oi(d),y=vr(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function es(d,y){return Oi(d),y=vr(d,y),d.g.has(y)}n.forEach=function(d,y){Oi(this),this.g.forEach(function(b,x){b.forEach(function($){d.call(y,$,x,this)},this)},this)},n.na=function(){Oi(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),b=[];for(let x=0;x<y.length;x++){const $=d[x];for(let ee=0;ee<$.length;ee++)b.push(y[x])}return b},n.V=function(d){Oi(this);let y=[];if(typeof d=="string")es(this,d)&&(y=y.concat(this.g.get(vr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)y=y.concat(d[b])}return y},n.set=function(d,y){return Oi(this),this.i=null,d=vr(this,d),es(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Uc(d,y,b){Zr(d,y),0<b.length&&(d.i=null,d.g.set(vr(d,y),P(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var b=0;b<y.length;b++){var x=y[b];const ee=encodeURIComponent(String(x)),Te=this.V(x);for(x=0;x<Te.length;x++){var $=ee;Te[x]!==""&&($+="="+encodeURIComponent(String(Te[x]))),d.push($)}}return this.i=d.join("&")};function vr(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function sd(d,y){y&&!d.j&&(Oi(d),d.i=null,d.g.forEach(function(b,x){var $=x.toLowerCase();x!=$&&(Zr(this,x),Uc(this,$,b))},d)),d.j=y}function Xo(d,y){const b=new wn;if(h.Image){const x=new Image;x.onload=A(Di,b,"TestLoadImage: loaded",!0,y,x),x.onerror=A(Di,b,"TestLoadImage: error",!1,y,x),x.onabort=A(Di,b,"TestLoadImage: abort",!1,y,x),x.ontimeout=A(Di,b,"TestLoadImage: timeout",!1,y,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else y(!1)}function er(d,y){const b=new wn,x=new AbortController,$=setTimeout(()=>{x.abort(),Di(b,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:x.signal}).then(ee=>{clearTimeout($),ee.ok?Di(b,"TestPingServer: ok",!0,y):Di(b,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Di(b,"TestPingServer: error",!1,y)})}function Di(d,y,b,x,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),x(b)}catch{}}function Jo(){this.g=new ci}function Er(d,y,b){const x=b||"";try{Mc(d,function($,ee){let Te=$;p($)&&(Te=It($)),y.push(x+ee+"="+encodeURIComponent(Te))})}catch($){throw y.push(x+"type="+encodeURIComponent("_badmap")),$}}function qs(d){this.l=d.Ub||null,this.j=d.eb||!1}S(qs,St),qs.prototype.g=function(){return new ts(this.l,this.j)},qs.prototype.i=function(d){return function(){return d}}({});function ts(d,y){Se.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ts,Se),n=ts.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,br(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vc(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vc(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Tr(this):br(this),this.readyState==3&&Vc(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Tr(this))},n.Qa=function(d){this.g&&(this.response=d,Tr(this))},n.ga=function(){this.g&&Tr(this)};function Tr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,br(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var b=y.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=y.next();return d.join(`\r
`)};function br(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function jc(d){let y="";return ye(d,function(b,x){y+=x,y+=":",y+=b,y+=`\r
`}),y}function Sn(d,y,b){e:{for(x in b){var x=!1;break e}x=!0}x||(b=jc(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):xt(d,y,b))}function bt(d){Se.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(bt,Se);var rl=/^https?$/i,Zo=["POST","PUT"];n=bt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,b,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gr.g(),this.v=this.o?Pt(this.o):Pt(gr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(ee){od(this,ee);return}if(d=b||"",b=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var $ in x)b.set($,x[$]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const ee of x.keys())b.set(ee,x.get(ee));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(b.keys()).find(ee=>ee.toLowerCase()=="content-type"),$=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Zo,y,void 0))||x||$||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,Te]of b)this.g.setRequestHeader(ee,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ea(this),this.u=!0,this.g.send(d),this.u=!1}catch(ee){od(this,ee)}};function od(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,sl(d),wr(d)}function sl(d){d.A||(d.A=!0,ve(d,"complete"),ve(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ve(this,"complete"),ve(this,"abort"),wr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wr(this,!0)),bt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ol(this):this.bb())},n.bb=function(){ol(this)};function ol(d){if(d.h&&typeof c<"u"&&(!d.v[1]||Mi(d)!=4||d.Z()!=2)){if(d.u&&Mi(d)==4)Ie(d.Ea,0,d);else if(ve(d,"readystatechange"),Mi(d)==4){d.h=!1;try{const Te=d.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var b;if(!(b=y)){var x;if(x=Te===0){var $=String(d.D).match(Ko)[1]||null;!$&&h.self&&h.self.location&&($=h.self.location.protocol.slice(0,-1)),x=!rl.test($?$.toLowerCase():"")}b=x}if(b)ve(d,"complete"),ve(d,"success");else{d.m=6;try{var ee=2<Mi(d)?d.g.statusText:""}catch{ee=""}d.l=ee+" ["+d.Z()+"]",sl(d)}}finally{wr(d)}}}}function wr(d,y){if(d.g){ea(d);const b=d.g,x=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||ve(d,"ready");try{b.onreadystatechange=x}catch{}}}function ea(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Mi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Mi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Ni(y)}};function ad(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Vp(d){const y={};d=(d.g&&2<=Mi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(z(d[x]))continue;var b=O(d[x]);const $=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const ee=y[$]||[];y[$]=ee,ee.push(b)}k(y,function(x){return x.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(d,y,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||y}function al(d){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,d),this.cb=ta("retryDelaySeedMs",1e4,d),this.Wa=ta("forwardChannelMaxRetries",2,d),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Wr(d&&d.concurrentRequestLimit),this.Da=new Jo,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=al.prototype,n.la=8,n.G=1,n.connect=function(d,y,b,x){Ut(0),this.W=d,this.H=y||{},b&&x!==void 0&&(this.H.OSID=b,this.H.OAID=x),this.F=this.X,this.I=md(this,null,this.W),cl(this)};function Bc(d){if(ld(d),d.G==3){var y=d.U++,b=yi(d.I);if(xt(b,"SID",d.K),xt(b,"RID",y),xt(b,"TYPE","terminate"),na(d,b),y=new Jn(d,d.j,y),y.L=2,y.v=Yo(yi(b)),b=!1,h.navigator&&h.navigator.sendBeacon)try{b=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!b&&h.Image&&(new Image().src=y.v,b=!0),b||(y.g=pd(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Go(y)}fd(d)}function ll(d){d.g&&(ia(d),d.g.cancel(),d.g=null)}function ld(d){ll(d),d.u&&(h.clearTimeout(d.u),d.u=null),ul(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function cl(d){if(!Za(d.h)&&!d.s){d.s=!0;var y=d.Ga;be||U(),ke||(be(),ke=!0),st.add(y,d),d.B=0}}function jp(d,y){return el(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Jt(T(d.Ga,d,y),qc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const $=new Jn(this,this.j,d);let ee=this.o;if(this.S&&(ee?(ee=R(ee),N(ee,this.S)):ee=this.S),this.m!==null||this.O||($.H=ee,ee=null),this.P)e:{for(var y=0,b=0;b<this.i.length;b++){t:{var x=this.i[b];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,4096<y){y=b;break e}if(y===4096||b===this.i.length-1){y=b+1;break e}}y=1e3}else y=1e3;y=cd(this,$,y),b=yi(this.I),xt(b,"RID",d),xt(b,"CVER",22),this.D&&xt(b,"X-HTTP-Session-Id",this.D),na(this,b),ee&&(this.O?y="headers="+encodeURIComponent(String(jc(ee)))+"&"+y:this.m&&Sn(b,this.m,ee)),tl(this.h,$),this.Ua&&xt(b,"TYPE","init"),this.P?(xt(b,"$req",y),xt(b,"SID","null"),$.T=!0,Zi($,b,null)):Zi($,b,y),this.G=2}}else this.G==3&&(d?Fc(this,d):this.i.length==0||Za(this.h)||Fc(this))};function Fc(d,y){var b;y?b=y.l:b=d.U++;const x=yi(d.I);xt(x,"SID",d.K),xt(x,"RID",b),xt(x,"AID",d.T),na(d,x),d.m&&d.o&&Sn(x,d.m,d.o),b=new Jn(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),y&&(d.i=y.D.concat(d.i)),y=cd(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),tl(d.h,b),Zi(b,x,y)}function na(d,y){d.H&&ye(d.H,function(b,x){xt(y,x,b)}),d.l&&Mc({},function(b,x){xt(y,x,b)})}function cd(d,y,b){b=Math.min(d.i.length,b);var x=d.l?T(d.l.Na,d.l,d):null;e:{var $=d.i;let ee=-1;for(;;){const Te=["count="+b];ee==-1?0<b?(ee=$[0].g,Te.push("ofs="+ee)):ee=0:Te.push("ofs="+ee);let ut=!0;for(let pn=0;pn<b;pn++){let ht=$[pn].g;const Cn=$[pn].map;if(ht-=ee,0>ht)ee=Math.max(0,$[pn].g-100),ut=!1;else try{Er(Cn,Te,"req"+ht+"_")}catch{x&&x(Cn)}}if(ut){x=Te.join("&");break e}}}return d=d.i.splice(0,b),y.D=d,x}function ud(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;be||U(),ke||(be(),ke=!0),st.add(y,d),d.v=0}}function zc(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Jt(T(d.Fa,d),qc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,hd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Jt(T(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),ll(this),hd(this))};function ia(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function hd(d){d.g=new Jn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=yi(d.qa);xt(y,"RID","rpc"),xt(y,"SID",d.K),xt(y,"AID",d.T),xt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&xt(y,"TO",d.ja),xt(y,"TYPE","xmlhttp"),na(d,y),d.m&&d.o&&Sn(y,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Yo(yi(y)),b.m=null,b.P=!0,Yr(b,d)}n.Za=function(){this.C!=null&&(this.C=null,ll(this),zc(this),Ut(19))};function ul(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function dd(d,y){var b=null;if(d.g==y){ul(d),ia(d),d.g=null;var x=2}else if(Oc(d.h,y))b=y.D,Zn(d.h,y),x=1;else return;if(d.G!=0){if(y.o)if(x==1){b=y.m?y.m.length:0,y=Date.now()-y.F;var $=d.B;x=ln(),ve(x,new nn(x,b)),cl(d)}else ud(d);else if($=y.s,$==3||$==0&&0<y.X||!(x==1&&jp(d,y)||x==2&&zc(d)))switch(b&&0<b.length&&(y=d.h,y.i=y.i.concat(b)),$){case 1:ns(d,5);break;case 4:ns(d,10);break;case 3:ns(d,6);break;default:ns(d,2)}}}function qc(d,y){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*y}function ns(d,y){if(d.j.info("Error code "+y),y==2){var b=T(d.fb,d),x=d.Xa;const $=!x;x=new un(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qo(x,"https"),Yo(x),$?Xo(x.toString(),b):er(x.toString(),b)}else Ut(2);d.G=0,d.l&&d.l.sa(y),fd(d),ld(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function fd(d){if(d.G=0,d.ka=[],d.l){const y=Dc(d.h);(y.length!=0||d.i.length!=0)&&(D(d.ka,y),D(d.ka,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.ra()}}function md(d,y,b){var x=b instanceof un?yi(b):new un(b);if(x.g!="")y&&(x.g=y+"."+x.g),zs(x,x.s);else{var $=h.location;x=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var ee=new un(null);x&&Qo(ee,x),y&&(ee.g=y),$&&zs(ee,$),b&&(ee.l=b),x=ee}return b=d.D,y=d.ya,b&&y&&xt(x,b,y),xt(x,"VER",d.la),na(d,x),x}function pd(d,y,b){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new bt(new qs({eb:b})):new bt(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gd(){}n=gd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hl(){}hl.prototype.g=function(d,y){return new ei(d,y)};function ei(d,y){Se.call(this),this.g=new al(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!z(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!z(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Sr(this)}S(ei,Se),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){Bc(this.g)},ei.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=It(d),d=b);y.i.push(new id(y.Ya++,d)),y.G==3&&cl(y)},ei.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,ei.aa.N.call(this)};function _d(d){Me.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const b in y){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}S(_d,Me);function yd(){Ke.call(this),this.status=1}S(yd,Ke);function Sr(d){this.g=d}S(Sr,gd),Sr.prototype.ua=function(){ve(this.g,"a")},Sr.prototype.ta=function(d){ve(this.g,new _d(d))},Sr.prototype.sa=function(d){ve(this.g,new yd)},Sr.prototype.ra=function(){ve(this.g,"b")},hl.prototype.createWebChannel=hl.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,Jx=function(){return new hl},Xx=function(){return ln()},Wx=Ye,qy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bs.NO_ERROR=0,Bs.TIMEOUT=8,Bs.HTTP_ERROR=6,Bf=Bs,Qr.COMPLETE="complete",Yx=Qr,He.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",Se.prototype.listen=Se.prototype.K,zu=He,bt.prototype.listenOnce=bt.prototype.L,bt.prototype.getLastError=bt.prototype.Ka,bt.prototype.getLastErrorCode=bt.prototype.Ba,bt.prototype.getStatus=bt.prototype.Z,bt.prototype.getResponseJson=bt.prototype.Oa,bt.prototype.getResponseText=bt.prototype.oa,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Ha,Qx=bt}).apply(typeof Sf<"u"?Sf:typeof self<"u"?self:typeof window<"u"?window:{});const uC="@firebase/firestore",hC="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=new $m("@firebase/firestore");function ql(){return Ua.logLevel}function xe(n,...e){if(Ua.logLevel<=lt.DEBUG){const t=e.map(kE);Ua.debug(`Firestore (${Tc}): ${n}`,...t)}}function Ds(n,...e){if(Ua.logLevel<=lt.ERROR){const t=e.map(kE);Ua.error(`Firestore (${Tc}): ${n}`,...t)}}function oc(n,...e){if(Ua.logLevel<=lt.WARN){const t=e.map(kE);Ua.warn(`Firestore (${Tc}): ${n}`,...t)}}function kE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Zx(n,i,t)}function Zx(n,e,t){let i=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ds(i),new Error(i)}function wt(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Zx(e,s,i)}function qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gn.UNAUTHENTICATED))}shutdown(){}}class Z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ej{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Ao;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ao,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ao)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(wt(typeof i.accessToken=="string",31837,{l:i}),new e1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class tj{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nj{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new tj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ij{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const i=a=>{a.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,xe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=rj(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function Je(n,e){return n<e?-1:n>e?1:0}function Hy(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),s=e.codePointAt(t);if(i!==s){if(i<128&&s<128)return Je(i,s);{const a=t1(),c=sj(a.encode(fC(n,t)),a.encode(fC(e,t)));return c!==0?c:Je(i,s)}}t+=i>65535?2:1}return Je(n.length,e.length)}function fC(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function sj(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Je(n[t],e[t]);return Je(n.length,e.length)}function ac(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=-62135596800,pC=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*pC);return new Tn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mC)throw new Oe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pC}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-mC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Tn(0,0))}static max(){return new ze(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="__name__";class Or{constructor(e,t,i){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&je(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=Or.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Je(e.length,t.length)}static compareSegments(e,t){const i=Or.isNumericId(e),s=Or.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Or.extractNumericId(e).compare(Or.extractNumericId(t)):Hy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Co.fromString(e.substring(4,e.length-2))}}class zt extends Or{construct(e,t,i){return new zt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Oe(de.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const oj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Or{construct(e,t,i){return new Vn(e,t,i)}static isValidIdentifier(e){return oj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gC}static keyField(){return new Vn([gC])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Oe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new Oe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Oe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else h==="`"?(c=!c,s++):h!=="."||c?(i+=h,s++):(a(),s++)}if(a(),c)throw new Oe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(zt.fromString(e))}static fromName(e){return new Pe(zt.fromString(e).popFirst(5))}static empty(){return new Pe(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new zt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=-1;function aj(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(i===1e9?new Tn(t+1,0):new Tn(t,i));return new Mo(s,Pe.empty(),e)}function lj(n){return new Mo(n.readTime,n.key,Th)}class Mo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Mo(ze.min(),Pe.empty(),Th)}static max(){return new Mo(ze.max(),Pe.empty(),Th)}}function cj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==uj)throw n;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,i)=>{t(e)})}static reject(e){return new he((t,i)=>{i(e)})}static waitFor(e){return new he((t,i)=>{let s=0,a=0,c=!1;e.forEach(h=>{++s,h.next(()=>{++a,c&&a===s&&t()},f=>i(f))}),c=!0,a===s&&t()})}static or(e){let t=he.resolve(!1);for(const i of e)t=t.next(s=>s?he.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,a)=>{i.push(t.call(this,s,a))}),this.waitFor(i)}static mapArray(e,t){return new he((i,s)=>{const a=e.length,c=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next(_=>{c[p]=_,++h,h===a&&i(c)},_=>s(_))}})}static doWhile(e,t){return new he((i,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):i()};a()})}}function dj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}dp.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=-1;function fp(n){return n==null}function bm(n){return n===0&&1/n==-1/0}function fj(n){return typeof n=="number"&&Number.isInteger(n)&&!bm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="";function mj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_C(e)),e=pj(n.get(t),e);return _C(e)}function pj(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case i1:t+="";break;default:t+=a}}return t}function _C(n){return n+i1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ga(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function r1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cf(this.root,e,this.comparator,!0)}}class Cf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??Ln.RED,this.left=s??Ln.EMPTY,this.right=a??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new Ln(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ln.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vC(this.data.getIterator())}getIteratorFrom(e){return new vC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class vC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new lr([])}unionWith(e){let t=new bn(Vn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ac(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new s1("Invalid base64 string: "+a):a}}(e);return new Fn(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const gj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=gj.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lo(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="server_timestamp",a1="__type__",l1="__previous_value__",c1="__local_write_time__";function DE(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[a1])===null||t===void 0?void 0:t.stringValue)===o1}function mp(n){const e=n.mapValue.fields[l1];return DE(e)?mp(e):e}function bh(n){const e=Po(n.mapValue.fields[c1].timestampValue);return new Tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,t,i,s,a,c,h,f,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=_}}const wm="(default)";class wh{constructor(e,t){this.projectId=e,this.database=t||wm}static empty(){return new wh("","")}get isDefaultDatabase(){return this.database===wm}isEqual(e){return e instanceof wh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="__type__",yj="__max__",Af={mapValue:{}},h1="__vector__",Sm="value";function Uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DE(n)?4:Ej(n)?9007199254740991:vj(n)?10:11:je(28295,{value:n})}function qr(n,e){if(n===e)return!0;const t=Uo(n);if(t!==Uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bh(n).isEqual(bh(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Po(s.timestampValue),h=Po(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return Lo(s.bytesValue).isEqual(Lo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return an(s.geoPointValue.latitude)===an(a.geoPointValue.latitude)&&an(s.geoPointValue.longitude)===an(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return an(s.integerValue)===an(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=an(s.doubleValue),h=an(a.doubleValue);return c===h?bm(c)===bm(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return ac(n.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},h=a.mapValue.fields||{};if(yC(c)!==yC(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!qr(c[f],h[f])))return!1;return!0}(n,e);default:return je(52216,{left:n})}}function Sh(n,e){return(n.values||[]).find(t=>qr(t,e))!==void 0}function lc(n,e){if(n===e)return 0;const t=Uo(n),i=Uo(e);if(t!==i)return Je(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=an(a.integerValue||a.doubleValue),f=an(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return EC(n.timestampValue,e.timestampValue);case 4:return EC(bh(n),bh(e));case 5:return Hy(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Lo(a),f=Lo(c);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),f=c.split("/");for(let p=0;p<h.length&&p<f.length;p++){const _=Je(h[p],f[p]);if(_!==0)return _}return Je(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Je(an(a.latitude),an(c.latitude));return h!==0?h:Je(an(a.longitude),an(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return TC(n.arrayValue,e.arrayValue);case 10:return function(a,c){var h,f,p,_;const v=a.fields||{},T=c.fields||{},A=(h=v[Sm])===null||h===void 0?void 0:h.arrayValue,S=(f=T[Sm])===null||f===void 0?void 0:f.arrayValue,P=Je(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((_=S==null?void 0:S.values)===null||_===void 0?void 0:_.length)||0);return P!==0?P:TC(A,S)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Af.mapValue&&c===Af.mapValue)return 0;if(a===Af.mapValue)return 1;if(c===Af.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=c.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let v=0;v<f.length&&v<_.length;++v){const T=Hy(f[v],_[v]);if(T!==0)return T;const A=lc(h[f[v]],p[_[v]]);if(A!==0)return A}return Je(f.length,_.length)}(n.mapValue,e.mapValue);default:throw je(23264,{Pe:t})}}function EC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Po(n),i=Po(e),s=Je(t.seconds,i.seconds);return s!==0?s:Je(t.nanos,i.nanos)}function TC(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=lc(t[s],i[s]);if(a)return a}return Je(t.length,i.length)}function cc(n){return Gy(n)}function Gy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Po(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Lo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=Gy(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of i)a?a=!1:s+=",",s+=`${c}:${Gy(t.fields[c])}`;return s+"}"}(n.mapValue):je(61005,{value:n})}function Ff(n){switch(Uo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mp(n);return e?16+Ff(e):16;case 5:return 2*n.stringValue.length;case 6:return Lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Ff(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Ga(i.fields,(a,c)=>{s+=a.length+Ff(c)}),s}(n.mapValue);default:throw je(13486,{value:n})}}function bC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $y(n){return!!n&&"integerValue"in n}function ME(n){return!!n&&"arrayValue"in n}function wC(n){return!!n&&"nullValue"in n}function SC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zf(n){return!!n&&"mapValue"in n}function vj(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[u1])===null||t===void 0?void 0:t.stringValue)===h1}function Ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ga(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ju(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ju(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ej(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(t)}setAll(e){let t=Vn.emptyPath(),i={},s=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,i,s),i={},s=[],t=h.popLast()}c?i[h.lastSegment()]=Ju(c):s.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];zf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ga(t,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new Gi(Ju(this.value))}}function d1(n){const e=[];return Ga(n.fields,(t,i)=>{const s=new Vn([t]);if(zf(i)){const a=d1(i.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,i,s,a,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new $n(e,0,ze.min(),ze.min(),ze.min(),Gi.empty(),0)}static newFoundDocument(e,t,i,s){return new $n(e,1,t,ze.min(),i,s,0)}static newNoDocument(e,t){return new $n(e,2,t,ze.min(),ze.min(),Gi.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,ze.min(),ze.min(),Gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t){this.position=e,this.inclusive=t}}function CC(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?i=Pe.comparator(Pe.fromName(c.referenceValue),t.key):i=lc(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function AC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{}class mn extends f1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new wj(e,t,i):t==="array-contains"?new Aj(e,i):t==="in"?new Rj(e,i):t==="not-in"?new Ij(e,i):t==="array-contains-any"?new xj(e,i):new mn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Sj(e,i):new Cj(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(lc(t,this.value)):t!==null&&Uo(this.value)===Uo(t)&&this.matchesComparison(lc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends f1{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ur(e,t)}matches(e){return m1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function m1(n){return n.op==="and"}function p1(n){return bj(n)&&m1(n)}function bj(n){for(const e of n.filters)if(e instanceof ur)return!1;return!0}function Ky(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+cc(n.value);if(p1(n))return n.filters.map(e=>Ky(e)).join(",");{const e=n.filters.map(t=>Ky(t)).join(",");return`${n.op}(${e})`}}function g1(n,e){return n instanceof mn?function(i,s){return s instanceof mn&&i.op===s.op&&i.field.isEqual(s.field)&&qr(i.value,s.value)}(n,e):n instanceof ur?function(i,s){return s instanceof ur&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,c,h)=>a&&g1(c,s.filters[h]),!0):!1}(n,e):void je(19439)}function _1(n){return n instanceof mn?function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`}(n):n instanceof ur?function(t){return t.op.toString()+" {"+t.getFilters().map(_1).join(" ,")+"}"}(n):"Filter"}class wj extends mn{constructor(e,t,i){super(e,t,i),this.key=Pe.fromName(i.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sj extends mn{constructor(e,t){super(e,"in",t),this.keys=y1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cj extends mn{constructor(e,t){super(e,"not-in",t),this.keys=y1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function y1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Pe.fromName(i.referenceValue))}class Aj extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ME(t)&&Sh(t.arrayValue,this.value)}}class Rj extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sh(this.value.arrayValue,t)}}class Ij extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sh(this.value.arrayValue,t)}}class xj extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ME(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Sh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,t=null,i=[],s=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=c,this.endAt=h,this.Ie=null}}function RC(n,e=null,t=[],i=[],s=null,a=null,c=null){return new Nj(n,e,t,i,s,a,c)}function PE(n){const e=qe(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Ky(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>cc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>cc(i)).join(",")),e.Ie=t}return e.Ie}function LE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Tj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!g1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AC(n.startAt,e.startAt)&&AC(n.endAt,e.endAt)}function Qy(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t=null,i=[],s=[],a=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function kj(n,e,t,i,s,a,c,h){return new Hh(n,e,t,i,s,a,c,h)}function v1(n){return new Hh(n)}function IC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function E1(n){return n.collectionGroup!==null}function Zu(n){const e=qe(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new bn(Vn.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Am(a,i))}),t.has(Vn.keyField().canonicalString())||e.Ee.push(new Am(Vn.keyField(),i))}return e.Ee}function Br(n){const e=qe(n);return e.de||(e.de=Oj(e,Zu(n))),e.de}function Oj(n,e){if(n.limitType==="F")return RC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Am(s.field,a)});const t=n.endAt?new Cm(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Cm(n.startAt.position,n.startAt.inclusive):null;return RC(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Yy(n,e){const t=n.filters.concat([e]);return new Hh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wy(n,e,t){return new Hh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pp(n,e){return LE(Br(n),Br(e))&&n.limitType===e.limitType}function T1(n){return`${PE(Br(n))}|lt:${n.limitType}`}function Hl(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>_1(s)).join(", ")}]`),fp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>cc(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>cc(s)).join(",")),`Target(${i})`}(Br(n))}; limitType=${n.limitType})`}function gp(n,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Pe.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,s){for(const a of Zu(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(c,h,f){const p=CC(c,h,f);return c.inclusive?p<=0:p<0}(i.startAt,Zu(i),s)||i.endAt&&!function(c,h,f){const p=CC(c,h,f);return c.inclusive?p>=0:p>0}(i.endAt,Zu(i),s))}(n,e)}function Dj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function b1(n){return(e,t)=>{let i=!1;for(const s of Zu(n)){const a=Mj(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function Mj(n,e,t){const i=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(a,c,h){const f=c.data.field(a),p=h.data.field(a);return f!==null&&p!==null?lc(f,p):je(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return je(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ga(this.inner,(t,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return r1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=new Yt(Pe.comparator);function Ms(){return Pj}const w1=new Yt(Pe.comparator);function qu(...n){let e=w1;for(const t of n)e=e.insert(t.key,t);return e}function S1(n){let e=w1;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Sa(){return eh()}function C1(){return eh()}function eh(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const Lj=new Yt(Pe.comparator),Uj=new bn(Pe.comparator);function ct(...n){let e=Uj;for(const t of n)e=e.add(t);return e}const Vj=new bn(Je);function jj(){return Vj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bm(e)?"-0":e}}function A1(n){return{integerValue:""+n}}function Bj(n,e){return fj(e)?A1(e):UE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this._=void 0}}function Fj(n,e,t){return n instanceof Rm?function(s,a){const c={fields:{[a1]:{stringValue:o1},[c1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&DE(a)&&(a=mp(a)),a&&(c.fields[l1]=a),{mapValue:c}}(t,e):n instanceof Ch?I1(n,e):n instanceof Ah?x1(n,e):function(s,a){const c=R1(s,a),h=xC(c)+xC(s.Re);return $y(c)&&$y(s.Re)?A1(h):UE(s.serializer,h)}(n,e)}function zj(n,e,t){return n instanceof Ch?I1(n,e):n instanceof Ah?x1(n,e):t}function R1(n,e){return n instanceof Im?function(i){return $y(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Rm extends _p{}class Ch extends _p{constructor(e){super(),this.elements=e}}function I1(n,e){const t=N1(e);for(const i of n.elements)t.some(s=>qr(s,i))||t.push(i);return{arrayValue:{values:t}}}class Ah extends _p{constructor(e){super(),this.elements=e}}function x1(n,e){let t=N1(e);for(const i of n.elements)t=t.filter(s=>!qr(s,i));return{arrayValue:{values:t}}}class Im extends _p{constructor(e,t){super(),this.serializer=e,this.Re=t}}function xC(n){return an(n.integerValue||n.doubleValue)}function N1(n){return ME(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qj(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Ch&&s instanceof Ch||i instanceof Ah&&s instanceof Ah?ac(i.elements,s.elements,qr):i instanceof Im&&s instanceof Im?qr(i.Re,s.Re):i instanceof Rm&&s instanceof Rm}(n.transform,e.transform)}class Hj{constructor(e,t){this.version=e,this.transformResults=t}}class As{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new As}static exists(e){return new As(void 0,e)}static updateTime(e){return new As(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yp{}function k1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new D1(n.key,As.none()):new Gh(n.key,n.data,As.none());{const t=n.data,i=Gi.empty();let s=new bn(Vn.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),s=s.add(a)}return new Ka(n.key,i,new lr(s.toArray()),As.none())}}function Gj(n,e,t){n instanceof Gh?function(s,a,c){const h=s.value.clone(),f=kC(s.fieldTransforms,a,c.transformResults);h.setAll(f),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Ka?function(s,a,c){if(!qf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const h=kC(s.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(O1(s)),f.setAll(h),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function th(n,e,t,i){return n instanceof Gh?function(a,c,h,f){if(!qf(a.precondition,c))return h;const p=a.value.clone(),_=OC(a.fieldTransforms,f,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ka?function(a,c,h,f){if(!qf(a.precondition,c))return h;const p=OC(a.fieldTransforms,f,c),_=c.data;return _.setAll(O1(a)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(a,c,h){return qf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function $j(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=R1(i.transform,s||null);a!=null&&(t===null&&(t=Gi.empty()),t.set(i.field,a))}return t||null}function NC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ac(i,s,(a,c)=>qj(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Gh extends yp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ka extends yp{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function O1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function kC(n,e,t){const i=new Map;wt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,h=e.data.field(a.field);i.set(a.field,zj(c,h,t[s]))}return i}function OC(n,e,t){const i=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);i.set(s.field,Fj(a,c,e))}return i}class D1 extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kj extends yp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Gj(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=th(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=th(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=C1();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(s.key)?null:h;const f=k1(c,h);f!==null&&i.set(s.key,f),c.isValidDocument()||c.convertToNoDocument(ze.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ct())}isEqual(e){return this.batchId===e.batchId&&ac(this.mutations,e.mutations,(t,i)=>NC(t,i))&&ac(this.baseMutations,e.baseMutations,(t,i)=>NC(t,i))}}class VE{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){wt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let s=function(){return Lj}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,i[c].version);return new VE(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fn,ft;function Xj(n){switch(n){case de.OK:return je(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return je(15467,{code:n})}}function M1(n){if(n===void 0)return Ds("GRPC error has no .code"),de.UNKNOWN;switch(n){case fn.OK:return de.OK;case fn.CANCELLED:return de.CANCELLED;case fn.UNKNOWN:return de.UNKNOWN;case fn.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case fn.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case fn.INTERNAL:return de.INTERNAL;case fn.UNAVAILABLE:return de.UNAVAILABLE;case fn.UNAUTHENTICATED:return de.UNAUTHENTICATED;case fn.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case fn.NOT_FOUND:return de.NOT_FOUND;case fn.ALREADY_EXISTS:return de.ALREADY_EXISTS;case fn.PERMISSION_DENIED:return de.PERMISSION_DENIED;case fn.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case fn.ABORTED:return de.ABORTED;case fn.OUT_OF_RANGE:return de.OUT_OF_RANGE;case fn.UNIMPLEMENTED:return de.UNIMPLEMENTED;case fn.DATA_LOSS:return de.DATA_LOSS;default:return je(39323,{code:n})}}(ft=fn||(fn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=new Co([4294967295,4294967295],0);function DC(n){const e=t1().encode(n),t=new Kx;return t.update(e),new Uint8Array(t.digest())}function MC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Co([t,i],0),new Co([s,a],0)]}class jE{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Hu(`Invalid padding: ${t}`);if(i<0)throw new Hu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Hu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Hu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Co.fromNumber(this.pe)}we(e,t,i){let s=e.add(t.multiply(Co.fromNumber(i)));return s.compare(Jj)===1&&(s=new Co([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=DC(e),[i,s]=MC(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,s,a);if(!this.Se(c))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new jE(a,s,t);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.pe===0)return;const t=DC(e),[i,s]=MC(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,s,a);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,$h.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new vp(ze.min(),s,new Yt(Je),Ms(),ct())}}class $h{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new $h(i,t,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t,i,s){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=s}}class P1{constructor(e,t){this.targetId=e,this.Ce=t}}class L1{constructor(e,t,i=Fn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class PC{constructor(){this.Fe=0,this.Me=LC(),this.xe=Fn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ct(),t=ct(),i=ct();return this.Me.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:je(38017,{changeType:a})}}),new $h(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=LC()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,wt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Zj{constructor(e){this.ze=e,this.je=new Map,this.He=Ms(),this.Je=Rf(),this.Ye=Rf(),this.Ze=new Yt(Je)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:je(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,i=e.Ce.count,s=this._t(t);if(s){const a=s.target;if(Qy(a))if(i===0){const c=new Pe(a.path);this.tt(t,c,$n.newNoDocument(c,ze.min()))}else wt(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const h=this.ct(e),f=h?this.lt(h,e,c):1;if(f!==0){this.st(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let c,h;try{c=Lo(i).toUint8Array()}catch(f){if(f instanceof s1)return oc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new jE(c,s,a)}catch(f){return oc(f instanceof Hu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.pe===0?null:h}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let s=0;return i.forEach(a=>{const c=this.ze.Pt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.tt(t,a,null),s++)}),s}It(e){const t=new Map;this.je.forEach((a,c)=>{const h=this._t(c);if(h){if(a.current&&Qy(h.target)){const f=new Pe(h.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,$n.newNoDocument(f,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let i=ct();this.Ye.forEach((a,c)=>{let h=!0;c.forEachWhile(f=>{const p=this._t(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const s=new vp(e,t,this.Ze,this.He,i);return this.He=Ms(),this.Je=Rf(),this.Ye=Rf(),this.Ze=new Yt(Je),s}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new PC,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new bn(Je),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new bn(Je),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new PC),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Rf(){return new Yt(Pe.comparator)}function LC(){return new Yt(Pe.comparator)}const eB={asc:"ASCENDING",desc:"DESCENDING"},tB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nB={and:"AND",or:"OR"};class iB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xy(n,e){return n.useProto3Json||fp(e)?e:{value:e}}function xm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rB(n,e){return xm(n,e.toTimestamp())}function Fr(n){return wt(!!n,49232),ze.fromTimestamp(function(t){const i=Po(t);return new Tn(i.seconds,i.nanos)}(n))}function BE(n,e){return Jy(n,e).canonicalString()}function Jy(n,e){const t=function(s){return new zt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function V1(n){const e=zt.fromString(n);return wt(q1(e),10190,{key:e.toString()}),e}function Zy(n,e){return BE(n.databaseId,e.path)}function sy(n,e){const t=V1(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(B1(t))}function j1(n,e){return BE(n.databaseId,e)}function sB(n){const e=V1(n);return e.length===4?zt.emptyPath():B1(e)}function ev(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function B1(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function UC(n,e,t){return{name:Zy(n,e),fields:t.value.mapValue.fields}}function oB(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:je(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(p,_){return p.useProto3Json?(wt(_===void 0||typeof _=="string",58123),Fn.fromBase64String(_||"")):(wt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Fn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const _=p.code===void 0?de.UNKNOWN:M1(p.code);return new Oe(_,p.message||"")}(c);t=new L1(i,s,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sy(n,i.document.name),a=Fr(i.document.updateTime),c=i.document.createTime?Fr(i.document.createTime):ze.min(),h=new Gi({mapValue:{fields:i.document.fields}}),f=$n.newFoundDocument(s,a,c,h),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Hf(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sy(n,i.document),a=i.readTime?Fr(i.readTime):ze.min(),c=$n.newNoDocument(s,a),h=i.removedTargetIds||[];t=new Hf([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sy(n,i.document),a=i.removedTargetIds||[];t=new Hf([],a,s,null)}else{if(!("filter"in e))return je(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,c=new Wj(s,a),h=i.targetId;t=new P1(h,c)}}return t}function aB(n,e){let t;if(e instanceof Gh)t={update:UC(n,e.key,e.value)};else if(e instanceof D1)t={delete:Zy(n,e.key)};else if(e instanceof Ka)t={update:UC(n,e.key,e.data),updateMask:gB(e.fieldMask)};else{if(!(e instanceof Kj))return je(16599,{ft:e.type});t={verify:Zy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const h=c.transform;if(h instanceof Rm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ch)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ah)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Im)return{fieldPath:c.field.canonicalString(),increment:h.Re};throw je(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:rB(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:je(27497)}(n,e.precondition)),t}function lB(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map(t=>function(s,a){let c=s.updateTime?Fr(s.updateTime):Fr(a);return c.isEqual(ze.min())&&(c=Fr(a)),new Hj(c,s.transformResults||[])}(t,e))):[]}function cB(n,e){return{documents:[j1(n,e.path)]}}function uB(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=j1(n,s);const a=function(p){if(p.length!==0)return z1(ur.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(_=>function(T){return{field:Gl(T.field),direction:fB(T.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Xy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:t,parent:s}}function hB(n){let e=sB(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){wt(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(v){const T=F1(v);return T instanceof ur&&p1(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(T=>function(S){return new Am($l(S.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(v){let T;return T=typeof v=="object"?v.value:v,fp(T)?null:T}(t.limit));let f=null;t.startAt&&(f=function(v){const T=!!v.before,A=v.values||[];return new Cm(A,T)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const T=!v.before,A=v.values||[];return new Cm(A,T)}(t.endAt)),kj(e,s,c,a,h,"F",f,p)}function dB(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function F1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=$l(t.unaryFilter.field);return mn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=$l(t.unaryFilter.field);return mn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=$l(t.unaryFilter.field);return mn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$l(t.unaryFilter.field);return mn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}}(n):n.fieldFilter!==void 0?function(t){return mn.create($l(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ur.create(t.compositeFilter.filters.map(i=>F1(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je(1026)}}(t.compositeFilter.op))}(n):je(30097,{filter:n})}function fB(n){return eB[n]}function mB(n){return tB[n]}function pB(n){return nB[n]}function Gl(n){return{fieldPath:n.canonicalString()}}function $l(n){return Vn.fromServerFormat(n.fieldPath)}function z1(n){return n instanceof mn?function(t){if(t.op==="=="){if(SC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if(wC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(SC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if(wC(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:mB(t.op),value:t.value}}}(n):n instanceof ur?function(t){const i=t.getFilters().map(s=>z1(s));return i.length===1?i[0]:{compositeFilter:{op:pB(t.op),filters:i}}}(n):je(54877,{filter:n})}function gB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function q1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,t,i,s,a=ze.min(),c=ze.min(),h=Fn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new To(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new To(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.wt=e}}function yB(n){const e=hB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.Cn=new EB}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Mo.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Mo.min())}updateCollectionGroup(e,t,i){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class EB{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new bn(zt.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new bn(zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H1=41943040;class mi{static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(H1,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new uc(0)}static lr(){return new uc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="LruGarbageCollector",TB=1048576;function BC([n,e],[t,i]){const s=Je(n,t);return s===0?Je(e,i):s}class bB{constructor(e){this.Er=e,this.buffer=new bn(BC),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();BC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wB{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){xe(jC,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wc(t)?xe(jC,"Ignoring IndexedDB error during garbage collection: ",t):await bc(t)}await this.mr(3e5)})}}class SB{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return he.resolve(dp.le);const i=new bB(t);return this.gr.forEachTarget(e,s=>i.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>i.Rr(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(VC)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VC):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,s,a,c,h,f,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,t))).next(v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),ql()<=lt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(h-c)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-_}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function CB(n,e){return new SB(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?he.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&th(i.mutation,s,lr.empty(),Tn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ct()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ct()){const s=Sa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(a=>{let c=qu();return a.forEach((h,f)=>{c=c.insert(h,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Sa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ct()))}populateOverlays(e,t,i){const s=[];return i.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,i,s){let a=Ms();const c=eh(),h=function(){return eh()}();return t.forEach((f,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof Ka)?a=a.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),th(_.mutation,p,_.mutation.getFieldMask(),Tn.now())):c.set(p.key,lr.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var v;return h.set(p,new RB(_,(v=c.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const i=eh();let s=new Yt((c,h)=>c-h),a=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let _=i.get(f)||lr.empty();_=h.applyToLocalView(p,_),i.set(f,_);const v=(s.get(h.batchId)||ct()).add(f);s=s.insert(h.batchId,v)})}).next(()=>{const c=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,_=f.value,v=C1();_.forEach(T=>{if(!a.has(T)){const A=k1(t.get(T),i.get(T));A!==null&&v.set(T,A),a=a.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return he.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(c){return Pe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):he.resolve(Sa());let h=Th,f=a;return c.next(p=>he.forEach(p,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),a.get(_)?he.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{f=f.insert(_,T)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,ct())).next(_=>({batchId:h,changes:S1(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(i=>{let s=qu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let c=qu();return this.indexManager.getCollectionParents(e,a).next(h=>he.forEach(h,f=>{const p=function(v,T){return new Hh(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(_=>{_.forEach((v,T)=>{c=c.insert(v,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s))).next(c=>{a.forEach((f,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,$n.newInvalidDocument(_)))});let h=qu();return c.forEach((f,p)=>{const _=a.get(f);_!==void 0&&th(_.mutation,p,lr.empty(),Tn.now()),gp(t,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return he.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Fr(s.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(s){return{name:s.name,query:yB(s.bundledQuery),readTime:Fr(s.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(){this.overlays=new Yt(Pe.comparator),this.Qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Sa();return he.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,a)=>{this.bt(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(i)),he.resolve()}getOverlaysForCollection(e,t,i){const s=Sa(),a=t.length+1,c=new Pe(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>i&&s.set(f.getKey(),f)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new Yt((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=a.get(p.largestBatchId);_===null&&(_=Sa(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=Sa(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,_)=>h.set(p,_)),!(h.size()>=s)););return he.resolve(h)}bt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Qr.get(s.largestBatchId).delete(i.key);this.Qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Yj(t,i));let a=this.Qr.get(t);a===void 0&&(a=ct(),this.Qr.set(t,a)),this.Qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.$r=new bn(Nn.Ur),this.Kr=new bn(Nn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const i=new Nn(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new Nn(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){const t=new Pe(new zt([])),i=new Nn(t,e),s=new Nn(t,e+1),a=[];return this.Kr.forEachInRange([i,s],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Pe(new zt([])),i=new Nn(t,e),s=new Nn(t,e+1);let a=ct();return this.Kr.forEachInRange([i,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Nn(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Nn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Pe.comparator(e.key,t.key)||Je(e.Zr,t.Zr)}static Wr(e,t){return Je(e.Zr,t.Zr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new bn(Nn.Ur)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Qj(a,t,i,s);this.mutationQueue.push(c);for(const h of s)this.Xr=this.Xr.add(new Nn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ti(i),a=s<0?0:s;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?OE:this.nr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nn(t,0),s=new Nn(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([i,s],c=>{const h=this.ei(c.Zr);a.push(h)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bn(Je);return t.forEach(s=>{const a=new Nn(s,0),c=new Nn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],h=>{i=i.add(h.Zr)})}),he.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;Pe.isDocumentKey(a)||(a=a.child(""));const c=new Nn(new Pe(a),0);let h=new bn(Je);return this.Xr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.Zr)),!0)},c),he.resolve(this.ni(h))}ni(e){const t=[];return e.forEach(i=>{const s=this.ei(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){wt(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return he.forEach(t.mutations,s=>{const a=new Nn(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){const i=new Nn(t,0),s=this.Xr.firstAfterOrEqual(i);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.ii=e,this.docs=function(){return new Yt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,c=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return he.resolve(i?i.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let i=Ms();return t.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():$n.newInvalidDocument(s))}),he.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=Ms();const c=t.path,h=new Pe(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||cj(lj(_),i)<=0||(s.has(_.key)||gp(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,i,s){je(9500)}si(e,t){return he.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new MB(this)}getSize(e){return he.resolve(this.size)}}class MB extends AB{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Br.addEntry(e,s)):this.Br.removeEntry(i)}),he.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.persistence=e,this.oi=new $a(t=>PE(t),LE),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this._i=0,this.ai=new FE,this.targetCount=0,this.ui=uc.cr()}forEachTarget(e,t){return this.oi.forEach((i,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),he.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new uc(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tr(t),he.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.oi.forEach((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),he.waitFor(a).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const i=this.oi.get(t)||null;return he.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),he.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ai.Yr(t);return he.resolve(i)}containsKey(e,t){return he.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t){this.ci={},this.overlays={},this.li=new dp(0),this.hi=!1,this.hi=!0,this.Pi=new kB,this.referenceDelegate=e(this),this.Ti=new PB(this),this.indexManager=new vB,this.remoteDocumentCache=function(s){return new DB(s)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new _B(t),this.Ei=new xB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new OB(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){xe("MemoryPersistence","Starting transaction:",e);const s=new LB(this.li.next());return this.referenceDelegate.di(),i(s).next(a=>this.referenceDelegate.Ai(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ri(e,t){return he.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}}class LB extends hj{constructor(e){super(),this.currentSequenceNumber=e}}class zE{constructor(e){this.persistence=e,this.Vi=new FE,this.mi=null}static fi(e){return new zE(e)}get gi(){if(this.mi)return this.mi;throw je(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),he.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(s=>this.gi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.gi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.gi,i=>{const s=Pe.fromPath(i);return this.pi(e,s).next(a=>{a||t.removeEntry(s,ze.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return he.or([()=>he.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Nm{constructor(e,t){this.persistence=e,this.yi=new $a(i=>mj(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=CB(this,t)}static fi(e,t){return new Nm(e,t)}di(){}Ai(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}Sr(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return he.forEach(this.yi,(i,s)=>this.Dr(e,i,s).next(a=>a?he.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.si(e,c=>this.Dr(e,c,t).next(h=>{h||(i++,a.removeEntry(c,ze.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),he.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),he.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ff(e.data.value)),t}Dr(e,t,i){return he.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.yi.get(t);return he.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.ds=i,this.As=s}static Rs(e,t){let i=ct(),s=ct();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new qE(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return QM()?8:dj(Wn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.ws(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Ss(e,t,s,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new UB;return this.bs(e,t,c).next(h=>{if(a.result=h,this.fs)return this.Ds(e,t,c,h.size)})}).next(()=>a.result)}Ds(e,t,i,s){return i.documentReadCount<this.gs?(ql()<=lt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),he.resolve()):(ql()<=lt.DEBUG&&xe("QueryEngine","Query:",Hl(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ps*s?(ql()<=lt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):he.resolve())}ws(e,t){if(IC(t))return he.resolve(null);let i=Br(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Wy(t,null,"F"),i=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=ct(...a);return this.ys.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.vs(t,h);return this.Cs(t,p,c,f.readTime)?this.ws(e,Wy(t,null,"F")):this.Fs(e,p,t,f)}))})))}Ss(e,t,i,s){return IC(t)||s.isEqual(ze.min())?he.resolve(null):this.ys.getDocuments(e,i).next(a=>{const c=this.vs(t,a);return this.Cs(t,c,i,s)?he.resolve(null):(ql()<=lt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hl(t)),this.Fs(e,c,t,aj(s,Th)).next(h=>h))})}vs(e,t){let i=new bn(b1(e));return t.forEach((s,a)=>{gp(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}bs(e,t,i){return ql()<=lt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Hl(t)),this.ys.getDocumentsMatchingQuery(e,t,Mo.min(),i)}Fs(e,t,i,s){return this.ys.getDocumentsMatchingQuery(e,i,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="LocalStore",jB=3e8;class BB{constructor(e,t,i,s){this.persistence=e,this.Ms=t,this.serializer=s,this.xs=new Yt(Je),this.Os=new $a(a=>PE(a),LE),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IB(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function FB(n,e,t,i){return new BB(n,e,t,i)}async function $1(n,e){const t=qe(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],h=[];let f=ct();for(const p of s){c.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of a){h.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:h}))})})}function zB(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(h,f,p,_){const v=p.batch,T=v.keys();let A=he.resolve();return T.forEach(S=>{A=A.next(()=>_.getEntry(f,S)).next(P=>{const D=p.docVersions.get(S);wt(D!==null,48541),P.version.compareTo(D)<0&&(v.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),_.addEntry(P)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(f,v))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=ct();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function K1(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function qB(n,e){const t=qe(n),i=e.snapshotVersion;let s=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});s=t.xs;const h=[];e.targetChanges.forEach((_,v)=>{const T=s.get(v);if(!T)return;h.push(t.Ti.removeMatchingKeys(a,_.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(a,_.addedDocuments,v)));let A=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(Fn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),s=s.insert(v,A),function(P,D,F){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=jB?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(T,A,_)&&h.push(t.Ti.updateTargetData(a,A))});let f=Ms(),p=ct();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),h.push(HB(a,c,e.documentUpdates).next(_=>{f=_.qs,p=_.Qs})),!i.isEqual(ze.min())){const _=t.Ti.getLastRemoteSnapshotVersion(a).next(v=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(_)}return he.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(t.xs=s,a))}function HB(n,e,t){let i=ct(),s=ct();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let c=Ms();return t.forEach((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(ze.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):xe(HE,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{qs:c,Qs:s}})}function GB(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=OE),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function $B(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Ti.getTargetData(i,e).next(a=>a?(s=a,he.resolve(s)):t.Ti.allocateTargetId(i).next(c=>(s=new To(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.xs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}async function tv(n,e,t){const i=qe(n),s=i.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!wc(c))throw c;xe(HE,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(s.target)}function FC(n,e,t){const i=qe(n);let s=ze.min(),a=ct();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,_){const v=qe(f),T=v.Os.get(_);return T!==void 0?he.resolve(v.xs.get(T)):v.Ti.getTargetData(p,_)}(i,c,Br(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,h.targetId).next(f=>{a=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,t?s:ze.min(),t?a:ct())).next(h=>(KB(i,Dj(e),h),{documents:h,$s:a})))}function KB(n,e,t){let i=n.Ns.get(e)||ze.min();t.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Ns.set(e,i)}class zC{constructor(){this.activeTargetIds=jj()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QB{constructor(){this.xo=new zC,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new zC,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="ConnectivityMonitor";class HC{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){xe(qC,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){xe(qC,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If=null;function nv(){return If===null?If=function(){return 268435456+Math.round(2147483648*Math.random())}():If++,"0x"+If.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="RestConnection",WB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XB{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${s}`,this.Go=this.databaseId.database===wm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}zo(e,t,i,s,a){const c=nv(),h=this.jo(e,t.toUriEncodedString());xe(oy,`Sending RPC '${e}' ${c}:`,h,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,a);const{host:p}=new URL(h),_=Us(p);return this.Jo(e,h,f,i,_).then(v=>(xe(oy,`Received RPC '${e}' ${c}: `,v),v),v=>{throw oc(oy,`RPC '${e}' ${c} failed with error: `,v,"url: ",h,"request:",i),v})}Yo(e,t,i,s,a,c){return this.zo(e,t,i,s,a)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}jo(e,t){const i=WB[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection";class ZB extends XB{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,a){const c=nv();return new Promise((h,f)=>{const p=new Qx;p.setWithCredentials(!0),p.listenOnce(Yx.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Bf.NO_ERROR:const v=p.getResponseJson();xe(Hn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),h(v);break;case Bf.TIMEOUT:xe(Hn,`RPC '${e}' ${c} timed out`),f(new Oe(de.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:const T=p.getStatus();if(xe(Hn,`RPC '${e}' ${c} failed with status:`,T,"response text:",p.getResponseText()),T>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const S=A==null?void 0:A.error;if(S&&S.status&&S.message){const P=function(F){const z=F.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(z)>=0?z:de.UNKNOWN}(S.status);f(new Oe(P,S.message))}else f(new Oe(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new Oe(de.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{xe(Hn,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(s);xe(Hn,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",_,i,15)})}T_(e,t,i){const s=nv(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Jx(),h=Xx(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=a.join("");xe(Hn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const v=c.createWebChannel(_,f);let T=!1,A=!1;const S=new JB({Zo:D=>{A?xe(Hn,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(T||(xe(Hn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),T=!0),xe(Hn,`RPC '${e}' stream ${s} sending:`,D),v.send(D))},Xo:()=>v.close()}),P=(D,F,z)=>{D.listen(F,G=>{try{z(G)}catch(re){setTimeout(()=>{throw re},0)}})};return P(v,zu.EventType.OPEN,()=>{A||(xe(Hn,`RPC '${e}' stream ${s} transport opened.`),S.__())}),P(v,zu.EventType.CLOSE,()=>{A||(A=!0,xe(Hn,`RPC '${e}' stream ${s} transport closed`),S.u_())}),P(v,zu.EventType.ERROR,D=>{A||(A=!0,oc(Hn,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),S.u_(new Oe(de.UNAVAILABLE,"The operation could not be completed")))}),P(v,zu.EventType.MESSAGE,D=>{var F;if(!A){const z=D.data[0];wt(!!z,16349);const G=z,re=(G==null?void 0:G.error)||((F=G[0])===null||F===void 0?void 0:F.error);if(re){xe(Hn,`RPC '${e}' stream ${s} received error:`,re);const ie=re.status;let ye=function(I){const N=fn[I];if(N!==void 0)return M1(N)}(ie),k=re.message;ye===void 0&&(ye=de.INTERNAL,k="Unknown error status: "+ie+" with message "+re.message),A=!0,S.u_(new Oe(ye,k)),v.close()}else xe(Hn,`RPC '${e}' stream ${s} received:`,z),S.c_(z)}}),P(h,Wx.STAT_EVENT,D=>{D.stat===qy.PROXY?xe(Hn,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===qy.NOPROXY&&xe(Hn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}}function ay(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(n){return new iB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t,i=1e3,s=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=i,this.E_=s,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),i=Math.max(0,Date.now()-this.V_),s=Math.max(0,t-i);s>0&&xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="PersistentStream";class Y1{constructor(e,t,i,s,a,c,h,f){this.xi=e,this.y_=i,this.w_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Q1(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.S_===t&&this.K_(i,s)},i=>{e(()=>{const s=new Oe(de.UNKNOWN,"Fetching auth token failed: "+i.message);return this.W_(s)})})}K_(e,t){const i=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{i(()=>this.W_(s))}),this.stream.onMessage(s=>{i(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return xe(GC,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(xe(GC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e9 extends Y1{constructor(e,t,i,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,c),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=oB(this.serializer,e),i=function(a){if(!("targetChange"in a))return ze.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?ze.min():c.readTime?Fr(c.readTime):ze.min()}(e);return this.listener.j_(t,i)}H_(e){const t={};t.database=ev(this.serializer),t.addTarget=function(a,c){let h;const f=c.target;if(h=Qy(f)?{documents:cB(a,f)}:{query:uB(a,f).gt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=U1(a,c.resumeToken);const p=Xy(a,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(ze.min())>0){h.readTime=xm(a,c.snapshotVersion.toTimestamp());const p=Xy(a,c.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const i=dB(this.serializer,e);i&&(t.labels=i),this.L_(t)}J_(e){const t={};t.database=ev(this.serializer),t.removeTarget=e,this.L_(t)}}class t9 extends Y1{constructor(e,t,i,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,c),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=lB(e.writeResults,e.commitTime),i=Fr(e.commitTime);return this.listener.ea(i,t)}ta(){const e={};e.database=ev(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>aB(this.serializer,i))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{}class i9 extends n9{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.na=!1}ra(){if(this.na)throw new Oe(de.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,Jy(t,i),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(de.UNKNOWN,a.toString())})}Yo(e,t,i,s,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Yo(e,Jy(t,i),s,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Oe(de.UNKNOWN,c.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class r9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ds(t),this.oa=!1):xe("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="RemoteStore";class s9{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(c=>{i.enqueueAndForget(async()=>{Qa(this)&&(xe(Va,"Restarting streams for network reachability change."),await async function(f){const p=qe(f);p.Ta.add(4),await Kh(p),p.da.set("Unknown"),p.Ta.delete(4),await Tp(p)}(this))})}),this.da=new r9(i,s)}}async function Tp(n){if(Qa(n))for(const e of n.Ia)await e(!0)}async function Kh(n){for(const e of n.Ia)await e(!1)}function W1(n,e){const t=qe(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),QE(t)?KE(t):Sc(t).M_()&&$E(t,e))}function GE(n,e){const t=qe(n),i=Sc(t);t.Pa.delete(e),i.M_()&&X1(t,e),t.Pa.size===0&&(i.M_()?i.N_():Qa(t)&&t.da.set("Unknown"))}function $E(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sc(n).H_(e)}function X1(n,e){n.Aa.Ke(e),Sc(n).J_(e)}function KE(n){n.Aa=new Zj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Sc(n).start(),n.da._a()}function QE(n){return Qa(n)&&!Sc(n).F_()&&n.Pa.size>0}function Qa(n){return qe(n).Ta.size===0}function J1(n){n.Aa=void 0}async function o9(n){n.da.set("Online")}async function a9(n){n.Pa.forEach((e,t)=>{$E(n,e)})}async function l9(n,e){J1(n),QE(n)?(n.da.ca(e),KE(n)):n.da.set("Unknown")}async function c9(n,e,t){if(n.da.set("Online"),e instanceof L1&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const h of a.targetIds)s.Pa.has(h)&&(await s.remoteSyncer.rejectListen(h,c),s.Pa.delete(h),s.Aa.removeTarget(h))}(n,e)}catch(i){xe(Va,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await km(n,i)}else if(e instanceof Hf?n.Aa.Xe(e):e instanceof P1?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(ze.min()))try{const i=await K1(n.localStore);t.compareTo(i)>=0&&await function(a,c){const h=a.Aa.It(c);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Pa.get(p);_&&a.Pa.set(p,_.withResumeToken(f.resumeToken,c))}}),h.targetMismatches.forEach((f,p)=>{const _=a.Pa.get(f);if(!_)return;a.Pa.set(f,_.withResumeToken(Fn.EMPTY_BYTE_STRING,_.snapshotVersion)),X1(a,f);const v=new To(_.target,f,p,_.sequenceNumber);$E(a,v)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){xe(Va,"Failed to raise snapshot:",i),await km(n,i)}}async function km(n,e,t){if(!wc(e))throw e;n.Ta.add(1),await Kh(n),n.da.set("Offline"),t||(t=()=>K1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{xe(Va,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Tp(n)})}function Z1(n,e){return e().catch(t=>km(n,t,e))}async function bp(n){const e=qe(n),t=Vo(e);let i=e.ha.length>0?e.ha[e.ha.length-1].batchId:OE;for(;u9(e);)try{const s=await GB(e.localStore,i);if(s===null){e.ha.length===0&&t.N_();break}i=s.batchId,h9(e,s)}catch(s){await km(e,s)}eN(e)&&tN(e)}function u9(n){return Qa(n)&&n.ha.length<10}function h9(n,e){n.ha.push(e);const t=Vo(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function eN(n){return Qa(n)&&!Vo(n).F_()&&n.ha.length>0}function tN(n){Vo(n).start()}async function d9(n){Vo(n).ta()}async function f9(n){const e=Vo(n);for(const t of n.ha)e.Z_(t.mutations)}async function m9(n,e,t){const i=n.ha.shift(),s=VE.from(i,e,t);await Z1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await bp(n)}async function p9(n,e){e&&Vo(n).Y_&&await async function(i,s){if(function(c){return Xj(c)&&c!==de.ABORTED}(s.code)){const a=i.ha.shift();Vo(i).O_(),await Z1(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await bp(i)}}(n,e),eN(n)&&tN(n)}async function $C(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),xe(Va,"RemoteStore received new credentials");const i=Qa(t);t.Ta.add(3),await Kh(t),i&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Tp(t)}async function g9(n,e){const t=qe(n);e?(t.Ta.delete(2),await Tp(t)):e||(t.Ta.add(2),await Kh(t),t.da.set("Unknown"))}function Sc(n){return n.Ra||(n.Ra=function(t,i,s){const a=qe(t);return a.ra(),new e9(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{e_:o9.bind(null,n),n_:a9.bind(null,n),i_:l9.bind(null,n),j_:c9.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),QE(n)?KE(n):n.da.set("Unknown")):(await n.Ra.stop(),J1(n))})),n.Ra}function Vo(n){return n.Va||(n.Va=function(t,i,s){const a=qe(t);return a.ra(),new t9(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:d9.bind(null,n),i_:p9.bind(null,n),X_:f9.bind(null,n),ea:m9.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await bp(n)):(await n.Va.stop(),n.ha.length>0&&(xe(Va,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const c=Date.now()+i,h=new YE(e,t,c,s,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function WE(n,e){if(Ds("AsyncQueue",`${e}: ${n}`),wc(n))return new Oe(de.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{static emptySet(e){return new Zl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Pe.comparator(t.key,i.key):(t,i)=>Pe.comparator(t.key,i.key),this.keyedMap=qu(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Zl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.ma=new Yt(Pe.comparator)}track(e){const t=e.doc.key,i=this.ma.get(t);i?e.type!==0&&i.type===3?this.ma=this.ma.insert(t,e):e.type===3&&i.type!==1?this.ma=this.ma.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ma=this.ma.remove(t):e.type===1&&i.type===2?this.ma=this.ma.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):je(63341,{Vt:e,fa:i}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,i)=>{e.push(i)}),e}}class hc{constructor(e,t,i,s,a,c,h,f,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new hc(e,t,Zl.emptySet(t),c,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class y9{constructor(){this.queries=QC(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,i){const s=qe(t),a=s.queries;s.queries=QC(),a.forEach((c,h)=>{for(const f of h.ya)f.onError(i)})})(this,new Oe(de.ABORTED,"Firestore shutting down"))}}function QC(){return new $a(n=>T1(n),pp)}async function v9(n,e){const t=qe(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.wa()&&e.Sa()&&(i=2):(a=new _9,i=e.Sa()?0:1);try{switch(i){case 0:a.pa=await t.onListen(s,!0);break;case 1:a.pa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const h=WE(c,`Initialization of query '${Hl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&XE(t)}async function E9(n,e){const t=qe(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const c=a.ya.indexOf(e);c>=0&&(a.ya.splice(c,1),a.ya.length===0?s=e.Sa()?0:1:!a.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function T9(n,e){const t=qe(n);let i=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const h of c.ya)h.va(s)&&(i=!0);c.pa=s}}i&&XE(t)}function b9(n,e,t){const i=qe(n),s=i.queries.get(e);if(s)for(const a of s.ya)a.onError(t);i.queries.delete(e)}function XE(n){n.ba.forEach(e=>{e.next()})}var iv,YC;(YC=iv||(iv={})).Ca="default",YC.Cache="cache";class w9{constructor(e,t,i){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=i||{}}va(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new hc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const i=t!=="Offline";return(!this.options.La||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==iv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.key=e}}class iN{constructor(e){this.key=e}}class S9{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=ct(),this.mutatedKeys=ct(),this.Ha=b1(e),this.Ja=new Zl(this.Ha)}get Ya(){return this.Ga}Za(e,t){const i=t?t.Xa:new KC,s=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,v)=>{const T=s.get(_),A=gp(this.query,v)?v:null,S=!!T&&this.mutatedKeys.has(T.key),P=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;T&&A?T.data.isEqual(A.data)?S!==P&&(i.track({type:3,doc:A}),D=!0):this.eu(T,A)||(i.track({type:2,doc:A}),D=!0,(f&&this.Ha(A,f)>0||p&&this.Ha(A,p)<0)&&(h=!0)):!T&&A?(i.track({type:0,doc:A}),D=!0):T&&!A&&(i.track({type:1,doc:T}),D=!0,(f||p)&&(h=!0)),D&&(A?(c=c.add(A),a=P?a.add(_):a.delete(_)):(c=c.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ja:c,Xa:i,Cs:h,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const c=e.Xa.ga();c.sort((_,v)=>function(A,S){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Vt:D})}};return P(A)-P(S)}(_.type,v.type)||this.Ha(_.doc,v.doc)),this.tu(i),s=s!=null&&s;const h=t&&!s?this.nu():[],f=this.ja.size===0&&this.current&&!s?1:0,p=f!==this.za;return this.za=f,c.length!==0||p?{snapshot:new hc(this.query,e.Ja,a,c,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ru:h}:{ru:h}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new KC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=ct(),this.Ja.forEach(i=>{this.iu(i.key)&&(this.ja=this.ja.add(i.key))});const t=[];return e.forEach(i=>{this.ja.has(i)||t.push(new iN(i))}),this.ja.forEach(i=>{e.has(i)||t.push(new nN(i))}),t}su(e){this.Ga=e.$s,this.ja=ct();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return hc.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const JE="SyncEngine";class C9{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class A9{constructor(e){this.key=e,this._u=!1}}class R9{constructor(e,t,i,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.au={},this.uu=new $a(h=>T1(h),pp),this.cu=new Map,this.lu=new Set,this.hu=new Yt(Pe.comparator),this.Pu=new Map,this.Tu=new FE,this.Iu={},this.Eu=new Map,this.du=uc.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function I9(n,e,t=!0){const i=cN(n);let s;const a=i.uu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.ou()):s=await rN(i,e,t,!0),s}async function x9(n,e){const t=cN(n);await rN(t,e,!0,!1)}async function rN(n,e,t,i){const s=await $B(n.localStore,Br(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let h;return i&&(h=await N9(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&W1(n.remoteStore,s),h}async function N9(n,e,t,i,s){n.Ru=(v,T,A)=>async function(P,D,F,z){let G=D.view.Za(F);G.Cs&&(G=await FC(P.localStore,D.query,!1).then(({documents:k})=>D.view.Za(k,G)));const re=z&&z.targetChanges.get(D.targetId),ie=z&&z.targetMismatches.get(D.targetId)!=null,ye=D.view.applyChanges(G,P.isPrimaryClient,re,ie);return XC(P,D.targetId,ye.ru),ye.snapshot}(n,v,T,A);const a=await FC(n.localStore,e,!0),c=new S9(e,a.$s),h=c.Za(a.documents),f=$h.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=c.applyChanges(h,n.isPrimaryClient,f);XC(n,t,p.ru);const _=new C9(e,t,c);return n.uu.set(e,_),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),p.snapshot}async function k9(n,e,t){const i=qe(n),s=i.uu.get(e),a=i.cu.get(s.targetId);if(a.length>1)return i.cu.set(s.targetId,a.filter(c=>!pp(c,e))),void i.uu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await tv(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&GE(i.remoteStore,s.targetId),rv(i,s.targetId)}).catch(bc)):(rv(i,s.targetId),await tv(i.localStore,s.targetId,!0))}async function O9(n,e){const t=qe(n),i=t.uu.get(e),s=t.cu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),GE(t.remoteStore,i.targetId))}async function D9(n,e,t){const i=B9(n);try{const s=await function(c,h){const f=qe(c),p=Tn.now(),_=h.reduce((A,S)=>A.add(S.key),ct());let v,T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let S=Ms(),P=ct();return f.Bs.getEntries(A,_).next(D=>{S=D,S.forEach((F,z)=>{z.isValidDocument()||(P=P.add(F))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,S)).next(D=>{v=D;const F=[];for(const z of h){const G=$j(z,v.get(z.key).overlayedDocument);G!=null&&F.push(new Ka(z.key,G,d1(G.value.mapValue),As.exists(!0)))}return f.mutationQueue.addMutationBatch(A,p,F,h)}).next(D=>{T=D;const F=D.applyToLocalDocumentSet(v,P);return f.documentOverlayCache.saveOverlays(A,D.batchId,F)})}).then(()=>({batchId:T.batchId,changes:S1(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(c,h,f){let p=c.Iu[c.currentUser.toKey()];p||(p=new Yt(Je)),p=p.insert(h,f),c.Iu[c.currentUser.toKey()]=p}(i,s.batchId,t),await Qh(i,s.changes),await bp(i.remoteStore)}catch(s){const a=WE(s,"Failed to persist write");t.reject(a)}}async function sN(n,e){const t=qe(n);try{const i=await qB(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.Pu.get(a);c&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c._u=!0:s.modifiedDocuments.size>0?wt(c._u,14607):s.removedDocuments.size>0&&(wt(c._u,42227),c._u=!1))}),await Qh(t,i,e)}catch(i){await bc(i)}}function WC(n,e,t){const i=qe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.uu.forEach((a,c)=>{const h=c.view.Da(e);h.snapshot&&s.push(h.snapshot)}),function(c,h){const f=qe(c);f.onlineState=h;let p=!1;f.queries.forEach((_,v)=>{for(const T of v.ya)T.Da(h)&&(p=!0)}),p&&XE(f)}(i.eventManager,e),s.length&&i.au.j_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function M9(n,e,t){const i=qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Pu.get(e),a=s&&s.key;if(a){let c=new Yt(Pe.comparator);c=c.insert(a,$n.newNoDocument(a,ze.min()));const h=ct().add(a),f=new vp(ze.min(),new Map,new Yt(Je),c,h);await sN(i,f),i.hu=i.hu.remove(a),i.Pu.delete(e),ZE(i)}else await tv(i.localStore,e,!1).then(()=>rv(i,e,t)).catch(bc)}async function P9(n,e){const t=qe(n),i=e.batch.batchId;try{const s=await zB(t.localStore,e);aN(t,i,null),oN(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Qh(t,s)}catch(s){await bc(s)}}async function L9(n,e,t){const i=qe(n);try{const s=await function(c,h){const f=qe(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return f.mutationQueue.lookupMutationBatch(p,h).next(v=>(wt(v!==null,37113),_=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>f.localDocuments.getDocuments(p,_))})}(i.localStore,e);aN(i,e,t),oN(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Qh(i,s)}catch(s){await bc(s)}}function oN(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function aN(n,e,t){const i=qe(n);let s=i.Iu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.Iu[i.currentUser.toKey()]=s}}function rv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.cu.get(e))n.uu.delete(i),t&&n.au.Vu(i,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(i=>{n.Tu.containsKey(i)||lN(n,i)})}function lN(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(GE(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),ZE(n))}function XC(n,e,t){for(const i of t)i instanceof nN?(n.Tu.addReference(i.key,e),U9(n,i)):i instanceof iN?(xe(JE,"Document no longer in limbo: "+i.key),n.Tu.removeReference(i.key,e),n.Tu.containsKey(i.key)||lN(n,i.key)):je(19791,{mu:i})}function U9(n,e){const t=e.key,i=t.path.canonicalString();n.hu.get(t)||n.lu.has(i)||(xe(JE,"New document in limbo: "+t),n.lu.add(i),ZE(n))}function ZE(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new Pe(zt.fromString(e)),i=n.du.next();n.Pu.set(i,new A9(t)),n.hu=n.hu.insert(t,i),W1(n.remoteStore,new To(Br(v1(t.path)),i,"TargetPurposeLimboResolution",dp.le))}}async function Qh(n,e,t){const i=qe(n),s=[],a=[],c=[];i.uu.isEmpty()||(i.uu.forEach((h,f)=>{c.push(i.Ru(f,e,t).then(p=>{var _;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){s.push(p);const v=qE.Rs(f.targetId,p);a.push(v)}}))}),await Promise.all(c),i.au.j_(s),await async function(f,p){const _=qe(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>he.forEach(p,T=>he.forEach(T.ds,A=>_.persistence.referenceDelegate.addReference(v,T.targetId,A)).next(()=>he.forEach(T.As,A=>_.persistence.referenceDelegate.removeReference(v,T.targetId,A)))))}catch(v){if(!wc(v))throw v;xe(HE,"Failed to update sequence numbers: "+v)}for(const v of p){const T=v.targetId;if(!v.fromCache){const A=_.xs.get(T),S=A.snapshotVersion,P=A.withLastLimboFreeSnapshotVersion(S);_.xs=_.xs.insert(T,P)}}}(i.localStore,a))}async function V9(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){xe(JE,"User change. New user:",e.toKey());const i=await $1(t.localStore,e);t.currentUser=e,function(a,c){a.Eu.forEach(h=>{h.forEach(f=>{f.reject(new Oe(de.CANCELLED,c))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Qh(t,i.ks)}}function j9(n,e){const t=qe(n),i=t.Pu.get(e);if(i&&i._u)return ct().add(i.key);{let s=ct();const a=t.cu.get(e);if(!a)return s;for(const c of a){const h=t.uu.get(c);s=s.unionWith(h.view.Ya)}return s}}function cN(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M9.bind(null,e),e.au.j_=T9.bind(null,e.eventManager),e.au.Vu=b9.bind(null,e.eventManager),e}function B9(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L9.bind(null,e),e}class Om{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ep(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return FB(this.persistence,new VB,e.initialUser,this.serializer)}yu(e){return new G1(zE.fi,this.serializer)}pu(e){return new QB}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Om.provider={build:()=>new Om};class F9 extends Om{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){wt(this.persistence.referenceDelegate instanceof Nm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new wB(i,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new G1(i=>Nm.fi(i,t),this.serializer)}}class sv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>WC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=V9.bind(null,this.syncEngine),await g9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y9}()}createDatastore(e){const t=Ep(e.databaseInfo.databaseId),i=function(a){return new ZB(a)}(e.databaseInfo);return function(a,c,h,f){return new i9(a,c,h,f)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,a,c,h){return new s9(i,s,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>WC(this.syncEngine,t,0),function(){return HC.C()?new HC:new YB}())}createSyncEngine(e,t){return function(s,a,c,h,f,p,_){const v=new R9(s,a,c,h,f,p);return _&&(v.Au=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=qe(s);xe(Va,"RemoteStore shutting down."),a.Ta.add(5),await Kh(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sv.provider={build:()=>new sv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="FirestoreClient";class q9{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Gn.UNAUTHENTICATED,this.clientId=n1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{xe(jo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(xe(jo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=WE(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ly(n,e){n.asyncQueue.verifyOperationInProgress(),xe(jo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await $1(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function JC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await H9(n);xe(jo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>$C(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>$C(e.remoteStore,s)),n._onlineComponents=e}async function H9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe(jo,"Using user provided OfflineComponentProvider");try{await ly(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===de.FAILED_PRECONDITION||s.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;oc("Error using user provided cache. Falling back to memory cache: "+t),await ly(n,new Om)}}else xe(jo,"Using default OfflineComponentProvider"),await ly(n,new F9(void 0));return n._offlineComponents}async function uN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe(jo,"Using user provided OnlineComponentProvider"),await JC(n,n._uninitializedComponentsProvider._online)):(xe(jo,"Using default OnlineComponentProvider"),await JC(n,new sv))),n._onlineComponents}function G9(n){return uN(n).then(e=>e.syncEngine)}async function $9(n){const e=await uN(n),t=e.eventManager;return t.onListen=I9.bind(null,e.syncEngine),t.onUnlisten=k9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=x9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=O9.bind(null,e.syncEngine),t}function K9(n,e,t={}){const i=new Ao;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,h,f,p){const _=new z9({next:T=>{_.Cu(),c.enqueueAndForget(()=>E9(a,v)),T.fromCache&&f.source==="server"?p.reject(new Oe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),v=new w9(h,_,{includeMetadataChanges:!0,La:!0});return v9(a,v)}(await $9(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(n,e,t){if(!t)throw new Oe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Q9(n,e,t,i){if(e===!0&&i===!0)throw new Oe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eA(n){if(!Pe.isDocumentKey(n))throw new Oe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tA(n){if(Pe.isDocumentKey(n))throw new Oe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":je(12329,{type:typeof n})}function Dm(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wp(n);throw new Oe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="firestore.googleapis.com",nA=!0;class iA{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fN,this.ssl=nA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:nA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=H1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TB)throw new Oe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hN((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Oe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Oe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Oe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new J6;switch(i.type){case"firstParty":return new nj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Oe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=ZC.get(t);i&&(xe("ComponentProvider","Removing Datastore"),ZC.delete(t),i.terminate())}(this),Promise.resolve()}}function Y9(n,e,t,i={}){var s;n=Dm(n,Sp);const a=Us(e),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(zm(`https://${f}`),qm("Firestore",!0)),c.host!==fN&&c.host!==f&&oc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:a,emulatorOptions:i});if(!xo(p,h)&&(n._setSettings(p),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=Gn.MOCK_USER;else{_=Nv(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Oe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Gn(T)}n._authCredentials=new Z6(new e1(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cc(this.firestore,e,this._query)}}class Ki{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ki(this.firestore,e,this._key)}}class Ro extends Cc{constructor(e,t,i){super(e,t,v1(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ki(this.firestore,null,new Pe(e))}withConverter(e){return new Ro(this.firestore,e,this._path)}}function Mm(n,e,...t){if(n=Dt(n),dN("collection","path",e),n instanceof Sp){const i=zt.fromString(e,...t);return tA(i),new Ro(n,null,i)}{if(!(n instanceof Ki||n instanceof Ro))throw new Oe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(zt.fromString(e,...t));return tA(i),new Ro(n.firestore,null,i)}}function W9(n,e,...t){if(n=Dt(n),arguments.length===1&&(e=n1.newId()),dN("doc","path",e),n instanceof Sp){const i=zt.fromString(e,...t);return eA(i),new Ki(n,null,new Pe(i))}{if(!(n instanceof Ki||n instanceof Ro))throw new Oe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(zt.fromString(e,...t));return eA(i),new Ki(n.firestore,n instanceof Ro?n.converter:null,new Pe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="AsyncQueue";class sA{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Q1(this,"async_queue_retry"),this.ec=()=>{const i=ay();i&&xe(rA,"Visibility state changed to "+i.visibilityState),this.C_.p_()},this.tc=e;const t=ay();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=ay();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Ao;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!wc(e))throw e;xe(rA,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(i=>{throw this.Ju=i,this.Yu=!1,Ds("INTERNAL UNHANDLED ERROR: ",oA(i)),i}).then(i=>(this.Yu=!1,i))));return this.tc=t,t}enqueueAfterDelay(e,t,i){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const s=YE.createAndSchedule(this,e,t,i,a=>this.oc(a));return this.Hu.push(s),s}nc(){this.Ju&&je(47125,{_c:oA(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function oA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class e0 extends Sp{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new sA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sA(e),this._firestoreClient=void 0,await e}}}function X9(n,e){const t=Mh(),i=wm,s=Bo(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=xv("firestore");a&&Y9(s,...a)}return s}function mN(n){if(n._terminated)throw new Oe(de.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||J9(n),n._firestoreClient}function J9(n){var e,t,i;const s=n._freezeSettings(),a=function(h,f,p,_){return new _j(h,f,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,hN(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new q9(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dc(Fn.fromBase64String(e))}catch(t){throw new Oe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dc(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Oe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=/^__.*__$/;class eF{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gh(e,this.data,t,this.fieldTransforms)}}function gN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{hc:n})}}class r0{constructor(e,t,i,s,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new r0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:i,Ec:!1});return s.dc(e),s}Ac(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:i,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Pm(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(gN(this.hc)&&Z9.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class tF{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ep(e)}gc(e,t,i,s=!1){return new r0({hc:e,methodName:t,fc:i,path:Vn.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _N(n){const e=n._freezeSettings(),t=Ep(n._databaseId);return new tF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nF(n,e,t,i,s,a={}){const c=n.gc(a.merge||a.mergeFields?2:0,e,t,s);EN("Data must be an object, but it was:",c,i);const h=yN(i,c);let f,p;if(a.merge)f=new lr(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const _=[];for(const v of a.mergeFields){const T=rF(e,v,t);if(!c.contains(T))throw new Oe(de.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);oF(_,T)||_.push(T)}f=new lr(_),p=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=c.fieldTransforms;return new eF(new Gi(h),f,p)}function iF(n,e,t,i=!1){return s0(t,n.gc(i?4:3,e))}function s0(n,e){if(vN(n=Dt(n)))return EN("Unsupported field value:",e,n),yN(n,e);if(n instanceof pN)return function(i,s){if(!gN(s.hc))throw s.Vc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(i,s){const a=[];let c=0;for(const h of i){let f=s0(h,s.Rc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}}(n,e)}return function(i,s){if((i=Dt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Bj(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Tn.fromDate(i);return{timestampValue:xm(s.serializer,a)}}if(i instanceof Tn){const a=new Tn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xm(s.serializer,a)}}if(i instanceof n0)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof dc)return{bytesValue:U1(s.serializer,i._byteString)};if(i instanceof Ki){const a=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw s.Vc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:BE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof i0)return function(c,h){return{mapValue:{fields:{[u1]:{stringValue:h1},[Sm]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw h.Vc("VectorValues must only contain numeric values.");return UE(h.serializer,p)})}}}}}}(i,s);throw s.Vc(`Unsupported field value: ${wp(i)}`)}(n,e)}function yN(n,e){const t={};return r1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ga(n,(i,s)=>{const a=s0(s,e.Ic(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function vN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tn||n instanceof n0||n instanceof dc||n instanceof Ki||n instanceof pN||n instanceof i0)}function EN(n,e,t){if(!vN(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=wp(t);throw i==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+i)}}function rF(n,e,t){if((e=Dt(e))instanceof t0)return e._internalPath;if(typeof e=="string")return TN(n,e);throw Pm("Field path arguments must be of type string or ",n,!1,void 0,t)}const sF=new RegExp("[~\\*/\\[\\]]");function TN(n,e,t){if(e.search(sF)>=0)throw Pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new t0(...e.split("."))._internalPath}catch{throw Pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pm(n,e,t,i,s){const a=i&&!i.isEmpty(),c=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${i}`),c&&(f+=` in document ${s}`),f+=")"),new Oe(de.INVALID_ARGUMENT,h+n+f)}function oF(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(o0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aF extends bN{data(){return super.data()}}function o0(n,e){return typeof e=="string"?TN(n,e):e instanceof t0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Oe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}class cF extends a0{}function ov(n,e,...t){let i=[];e instanceof a0&&i.push(e),i=i.concat(t),function(a){const c=a.filter(f=>f instanceof l0).length,h=a.filter(f=>f instanceof Cp).length;if(c>1||c>0&&h>0)throw new Oe(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Cp extends cF{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Cp(e,t,i)}_apply(e){const t=this._parse(e);return wN(e._query,t),new Cc(e.firestore,e.converter,Yy(e._query,t))}_parse(e){const t=_N(e.firestore);return function(a,c,h,f,p,_,v){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Oe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){lA(v,_);const S=[];for(const P of v)S.push(aA(f,a,P));T={arrayValue:{values:S}}}else T=aA(f,a,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||lA(v,_),T=iF(h,c,v,_==="in"||_==="not-in");return mn.create(p,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function av(n,e,t){const i=e,s=o0("where",n);return Cp._create(s,i,t)}class l0 extends a0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new l0(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let c=s;const h=a.getFlattenedFilters();for(const f of h)wN(c,f),c=Yy(c,f)}(e._query,t),new Cc(e.firestore,e.converter,Yy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function aA(n,e,t){if(typeof(t=Dt(t))=="string"){if(t==="")throw new Oe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E1(e)&&t.indexOf("/")!==-1)throw new Oe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(zt.fromString(t));if(!Pe.isDocumentKey(i))throw new Oe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bC(n,new Pe(i))}if(t instanceof Ki)return bC(n,t._key);throw new Oe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wp(t)}.`)}function lA(n,e){if(!Array.isArray(n)||n.length===0)throw new Oe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wN(n,e){const t=function(s,a){for(const c of s)for(const h of c.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Oe(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Oe(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uF{convertValue(e,t="none"){switch(Uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ga(e,(s,a)=>{i[s]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,s;const a=(s=(i=(t=e.fields)===null||t===void 0?void 0:t[Sm].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(c=>an(c.doubleValue));return new i0(a)}convertGeoPoint(e){return new n0(an(e.latitude),an(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(bh(e));default:return null}}convertTimestamp(e){const t=Po(e);return new Tn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=zt.fromString(e);wt(q1(i),9688,{name:e});const s=new wh(i.get(1),i.get(3)),a=new Pe(i.popFirst(5));return s.isEqual(t)||Ds(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dF extends bN{constructor(e,t,i,s,a,c){super(e,t,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(o0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Gf extends dF{data(e={}){return super.data(e)}}class fF{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new xf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Gf(this._firestore,this._userDataWriter,i.key,i,new xf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(h=>{const f=new Gf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new xf(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new Gf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new xf(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:mF(h.type),doc:f,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:n})}}class pF extends uF{constructor(e){super(),this.firestore=e}convertBytes(e){return new dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ki(this.firestore,null,t)}}function lv(n){n=Dm(n,Cc);const e=Dm(n.firestore,e0),t=mN(e),i=new pF(e);return lF(n._query),K9(t,n._query).then(s=>new fF(e,i,n,s))}function gF(n,e){const t=Dm(n.firestore,e0),i=W9(n),s=hF(n.converter,e);return _F(t,[nF(_N(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,As.exists(!1))]).then(()=>i)}function _F(n,e){return function(i,s){const a=new Ao;return i.asyncQueue.enqueueAndForget(async()=>D9(await G9(i),s,a)),a.promise}(mN(n),e)}(function(e,t=!0){(function(s){Tc=s})(Fo),Qi(new xi("firestore",(i,{instanceIdentifier:s,options:a})=>{const c=i.getProvider("app").getImmediate(),h=new e0(new ej(i.getProvider("auth-internal")),new ij(c,i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Oe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wh(p.options.projectId,_)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Yn(uC,hC,e),Yn(uC,hC,"esm2017")})();let SN=null;const yF={apiKey:"AIzaSyAJPSCYXRziedHYjHQVky6cE1E_WRdFZsw",authDomain:"script-39a43.firebaseapp.com",projectId:"script-39a43",storageBucket:"script-39a43.firebasestorage.app",messagingSenderId:"29280693831",appId:"1:29280693831:web:3f8184059b57e783c1cb62",measurementId:"G-DXK7GQWZQF"},CN=[];let AN=null,cv=null,RN=null;const uv=n=>{AN?n(cv):CN.push(n)};(async()=>{AN=await IR(yF),cv=X9(),RN=W6();for(const n of CN)n(cv)})();const hv=()=>{if(!window.usuarioLogado)return;const n=document.getElementById("chatNotification");if(!n){console.error("Elemento chatNotification não encontrado!");return}cp(Ge($e(),"chats"),e=>{let t=0;e.forEach(i=>{i.forEach(s=>{const a=s.val();a.remetente!==SN.uid&&a.lida===!1&&t++})}),t>0?(n.textContent=t>99?"99+":String(t),n.style.display="inline"):n.style.display="none"})};function vF(n){const e=new Date,t=e-n,i=24*60*60*1e3,s=60*1e3,a=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],c=["Segunda","Terça","Quarta","Quinta","Sexta","Sábado","Domingo"];return t<s?"Agora":t<i&&n.getDate()===e.getDate()?"Hoje":t<i*2&&n.getDate()===e.getDate()-1?"Ontem":t<7*24*60*60*1e3?c[n.getDay()]:`${n.getDate()} de ${a[n.getMonth()]} de ${n.getFullYear()}`}function dv(n){return`${n.getHours()}:${n.getMinutes().toString().padStart(2,"0")}`}const fv=n=>{SN=n},Lr=n=>`https://lh3.googleusercontent.com/u/0/d/${n}=w1366-h607-iv1?auditContext=forDisplay`;function IN(n,e){return function(){return n.apply(e,arguments)}}const{toString:EF}=Object.prototype,{getPrototypeOf:c0}=Object,{iterator:Ap,toStringTag:xN}=Symbol,Rp=(n=>e=>{const t=EF.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),fr=n=>(n=n.toLowerCase(),e=>Rp(e)===n),Ip=n=>e=>typeof e===n,{isArray:Ac}=Array,Rh=Ip("undefined");function TF(n){return n!==null&&!Rh(n)&&n.constructor!==null&&!Rh(n.constructor)&&gi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const NN=fr("ArrayBuffer");function bF(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&NN(n.buffer),e}const wF=Ip("string"),gi=Ip("function"),kN=Ip("number"),xp=n=>n!==null&&typeof n=="object",SF=n=>n===!0||n===!1,$f=n=>{if(Rp(n)!=="object")return!1;const e=c0(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(xN in n)&&!(Ap in n)},CF=fr("Date"),AF=fr("File"),RF=fr("Blob"),IF=fr("FileList"),xF=n=>xp(n)&&gi(n.pipe),NF=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||gi(n.append)&&((e=Rp(n))==="formdata"||e==="object"&&gi(n.toString)&&n.toString()==="[object FormData]"))},kF=fr("URLSearchParams"),[OF,DF,MF,PF]=["ReadableStream","Request","Response","Headers"].map(fr),LF=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),Ac(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),c=a.length;let h;for(i=0;i<c;i++)h=a[i],e.call(null,n[h],h,n)}}function ON(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const Ca=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DN=n=>!Rh(n)&&n!==Ca;function mv(){const{caseless:n}=DN(this)&&this||{},e={},t=(i,s)=>{const a=n&&ON(e,s)||s;$f(e[a])&&$f(i)?e[a]=mv(e[a],i):$f(i)?e[a]=mv({},i):Ac(i)?e[a]=i.slice():e[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Yh(arguments[i],t);return e}const UF=(n,e,t,{allOwnKeys:i}={})=>(Yh(e,(s,a)=>{t&&gi(s)?n[a]=IN(s,t):n[a]=s},{allOwnKeys:i}),n),VF=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),jF=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},BF=(n,e,t,i)=>{let s,a,c;const h={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)c=s[a],(!i||i(c,n,e))&&!h[c]&&(e[c]=n[c],h[c]=!0);n=t!==!1&&c0(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},FF=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},zF=n=>{if(!n)return null;if(Ac(n))return n;let e=n.length;if(!kN(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},qF=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&c0(Uint8Array)),HF=(n,e)=>{const i=(n&&n[Ap]).call(n);let s;for(;(s=i.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},GF=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},$F=fr("HTMLFormElement"),KF=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),cA=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),QF=fr("RegExp"),MN=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Yh(t,(s,a)=>{let c;(c=e(s,a,n))!==!1&&(i[a]=c||s)}),Object.defineProperties(n,i)},YF=n=>{MN(n,(e,t)=>{if(gi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(gi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},WF=(n,e)=>{const t={},i=s=>{s.forEach(a=>{t[a]=!0})};return Ac(n)?i(n):i(String(n).split(e)),t},XF=()=>{},JF=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function ZF(n){return!!(n&&gi(n.append)&&n[xN]==="FormData"&&n[Ap])}const e5=n=>{const e=new Array(10),t=(i,s)=>{if(xp(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const a=Ac(i)?[]:{};return Yh(i,(c,h)=>{const f=t(c,s+1);!Rh(f)&&(a[h]=f)}),e[s]=void 0,a}}return i};return t(n,0)},t5=fr("AsyncFunction"),n5=n=>n&&(xp(n)||gi(n))&&gi(n.then)&&gi(n.catch),PN=((n,e)=>n?setImmediate:e?((t,i)=>(Ca.addEventListener("message",({source:s,data:a})=>{s===Ca&&a===t&&i.length&&i.shift()()},!1),s=>{i.push(s),Ca.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",gi(Ca.postMessage)),i5=typeof queueMicrotask<"u"?queueMicrotask.bind(Ca):typeof process<"u"&&process.nextTick||PN,r5=n=>n!=null&&gi(n[Ap]),te={isArray:Ac,isArrayBuffer:NN,isBuffer:TF,isFormData:NF,isArrayBufferView:bF,isString:wF,isNumber:kN,isBoolean:SF,isObject:xp,isPlainObject:$f,isReadableStream:OF,isRequest:DF,isResponse:MF,isHeaders:PF,isUndefined:Rh,isDate:CF,isFile:AF,isBlob:RF,isRegExp:QF,isFunction:gi,isStream:xF,isURLSearchParams:kF,isTypedArray:qF,isFileList:IF,forEach:Yh,merge:mv,extend:UF,trim:LF,stripBOM:VF,inherits:jF,toFlatObject:BF,kindOf:Rp,kindOfTest:fr,endsWith:FF,toArray:zF,forEachEntry:HF,matchAll:GF,isHTMLForm:$F,hasOwnProperty:cA,hasOwnProp:cA,reduceDescriptors:MN,freezeMethods:YF,toObjectSet:WF,toCamelCase:KF,noop:XF,toFiniteNumber:JF,findKey:ON,global:Ca,isContextDefined:DN,isSpecCompliantForm:ZF,toJSONObject:e5,isAsyncFn:t5,isThenable:n5,setImmediate:PN,asap:i5,isIterable:r5};function Qe(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}te.inherits(Qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.status}}});const LN=Qe.prototype,UN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{UN[n]={value:n}});Object.defineProperties(Qe,UN);Object.defineProperty(LN,"isAxiosError",{value:!0});Qe.from=(n,e,t,i,s,a)=>{const c=Object.create(LN);return te.toFlatObject(n,c,function(f){return f!==Error.prototype},h=>h!=="isAxiosError"),Qe.call(c,n.message,e,t,i,s),c.cause=n,c.name=n.name,a&&Object.assign(c,a),c};const s5=null;function pv(n){return te.isPlainObject(n)||te.isArray(n)}function VN(n){return te.endsWith(n,"[]")?n.slice(0,-2):n}function uA(n,e,t){return n?n.concat(e).map(function(s,a){return s=VN(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function o5(n){return te.isArray(n)&&!n.some(pv)}const a5=te.toFlatObject(te,{},null,function(e){return/^is[A-Z]/.test(e)});function Np(n,e,t){if(!te.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=te.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,D){return!te.isUndefined(D[P])});const i=t.metaTokens,s=t.visitor||_,a=t.dots,c=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(e);if(!te.isFunction(s))throw new TypeError("visitor must be a function");function p(S){if(S===null)return"";if(te.isDate(S))return S.toISOString();if(te.isBoolean(S))return S.toString();if(!f&&te.isBlob(S))throw new Qe("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(S)||te.isTypedArray(S)?f&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function _(S,P,D){let F=S;if(S&&!D&&typeof S=="object"){if(te.endsWith(P,"{}"))P=i?P:P.slice(0,-2),S=JSON.stringify(S);else if(te.isArray(S)&&o5(S)||(te.isFileList(S)||te.endsWith(P,"[]"))&&(F=te.toArray(S)))return P=VN(P),F.forEach(function(G,re){!(te.isUndefined(G)||G===null)&&e.append(c===!0?uA([P],re,a):c===null?P:P+"[]",p(G))}),!1}return pv(S)?!0:(e.append(uA(D,P,a),p(S)),!1)}const v=[],T=Object.assign(a5,{defaultVisitor:_,convertValue:p,isVisitable:pv});function A(S,P){if(!te.isUndefined(S)){if(v.indexOf(S)!==-1)throw Error("Circular reference detected in "+P.join("."));v.push(S),te.forEach(S,function(F,z){(!(te.isUndefined(F)||F===null)&&s.call(e,F,te.isString(z)?z.trim():z,P,T))===!0&&A(F,P?P.concat(z):[z])}),v.pop()}}if(!te.isObject(n))throw new TypeError("data must be an object");return A(n),e}function hA(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function u0(n,e){this._pairs=[],n&&Np(n,this,e)}const jN=u0.prototype;jN.append=function(e,t){this._pairs.push([e,t])};jN.toString=function(e){const t=e?function(i){return e.call(this,i,hA)}:hA;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function l5(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function BN(n,e,t){if(!e)return n;const i=t&&t.encode||l5;te.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=te.isURLSearchParams(e)?e.toString():new u0(e,t).toString(i),a){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class dA{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){te.forEach(this.handlers,function(i){i!==null&&e(i)})}}const FN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},c5=typeof URLSearchParams<"u"?URLSearchParams:u0,u5=typeof FormData<"u"?FormData:null,h5=typeof Blob<"u"?Blob:null,d5={isBrowser:!0,classes:{URLSearchParams:c5,FormData:u5,Blob:h5},protocols:["http","https","file","blob","url","data"]},h0=typeof window<"u"&&typeof document<"u",gv=typeof navigator=="object"&&navigator||void 0,f5=h0&&(!gv||["ReactNative","NativeScript","NS"].indexOf(gv.product)<0),m5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",p5=h0&&window.location.href||"http://localhost",g5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:h0,hasStandardBrowserEnv:f5,hasStandardBrowserWebWorkerEnv:m5,navigator:gv,origin:p5},Symbol.toStringTag,{value:"Module"})),Kn={...g5,...d5};function _5(n,e){return Np(n,new Kn.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,a){return Kn.isNode&&te.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function y5(n){return te.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function v5(n){const e={},t=Object.keys(n);let i;const s=t.length;let a;for(i=0;i<s;i++)a=t[i],e[a]=n[a];return e}function zN(n){function e(t,i,s,a){let c=t[a++];if(c==="__proto__")return!0;const h=Number.isFinite(+c),f=a>=t.length;return c=!c&&te.isArray(s)?s.length:c,f?(te.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!h):((!s[c]||!te.isObject(s[c]))&&(s[c]=[]),e(t,i,s[c],a)&&te.isArray(s[c])&&(s[c]=v5(s[c])),!h)}if(te.isFormData(n)&&te.isFunction(n.entries)){const t={};return te.forEachEntry(n,(i,s)=>{e(y5(i),s,t,0)}),t}return null}function E5(n,e,t){if(te.isString(n))try{return(e||JSON.parse)(n),te.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Wh={transitional:FN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,a=te.isObject(e);if(a&&te.isHTMLForm(e)&&(e=new FormData(e)),te.isFormData(e))return s?JSON.stringify(zN(e)):e;if(te.isArrayBuffer(e)||te.isBuffer(e)||te.isStream(e)||te.isFile(e)||te.isBlob(e)||te.isReadableStream(e))return e;if(te.isArrayBufferView(e))return e.buffer;if(te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return _5(e,this.formSerializer).toString();if((h=te.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Np(h?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),E5(e)):e}],transformResponse:[function(e){const t=this.transitional||Wh.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(te.isResponse(e)||te.isReadableStream(e))return e;if(e&&te.isString(e)&&(i&&!this.responseType||s)){const c=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(h){if(c)throw h.name==="SyntaxError"?Qe.from(h,Qe.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kn.classes.FormData,Blob:Kn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],n=>{Wh.headers[n]={}});const T5=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b5=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(c){s=c.indexOf(":"),t=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!t||e[t]&&T5[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},fA=Symbol("internals");function Vu(n){return n&&String(n).trim().toLowerCase()}function Kf(n){return n===!1||n==null?n:te.isArray(n)?n.map(Kf):String(n)}function w5(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const S5=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function cy(n,e,t,i,s){if(te.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!te.isString(e)){if(te.isString(i))return e.indexOf(i)!==-1;if(te.isRegExp(i))return i.test(e)}}function C5(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function A5(n,e){const t=te.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,a,c){return this[i].call(this,e,s,a,c)},configurable:!0})})}let _i=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function a(h,f,p){const _=Vu(f);if(!_)throw new Error("header name must be a non-empty string");const v=te.findKey(s,_);(!v||s[v]===void 0||p===!0||p===void 0&&s[v]!==!1)&&(s[v||f]=Kf(h))}const c=(h,f)=>te.forEach(h,(p,_)=>a(p,_,f));if(te.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(te.isString(e)&&(e=e.trim())&&!S5(e))c(b5(e),t);else if(te.isObject(e)&&te.isIterable(e)){let h={},f,p;for(const _ of e){if(!te.isArray(_))throw TypeError("Object iterator must return a key-value pair");h[p=_[0]]=(f=h[p])?te.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}c(h,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=Vu(e),e){const i=te.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return w5(s);if(te.isFunction(t))return t.call(this,s,i);if(te.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Vu(e),e){const i=te.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||cy(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function a(c){if(c=Vu(c),c){const h=te.findKey(i,c);h&&(!t||cy(i,i[h],h,t))&&(delete i[h],s=!0)}}return te.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const a=t[i];(!e||cy(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,i={};return te.forEach(this,(s,a)=>{const c=te.findKey(i,a);if(c){t[c]=Kf(s),delete t[a];return}const h=e?C5(a):String(a).trim();h!==a&&delete t[a],t[h]=Kf(s),i[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return te.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&te.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[fA]=this[fA]={accessors:{}}).accessors,s=this.prototype;function a(c){const h=Vu(c);i[h]||(A5(s,c),i[h]=!0)}return te.isArray(e)?e.forEach(a):a(e),this}};_i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.reduceDescriptors(_i.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});te.freezeMethods(_i);function uy(n,e){const t=this||Wh,i=e||t,s=_i.from(i.headers);let a=i.data;return te.forEach(n,function(h){a=h.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function qN(n){return!!(n&&n.__CANCEL__)}function Rc(n,e,t){Qe.call(this,n??"canceled",Qe.ERR_CANCELED,e,t),this.name="CanceledError"}te.inherits(Rc,Qe,{__CANCEL__:!0});function HN(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Qe("Request failed with status code "+t.status,[Qe.ERR_BAD_REQUEST,Qe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function R5(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function I5(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,a=0,c;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),_=i[a];c||(c=p),t[s]=f,i[s]=p;let v=a,T=0;for(;v!==s;)T+=t[v++],v=v%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),p-c<e)return;const A=_&&p-_;return A?Math.round(T*1e3/A):void 0}}function x5(n,e){let t=0,i=1e3/e,s,a;const c=(p,_=Date.now())=>{t=_,s=null,a&&(clearTimeout(a),a=null),n.apply(null,p)};return[(...p)=>{const _=Date.now(),v=_-t;v>=i?c(p,_):(s=p,a||(a=setTimeout(()=>{a=null,c(s)},i-v)))},()=>s&&c(s)]}const Lm=(n,e,t=3)=>{let i=0;const s=I5(50,250);return x5(a=>{const c=a.loaded,h=a.lengthComputable?a.total:void 0,f=c-i,p=s(f),_=c<=h;i=c;const v={loaded:c,total:h,progress:h?c/h:void 0,bytes:f,rate:p||void 0,estimated:p&&h&&_?(h-c)/p:void 0,event:a,lengthComputable:h!=null,[e?"download":"upload"]:!0};n(v)},t)},mA=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},pA=n=>(...e)=>te.asap(()=>n(...e)),N5=Kn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Kn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Kn.origin),Kn.navigator&&/(msie|trident)/i.test(Kn.navigator.userAgent)):()=>!0,k5=Kn.hasStandardBrowserEnv?{write(n,e,t,i,s,a){const c=[n+"="+encodeURIComponent(e)];te.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),te.isString(i)&&c.push("path="+i),te.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function O5(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function D5(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function GN(n,e,t){let i=!O5(e);return n&&(i||t==!1)?D5(n,e):e}const gA=n=>n instanceof _i?{...n}:n;function ja(n,e){e=e||{};const t={};function i(p,_,v,T){return te.isPlainObject(p)&&te.isPlainObject(_)?te.merge.call({caseless:T},p,_):te.isPlainObject(_)?te.merge({},_):te.isArray(_)?_.slice():_}function s(p,_,v,T){if(te.isUndefined(_)){if(!te.isUndefined(p))return i(void 0,p,v,T)}else return i(p,_,v,T)}function a(p,_){if(!te.isUndefined(_))return i(void 0,_)}function c(p,_){if(te.isUndefined(_)){if(!te.isUndefined(p))return i(void 0,p)}else return i(void 0,_)}function h(p,_,v){if(v in e)return i(p,_);if(v in n)return i(void 0,p)}const f={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h,headers:(p,_,v)=>s(gA(p),gA(_),v,!0)};return te.forEach(Object.keys(Object.assign({},n,e)),function(_){const v=f[_]||s,T=v(n[_],e[_],_);te.isUndefined(T)&&v!==h||(t[_]=T)}),t}const $N=n=>{const e=ja({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:h}=e;e.headers=c=_i.from(c),e.url=BN(GN(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),h&&c.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let f;if(te.isFormData(t)){if(Kn.hasStandardBrowserEnv||Kn.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[p,..._]=f?f.split(";").map(v=>v.trim()).filter(Boolean):[];c.setContentType([p||"multipart/form-data",..._].join("; "))}}if(Kn.hasStandardBrowserEnv&&(i&&te.isFunction(i)&&(i=i(e)),i||i!==!1&&N5(e.url))){const p=s&&a&&k5.read(a);p&&c.set(s,p)}return e},M5=typeof XMLHttpRequest<"u",P5=M5&&function(n){return new Promise(function(t,i){const s=$N(n);let a=s.data;const c=_i.from(s.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:p}=s,_,v,T,A,S;function P(){A&&A(),S&&S(),s.cancelToken&&s.cancelToken.unsubscribe(_),s.signal&&s.signal.removeEventListener("abort",_)}let D=new XMLHttpRequest;D.open(s.method.toUpperCase(),s.url,!0),D.timeout=s.timeout;function F(){if(!D)return;const G=_i.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ie={data:!h||h==="text"||h==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:G,config:n,request:D};HN(function(k){t(k),P()},function(k){i(k),P()},ie),D=null}"onloadend"in D?D.onloadend=F:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(F)},D.onabort=function(){D&&(i(new Qe("Request aborted",Qe.ECONNABORTED,n,D)),D=null)},D.onerror=function(){i(new Qe("Network Error",Qe.ERR_NETWORK,n,D)),D=null},D.ontimeout=function(){let re=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const ie=s.transitional||FN;s.timeoutErrorMessage&&(re=s.timeoutErrorMessage),i(new Qe(re,ie.clarifyTimeoutError?Qe.ETIMEDOUT:Qe.ECONNABORTED,n,D)),D=null},a===void 0&&c.setContentType(null),"setRequestHeader"in D&&te.forEach(c.toJSON(),function(re,ie){D.setRequestHeader(ie,re)}),te.isUndefined(s.withCredentials)||(D.withCredentials=!!s.withCredentials),h&&h!=="json"&&(D.responseType=s.responseType),p&&([T,S]=Lm(p,!0),D.addEventListener("progress",T)),f&&D.upload&&([v,A]=Lm(f),D.upload.addEventListener("progress",v),D.upload.addEventListener("loadend",A)),(s.cancelToken||s.signal)&&(_=G=>{D&&(i(!G||G.type?new Rc(null,n,D):G),D.abort(),D=null)},s.cancelToken&&s.cancelToken.subscribe(_),s.signal&&(s.signal.aborted?_():s.signal.addEventListener("abort",_)));const z=R5(s.url);if(z&&Kn.protocols.indexOf(z)===-1){i(new Qe("Unsupported protocol "+z+":",Qe.ERR_BAD_REQUEST,n));return}D.send(a||null)})},L5=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const a=function(p){if(!s){s=!0,h();const _=p instanceof Error?p:this.reason;i.abort(_ instanceof Qe?_:new Rc(_ instanceof Error?_.message:_))}};let c=e&&setTimeout(()=>{c=null,a(new Qe(`timeout ${e} of ms exceeded`,Qe.ETIMEDOUT))},e);const h=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),n=null)};n.forEach(p=>p.addEventListener("abort",a));const{signal:f}=i;return f.unsubscribe=()=>te.asap(h),f}},U5=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},V5=async function*(n,e){for await(const t of j5(n))yield*U5(t,e)},j5=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},_A=(n,e,t,i)=>{const s=V5(n,e);let a=0,c,h=f=>{c||(c=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:p,value:_}=await s.next();if(p){h(),f.close();return}let v=_.byteLength;if(t){let T=a+=v;t(T)}f.enqueue(new Uint8Array(_))}catch(p){throw h(p),p}},cancel(f){return h(f),s.return()}},{highWaterMark:2})},kp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",KN=kp&&typeof ReadableStream=="function",B5=kp&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),QN=(n,...e)=>{try{return!!n(...e)}catch{return!1}},F5=KN&&QN(()=>{let n=!1;const e=new Request(Kn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),yA=64*1024,_v=KN&&QN(()=>te.isReadableStream(new Response("").body)),Um={stream:_v&&(n=>n.body)};kp&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Um[e]&&(Um[e]=te.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Qe(`Response type '${e}' is not supported`,Qe.ERR_NOT_SUPPORT,i)})})})(new Response);const z5=async n=>{if(n==null)return 0;if(te.isBlob(n))return n.size;if(te.isSpecCompliantForm(n))return(await new Request(Kn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(te.isArrayBufferView(n)||te.isArrayBuffer(n))return n.byteLength;if(te.isURLSearchParams(n)&&(n=n+""),te.isString(n))return(await B5(n)).byteLength},q5=async(n,e)=>{const t=te.toFiniteNumber(n.getContentLength());return t??z5(e)},H5=kp&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:a,timeout:c,onDownloadProgress:h,onUploadProgress:f,responseType:p,headers:_,withCredentials:v="same-origin",fetchOptions:T}=$N(n);p=p?(p+"").toLowerCase():"text";let A=L5([s,a&&a.toAbortSignal()],c),S;const P=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let D;try{if(f&&F5&&t!=="get"&&t!=="head"&&(D=await q5(_,i))!==0){let ie=new Request(e,{method:"POST",body:i,duplex:"half"}),ye;if(te.isFormData(i)&&(ye=ie.headers.get("content-type"))&&_.setContentType(ye),ie.body){const[k,R]=mA(D,Lm(pA(f)));i=_A(ie.body,yA,k,R)}}te.isString(v)||(v=v?"include":"omit");const F="credentials"in Request.prototype;S=new Request(e,{...T,signal:A,method:t.toUpperCase(),headers:_.normalize().toJSON(),body:i,duplex:"half",credentials:F?v:void 0});let z=await fetch(S,T);const G=_v&&(p==="stream"||p==="response");if(_v&&(h||G&&P)){const ie={};["status","statusText","headers"].forEach(I=>{ie[I]=z[I]});const ye=te.toFiniteNumber(z.headers.get("content-length")),[k,R]=h&&mA(ye,Lm(pA(h),!0))||[];z=new Response(_A(z.body,yA,k,()=>{R&&R(),P&&P()}),ie)}p=p||"text";let re=await Um[te.findKey(Um,p)||"text"](z,n);return!G&&P&&P(),await new Promise((ie,ye)=>{HN(ie,ye,{data:re,headers:_i.from(z.headers),status:z.status,statusText:z.statusText,config:n,request:S})})}catch(F){throw P&&P(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new Qe("Network Error",Qe.ERR_NETWORK,n,S),{cause:F.cause||F}):Qe.from(F,F&&F.code,n,S)}}),yv={http:s5,xhr:P5,fetch:H5};te.forEach(yv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const vA=n=>`- ${n}`,G5=n=>te.isFunction(n)||n===null||n===!1,YN={getAdapter:n=>{n=te.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let a=0;a<e;a++){t=n[a];let c;if(i=t,!G5(t)&&(i=yv[(c=String(t)).toLowerCase()],i===void 0))throw new Qe(`Unknown adapter '${c}'`);if(i)break;s[c||"#"+a]=i}if(!i){const a=Object.entries(s).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=e?a.length>1?`since :
`+a.map(vA).join(`
`):" "+vA(a[0]):"as no adapter specified";throw new Qe("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:yv};function hy(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Rc(null,n)}function EA(n){return hy(n),n.headers=_i.from(n.headers),n.data=uy.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),YN.getAdapter(n.adapter||Wh.adapter)(n).then(function(i){return hy(n),i.data=uy.call(n,n.transformResponse,i),i.headers=_i.from(i.headers),i},function(i){return qN(i)||(hy(n),i&&i.response&&(i.response.data=uy.call(n,n.transformResponse,i.response),i.response.headers=_i.from(i.response.headers))),Promise.reject(i)})}const WN="1.10.0",Op={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Op[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const TA={};Op.transitional=function(e,t,i){function s(a,c){return"[Axios v"+WN+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,h)=>{if(e===!1)throw new Qe(s(c," has been removed"+(t?" in "+t:"")),Qe.ERR_DEPRECATED);return t&&!TA[c]&&(TA[c]=!0,console.warn(s(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,c,h):!0}};Op.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function $5(n,e,t){if(typeof n!="object")throw new Qe("options must be an object",Qe.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const a=i[s],c=e[a];if(c){const h=n[a],f=h===void 0||c(h,a,n);if(f!==!0)throw new Qe("option "+a+" must be "+f,Qe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Qe("Unknown option "+a,Qe.ERR_BAD_OPTION)}}const Qf={assertOptions:$5,validators:Op},kr=Qf.validators;let Ia=class{constructor(e){this.defaults=e||{},this.interceptors={request:new dA,response:new dA}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ja(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:a}=t;i!==void 0&&Qf.assertOptions(i,{silentJSONParsing:kr.transitional(kr.boolean),forcedJSONParsing:kr.transitional(kr.boolean),clarifyTimeoutError:kr.transitional(kr.boolean)},!1),s!=null&&(te.isFunction(s)?t.paramsSerializer={serialize:s}:Qf.assertOptions(s,{encode:kr.function,serialize:kr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Qf.assertOptions(t,{baseUrl:kr.spelling("baseURL"),withXsrfToken:kr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=a&&te.merge(a.common,a[t.method]);a&&te.forEach(["delete","get","head","post","put","patch","common"],S=>{delete a[S]}),t.headers=_i.concat(c,a);const h=[];let f=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(t)===!1||(f=f&&P.synchronous,h.unshift(P.fulfilled,P.rejected))});const p=[];this.interceptors.response.forEach(function(P){p.push(P.fulfilled,P.rejected)});let _,v=0,T;if(!f){const S=[EA.bind(this),void 0];for(S.unshift.apply(S,h),S.push.apply(S,p),T=S.length,_=Promise.resolve(t);v<T;)_=_.then(S[v++],S[v++]);return _}T=h.length;let A=t;for(v=0;v<T;){const S=h[v++],P=h[v++];try{A=S(A)}catch(D){P.call(this,D);break}}try{_=EA.call(this,A)}catch(S){return Promise.reject(S)}for(v=0,T=p.length;v<T;)_=_.then(p[v++],p[v++]);return _}getUri(e){e=ja(this.defaults,e);const t=GN(e.baseURL,e.url,e.allowAbsoluteUrls);return BN(t,e.params,e.paramsSerializer)}};te.forEach(["delete","get","head","options"],function(e){Ia.prototype[e]=function(t,i){return this.request(ja(i||{},{method:e,url:t,data:(i||{}).data}))}});te.forEach(["post","put","patch"],function(e){function t(i){return function(a,c,h){return this.request(ja(h||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}Ia.prototype[e]=t(),Ia.prototype[e+"Form"]=t(!0)});let K5=class XN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(h=>{i.subscribe(h),a=h}).then(s);return c.cancel=function(){i.unsubscribe(a)},c},e(function(a,c,h){i.reason||(i.reason=new Rc(a,c,h),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new XN(function(s){e=s}),cancel:e}}};function Q5(n){return function(t){return n.apply(null,t)}}function Y5(n){return te.isObject(n)&&n.isAxiosError===!0}const vv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vv).forEach(([n,e])=>{vv[e]=n});function JN(n){const e=new Ia(n),t=IN(Ia.prototype.request,e);return te.extend(t,Ia.prototype,e,{allOwnKeys:!0}),te.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return JN(ja(n,s))},t}const Wt=JN(Wh);Wt.Axios=Ia;Wt.CanceledError=Rc;Wt.CancelToken=K5;Wt.isCancel=qN;Wt.VERSION=WN;Wt.toFormData=Np;Wt.AxiosError=Qe;Wt.Cancel=Wt.CanceledError;Wt.all=function(e){return Promise.all(e)};Wt.spread=Q5;Wt.isAxiosError=Y5;Wt.mergeConfig=ja;Wt.AxiosHeaders=_i;Wt.formToJSON=n=>zN(te.isHTMLForm(n)?new FormData(n):n);Wt.getAdapter=YN.getAdapter;Wt.HttpStatusCode=vv;Wt.default=Wt;const{Axios:gH,AxiosError:_H,CanceledError:yH,isCancel:vH,CancelToken:EH,VERSION:TH,all:bH,Cancel:wH,isAxiosError:SH,spread:CH,toFormData:AH,AxiosHeaders:RH,HttpStatusCode:IH,formToJSON:xH,getAdapter:NH,mergeConfig:kH}=Wt,W5=n=>Wt.get(n,{withCredentials:!0,headers:{"Content-Type":"application/json"}}),X5=(n,e)=>e instanceof FormData?Wt.post(n,e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}):Wt.post(n,e,{withCredentials:!0,headers:{"Content-Type":"application/json"}}),xa={get:W5,post:X5};class bA{constructor(e){N_(this,"socket");N_(this,"events",{});this.socket=new WebSocket(e),this.register_events()}register_events(){this.socket.addEventListener("open",()=>{console.log("aberto")}),this.socket.addEventListener("message",e=>{const t=JSON.parse(e.data),i=t.event,s=t.response,a=t.id;a in this.events&&(t.error?console.error(`event "${i}" not found`):this.events[a](s),delete this.events[a])}),this.socket.addEventListener("close",()=>{console.log("Conexão fechada")}),this.socket.addEventListener("error",e=>{console.error("Erro no WebSocket:",e)})}async send(e,t){const i=Math.floor(Math.random()*4294967296);this.socket.send(JSON.stringify({event:e,data:t,id:i}));var s;const a=new Promise((c,h)=>{s=c});return this.events[i]=s,a}}const Ev="https://ifai-phwn.onrender.com",dy="https://ifai.eneagonlosamigos.workers.dev",wA="wss://ifai.eneagonlosamigos.workers.dev/ws";navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({server:Ev});const ZN=V.createContext(void 0),J5=({setShow:n,children:e})=>{const[t,i]=V.useState(!0),[s,a]=V.useState(null),[c,h]=V.useState(null),f=V.useRef(null),p=V.useRef(null),_=P=>{f.current=P},v=()=>{xa.get(dy+"/logout").then(P=>{P.data.result&&(fv(void 0),a(void 0),c.socket.close())})},T=()=>{i(window.innerWidth<769)},A=async()=>{const P=s||(await xa.get(dy+"/is_loged")).data.user;if(P){if(!c){const D=new bA(wA);h(D),D.socket.onopen=()=>{n(!0),uv(F=>{p.current=F,Notification.requestPermission().then(z=>{z==="granted"&&X6(RN,{vapidKey:"BMnpFNI__s7Nfy5f9iau1GzD-VG2KsAG_Dz-du_lglQi642tZhK4oHbpH85tAVEWjR-3Q2gtLBCiPvxKfBDN-L8"}).then(G=>{G?xa.post(Ev+"/token",{user_uid:P.uid,token:G}):console.log("Nenhum token disponível.")}).catch(G=>{console.log("Erro ao obter token:",G)})})}),fv(P),a(P)},D.socket.onclose=()=>h(new bA(wA))}}else a(void 0),h(null),n(!0)};V.useEffect(()=>{A()},[s]),V.useEffect(()=>(T(),window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)}),[]);const S={db:p,socket:c,server:Ev,worker_server:dy,mobile:t,usuarioLogado:s,setUsuarioLogado:a,logout:v,setNavigate:_};return E.jsx(ZN.Provider,{value:S,children:e})},oi=()=>{const n=V.useContext(ZN);if(!n)throw new Error("useGlobalContext must be used within a GlobalProvider");return n};function Z5(){const{usuarioLogado:n}=oi(),e=Ls(),t=hr();return V.useEffect(()=>{n===void 0&&t.pathname!="/login"&&t.pathname!="/registro"?e("/login"):n&&(t.pathname=="/login"||t.pathname=="/registro")&&e("/")},[n,t]),E.jsx(E.Fragment,{})}const jn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAOVBMVEWzs7P///+vr6/j4+Otra3u7u7Y2Njm5ua3t7f7+/vAwMC6urrU1NTz8/PQ0NDp6enKysrExMTc3NzfYYiMAAAEUUlEQVR4nO2dC4KqMAxFISA/QWH2v9gH4vj8ANo22NvOPSvwWJo0aQtJQgghhBBCCCGEEEIIIYQQQgghX0Uu+P4VOyLF+VxmRd9Eq1mlv3TZkEQpmd5z7uMbybxLH8mayBwlS5/pIhvI04thmtZtTDPyuGA4UkQ0jsuGaX3Kff8yHWTNcJyPEcQcyav2OZbeUwY+HSXZ1LtwClhRqtc8scAh1GGUY/mJ30QfpKL8fOo3koWnmPe1geCYOI6hOX78gN4YQlKUxmwAZwJK/9Jb+I38hKIoSwvtmBTtBceQGoKiDPaCadoGEG6q9xpb4Od+ebsMfYNvgXcYLWQWOYAPouMzOtH7dthEzu6GNfQgNu6CU/vGt8Y6GkOIPYgKs3Di5NtjFSl0DDvYlY1zLvzl6NtkjZXGrzmwazeHJfcjZ1BDMa/rV0CNpmrTME0r3y7LiJpgOvh2WUYpG06AhhpFwx9MQ7VkAdsgjt9QpbD4K4ag85CGNLwDtMynoQGgaxrFfBi/IWinJn5DxZU3aN87fsP102uxGMZf4+c2BzCCMhQ9w8a3yzKKvTZUw4OaIWZbX2Lvl0qr5jfWFhXewlRnc/Q/cKdO3M9gPIMWbBRX3VfAtkm1dn/vwYqnimH0BlYFlesLgvVq9jDE6mQoLrpvYFVQ2tlwAizSqKfDtMbKFonTweBF4Laf1A3RimC9kyZX8A6cKLb0L2DlignF8veCb58FdGMN4q1L1ZnYAQomquEUrTicsb3PtQBcLrySqwUb3yaraG3NIIaZGaVKH/nWzMtrWqzAKiqe0FjZgJ6lubLwJhpT8Bakj7jvIWKV9q84J8UDWOH7iusKHDrMzLglRewwM+OUFNHDzIxL/xs9zFyxT4r4YWbGvrUIufW7hO2hDKydik3sOhqghf0idou3AFLhf2ye04Ce0QnzeBpKHP3F+BUute9fbExu2FzE7K5tYra0wW3NbGByAAW1fbiNQaV4DizKzBh0+ZGba1t8PoQBRpkJg3QRRlX4jFHrNITK/gWzo3xBvTNxxnTtHUxleMO0HxVS5XQhNy6fAssYNn3hoBTtXp0Y0MImt+zsH3z/8I+x3n+qg3hBu+kbkh9p4Z9UaRw3Zg7Qwyh5r3AaIwO8LjMjVaF0FLpsAL97MQ6f5jnorqhyJEmRRv8QdFc0CcZQigzZDgf1LxyKIfH7ESzJq9MOh/QfqMt2SPw8suOzWexwF2iRLjsdvzuY0+CVez2bK9Tn9lsxdgos3xq8Z8uy3/tzJuOf2H978J4o+/1mpcixVT6vbkW9zy3hcep9LbC8R39pJ9vfbPJAqfnVljGp7531bMi0go5I6ze0rKOzJSdaFcMedO7TUQZgv4nW1VD/WqE2jvtWe1yz18X1BEcAho4TkYb+oSENaegfGtKQhv6hIQ1p6B8a0pCG/qEhDeM3TPoyw8b9wpug4ypICCGEEEIIIYQQQgghhBBCCPk7/AOT7UbJ5bD1AAAAAABJRU5ErkJggg==",ju=n=>n>1?"s":"";function ek({userPerfilUid:n}){const{socket:e,usuarioLogado:t}=oi(),[i,s]=V.useState([]),a=c=>{const h=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],p=new Date().getTime()-c,_=new Date(c);if(p<60*1e3){const v=Math.floor(p/1e3);return`Há ${String(v)} segundo${ju(v)}`}else if(p<60*60*1e3){const v=Math.floor(p/6e4);return`Há ${String(v)} minuto${ju(v)}`}else if(p<24*60*60*1e3){const v=Math.floor(p/36e5);return`Há ${String(v)} hora${ju(v)}`}else if(p<7*24*60*60*1e3){const v=Math.floor(p/864e5);return`Há ${String(v)} dia${ju(v)}`}else if(p<30*24*60*60*1e3){const v=Math.floor(p/6048e5);return`Há ${String(v)} semana${ju(v)}`}return`${_.getDay()+1} de ${h[_.getMonth()]} de ${_.getFullYear()}`};return V.useEffect(()=>{if(!t||n=="")return;async function c(){console.time("ai");const h=await e.send("/feed",{});console.timeEnd("ai"),s(h.results.map(f=>{const p=f;return{...p,data:a(p.timestamp),image:Lr(p.image),logo:p.logo||jn,user:p.name}}))}c()},[t,n]),E.jsx("div",{id:"feed",children:i.map((c,h)=>E.jsxs("div",{className:"post",children:[E.jsxs("div",{className:"header-post",children:[E.jsx(Ft,{to:"/perfil?id="+c.userUid,children:E.jsx("img",{className:"logo",src:c.logo})}),E.jsx(Ft,{to:"/perfil?id="+c.userUid,className:"user",children:c.user})]}),E.jsx("img",{className:"image",src:c.image}),E.jsx("div",{className:"footer-post",children:E.jsxs("div",{className:"post-info",children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-heart post-info-icon like",viewBox:"0 0 16 16",children:E.jsx("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"})}),E.jsx("div",{className:"post-info-value",children:"0"})]})}),E.jsx("div",{className:"text",children:c.description}),E.jsx("div",{className:"data",children:c.data})]},h))})}const Xh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAekAAADgCAYAAAAntp7rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA3fSURBVHgB7d3PchRHngfwzBLseDyH0SNoHoAwN8Int28zwzgC23PwskQgTlqfBuwHkHgAPOKkIyLC2D7srtkIZM/NzQmOBH4B+QlWEzHjWP6oc6sEeCXAlhq1qMyszydCIEFDdNYvs79VmdnVMczQ12fOzG8/eDCaa5p3QkoLKYSToWnm2+/nf3pQjFthMtnsfo8h3NueTG7P/epX4/dv3twKAJCBXPIshkPqGhIePz7fPvEzbSNG4dWN26/1ePz47baBmwEAXqMc8+yVQ7ptzEJ49OgvKcbFPWcWM9A+qfVw/PhlYQ3AUcs5z6YO6e5MIz1+vNI25C/hiAlrAI5KCXk2VUj/xx/+cKaZm7s26zONfWy2XysfbGxcDwAwA6Xk2YFC+nWebfyc9omuvr+xcSkAwCsqLc/2Delurj49evR16Ha29W+zXYh/1/Q3ANMqMc9+MaSfNui79tuFkA9BDcBUSs2znw3pTBv0TJZBfW7t01GKYTmmdLL9/XWuc0whjUNs1m8sXXmlNf4y2tg5XDuZjXL6y276Tm1KzrPm5/5Vxg3qLKSHD7++NhplM+jPrV1aSTG1xyyN8n4xiqN2LWb97NrFlTClctrYefV2Mhtl9Zfd9J3alJxnLw3p//rTn1ZDvg16IsaT87/5zXLIwNm1TxZTjFk8l4OKsVn+aO3i6KCPL7GNnWnbyWyU2l9203fqUHqevRDS//nHPy72uettGimEi902+tCzGOP5UKC5KV5ES21jZ67wsChRyf1lN32nbDXk2Z6Q7ubtY2Gdsmmaa/1Pe6dRKFGKU+xwLLSNnanayWwU3F9203eKVUue7b2SfvSoa9BCKMt8LtPexSlqnfAQhtJOZk/fKVclefZTSO/sfgthMRSomybYufcqAINXU579/5X0k7OOYk0ePChi3QGAI1ZRnu2EdMlnHc/EplnM6S1ZALx+teXZTkhPHj4chfLNz//611XsKAXg1dSWZzsh3VTydonUNL2/HQuA/tSWZ83OJ4KEMAp1GJnyBhimGvOs2X78eBQq8ts333wnADA4NeZZM5dSVaGWUiU3UQBgKjXmWbcmXdcddWJcCAAMUXV51rTz91Wt4cbaigTAgdSYZ011V54x2jgGMEQV5lnTTnrXFmpCGmCIKsyzJgAAWRLSAJCpbk16K9SltvYAcBAV5lkTJpO6GpXSZgBgeCrMsyY2zb1Qk/rOpAA4gBrzrKntyjNNJnUVCYCDqTDPmu0Yb4eKxBjHAYDBqTHPmrljx8ahIn//8ceqigTAwdSYZ837N29uxRDGoQ7jC+OxNWmAAaoxz568TzrGm6EO6wGA4aosz56E9LFj12vYFf1ge9tUN8CQVZZnOyG9M0WQ0nooWGqf/7/+7W+bAYDBqi3Pfrot6P9ub18NBXs4mVwOAAxeTXn2U0h3qZ1CWA0FchUNwDM15dmeD9hojh+/XNxcfkqbrqIB2K2WPNsT0t1c/iSEC6EkMa64igZgt1ry7IWPqvzzrVs3S5kmSJPJ6gcbG9cDADynhjx76edJ70wThJD3PbDbaYEPv/32UgCAn1F6nr00pLtpggfb2+9ne7Py9nk9mEzeDQDwC0rPs+bn/qKbF9/5h7k17GmDrEMDcBAl51nzS/8+u4aldE9AAzCtUvPsF0O60/0HH3zzze/6XnzvFtX//uOPAhqAV1Jinu0b0s98uLFxKaV0oYezkK3JZPJ+t6juE64AOKyS8uzAId358Jtv1rvL8/Sa7ou6c7bxz3/+7s/fflvLp5oAkIFS8uxYmNLTy/MLX/7+95f/pWmWY4yLYba22sasP0zpqqltAI5KCXk2dUg/81zjRk2M59t5/lF4deP2AN3c+sc/rhc3rZ3CVohhPtRsCG0EBinnPHvlkH7maePWu69ro9H8b9988512+mDUNM3JtpHdi/pCCHte3LfadYCt2DT3Jtvbm21Dxu0C+u2i15tjvNem2CgUJ40P/NBi29iZop3AYOWYZ4cO6d2ePrH/fvo1GDGFyyke6qyrH3GnMx7soaW2sTNFOwE6ueTZVBvHeLnPP77STm2ElVCQFCcrN5b+euD7npfYxs607WRGuuUR4NCE9Ix8vvTZ5ZQmF9rLtnHI1c4LZxpPmjT6Yml16o/3LKKNnUO2kxnYWR6pgaUS+hUDwIydW/t0lGL6LpQupkUzMfRpLgDM2P2NO5tvvfd29+0oFKpbKmlnYq4G6JGQBo7E/Vt3bp84feqHGJtnu2Lzt/NWw3R30oTFL5dWXUHTu5dOdz+ZqgrLMaWTKdv3xrZrRbFZv7F0xUCiGMbWsKh3/0qvwQtX0ufWLq20DbkWujPfGN4I2YoL7S9n2jP1+P3G3XGAzBlbw6Le/auhBnuupM+ufbIYnzSoKNtp8u5XH6+OA2TK2BoW9e5fLTXY8xasGOP5UKC5GJcDZMzYGhb17l8tNXjufdKF3vYxxZMBsmZsDYt696+OGsz0tqC9yWQzgE0iVMeHqgyLevfvuRq449iMPNmg0N28IY3yDehOHIWU1s+uXVwJAGRNSM9At0EhFbaWE2Oz/NHaxVEAIFtCegZsEgHgKAjpmbBJBIDZE9JDZpMIQNaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkam9Ip7AVgNkztoZFvftXSQ32hnSM90KR0jhAzoytYVHv/lVSgz0hHVO4HEoUw3qAjBlbw6Le/aulBntC+vOPr4xjDCuhIClOVm4s/fV6gIwZW8Oi3v2rpQYvbBz7fOmzyylNLrRxPg652llrSONJk0ZfLK2WebbE4Bhbw6Le/auhBjFwaP+29sn/tEdyPhToxr9/pg8AZMpbsGbBJhEAjoCQngGbRAA4CnOBQ7u/cWfzrffe7r4dhUJ0GxTa9Y+rAYBsCekZuX/rzu0Tp0/9EGPTrU0vhBx1GxRiujtpwuKXS6t27QIAAAAAAABHzXtkgSNzbu3TUYphOaZ0MhVzL4E0DrFZv7F0xb4NemfjGHAkzq1dWmmD+VroNlLG8EYoRlxofzlz4vSp+P3G3XGAHrmSBmbu7Noni/FJQBdtO03e/erj1XGAnriZCTBzMcbzoQJzMS4H6NGxl/1hGetI+a0bDeG4lbPGmOe64nDGVhqFGqR4MhyC19L+lV6DF66kn6wjpe+6QZb3i3AchZTWz65dXAkZGMJxK6eNnbz6R8fYKtAh6qTe/auhBntCultHSoVN78TYLH+0dnEUejSE41ZiGzs59I+OsTUs6t2/WmrQ7H1AmetIfa8bDeG4lbzGmMO6orE1LOrdv1pq8Nx0d6HrSIdcN5rBExiFEk113ApeY+y9f3SMrWFR7/7VUYM6dncXc5OEzAzluOkfr86xGxb17t9zNfAWLADIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEztDekUtgLTG8Jx0zcOZ2jHb+j9xXjpXyU12BvSMd4LRUrj0KchHLdi29jpuX90hja2iu4vuw2t/RmMlVmppAZ7QjqmcDmUKIb10KMhHLdi29jpuX/sPIWBja2i+8tuQ2t/BmNlVmqpwdzuH+5v3Nl86723u29HoRApTla+WFq9Gno0hONWYhs7OfSPztDGVqn9ZbehtT+XsTIrtdRg7vkH3b915/aJ06d+iLGZb39cCDnq1hpiujtpwuKXS6vXQwaGcNyKaGMnw/7RGdrYKqa/7Da09mc6VmZFDQAAAAAAAAAAAAAAAAAAAAAAAAAAgFcQX/aH59Y+HaUYlmNKJ9vf50OW0jjEZv3G0pVs7nXquLEffWRY1Lt/pdfghQ/YOLd2aaVtyLXQ3Yw8hjdCtuJC+8uZE6dPxe837o5Dzxw39qOPDIt696+GGuy5kj679slifNKgomynybtffbw6Dj1x3NiPPjIs6t2/WmrQ7P7LGOP5UKC5GJdDjxw39qOPDIt696+WGjR7/zqNQolSPBl65bixH31kWNS7f3XUoAk1yHYzQOYcN/ajjwyLevfvuRrUEdIAUCEhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkKm9IZ3CVmB6jhv70UeGRb37V0kN9oZ0jPdCkdI49MlxYz/6yLCod/8qqcGekI4pXA4limE99MhxYz/6yLCod/9qqcHc7h/ub9zZfOu9t7tvR6EQKU5WvlhavRp65LixH31kWNS7f7XUYO75B92/def2idOnfoixmW9/XAg56tYaYro7acLil0ur10MGHDf2o48Mi3r3r4Ya/B/51/eV9G4kXwAAAABJRU5ErkJggg==";function ez(){const{mobile:n}=oi(),e=Ls();return V.useEffect(()=>{window.navigate=e},[]),E.jsx(E.Fragment,{children:E.jsxs("main",{id:"home",className:"page",children:[n?E.jsxs("div",{id:"home-header",children:[E.jsx("div",{className:"header_logo",children:E.jsx(Ft,{to:"/",children:E.jsx("img",{src:Xh,width:"60px",alt:"Logo"})})}),E.jsxs(Ft,{to:"/chats",className:"defbtn",id:"chatButton",children:[E.jsx("i",{className:"fa-solid fa-comment-dots"}),E.jsx("span",{id:"chatNotification"})]})]}):E.jsx(E.Fragment,{}),E.jsx(ek,{userPerfilUid:null})]})})}function tz(){const{socket:n,usuarioLogado:e}=oi(),t=Ls(),[i,s]=V.useState([]),[a,c]=V.useState([]),[h,f]=V.useState(0),[p,_]=V.useState(null),v=V.useRef({timeout:null,time:0}),T=V.useRef({timeout:null,time:0}),A={searchFriends:V.useRef(null),searchUsers:V.useRef(null)},S=()=>{n.send("/friends",{operation:"get"}).then(k=>{if(k.result){const N={};var R=[],I=!1;s(k.results.map(O=>(N[O.uid]=!0,{...O,logo:O.logo?Lr(O.logo):jn})).sort((O,j)=>O.name.localeCompare(j.name)));for(const O of[...p||[]])O.uid in N&&(O.mode=5,I=!0),R.push(O);I&&_(R.sort((O,j)=>O.name.localeCompare(j.name)))}})},P=()=>{n.send("/friends",{operation:"get_senders"}).then(k=>{if(k.result){const N={};var R=[],I=!1;c(k.results.map(O=>(N[O.uid]=!0,{...O,logo:O.logo?Lr(O.logo):jn})).sort((O,j)=>O.name.localeCompare(j.name)));for(const O of[...p||[]])O.uid in N&&(O.mode=4,I=!0),R.push(O);I&&s(R.sort((O,j)=>O.name.localeCompare(j.name)))}})},D=async()=>{e&&(Date.now()-T.current.time<300&&(clearTimeout(T.current.timeout),T.current.time=Date.now()),T.current={timeout:setTimeout(()=>{const k=A.searchFriends.current.value.toLowerCase().trim();if(k===""){S();return}n.send("/friends",{operation:"search_friends",term:k}).then(async R=>{const I=[];for(const O of R.results){const[j,M]=O.friend_info?JSON.parse(O.friend_info):["",-1],Ze=O.uid;if(Ze!=e.uid){var N;M==-1?N=2:N=M==1?5:j==e.uid?3:4,I.push({logo:O.logo?Lr(O.logo):jn,name:O.name,mode:N,uid:Ze})}}s(I.sort((O,j)=>O.name.localeCompare(j.name)))})},300),time:Date.now()})},F=()=>{if(!e){t("/login");return}Date.now()-v.current.time<300&&(clearTimeout(v.current.timeout),v.current.time=Date.now()),v.current={timeout:setTimeout(()=>{const k=A.searchUsers.current.value.toLowerCase().trim();if(k===""){_(null);return}n.send("/friends",{operation:"search_users",term:k}).then(async R=>{const I=[];for(const O of R.results){const[j,M]=O.friend_info?JSON.parse(O.friend_info):["",-1],Ze=O.uid;if(Ze!=e.uid){var N;M==-1?N=2:N=M==1?5:j==e.uid?3:4,I.push({logo:O.logo?Lr(O.logo):jn,name:O.name,mode:N,uid:Ze})}}_(I.sort((O,j)=>O.name.localeCompare(j.name)))})},300),time:Date.now()}};function z(k){e&&n.send("/friends",{operation:"remove_friend",uid_to_remove_friend:k}).then(R=>{R.result&&(s(I=>[...I.filter(N=>k!=N.uid).sort((N,O)=>N.name.localeCompare(O.name))]),_(I=>[...(I||[]).map(N=>({...N,mode:k==N.uid?2:N.mode})).sort((N,O)=>N.name.localeCompare(O.name))]))})}function G(k){e&&k!=""&&n.send("/friends",{operation:"send_request",uid_to_send_request:k}).then(R=>{R.result?(c(I=>[...I.map(N=>({...N,mode:k==N.uid?3:N.mode})).sort((N,O)=>N.name.localeCompare(O.name))]),_(I=>[...(I||[]).map(N=>({...N,mode:k==N.uid?3:N.mode})).sort((N,O)=>N.name.localeCompare(O.name))])):_(I=>[...(I||[]).map(N=>({...N,mode:k==N.uid?R.mode==1?5:4:N.mode})).sort((N,O)=>N.name.localeCompare(O.name))])})}function re(k){e&&n.send("/friends",{operation:"remove_send_request",uid_to_remove_send_request:k}).then(R=>{R.result?_(I=>[...(I||[]).map(N=>({...N,mode:k==N.uid?2:N.mode})).sort((N,O)=>N.name.localeCompare(O.name))]):R.mode==1?_(I=>[...(I||[]).map(N=>(N={...N,mode:k==N.uid?5:N.mode},k==N.uid&&s(O=>[...O,N].sort((j,M)=>j.name.localeCompare(M.name))),N)).sort((N,O)=>N.name.localeCompare(O.name))]):_(I=>[...(I||[]).map(N=>({...N,mode:k==N.uid?2:N.mode})).sort((N,O)=>N.name.localeCompare(O.name))])})}function ie(k){e&&n.send("/friends",{operation:"accept_request",uid_to_accept_request:k}).then(R=>{R.result&&c(I=>[...I.filter(N=>N.uid==k?(s([...i,{...N,mode:5}].sort((O,j)=>O.name.localeCompare(j.name))),_(O=>[...(O||[]).map(j=>({...j,mode:k==j.uid?5:j.mode})).sort((j,M)=>j.name.localeCompare(M.name))]),!1):!0).sort((N,O)=>N.name.localeCompare(O.name))])})}function ye(k){e&&n.send("/friends",{operation:"decline_request",uid_to_decline_request:k}).then(R=>{R.result&&(c(I=>[...I.filter(N=>N.uid!=k)]),_(I=>[...(I||[]).map(N=>({...N,mode:k==N.uid?2:N.mode})).sort((N,O)=>N.name.localeCompare(O.name))]))})}return V.useEffect(()=>{h==0?S():h==1&&P()},[h]),V.useEffect(()=>{const R=new URLSearchParams(location.search).get("page");e&&R&&["0","1","2"].includes(R)?f(Number(R)):R||t("/amigos?page=0")},[e,location.search]),E.jsx(E.Fragment,{children:E.jsxs("main",{id:"amigos-page",className:"page",children:[E.jsxs("div",{id:"btns",children:[E.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=0"),style:{color:h===0?"#000":"#777",borderBottom:h===0?"3px solid green":"none"},children:"Amigos"}),E.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=1"),style:{color:h===1?"#000":"#777",borderBottom:h===1?"3px solid green":"none"},children:"Pedidos"}),E.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=2"),style:{color:h===2?"#000":"#777",borderBottom:h===2?"3px solid green":"none"},children:"Pesquisar"})]}),E.jsx("div",{id:"amigos-division"}),E.jsxs("div",{id:"mainlists",children:[E.jsxs("section",{id:"lista-amigos",style:{display:h===0?"block":"none"},children:[E.jsx("h2",{children:"Meus Amigos"}),E.jsx("div",{className:"search-box",style:{display:"flex",alignItems:"center",gap:"8px"},children:E.jsx("input",{ref:A.searchFriends,onInput:D,type:"text",id:"searchFriendsInput",placeholder:"Pesquisar amigo",style:{padding:"5px",flex:1}})}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("div",{id:"friendsList",style:{minHeight:"100px"},children:i.map((k,R)=>E.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[E.jsx(Ft,{to:`/perfil?id=${k.uid}`,children:E.jsx("img",{src:k.logo,alt:"Foto de "+k.name,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}})}),E.jsx(Ft,{className:"name-friend",to:`/perfil?id=${k.uid}`,children:k.name}),E.jsx("button",{id:"remove-friend",onClick:()=>z(k.uid),children:"Remover"})]},R))})]}),E.jsxs("section",{id:"pedidos",style:{display:h===1?"block":"none"},children:[E.jsx("div",{className:"fqtop",style:{padding:"10px 0"},children:E.jsx("h2",{children:"Pedidos de Amizade"})}),E.jsx("div",{id:"friendRequests",className:"PA",style:{minHeight:"50px"},children:a.map((k,R)=>E.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[E.jsx("img",{src:k.logo,alt:"Foto de "+k.name,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}}),E.jsx("strong",{children:k.name}),E.jsx("button",{id:"aceitar-pedido",onClick:I=>{I.stopPropagation(),ie(k.uid)},children:"Aceitar"}),E.jsx("button",{id:"rejeitar-pedido",onClick:I=>{I.stopPropagation(),ye(k.uid)},children:"Recusar"})]},R))})]}),E.jsxs("section",{id:"search-users",style:{display:h===2?"block":"none"},children:[E.jsx("h2",{children:"Usuários"}),E.jsx("div",{className:"search-box",style:{display:"flex",alignItems:"center",gap:"8px"},children:E.jsx("input",{ref:A.searchUsers,onInput:F,placeholder:"Pesquisar usuário",style:{padding:"5px",flex:1}})}),E.jsx("div",{id:"searchResults",children:p?p.length==0?E.jsx("div",{children:"Nenhum usuário encontrado."}):p.map((k,R)=>E.jsxs("div",{className:"friends-item",children:[E.jsxs(Ft,{className:"friends-link",to:"/perfil?id="+k.uid,children:[E.jsx("img",{src:k.logo,alt:"Foto de "+k.name}),E.jsx("strong",{children:k.name})]}),k.mode==5?E.jsx("span",{children:"(Amigos)"}):k.mode==3?E.jsx("button",{className:"retirar",onClick:()=>re(k.uid),children:"Cancelar"}):k.mode==4?E.jsxs(E.Fragment,{children:[E.jsx("button",{className:"aceitar",onClick:()=>ie(k.uid),children:"Aceitar"}),E.jsx("button",{className:"rejeitar",onClick:()=>ye(k.uid),children:"Rejeitar"})]}):E.jsx("i",{className:"fa-solid fa-user-plus",onClick:()=>G(k.uid)})]},R)):E.jsx(E.Fragment,{})})]})]})]})})}function Ic({showPopup:n}){const[e,t]=V.useState({show:!1}),i=Ls(),s=c=>{t(typeof c=="string"?{message:c,show:!0}:{...c,show:!0})},a=()=>{e.redirect&&i(e.redirectUrl),t({show:!1})};return V.useEffect(()=>{n.current=s},[n]),E.jsx("div",{id:"errorPopupContainer",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2e3,padding:"1rem",boxSizing:"border-box",display:e.show?"flex":"none"},children:E.jsxs("div",{id:"errorPopup",style:{backgroundColor:"#fff",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",maxWidth:"400px",width:"100%",margin:"auto"},children:[E.jsx("button",{onClick:a,style:{position:"relative",fontSize:"20px",width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",backgroundColor:"#15803d",color:"#fff",fontWeight:"600",border:"none",borderRadius:"0.375rem",cursor:"pointer",transition:"background-color 0.2s ease-in-out, transform 0.2s ease-in-out",marginBottom:"10px"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#166534",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#15803d",c.currentTarget.style.transform="scale(1)"},onFocus:c=>{c.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 128, 61, 0.5)"},onBlur:c=>{c.currentTarget.style.boxShadow="none"},children:E.jsx("i",{className:"fa-solid fa-xmark","aria-hidden":"true"})}),E.jsx("p",{id:"errorPopupMessage",style:{marginBottom:"1.5rem",color:"#4b5563",lineHeight:"1.6"},children:e.message})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="firebasestorage.googleapis.com",nk="storageBucket",nz=2*60*1e3,iz=10*60*1e3,rz=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends dr{constructor(e,t,i=0){super(fy(e),`Firebase Storage: ${t} (${fy(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qt||(qt={}));function fy(n){return"storage/"+n}function d0(){const n="An unknown error occurred, please check the error payload for server response.";return new Xt(qt.UNKNOWN,n)}function sz(n){return new Xt(qt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function oz(n){return new Xt(qt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function az(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xt(qt.UNAUTHENTICATED,n)}function lz(){return new Xt(qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cz(n){return new Xt(qt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function ik(){return new Xt(qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rk(){return new Xt(qt.CANCELED,"User canceled the upload/download.")}function uz(n){return new Xt(qt.INVALID_URL,"Invalid URL '"+n+"'.")}function hz(n){return new Xt(qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function dz(){return new Xt(qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nk+"' property when initializing the app?")}function sk(){return new Xt(qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fz(){return new Xt(qt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function mz(){return new Xt(qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function pz(n){return new Xt(qt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tv(n){return new Xt(qt.INVALID_ARGUMENT,n)}function ok(){return new Xt(qt.APP_DELETED,"The Firebase app was deleted.")}function gz(n){return new Xt(qt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nh(n,e){return new Xt(qt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Bu(n){throw new Xt(qt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Ii.makeFromUrl(e,t)}catch{return new Ii(e,"")}if(i.path==="")return i;throw hz(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+s+c,"i"),f={bucket:1,path:3};function p(re){re.path_=decodeURIComponent(re.path)}const _="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",A=new RegExp(`^https?://${v}/${_}/b/${s}/o${T}`,"i"),S={bucket:1,path:3},P=t===tk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",F=new RegExp(`^https?://${P}/${s}/${D}`,"i"),G=[{regex:h,indices:f,postModify:a},{regex:A,indices:S,postModify:p},{regex:F,indices:{bucket:1,path:2},postModify:p}];for(let re=0;re<G.length;re++){const ie=G[re],ye=ie.regex.exec(e);if(ye){const k=ye[ie.indices.bucket];let R=ye[ie.indices.path];R||(R=""),i=new Ii(k,R),ie.postModify(i);break}}if(i==null)throw uz(e);return i}}class _z{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(n,e,t){let i=1,s=null,a=null,c=!1,h=0;function f(){return h===2}let p=!1;function _(...D){p||(p=!0,e.apply(null,D))}function v(D){s=setTimeout(()=>{s=null,n(A,f())},D)}function T(){a&&clearTimeout(a)}function A(D,...F){if(p){T();return}if(D){T(),_.call(null,D,...F);return}if(f()||c){T(),_.call(null,D,...F);return}i<64&&(i*=2);let G;h===1?(h=2,G=0):G=(i+Math.random())*1e3,v(G)}let S=!1;function P(D){S||(S=!0,T(),!p&&(s!==null?(D||(h=2),clearTimeout(s),v(0)):D||(h=1)))}return v(0),a=setTimeout(()=>{c=!0,P(!0)},t),P}function vz(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(n){return n!==void 0}function Tz(n){return typeof n=="function"}function bz(n){return typeof n=="object"&&!Array.isArray(n)}function Dp(n){return typeof n=="string"||n instanceof String}function SA(n){return f0()&&n instanceof Blob}function f0(){return typeof Blob<"u"}function CA(n,e,t,i){if(i<e)throw Tv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Tv(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function ak(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var Na;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Na||(Na={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e,t,i,s,a,c,h,f,p,_,v,T=!0,A=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,P)=>{this.resolve_=S,this.reject_=P,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Nf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{const f=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===Na.NO_ERROR,f=a.getStatus();if(!h||lk(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Na.ABORT;i(!1,new Nf(!1,null,_));return}const p=this.successCodes_.indexOf(f)!==-1;i(!0,new Nf(p,a))})},t=(i,s)=>{const a=this.resolve_,c=this.reject_,h=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());Ez(f)?a(f):a()}catch(f){c(f)}else if(h!==null){const f=d0();f.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,f)):c(f)}else if(s.canceled){const f=this.appDelete_?ok():rk();c(f)}else{const f=ik();c(f)}};this.canceled_?t(!1,new Nf(!1,null,!0)):this.backoffId_=yz(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Sz(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Cz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Az(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Rz(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Iz(n,e,t,i,s,a,c=!0,h=!1){const f=ak(n.urlParams),p=n.url+f,_=Object.assign({},n.headers);return Az(_,e),Sz(_,t),Cz(_,a),Rz(_,i),new wz(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Nz(...n){const e=xz();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(f0())return new Blob(n);throw new Xt(qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kz(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(n){if(typeof atob>"u")throw pz("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class my{constructor(e,t){this.data=e,this.contentType=t||null}}function Dz(n,e){switch(n){case Ur.RAW:return new my(ck(e));case Ur.BASE64:case Ur.BASE64URL:return new my(uk(n,e));case Ur.DATA_URL:return new my(Pz(e),Lz(e))}throw d0()}function ck(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,c=n.charCodeAt(++t);i=65536|(a&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Mz(n){let e;try{e=decodeURIComponent(n)}catch{throw nh(Ur.DATA_URL,"Malformed data URL.")}return ck(e)}function uk(n,e){switch(n){case Ur.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw nh(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ur.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw nh(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Oz(e)}catch(s){throw s.message.includes("polyfill")?s:nh(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}class hk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw nh(Ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Uz(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Pz(n){const e=new hk(n);return e.base64?uk(Ur.BASE64,e.rest):Mz(e.rest)}function Lz(n){return new hk(n).contentType}function Uz(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t){let i=0,s="";SA(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(SA(this.data_)){const i=this.data_,s=kz(i,e,t);return s===null?null:new ys(s)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new ys(i,!0)}}static getBlob(...e){if(f0()){const t=e.map(i=>i instanceof ys?i.data_:i);return new ys(Nz.apply(null,t))}else{const t=e.map(c=>Dp(c)?Dz(Ur.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)s[a++]=c[h]}),new ys(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(n){let e;try{e=JSON.parse(n)}catch{return null}return bz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function jz(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function fk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(n,e){return e}class ni{constructor(e,t,i,s){this.server=e,this.local=t||e,this.writable=!!i,this.xform=s||Bz}}let kf=null;function Fz(n){return!Dp(n)||n.length<2?n:fk(n)}function m0(){if(kf)return kf;const n=[];n.push(new ni("bucket")),n.push(new ni("generation")),n.push(new ni("metageneration")),n.push(new ni("name","fullPath",!0));function e(a,c){return Fz(c)}const t=new ni("name");t.xform=e,n.push(t);function i(a,c){return c!==void 0?Number(c):c}const s=new ni("size");return s.xform=i,n.push(s),n.push(new ni("timeCreated")),n.push(new ni("updated")),n.push(new ni("md5Hash",null,!0)),n.push(new ni("cacheControl",null,!0)),n.push(new ni("contentDisposition",null,!0)),n.push(new ni("contentEncoding",null,!0)),n.push(new ni("contentLanguage",null,!0)),n.push(new ni("contentType",null,!0)),n.push(new ni("metadata","customMetadata",!0)),kf=n,kf}function zz(n,e){function t(){const i=n.bucket,s=n.fullPath,a=new Ii(i,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function qz(n,e,t){const i={};i.type="file";const s=t.length;for(let a=0;a<s;a++){const c=t[a];i[c.local]=c.xform(i,e[c.server])}return zz(i,n),i}function mk(n,e,t){const i=dk(e);return i===null?null:qz(n,i,t)}function Hz(n,e,t,i){const s=dk(e);if(s===null||!Dp(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(p=>{const _=n.bucket,v=n.fullPath,T="/b/"+c(_)+"/o/"+c(v),A=xc(T,t,i),S=ak({alt:"media",token:p});return A+S})[0]}function pk(n,e){const t={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Ya{constructor(e,t,i,s){this.url=e,this.method=t,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(n){if(!n)throw d0()}function p0(n,e){function t(i,s){const a=mk(n,s,e);return Rs(a!==null),a}return t}function Gz(n,e){function t(i,s){const a=mk(n,s,e);return Rs(a!==null),Hz(a,s,n.host,n._protocol)}return t}function Jh(n){function e(t,i){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=lz():s=az():t.getStatus()===402?s=oz(n.bucket):t.getStatus()===403?s=cz(n.path):s=i,s.status=t.getStatus(),s.serverResponse=i.serverResponse,s}return e}function g0(n){const e=Jh(n);function t(i,s){let a=e(i,s);return i.getStatus()===404&&(a=sz(n.path)),a.serverResponse=s.serverResponse,a}return t}function $z(n,e,t){const i=e.fullServerUrl(),s=xc(i,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,h=new Ya(s,a,p0(n,t),c);return h.errorHandler=g0(e),h}function Kz(n,e,t){const i=e.fullServerUrl(),s=xc(i,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,h=new Ya(s,a,Gz(n,t),c);return h.errorHandler=g0(e),h}function Qz(n,e){const t=e.fullServerUrl(),i=xc(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function c(f,p){}const h=new Ya(i,s,c,a);return h.successCodes=[200,204],h.errorHandler=g0(e),h}function Yz(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function gk(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=Yz(null,e)),i}function _k(n,e,t,i,s){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let G="";for(let re=0;re<2;re++)G=G+Math.random().toString().slice(2);return G}const f=h();c["Content-Type"]="multipart/related; boundary="+f;const p=gk(e,i,s),_=pk(p,t),v="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+f+"--",A=ys.getBlob(v,i,T);if(A===null)throw sk();const S={name:p.fullPath},P=xc(a,n.host,n._protocol),D="POST",F=n.maxUploadRetryTime,z=new Ya(P,D,p0(n,t),F);return z.urlParams=S,z.headers=c,z.body=A.uploadData(),z.errorHandler=Jh(e),z}class Vm{constructor(e,t,i,s){this.current=e,this.total=t,this.finalized=!!i,this.metadata=s||null}}function _0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Rs(!1)}return Rs(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Wz(n,e,t,i,s){const a=e.bucketOnlyServerUrl(),c=gk(e,i,s),h={name:c.fullPath},f=xc(a,n.host,n._protocol),p="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},v=pk(c,t),T=n.maxUploadRetryTime;function A(P){_0(P);let D;try{D=P.getResponseHeader("X-Goog-Upload-URL")}catch{Rs(!1)}return Rs(Dp(D)),D}const S=new Ya(f,p,A,T);return S.urlParams=h,S.headers=_,S.body=v,S.errorHandler=Jh(e),S}function Xz(n,e,t,i){const s={"X-Goog-Upload-Command":"query"};function a(p){const _=_0(p,["active","final"]);let v=null;try{v=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Rs(!1)}v||Rs(!1);const T=Number(v);return Rs(!isNaN(T)),new Vm(T,i.size(),_==="final")}const c="POST",h=n.maxUploadRetryTime,f=new Ya(t,c,a,h);return f.headers=s,f.errorHandler=Jh(e),f}const AA=256*1024;function Jz(n,e,t,i,s,a,c,h){const f=new Vm(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw fz();const p=f.total-f.current;let _=p;s>0&&(_=Math.min(_,s));const v=f.current,T=v+_;let A="";_===0?A="finalize":p===_?A="upload, finalize":A="upload";const S={"X-Goog-Upload-Command":A,"X-Goog-Upload-Offset":`${f.current}`},P=i.slice(v,T);if(P===null)throw sk();function D(re,ie){const ye=_0(re,["active","final"]),k=f.current+_,R=i.size();let I;return ye==="final"?I=p0(e,a)(re,ie):I=null,new Vm(k,R,ye==="final",I)}const F="POST",z=e.maxUploadRetryTime,G=new Ya(t,F,D,z);return G.headers=S,G.body=P.uploadData(),G.progressCallback=h||null,G.errorHandler=Jh(n),G}const pi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function py(n){switch(n){case"running":case"pausing":case"canceling":return pi.RUNNING;case"paused":return pi.PAUSED;case"success":return pi.SUCCESS;case"canceled":return pi.CANCELED;case"error":return pi.ERROR;default:return pi.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e,t,i){if(Tz(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class eq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Na.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Na.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Na.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,s,a){if(this.sent_)throw Bu("cannot .send() more than once");if(Us(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tq extends eq{initXhr(){this.xhr_.responseType="text"}}function vo(){return new tq}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=m0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(qt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(lk(s.status,[]))if(a)s=ik();else{this.sleepTime=Math.max(this.sleepTime*2,rz),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(qt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,a)=>{this._resolve=s,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=Wz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,vo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const s=Xz(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(s,vo,t,i);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=AA*this._chunkMultiplier,t=new Vm(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,a)=>{let c;try{c=Jz(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){this._error=f,this._transition("error");return}const h=this._ref.storage._makeRequest(c,vo,s,a,!1);this._request=h,h.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){AA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=$z(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,vo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=_k(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,vo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=rk(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=py(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,s){const a=new Zz(t||void 0,i||void 0,s||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(py(this._state)){case pi.SUCCESS:Fl(this._resolve.bind(null,this.snapshot))();break;case pi.CANCELED:case pi.ERROR:const t=this._reject;Fl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(py(this._state)){case pi.RUNNING:case pi.PAUSED:e.next&&Fl(e.next.bind(e,this.snapshot))();break;case pi.SUCCESS:e.complete&&Fl(e.complete.bind(e))();break;case pi.CANCELED:case pi.ERROR:e.error&&Fl(e.error.bind(e,this._error))();break;default:e.error&&Fl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this._service=e,t instanceof Ii?this._location=t:this._location=Ii.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ba(e,t)}get root(){const e=new Ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fk(this._location.path)}get storage(){return this._service}get parent(){const e=Vz(this._location.path);if(e===null)return null;const t=new Ii(this._location.bucket,e);return new Ba(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw gz(e)}}function iq(n,e,t){n._throwIfRoot("uploadBytes");const i=_k(n.storage,n._location,m0(),new ys(e,!0),t);return n.storage.makeRequestWithTokens(i,vo).then(s=>({metadata:s,ref:n}))}function rq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new nq(n,new ys(e),t)}function sq(n){n._throwIfRoot("getDownloadURL");const e=Kz(n.storage,n._location,m0());return n.storage.makeRequestWithTokens(e,vo).then(t=>{if(t===null)throw mz();return t})}function oq(n){n._throwIfRoot("deleteObject");const e=Qz(n.storage,n._location);return n.storage.makeRequestWithTokens(e,vo)}function aq(n,e){const t=jz(n._location.path,e),i=new Ii(n._location.bucket,t);return new Ba(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(n){return/^[A-Za-z]+:\/\//.test(n)}function cq(n,e){return new Ba(n,e)}function yk(n,e){if(n instanceof y0){const t=n;if(t._bucket==null)throw dz();const i=new Ba(t,t._bucket);return e!=null?yk(i,e):i}else return e!==void 0?aq(n,e):n}function uq(n,e){if(e&&lq(e)){if(n instanceof y0)return cq(n,e);throw Tv("To use ref(service, url), the first argument must be a Storage instance.")}else return yk(n,e)}function RA(n,e){const t=e==null?void 0:e[nk];return t==null?null:Ii.makeFromBucketSpec(t,n)}function hq(n,e,t,i={}){n.host=`${e}:${t}`;const s=Us(e);s&&(zm(`https://${n.host}`),qm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:Nv(a,n.app.options.projectId))}class y0{constructor(e,t,i,s,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=tk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nz,this._maxUploadRetryTime=iz,this._requests=new Set,s!=null?this._bucket=Ii.makeFromBucketSpec(s,this._host):this._bucket=RA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ii.makeFromBucketSpec(this._url,e):this._bucket=RA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ba(this,e)}_makeRequest(e,t,i,s,a=!0){if(this._deleted)return new _z(ok());{const c=Iz(e,this._appId,i,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const IA="@firebase/storage",xA="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="storage";function ih(n,e,t){return n=Dt(n),iq(n,e,t)}function rh(n,e,t){return n=Dt(n),rq(n,e,t)}function Mr(n){return n=Dt(n),sq(n)}function NA(n){return n=Dt(n),oq(n)}function zi(n,e){return n=Dt(n),uq(n,e)}function qi(n=Mh(),e){n=Dt(n);const i=Bo(n,vk).getImmediate({identifier:e}),s=xv("storage");return s&&dq(i,...s),i}function dq(n,e,t,i={}){hq(n,e,t,i)}function fq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new y0(t,i,s,e,Fo)}function mq(){Qi(new xi(vk,fq,"PUBLIC").setMultipleInstances(!0)),Yn(IA,xA,""),Yn(IA,xA,"esm2017")}mq();function kA(){return Date.now()*1e3+Math.floor(Math.random()*999)}function OA(n,e){return n.getFullYear()!==e.getFullYear()||n.getMonth()!==e.getMonth()||n.getDate()!==e.getDate()}const pq=({showPopup:n})=>{const{db:e,mobile:t,usuarioLogado:i,socket:s}=oi(),a=Ls(),[c,h]=V.useState([]),[f,p]=V.useState(""),_=V.useRef(null),[v,T]=V.useState(null),A=V.useRef(-1),S=V.useRef({audioSeconds:0,audioTimer:null,mediaRecorder:null,audioChunks:[]}),[P,D]=V.useState(!1),F={fileInput:V.useRef(null),messageInput:V.useRef(null)},z=Z=>{},G=(Z,se)=>{},re=Z=>{},ie=(Z,se)=>{},ye=Z=>"",k=Z=>"",R=Z=>{if(v){if(!t&&Z.key==="Enter"){if(Z.shiftKey)return;N(),p(""),Z.preventDefault()}bs(Ge($e(),`chats/${A.current}/typing/${i.uid}`),!0),clearTimeout(window.typingTimeout),window.typingTimeout=setTimeout(()=>{bs(Ge($e(),`chats/${A.current}/typing/${i.uid}`),!1)},2e3)}},I=()=>{v&&bs(Ge($e(),`chats/${A.current}/typing/${i.uid}`),!1)},N=()=>{if(!i||!v)return;const Z=F.messageInput.current.textContent;if(Z.trim()==="")return;F.messageInput.current.textContent="";const se=kA(),W=Math.floor(se/1e6);s.send("/chat",{operation:"send_message",text:Z,type:0,chat_id:A.current}).then(le=>{le.result&&h(ge=>[...ge.map(pe=>({...pe,mode:pe.id==se?1:pe.mode,id:pe.id==se?le.id:pe.id}))])}),h(le=>{const ge=[...le],pe=new Date(W*1e3);return(le.length==0||OA(le[le.length-1].date,pe))&&ge.push({isTime:!0,date:pe,id:se,time:W}),ge.push({date:pe,text:Z,mode:0,uid:i.uid,id:se,time:W,isTime:!1}),ge})};function O(){!i||!A.current||Ta(bx(Ge($e(),`chats/${A.current}`),Tx("timestamp"))).then(Z=>{let se={};Z.forEach(W=>{const le=W.val();le.lida===!1&&le.remetente!==i.uid&&(se[W.key+"/lida"]=!0)}),Object.keys(se).length>0&&ap(Ge($e(),`chats/${A.current}`),se).then(()=>{hv()})})}function j(){if(!i||!v)return;const Z=Ge($e(),`chats/${A.current}/typing`);function se(W){let le=!1;W.forEach(Ee=>{Ee.key!==i.uid&&Ee.val()===!0&&(le=!0)});const ge=document.getElementById("chat-messages");let pe=document.getElementById("typing-indicator");if(le){if(!pe){pe=document.createElement("div"),pe.id="typing-indicator",pe.classList.add("message-bubble"),pe.style.backgroundColor="gray",pe.style.color="white",pe.style.marginRight="auto",pe.style.padding="0px 0px 0px 0px",pe.style.borderRadius="15px",pe.style.maxWidth="fit-content",pe.style.position="relative",pe.style.fontStyle="italic",pe.innerHTML='<img src="static/TD.gif" alt="Digitando..." style="width:40px; height:30px;">';let Ee=document.createElement("div");Ee.id="typing-container",Ee.style.display="flex",Ee.style.alignItems="center",Ee.style.margin="10px 0",lv(ov(Mm(e.current,"usuarios"),av("uid","==",v.uid))).then(Ae=>{const mt=Ae.docs[0].data();let Ht=document.createElement("img");Ht.src=mt.fotoPerfil?Lr(mt.fotoPerfil):"static/avatar.png",Ht.style.width="40px",Ht.style.height="40px",Ht.style.borderRadius="50%",Ht.style.objectFit="cover",Ht.style.marginRight="10px",Ee.appendChild(Ht),Ee.appendChild(pe),ge.appendChild(Ee),ge.scrollTop=ge.scrollHeight})}}else pe&&pe.parentElement.remove()}cp(Z,se)}function M(){if(!(!i||!v)){if(!navigator.mediaDevices||!window.MediaRecorder){n.current("Seu navegador não suporta gravação de áudio.");return}if(P){Ze();return}navigator.mediaDevices.getUserMedia({audio:!0}).then(Z=>{const se=document.getElementById("gravador-container");se?se.style.display="flex":be(),S.current.audioSeconds=0,ne(),S.current.audioTimer=setInterval(ne,1e3),S.current.mediaRecorder=new MediaRecorder(Z),S.current.audioChunks=[],S.current.mediaRecorder.ondataavailable=W=>{W.data.size>0&&S.current.audioChunks.push(W.data)},S.current.mediaRecorder.onstop=()=>{const W=new Blob(S.current.audioChunks,{type:"audio/wav"});ke(W)},S.current.mediaRecorder.start(),D(!0)}).catch(Z=>{console.error("Erro ao acessar o microfone:",Z),n.current("Não foi possível acessar o microfone.")})}}function Ze(){if(!S.current.mediaRecorder||S.current.mediaRecorder.state==="inactive")return;clearInterval(S.current.audioTimer),S.current.mediaRecorder.stop(),D(!1),S.current.mediaRecorder.stream&&S.current.mediaRecorder.stream.getTracks().forEach(se=>se.stop());const Z=document.getElementById("gravador-container");Z&&(Z.style.display="none")}function yt(){if(!S.current.mediaRecorder||S.current.mediaRecorder.state==="inactive")return;S.current.mediaRecorder.onstop=null,clearInterval(S.current.audioTimer),S.current.mediaRecorder.stop(),D(!1),S.current.audioChunks=[],S.current.mediaRecorder.stream&&S.current.mediaRecorder.stream.getTracks().forEach(W=>W.stop());const Z=document.getElementById("gravador-container");Z&&(Z.style.display="none");const se=document.getElementById("audio-record-btn");se&&(se.innerHTML='<i class="fa-solid fa-microphone"></i>',se.classList.remove("recording"),se.title="Gravar mensagem de voz")}function ne(){S.current.audioSeconds++;const Z=Math.floor(S.current.audioSeconds/60),se=S.current.audioSeconds%60,W=`${Z.toString().padStart(2,"0")}:${se.toString().padStart(2,"0")}`,le=document.getElementById("tempo-gravacao");le&&(le.textContent=W),S.current.audioSeconds>=180&&Ze()}function be(){const Z=document.getElementById("chat-container")||document.body,se=document.createElement("div");se.id="gravador-container",se.style.display="flex",se.style.alignItems="center",se.style.justifyContent="space-between",se.style.backgroundColor="#f0f0f0",se.style.padding="10px 15px",se.style.borderRadius="10px",se.style.margin="10px 0",se.style.gap="10px",se.style.position="fixed",se.style.bottom="70px",se.style.left="50%",se.style.transform="translateX(-50%)",se.style.width="80%",se.style.maxWidth="400px",se.style.zIndex="100";const W=document.createElement("div");W.innerHTML='<i class="fa-solid fa-circle"></i>',W.style.color="red",W.style.fontSize="14px",W.style.animation="pulse 1.5s infinite ease-in-out";const le=document.createElement("div");le.id="tempo-gravacao",le.textContent="00:00",le.style.fontFamily="monospace",le.style.fontSize="16px",le.style.fontWeight="bold";const ge=document.createElement("div");ge.textContent="Áudios podem ter no máximo 3 minutos.",ge.style.fontSize="12px",ge.style.color="#666",ge.style.marginTop="5px",ge.style.textAlign="center",ge.style.width="100%";const pe=document.createElement("div");pe.style.display="flex",pe.style.gap="15px";const Ee=document.createElement("button");Ee.innerHTML='<i class="fa-solid fa-check"></i>',Ee.style.border="none",Ee.style.backgroundColor="#248232",Ee.style.color="white",Ee.style.borderRadius="50%",Ee.style.width="35px",Ee.style.height="35px",Ee.style.display="flex",Ee.style.alignItems="center",Ee.style.justifyContent="center",Ee.style.cursor="pointer",Ee.title="Enviar",Ee.onclick=Ze;const Ae=document.createElement("button");Ae.innerHTML='<i class="fa-solid fa-times"></i>',Ae.style.border="none",Ae.style.backgroundColor="#e53935",Ae.style.color="white",Ae.style.borderRadius="50%",Ae.style.width="35px",Ae.style.height="35px",Ae.style.display="flex",Ae.style.alignItems="center",Ae.style.justifyContent="center",Ae.style.cursor="pointer",Ae.title="Cancelar",Ae.onclick=yt,pe.appendChild(Ee),pe.appendChild(Ae),se.appendChild(W),se.appendChild(le),se.appendChild(ge),se.appendChild(pe),Z.appendChild(se)}function ke(Z){if(!i||!v||!Z)return;const se=`audio_${i.uid}_${Date.now()}.wav`,W=zi(qi(),`chat_audios/${A.current}/${se}`),le=document.createElement("div");le.style.width="0%",le.style.height="4px",le.style.backgroundColor="#4CAF50",le.style.position="fixed",le.style.top="0",le.style.left="0",le.style.zIndex="1000",document.body.appendChild(le);const ge=rh(W,Z);ge.on("state_changed",pe=>{const Ee=pe.bytesTransferred/pe.totalBytes*100;le.style.width=`${Ee}%`},pe=>{console.error("Erro ao fazer upload do áudio:",pe),n.current("Não foi possível enviar a mensagem de voz."),document.body.removeChild(le)},()=>{Mr(ge.snapshot.ref).then(pe=>{const Ee=F.messageInput.current?F.messageInput.current.textContent.trim():"",Ae={remetente:i.uid,texto:Ee,audio:{url:pe,duracao:S.current.audioSeconds},timestamp:Date.now(),lida:!1};return Dr(Ge($e(),`chats/${A.current}`),Ae)}).then(()=>{F.messageInput.current.textContent="",document.body.removeChild(le),O()}).catch(pe=>{console.error("Erro ao salvar mensagem de áudio:",pe),n.current("Não foi possível enviar a mensagem de voz."),document.body.contains(le)&&document.body.removeChild(le)})})}const st=Z=>{const se=Z.target.files[0];if(!se)return;const W=["image/jpeg","image/png","image/gif","image/webp"],le=["video/mp4","video/webm","video/ogg"],ge=20*1024*1024;if(W.includes(se.type)){U(Z);return}else if(le.includes(se.type)){ce(Z);return}if(se.size>ge){n.current("O tamanho do arquivo não pode ser maior que 20MB.");return}const pe=F.messageInput.current?F.messageInput.current.textContent.trim():"",Ee=zi(qi(),`chat_files/${A.current}/${i.uid}_${Date.now()}_${se.name}`);ih(Ee,se).then(Ae=>Mr(Ae.ref)).then(Ae=>{const mt={remetente:i.uid,texto:pe,arquivo:{url:Ae,nome:se.name,tipo:se.type,tamanho:se.size},timestamp:fo()};return Dr(Ge($e(),`chats/${A.current}`),mt)}).then(()=>{F.fileInput.current.value="",F.messageInput.current&&(F.messageInput.current.textContent="")}).catch(Ae=>{console.error("Erro no upload do arquivo:",Ae),n.current("Não foi possível enviar o arquivo.")})};function U(Z){const se=Z.target.files[0];if(!se)return;const W=["image/jpeg","image/png","image/gif","image/webp"],le=5*1024*1024;if(!W.includes(se.type)){n.current("Apenas suportamos imagens JPEG, PNG, GIF e WebP.");return}if(se.size>le){n.current("A imagem não pode ser maior que 5MB.");return}const ge=F.messageInput.current?F.messageInput.current.textContent.trim():"",pe=zi(qi(),`chat_images/${A.current}/${i.uid}_${Date.now()}_${se.name}`),Ee=document.createElement("div");Ee.style.width="0%",Ee.style.height="4px",Ee.style.backgroundColor="#4CAF50",Ee.style.position="fixed",Ee.style.top="0",Ee.style.left="0",Ee.style.zIndex="1000",document.body.appendChild(Ee),rh(pe,se).then(Ae=>{const mt=Ae.bytesTransferred/Ae.totalBytes*100;return Ee.style.width=`${mt}%`,Mr(Ae.ref)}).then(Ae=>{const mt={remetente:i.uid,texto:ge,imagem:Ae,timestamp:Date.now(),lida:!1};return Dr(Ge($e(),`chats/${A.current}`),mt)}).then(()=>{Z.target.value="",F.messageInput.current&&(F.messageInput.current.textContent=""),document.body.removeChild(Ee),O()}).catch(Ae=>{console.error("Erro no upload da imagem:",Ae),n.current("Não foi possível enviar a imagem."),document.body.contains(Ee)&&document.body.removeChild(Ee)})}function ce(Z){const se=Z.target.files[0];if(!se)return;const W=20*1024*1024;if(!["video/mp4","video/webm","video/ogg"].includes(se.type)){n.current("Apenas suportamos vídeos MP4, WebM ou OGG.");return}if(se.size>W){n.current("O tamanho do vídeo não pode ser maior que 20MB.");return}const ge=F.messageInput.current?F.messageInput.current.textContent.trim():"",pe=zi(qi(),`chat_videos/${A.current}/${i.uid}_${Date.now()}_${se.name}`),Ee=document.createElement("div");Ee.style.width="0%",Ee.style.height="4px",Ee.style.backgroundColor="#4CAF50",Ee.style.position="fixed",Ee.style.top="0",Ee.style.left="0",Ee.style.zIndex="1000",document.body.appendChild(Ee),rh(pe,se).then(Ae=>{const mt=Ae.bytesTransferred/Ae.totalBytes*100;return Ee.style.width=`${mt}%`,Mr(Ae.ref)}).then(Ae=>{const mt={remetente:i.uid,texto:ge,video:Ae,timestamp:Date.now(),lida:!1};return Dr(Ge($e(),`chats/${A.current}`),mt)}).then(()=>{Z.target.value="",F.messageInput.current&&(F.messageInput.current.textContent=""),document.body.removeChild(Ee),O()}).catch(Ae=>{console.error("Erro no upload do vídeo:",Ae),n.current("Não foi possível enviar o vídeo."),document.body.contains(Ee)&&document.body.removeChild(Ee)})}const we=V.useCallback(()=>{const Z=document.getElementById("chat-messages");Z&&(Z.scrollTop=Z.scrollHeight)},[]),me=()=>{p(F.messageInput.current.innerText)};return V.useEffect(()=>{we()},[c,f]),V.useEffect(()=>{i&&(A.current=Number(location.pathname.split("/")[2]),s.send("/chat",{operation:"get_messages",id:A.current}).then(Z=>{if(Z.result){const se=JSON.parse(Z.chat.users),W=Object.keys(se),le=i.uid==W[0]?W[1]:W[0],ge={...se[le],uid:le};ge.logo=ge.logo?Lr(ge.logo):jn,T(ge),_.current={...se[i.uid],uid:i.uid},A.current=Z.chat.id;const pe=[];for(const Ae of Z.messages){Ae.date=new Date(Ae.time*1e3);const mt=pe.length>0?pe[pe.length-1].date:null;if(!mt||OA(Ae.date,mt)){const Ht=kA();pe.push({isTime:!0,date:Ae.date,id:Ht,time:Ae.time})}pe.push({...Ae,mode:Ae.visualized+1,isTime:!1,time:void 0})}h(pe);const Ee=document.getElementById("chat-box");Ee.style.display="flex",O(),j()}else a("/chats")}))},[location.pathname,i]),E.jsxs("div",{id:"chat-box",style:{display:"none"},children:[E.jsx("div",{id:"user-info",children:v?E.jsxs(E.Fragment,{children:[E.jsx("img",{src:v.logo,id:"user-logo"}),E.jsx("div",{id:"user-name",children:v.name})]}):E.jsx(E.Fragment,{})}),E.jsx("div",{id:"chat-messages",children:c.map(Z=>{const se=Z.audio?`${String(Math.floor(Z.audio.duracao/60)).padStart(2,"0")}:${String(Z.audio.duracao%60).padStart(2,"0")}`:"";return Z.isTime?E.jsx("div",{className:"message-time",children:vF(Z.date)}):E.jsx("div",{className:"message-item "+(Z.uid==i.uid?"me":"you"),style:{display:"flex",alignItems:"center",margin:"10px 0"},children:E.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[E.jsxs("div",{className:"message-bubble",style:{color:"white",padding:"8px",borderRadius:"15px",maxWidth:"fit-content"},children:[Z.imagem&&E.jsx("div",{style:{margin:"5px 0"},children:E.jsx("img",{src:Z.imagem,style:{maxWidth:"250px",maxHeight:"250px",borderRadius:"10px",cursor:"pointer"},onClick:()=>re(Z.imagem)})}),Z.video&&E.jsx("div",{style:{margin:"5px 0"},children:E.jsx("video",{src:Z.video,controls:!0,style:{maxWidth:"250px",maxHeight:"250px",borderRadius:"10px"}})}),Z.audio&&E.jsxs("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",backgroundColor:"#1b5c2438",borderRadius:"10px",padding:"8px"},children:[E.jsx("audio",{id:`audio-${Z.id}`,src:Z.audio.url,preload:"auto"}),E.jsx("button",{onClick:()=>G(`audio-${Z.id}`,`play-btn-${Z.id}`),id:`play-btn-${Z.id}`,style:{background:"none",border:"none",fontSize:"20px",color:"green",cursor:"pointer"},children:E.jsx("i",{className:"fa-solid fa-play"})}),E.jsx("div",{style:{flexGrow:1,height:"4px",backgroundColor:"#e0e0e0",borderRadius:"2px",margin:"0 10px",cursor:"pointer"},onClick:W=>ie(`audio-${Z.id}`,W.currentTarget),children:E.jsx("div",{style:{height:"100%",width:"0%",backgroundColor:"#248232"}})}),E.jsx("div",{style:{fontSize:"12px",color:"white"},children:se})]}),Z.arquivo&&E.jsxs("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",backgroundColor:"#1b5c2438",borderRadius:"10px",padding:"8px",cursor:"pointer"},children:[E.jsx("div",{style:{marginRight:"10px",fontSize:"24px"},children:ye(Z.arquivo.tipo)}),E.jsxs("div",{children:[E.jsx("strong",{children:Z.arquivo.nome}),E.jsx("div",{style:{fontSize:"12px",color:"white"},children:k(Z.arquivo.tamanho||0)})]}),E.jsxs("a",{href:Z.arquivo.url,target:"_blank",download:Z.arquivo.nome,style:{marginLeft:"auto",color:"white",textDecoration:"none"},children:[E.jsx("i",{className:"fa-solid fa-download"})," Baixar"]})]}),Z.text&&E.jsx("div",{className:"message-text",style:{whiteSpace:"pre-wrap"},children:Z.text}),E.jsxs("div",{className:"message-bottom",children:[E.jsx("div",{style:{textAlign:"right",fontSize:"small"},children:dv(Z.date)}),E.jsx("i",{className:"message-check fa-solid "+["","fa-check","fa-check-double"][Z.mode]})]})]}),E.jsx("div",{style:{cursor:"pointer",fontSize:"16px",padding:"3px",position:"absolute",right:0,bottom:"-18px"},onClick:()=>z()})]})},Z.id)})}),E.jsx("div",{id:"typingIndicatorContainer",style:{display:"none"}}),E.jsxs("div",{id:"chat-input",className:c.length>0?"loaded":"",children:[E.jsx("input",{type:"file",ref:F.fileInput,id:"fileUpload",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar,image/*,video/*",style:{display:"none"},onChange:st}),E.jsx("div",{onInput:me,onKeyDown:R,onBlur:I,contentEditable:!0,ref:F.messageInput,className:"message-input"}),(f==""||f==`
`)&&E.jsx("div",{className:"message-input is-empty",children:"Digite sua mensagem..."}),E.jsx("i",{onClick:N,className:"fa-solid fa-paper-plane send-item"+(f.trim()==""?" disabled":""),"aria-hidden":"true"}),E.jsx("i",{onClick:()=>F.fileInput.current.click(),className:"fa-solid fa-paperclip send-item","aria-hidden":"true"}),E.jsx("i",{onClick:M,id:"audio-record-btn",title:"Gravar mensagem voz",className:"fa-solid  attachment-btn send-item "+(P?"fa-stop recording":"fa-microphone")})]})]})},gq=V.memo(pq);function _q(){const{socket:n,mobile:e,usuarioLogado:t}=oi(),i=hr(),[s,a]=V.useState([]),c=V.useRef(null),h=()=>{t&&n.send("/chats",{}).then(f=>{if(f.result){const p=f.results;a(p.map(_=>({id:_.id,logo:_.logo?Lr(_.logo):jn,name:_.name,message_time:_.message_time,message_text:_.message_text})))}})};return V.useEffect(()=>{const f=i.pathname==="/chats"?"chats":"chat";(e&&f!=c.current&&f=="chats"||!e)&&h(),c.current=f},[e,i.pathname,t]),E.jsxs("section",{id:"history",children:[E.jsxs("div",{id:"top-chats",children:[E.jsx("span",{className:"icone","aria-hidden":"true",children:E.jsx("i",{className:"fa-solid fa-comment-dots","aria-hidden":"true",style:{margin:"0 auto"}})}),E.jsx("h2",{id:"label-chats",children:"Conversas"})]}),E.jsx("div",{id:"friendList",children:s.map((f,p)=>E.jsxs(Ft,{className:"chat-item-link",to:`/chat/${f.id}`,children:[E.jsx("img",{className:"chat-item-logo",src:f.logo}),E.jsx("div",{children:f.name})]},p))})]})}const yq=V.memo(_q);function DA(){const{mobile:n}=oi(),e=hr(),t=V.useRef(null);return E.jsxs("div",{id:"chats-page",className:"page",children:[E.jsxs("div",{className:"chatdiv",children:[!n||n&&e.pathname=="/chats"?E.jsx(yq,{}):E.jsx(E.Fragment,{}),E.jsx("section",{id:"chat",children:e.pathname.startsWith("/chat/")?E.jsx(gq,{showPopup:t}):E.jsx(E.Fragment,{})})]}),E.jsx(Ic,{showPopup:t})]})}const Yf="/assets/default_comunidade-BJpLMTtg.png";function vq(){const{db:n,usuarioLogado:e}=oi(),t=Ls(),i=V.useRef(null),s=V.useRef(null),a=V.useRef({}),c=V.useRef(null),h=V.useRef(null),f=V.useRef(null),p=V.useRef(null),_=V.useRef(!1),v=V.useRef([]),[T,A]=V.useState([]),[S,P]=V.useState(0),[D,F]=V.useState({show:!1,fotoPerfil:jn,nome:"",isUserCreator:!1,targetIsAdmin:!1,left:"0",top:"0"}),z=V.useRef({audioSeconds:0,audioTimer:null,mediaRecorder:null,audioChunks:[]}),[G,re]=V.useState(!1),ie={fileInput:V.useRef(null),menu:V.useRef(null),messageInput:V.useRef(null)},ye=X=>{A(X.map(q=>({fotoPerfil:q.fotoPerfil,nome:q.nome,isCreator:q.isCreator,id:q.id,isAdmin:q.isAdmin})))},k=X=>{if(X===s){i.current("Não é possível silenciar o líder da comunidade.");return}if(e.uid!==s.current&&a.current[e.uid]&&a.current[X]){i.current("Você não tem permissão para fazer isso.");return}const q=prompt("Por quanto tempo deseja silenciar este membro? (em horas)");if(q===null)return;const Ce=parseInt(q);if(isNaN(Ce)||Ce<=0){i.current("Insira um número válido de horas.");return}const Re=new Date,Se=new Date(Re.getTime()+Ce*60*60*1e3);uv(ve=>{bs(Ge($e(),`comunidades/${f.current}/membros/${X}/muted`),{until:Se.getTime(),by:e.uid,reason:"Silenciado por administrador",timestamp:fo()}).then(()=>{i.current(`Membro silenciado por ${Ce} hora(s).`)}).catch(fe=>{console.error("Erro ao silenciar membro:",fe),i.current("Não foi possível silenciar o membro.")})})},R=X=>{const q=document.getElementById("membersList");if(q.innerHTML="",!X.membros){q.innerHTML='<div class="no-members">Nenhum membro encontrado</div>';return}const Ce=Object.keys(X.membros);lv(ov(Mm(n.current,"usuarios"),av("uid","in",Ce))).then(Re=>{h.current=Re.docs.map(Se=>{const ve=Se.data();return{id:ve.uid,...ve}}),h.current.sort((Se,ve)=>Se.id===s?-1:ve.id===s?1:a.current[Se.id]&&!a.current[ve.id]?-1:!a.current[Se.id]&&a.current[ve.id]?1:(Se.nome||"").localeCompare(ve.nome||"")),ye(h.current),P(h.current.length)}).catch(Re=>{console.error("Erro ao carregar membros:",Re),q.innerHTML='<div class="error-message">Erro ao carregar membros</div>'})},I=()=>{Ta(Ge($e(),"comunidades/"+f.current)).then(X=>{if(X.exists()){const q=X.val();document.getElementById("comunidadeTitulo").innerText=q.nome||"Comunidade",document.getElementById("comunidadeDescricao").innerText=q.descricao||"Sem descrição",q.tags?(document.getElementById("comunidadeTags").style.display="block",document.getElementById("comunidadeTags").querySelector("span").innerText=q.tags):document.getElementById("comunidadeTags").style.display="none",q.imagem?document.getElementById("comunidadeImagem").src=q.imagem:document.getElementById("comunidadeImagem").src="static/default_comunidade.png",s.current=q.criador,q.admins&&(a.current=q.admins),c.current=e.uid===s.current||a&&a.current[String(e.uid)],R(q)}else i.current("Comunidade não encontrada."),window.location.href="index.html"}).catch(X=>{console.error("Erro ao carregar comunidade:",X),i.current("Erro ao carregar dados da comunidade.")})};function N(){document.getElementById("bannerModal").style.display="none"}function O(){if(!ie.fileInput.current.files||ie.fileInput.current.files.length===0){i.current("Selecione uma imagem para o banner.");return}const X=ie.fileInput.current.files[0];ih(zi(qi(),`comunidades/${f.current}/banner/${X.name}`),X).then(q=>Mr(q.ref)).then(q=>ap(Ge($e(),`comunidades/${f.current}`),{banner:q})).then(()=>{N(),j()}).catch(q=>{console.error("Erro ao atualizar banner:",q),i.current("Erro ao atualizar banner.")})}function j(){Ta(Ge($e(),`comunidades/${f.current}/banner`)).then(X=>{const q=X.val()||"https://via.placeholder.com/300x150";document.getElementById("communityBanner").style.backgroundImage=`url('${q}')`}).catch(X=>{console.error("Erro ao carregar banner:",X)})}function M(){if(!(!e||!f.current)){if(!navigator.mediaDevices||!window.MediaRecorder){i.current("Seu navegador não suporta gravação de áudio.");return}if(G){Ze();return}navigator.mediaDevices.getUserMedia({audio:!0}).then(X=>{const q=document.getElementById("gravador-container");q?q.style.display="flex":be(),z.current.audioSeconds=0,ne(),z.current.audioTimer=setInterval(ne,1e3),z.current.mediaRecorder=new MediaRecorder(X),z.current.audioChunks=[],z.current.mediaRecorder.ondataavailable=Ce=>{Ce.data.size>0&&z.current.audioChunks.push(Ce.data)},z.current.mediaRecorder.onstop=()=>{const Ce=new Blob(z.current.audioChunks,{type:"audio/wav"});ke(Ce)},z.current.mediaRecorder.start(),re(!0)}).catch(X=>{console.error("Erro ao acessar o microfone:",X),i.current("Não foi possível acessar o microfone.")})}}function Ze(){if(!z.current.mediaRecorder||z.current.mediaRecorder.state==="inactive")return;clearInterval(z.current.audioTimer),z.current.mediaRecorder.stop(),re(!1),z.current.mediaRecorder.stream&&z.current.mediaRecorder.stream.getTracks().forEach(q=>q.stop());const X=document.getElementById("gravador-container");X&&(X.style.display="none")}function yt(){if(!z.current.mediaRecorder||z.current.mediaRecorder.state==="inactive")return;z.current.mediaRecorder.onstop=null,clearInterval(z.current.audioTimer),z.current.mediaRecorder.stop(),re(!1),z.current.audioChunks=[],z.current.mediaRecorder.stream&&z.current.mediaRecorder.stream.getTracks().forEach(Ce=>Ce.stop());const X=document.getElementById("gravador-container");X&&(X.style.display="none");const q=document.getElementById("audio-record-btn");q&&(q.innerHTML='<i class="fa-solid fa-microphone"></i>',q.classList.remove("recording"),q.title="Gravar mensagem de voz")}function ne(){z.current.audioSeconds++;const X=Math.floor(z.current.audioSeconds/60),q=z.current.audioSeconds%60,Ce=`${X.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`,Re=document.getElementById("tempo-gravacao");Re&&(Re.textContent=Ce),z.current.audioSeconds>=180&&Ze()}function be(){const X=document.getElementById("chat-container")||document.body,q=document.createElement("div");q.id="gravador-container",q.style.display="flex",q.style.alignItems="center",q.style.justifyContent="space-between",q.style.backgroundColor="#f0f0f0",q.style.padding="10px 15px",q.style.borderRadius="10px",q.style.margin="10px 0",q.style.gap="10px",q.style.position="fixed",q.style.bottom="70px",q.style.left="50%",q.style.transform="translateX(-50%)",q.style.width="80%",q.style.maxWidth="400px",q.style.zIndex="100";const Ce=document.createElement("div");Ce.innerHTML='<i class="fa-solid fa-circle"></i>',Ce.style.color="red",Ce.style.fontSize="14px",Ce.style.animation="pulse 1.5s infinite ease-in-out";const Re=document.createElement("div");Re.id="tempo-gravacao",Re.textContent="00:00",Re.style.fontFamily="monospace",Re.style.fontSize="16px",Re.style.fontWeight="bold";const Se=document.createElement("div");Se.textContent="Áudios podem ter no máximo 3 minutos.",Se.style.fontSize="12px",Se.style.color="#666",Se.style.marginTop="5px",Se.style.textAlign="center",Se.style.width="100%";const ve=document.createElement("div");ve.style.display="flex",ve.style.gap="15px";const fe=document.createElement("button");fe.innerHTML='<i class="fa-solid fa-check"></i>',fe.style.border="none",fe.style.backgroundColor="#248232",fe.style.color="white",fe.style.borderRadius="50%",fe.style.width="35px",fe.style.height="35px",fe.style.display="flex",fe.style.alignItems="center",fe.style.justifyContent="center",fe.style.cursor="pointer",fe.title="Enviar",fe.onclick=Ze;const Ie=document.createElement("button");Ie.innerHTML='<i class="fa-solid fa-times"></i>',Ie.style.border="none",Ie.style.backgroundColor="#e53935",Ie.style.color="white",Ie.style.borderRadius="50%",Ie.style.width="35px",Ie.style.height="35px",Ie.style.display="flex",Ie.style.alignItems="center",Ie.style.justifyContent="center",Ie.style.cursor="pointer",Ie.title="Cancelar",Ie.onclick=yt,ve.appendChild(fe),ve.appendChild(Ie),q.appendChild(Ce),q.appendChild(Re),q.appendChild(Se),q.appendChild(ve),X.appendChild(q)}function ke(X){if(!e||!f.current||!X)return;const q=`audio_${e.uid}_${Date.now()}.wav`,Ce=zi(qi(),`chat_audios/${f.current}/${q}`),Re=document.createElement("div");Re.style.width="0%",Re.style.height="4px",Re.style.backgroundColor="#4CAF50",Re.style.position="fixed",Re.style.top="0",Re.style.left="0",Re.style.zIndex="1000",document.body.appendChild(Re);const Se=rh(Ce,X);Se.on("state_changed",ve=>{const fe=ve.bytesTransferred/ve.totalBytes*100;Re.style.width=`${fe}%`},ve=>{console.error("Erro ao fazer upload do áudio:",ve),i.current("Não foi possível enviar a mensagem de voz."),document.body.removeChild(Re)},()=>{Mr(Se.snapshot.ref).then(ve=>{const fe=ie.messageInput.current?ie.messageInput.current.value.trim():"",Ie={remetente:e.uid,texto:fe,audio:{url:ve,duracao:z.current.audioSeconds},timestamp:Date.now(),lida:!1};return Dr(Ge($e(),`comunidades/${f.current}/mensagens`),Ie)}).then(()=>{ie.messageInput.current.value="",document.body.removeChild(Re)}).catch(ve=>{console.error("Erro ao salvar mensagem de áudio:",ve),i.current("Não foi possível enviar a mensagem de voz."),document.body.contains(Re)&&document.body.removeChild(Re)})})}const st=X=>{const q=X.target.files[0];if(!q)return;const Ce=["image/jpeg","image/png","image/gif","image/webp"],Re=["video/mp4","video/webm","video/ogg"],Se=20*1024*1024;if(Ce.includes(q.type)){U(X);return}else if(Re.includes(q.type)){ce(X);return}if(q.size>Se){i.current("O tamanho do arquivo não pode ser maior que 20MB.");return}const ve=document.getElementById("messageInput"),fe=ve?ve.value.trim():"",Ie=zi(qi(),`chat_files/${f.current}/${e.uid}_${Date.now()}_${q.name}`);ih(Ie,q).then(vt=>Mr(vt.ref)).then(vt=>{const pt={remetente:e.uid,texto:fe,arquivo:{url:vt,nome:q.name,tipo:q.type,tamanho:q.size},timestamp:fo()};return Dr(Ge($e(),`comunidades/${f.current}/mensagens`),pt)}).then(()=>{ie.fileInput.current.value="",ve&&(ve.value="")}).catch(vt=>{console.error("Erro no upload do arquivo:",vt),i.current("Não foi possível enviar o arquivo.")})};function U(X){const q=X.target.files[0];if(!q)return;const Ce=["image/jpeg","image/png","image/gif","image/webp"],Re=5*1024*1024;if(!Ce.includes(q.type)){i.current("Apenas suportamos imagens JPEG, PNG, GIF e WebP.");return}if(q.size>Re){i.current("A imagem não pode ser maior que 5MB.");return}const Se=document.getElementById("messageInput"),ve=Se?Se.value.trim():"",fe=zi(qi(),`chat_images/${f.current}/${e.uid}_${Date.now()}_${q.name}`);ih(fe,q).then(Ie=>Mr(Ie.ref)).then(Ie=>{const vt={remetente:e.uid,texto:ve,imagem:Ie,timestamp:fo()};return Dr(Ge($e(),`comunidades/${f.current}/mensagens`),vt)}).then(()=>{ie.fileInput.current.value="",Se&&(Se.value="")}).catch(Ie=>{})}function ce(X){const q=X.target.files[0];if(!q)return;const Ce=20*1024*1024;if(!["video/mp4","video/webm","video/ogg"].includes(q.type)){i.current("Apenas suportamos vídeos MP4, WebM ou OGG.");return}if(q.size>Ce){i.current("O tamanho do vídeo não pode ser maior que 20MB.");return}const Se=document.getElementById("messageInput"),ve=Se?Se.value.trim():"",fe=zi(qi(),`chat_videos/${f.current}/${e.uid}_${Date.now()}_${q.name}`),Ie=document.createElement("div");Ie.style.width="0%",Ie.style.height="4px",Ie.style.backgroundColor="#4CAF50",Ie.style.position="fixed",Ie.style.top="0",Ie.style.left="0",Ie.style.zIndex="1000",document.body.appendChild(Ie);const vt=rh(fe,q);vt.on("state_changed",pt=>{const et=pt.bytesTransferred/pt.totalBytes*100;Ie.style.width=`${et}%`},pt=>{console.error("Erro no upload do vídeo:",pt),i.current("Não foi possível enviar o vídeo."),document.body.contains(Ie)&&document.body.removeChild(Ie)},async()=>{const pt=await Mr(vt.snapshot.ref),et={remetente:e.uid,texto:ve,video:pt,timestamp:fo()};return ie.fileInput.current.value="",Se&&(Se.value=""),document.body.removeChild(Ie),Dr(Ge($e(),`comunidades/${f.current}/mensagens`),et)})}function we(){if(!e||!f.current)return;const X=document.getElementById("messageInput");if(!X){console.error("Elemento messageInput não encontrado");return}const q=X.value.trim();q!==""&&Ta(Ge($e(),`comunidades/${f.current}/membros/${e.uid}/muted`)).then(Ce=>{if(Ce.exists()){const Se=Ce.val(),ve=new Date().getTime();if(Se.until>ve){const fe=new Date(Se.until-ve),Ie=Math.floor(fe/(60*60*1e3)),vt=Math.floor(fe%(60*60*1e3)/(60*1e3));i.current(`Você está silenciado e não pode enviar mensagens. Tempo restante: ${Ie}h ${vt}m`);return}else rr(Ge($e(),`comunidades/${f.current}/membros/${e.uid}/muted`))}const Re={remetente:e.uid,texto:q,timestamp:fo()};Dr(Ge($e(),`comunidades/${f.current}/mensagens`),Re).then(()=>{X.value="";const Se=document.getElementById("chat-messages");Se&&(Se.scrollTop=Se.scrollHeight)}).catch(Se=>{console.error("Erro ao enviar mensagem:",Se),i.current("Não foi possível enviar a mensagem.")})})}function me(){return Ta(Ge($e(),"comunidades/"+f.current)).then(X=>{if(!X.exists())return!1;const q=X.val();return q.privacidade==="publica"?!0:q.criador===e.uid||q.membros&&q.membros[e.uid]}).catch(X=>(console.error("Erro ao verificar acesso:",X),!1))}function Z(X){return new URLSearchParams(window.location.search).get(X)}function se(X){const q=document.getElementById("messageInput"),Ce=document.querySelector("#chat-input button");q&&(X?(q.removeAttribute("disabled"),q.placeholder="Digite sua mensagem..."):(q.setAttribute("disabled","disabled"),q.placeholder="Entre na comunidade para enviar mensagens...")),Ce&&(X?(Ce.removeAttribute("disabled"),Ce.style.opacity="1"):(Ce.setAttribute("disabled","disabled"),Ce.style.opacity="0.5"))}function W(){!e||!f.current||Ta(Ge($e(),`comunidades/${f.current}`)).then(X=>{if(!X.exists())return;if(X.val().criador===e.uid){document.getElementById("botao-entrar-container").style.display="none",se(!0);return}Ta(Ge($e(),`comunidades/${f.current}/membros/${e.uid}`)).then(Re=>{Re.exists()?(document.getElementById("botao-entrar-container").style.display="none",se(!0)):(document.getElementById("botao-entrar-container").style.display="block",se(!1),document.getElementById("botao-entrar").onclick=le)})})}function le(){!e||!f.current||bs(Ge($e(),`comunidades/${f.current}/membros/${e.uid}`),{entrou:fo()}).then(()=>{document.getElementById("botao-entrar-container").style.display="none",se(!0)}).catch(X=>{console.error("Erro ao entrar na comunidade:",X),i.current("Não foi possível entrar na comunidade.")})}function ge(){const X=document.getElementById("chat-messages");if(!X){console.error("Elemento chat-messages não encontrado");return}let q=document.getElementById("barra-opcoes-selecao");if(!q){q=document.createElement("div"),q.id="barra-opcoes-selecao",q.style.position="fixed",q.style.bottom="0",q.style.left="0",q.style.right="0",q.style.backgroundColor="#333",q.style.color="white",q.style.padding="10px",q.style.display="none",q.style.justifyContent="space-between",q.style.alignItems="center",q.style.zIndex="1000";const Se=document.createElement("span");Se.id="contador-selecionadas",Se.textContent="0 selecionadas";const ve=document.createElement("button");ve.textContent="Excluir",ve.style.backgroundColor="red",ve.style.color="white",ve.style.border="none",ve.style.padding="5px 10px",ve.style.borderRadius="5px",ve.style.cursor="pointer",ve.onclick=ai;const fe=document.createElement("button");fe.textContent="Cancelar",fe.style.backgroundColor="gray",fe.style.color="white",fe.style.border="none",fe.style.padding="5px 10px",fe.style.borderRadius="5px",fe.style.cursor="pointer",fe.onclick=Ht,q.appendChild(Se),q.appendChild(ve),q.appendChild(fe),document.body.appendChild(q)}const Ce=Ge($e(),`comunidades/${f.current}/mensagens`),Re=bx(Ce,Tx("timestamp"));cp(Re,Se=>{if(X.innerHTML="",!Se.exists()){const fe=document.createElement("div");fe.style.textAlign="center",fe.style.padding="20px",fe.style.color="#666",fe.textContent="Nenhuma mensagem enviada ainda. Seja o primeiro a enviar!",X.appendChild(fe);return}const ve=[];Se.forEach(fe=>{ve.push({id:fe.key,...fe.val()})}),ve.sort((fe,Ie)=>fe.timestamp-Ie.timestamp),ve.forEach(fe=>{const Ie=fe.id,vt=document.createElement("div");vt.style.display="flex",vt.style.alignItems="flex-start",vt.style.margin="10px 0",vt.setAttribute("data-message-id",Ie);const pt=document.createElement("img");pt.style.width="40px",pt.style.height="40px",pt.style.borderRadius="50%",pt.style.objectFit="cover",pt.style.marginRight="10px";const et=document.createElement("div");et.classList.add("message-bubble"),et.style.padding="8px",et.style.borderRadius="15px",et.style.maxWidth="70%",et.style.position="relative",et.style.wordBreak="break-word";const Xi=fe.timestamp,pr=new Date(Xi);if(fe.remetente===e.uid){const It=document.createElement("div");It.style.position="relative",It.style.display="flex",It.style.justifyContent="flex-end",It.style.width="100%",It.classList.add("mensagem-usuario"),It.setAttribute("data-message-id",Ie),et.style.backgroundColor="#248232",et.style.color="white";const Ni=dv(pr);if(fe.imagem){const Me=document.createElement("div");Me.style.maxWidth="250px",Me.style.margin="5px 0";const Ke=document.createElement("img");Ke.src=fe.imagem,Ke.style.maxWidth="100%",Ke.style.borderRadius="10px",Ke.style.cursor="pointer",Ke.onclick=()=>{const Ye=document.createElement("div");Ye.style.position="fixed",Ye.style.top="0",Ye.style.left="0",Ye.style.width="100%",Ye.style.height="100%",Ye.style.backgroundColor="rgba(0,0,0,0.8)",Ye.style.display="flex",Ye.style.justifyContent="center",Ye.style.alignItems="center",Ye.style.zIndex="1000";const Lt=document.createElement("img");Lt.src=fe.imagem,Lt.style.maxWidth="90%",Lt.style.maxHeight="90%",Lt.style.objectFit="contain",Ye.onclick=()=>document.body.removeChild(Ye),Ye.appendChild(Lt),document.body.appendChild(Ye)},Me.appendChild(Ke),et.appendChild(Me)}if(fe.video){const Me=document.createElement("div");Me.style.maxWidth="250px",Me.style.margin="5px 0",Me.style.position="relative";const Ke=document.createElement("video");Ke.src=fe.video,Ke.style.maxWidth="100%",Ke.style.borderRadius="10px",Ke.controls=!0,Ke.preload="metadata",Ke.onerror=Ye=>{console.error("Erro ao carregar vídeo:",Ye),console.error("URL do vídeo:",fe.video),Me.innerHTML=`
                        <div style="color:red; text-align:center;">
                            Erro ao carregar vídeo
                            <br>
                            <small>${fe.video}</small>
                        </div>
                        `},Me.appendChild(Ke),et.appendChild(Me)}if(fe.audio&&fe.audio.url){const Me=document.createElement("div");Me.style.display="flex",Me.style.alignItems="center",Me.style.backgroundColor="#1b5c2438",Me.style.borderRadius="10px",Me.style.padding="8px",Me.style.marginTop="5px";const Ke=document.createElement("div");Ke.style.display="flex",Ke.style.alignItems="center",Ke.style.width="40vh",Ke.style.backgroundColor="#fff",Ke.style.borderRadius="10px",Ke.style.padding="5px";const Ye=document.createElement("div");Ye.style.flexGrow="1",Ye.style.height="4px",Ye.style.backgroundColor="#e0e0e0",Ye.style.borderRadius="2px",Ye.style.marginRight="10px",Ye.style.cursor="pointer";const Lt=document.createElement("div");Lt.style.height="100%",Lt.style.width="0%",Lt.style.backgroundColor="#248232",Ye.appendChild(Lt);const ln=document.createElement("button");ln.innerHTML='<i class="fa-solid fa-play"></i>',ln.style.backgroundColor="transparent",ln.style.border="none",ln.style.fontSize="20px",ln.style.color="green",ln.style.cursor="pointer";const Xn=document.createElement("input");Xn.type="range",Xn.value="100",Xn.min="0",Xn.max="100",Xn.style.width="60px",Xn.style.marginLeft="10px";const cn=new Audio(fe.audio.url);cn.preload="auto",cn.ontimeupdate=()=>{const Ji=cn.currentTime/cn.duration*100;Lt.style.width=`${Ji}%`},cn.onended=()=>{ln.innerHTML='<i class="fa-solid fa-play"></i>'},Ye.addEventListener("click",Ji=>{const Wa=Ye.getBoundingClientRect(),Xa=(Ji.clientX-Wa.left)/Wa.width*cn.duration;cn.currentTime=Xa}),ln.onclick=()=>{cn.paused?(cn.play(),ln.innerHTML='<i class="fa-solid fa-pause"></i>'):(cn.pause(),ln.innerHTML='<i class="fa-solid fa-play"></i>')},Xn.oninput=Ji=>{cn.volume=Ji.target.value/100},Ke.appendChild(ln),Ke.appendChild(Ye),Ke.appendChild(Xn),Me.appendChild(Ke);const qo=fe.audio.duracao||0,Ut=Math.floor(qo/60),nn=qo%60,Jt=`${Ut.toString().padStart(2,"0")}:${nn.toString().padStart(2,"0")}`,wn=document.createElement("div");wn.style.marginLeft="10px",wn.style.fontSize="12px",wn.style.color="white",wn.textContent=`${Jt}`,Me.appendChild(wn),et.appendChild(Me)}if(fe.arquivo){const Me=document.createElement("div");Me.style.display="flex",Me.style.alignItems="center",Me.style.backgroundColor="#1b5c2438",Me.style.borderRadius="10px",Me.style.padding="8px",Me.style.marginTop="5px",Me.style.cursor="pointer";const Ke=document.createElement("div");switch(Ke.style.marginRight="10px",Ke.style.fontSize="24px",fe.arquivo.tipo){case"application/pdf":Ke.innerHTML='<i class="fa-solid fa-file-pdf"></i>';break;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":Ke.innerHTML='<i class="fa-solid fa-file-word"></i>';break;case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":Ke.innerHTML='<i class="fa-solid fa-chart-simple"></i>';break;case"text/plain":Ke.innerHTML='<i class="fa-solid fa-file-lines"></i>';break;case"application/zip":Ke.innerHTML='<i class="fa-solid fa-file-zipper"></i>';break;case"application/x-rar-compressed":Ke.innerHTML='<i class="fa-solid fa-file-zipper"></i>';break;default:Ke.innerHTML='<i class="fa-solid fa-file"></i>'}const Ye=document.createElement("div");Ye.innerHTML=`
                            <strong>${fe.arquivo.nome}</strong>
                            <div style="font-size: 12px; color: white;">
                            ${li(fe.arquivo.tamanho||0)}
                            </div>
                        `;const Lt=document.createElement("a");Lt.href=fe.arquivo.url,Lt.target="_blank",Lt.download=fe.arquivo.nome,Lt.style.marginLeft="auto",Lt.style.color="white",Lt.style.textDecoration="none",Lt.innerHTML='<i class="fa-solid fa-download"></i>&nbsp; Baixar',Me.appendChild(Ke),Me.appendChild(Ye),Me.appendChild(Lt),et.appendChild(Me)}if(fe.texto){const Me=document.createElement("div");Me.textContent=fe.texto,et.appendChild(Me)}const ci=document.createElement("div");ci.textContent=Ni,ci.style.textAlign="right",ci.style.fontSize="small",et.appendChild(ci);const St=document.createElement("div");St.innerHTML="⋮",St.style.cursor="pointer",St.style.fontSize="20px",St.style.padding="5px 8px",St.style.marginLeft="5px",St.style.alignSelf="flex-start",St.style.color="#333",St.style.borderRadius="50%",St.style.transition="background-color 0.2s",St.style.position="relative",St.title="Opções da mensagem",St.onmouseover=()=>{St.style.backgroundColor="#f0f0f0"},St.onmouseout=()=>{St.style.backgroundColor="transparent"};const Pt=`menu-${Ie}`,He=document.createElement("div");He.id=Pt,He.className="menu-opcoes",He.style.position="absolute",He.style.right="0",He.style.top="25px",He.style.backgroundColor="white",He.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",He.style.padding="5px 0",He.style.borderRadius="5px",He.style.zIndex="1000",He.style.display="none",He.style.minWidth="120px";const Tt=document.createElement("div");Tt.textContent="Excluir mensagem",Tt.style.padding="8px 15px",Tt.style.cursor="pointer",Tt.style.color="#E53935",Tt.style.fontSize="14px",Tt.style.transition="background-color 0.2s",Tt.onmouseover=()=>{Tt.style.backgroundColor="#f5f5f5"},Tt.onmouseout=()=>{Tt.style.backgroundColor="transparent"},Tt.onclick=Me=>{Me.stopPropagation(),fe.arquivo?Ee(Ie,fe.arquivo.url):fe.imagem?pe(Ie,fe.imagem):Ae(Ie)},St.onclick=Me=>{Me.stopPropagation(),mr(Pt)},He.appendChild(Tt),St.appendChild(He),It.appendChild(et),It.appendChild(St),vt.appendChild(It),It.addEventListener("dblclick",function(Me){Wi(this,Ie),Me.stopPropagation()}),It.addEventListener("click",function(Me){_.current&&(mt(this,Ie),Me.stopPropagation())})}else et.style.backgroundColor="#E8E8E8",et.style.color="#333",et.style.marginRight="auto",lv(ov(Mm(n.current,"usuarios"),av("uid","==",fe.remetente))).then(It=>{const Ni=It.docs.length>0?It.docs[0].data():{nome:"Usuário"};pt.src=Ni.fotoPerfil?Ni.fotoPerfil:jn,pt.alt=Ni.nome||"Usuário";const ci=dv(pr);if(fe.imagem){const Pt=document.createElement("img");Pt.src=fe.imagem,Pt.style.maxWidth="100%",Pt.style.borderRadius="10px",Pt.style.marginBottom="8px",Pt.style.cursor="pointer",Pt.onclick=()=>{const He=document.createElement("div");He.style.position="fixed",He.style.top="0",He.style.left="0",He.style.width="100%",He.style.height="100%",He.style.backgroundColor="rgba(0,0,0,0.8)",He.style.display="flex",He.style.justifyContent="center",He.style.alignItems="center",He.style.zIndex="1000";const Tt=document.createElement("img");Tt.src=fe.imagem,Tt.style.maxWidth="90%",Tt.style.maxHeight="90%",Tt.style.objectFit="contain",He.onclick=()=>document.body.removeChild(He),He.appendChild(Tt),document.body.appendChild(He)},et.appendChild(Pt)}if(fe.video){const Pt=document.createElement("div");Pt.style.maxWidth="250px",Pt.style.margin="5px 0",Pt.style.position="relative";const He=document.createElement("video");He.src=fe.video,He.style.maxWidth="100%",He.style.borderRadius="10px",He.controls=!0,He.preload="metadata",He.onerror=Tt=>{console.error("Erro ao carregar vídeo:",Tt),console.error("URL do vídeo:",fe.video),Pt.innerHTML=`
                                <div style="color:red; text-align:center;">
                                    Erro ao carregar vídeo
                                    <br>
                                    <small>${fe.video}</small>
                                </div>
                                `},Pt.appendChild(He),et.appendChild(Pt)}if(fe.texto){const Pt=document.createElement("div");Pt.textContent=fe.texto,et.appendChild(Pt)}const St=document.createElement("div");St.textContent=ci,St.style.textAlign="right",St.style.fontSize="small",et.appendChild(St)}).catch(It=>{console.error("Erro ao buscar informações do remetente:",It),pt.src=jn,pt.alt="Usuário"}),vt.appendChild(pt),vt.appendChild(et);X.appendChild(vt)}),X.scrollTop=X.scrollHeight})}function pe(X,q){e&&confirm("Tem certeza que deseja excluir esta mensagem com imagem?")&&NA(zi(qi(),q)).then(()=>rr(Ge($e(),`comunidades/${f.current}/mensagens/${X}`))).then(()=>{console.log("Mensagem e imagem excluídas com sucesso")}).catch(Ce=>{console.error("Erro ao excluir mensagem com imagem:",Ce),i.current("Não foi possível excluir a mensagem.")})}function Ee(X,q){e&&confirm("Tem certeza que deseja excluir esta mensagem com arquivo?")&&NA(zi(qi(),q)).then(()=>rr(Ge($e(),`comunidades/${f.current}/mensagens/${X}`))).then(()=>{console.log("Mensagem e arquivo excluídos com sucesso")}).catch(Ce=>{console.error("Erro ao excluir mensagem com arquivo:",Ce),alert("Não foi possível excluir a mensagem.")})}function Ae(X){confirm("Tem certeza que deseja excluir esta mensagem?")&&rr(Ge($e(),`comunidades/${f.current}/mensagens/${X}`)).then(()=>{console.log("Mensagem excluída com sucesso")}).catch(q=>{console.error("Erro ao excluir mensagem:",q)})}function mt(X,q){if(!_.current||!X.classList.contains("mensagem-usuario"))return;const Ce=v.current.indexOf(q);Ce===-1?(v.current.push(q),X.style.opacity="0.7",X.querySelector(".message-bubble").style.borderWidth="2px",X.querySelector(".message-bubble").style.borderStyle="solid",X.querySelector(".message-bubble").style.borderColor="yellow"):(v.current.splice(Ce,1),X.style.opacity="1",X.querySelector(".message-bubble").style.border="none",v.current.length===0&&Ht());const Re=document.getElementById("contador-selecionadas");Re&&(Re.textContent=`${v.current.length} selecionada${v.current.length!==1?"s":""}`)}function Ht(){_.current=!1,document.querySelectorAll(".mensagem-usuario").forEach(q=>{q.style.opacity="1",q.querySelector(".message-bubble").style.border="none"});const X=document.getElementById("barra-opcoes-selecao");X&&(X.style.display="none")}function Wi(X,q){if(!_.current){_.current=!0,v.current=[],mt(X,q);const Ce=document.getElementById("barra-opcoes-selecao");Ce&&(Ce.style.display="flex")}}function mr(X){const q=document.getElementById(X);if(!q)return;document.querySelectorAll(".menu-opcoes").forEach(Re=>{Re.id!==X&&(Re.style.display="none")}),q.style.display=q.style.display==="block"?"none":"block";function Ce(Re){const Se=Re.target.closest(".menu-opcoes"),ve=Re.target.closest('div[onclick*="toggleMenuOpcoes"]');(!Se||Se.id!==X)&&(!ve||!ve.contains(document.getElementById(X)))&&(q.style.display="none",document.removeEventListener("click",Ce))}q.style.display==="block"?setTimeout(()=>{document.addEventListener("click",Ce)},10):document.removeEventListener("click",Ce)}function ai(){v.current.length!==0&&confirm(`Tem certeza que deseja excluir ${v.current.length} mensagem(ns)?`)&&(v.current.forEach(X=>{rr(Ge($e(),`comunidades/${f}/mensagens/${X}`)).catch(q=>{console.error("Erro ao excluir mensagem:",q)})}),Ht())}function li(X){if(!Number.isFinite(X)||X<0)return"Tamanho inválido";if(X===0)return"0 Bytes";const q=1024,Ce=["Bytes","KB","MB","GB","TB"],Re=Math.floor(Math.log(X)/Math.log(q));return`${(X/Math.pow(q,Re)).toFixed(2)} ${Ce[Re]}`}function Nc(X,q){X.preventDefault();const Ce=q.id===s.current,Re=e.uid===s.current;if(Ce&&!Re)return;const Se=a.current[q.id],ve=Re;var fe=`${X.clientX}px`,Ie=`${X.clientY}px`;const vt=ie.menu.current.getBoundingClientRect();vt.right>window.innerWidth&&(fe=`${window.innerWidth-vt.width-10}px`),vt.bottom>window.innerHeight&&(Ie=`${window.innerHeight-vt.height-10}px`),F({show:!0,isUserCreator:Re,targetIsAdmin:Se,left:fe,top:Ie,...q}),ve&&ie.menu.current.querySelector(".toggle-admin").addEventListener("click",()=>{zo(q.id,Se),F(pt=>({show:!1,...pt}))}),ie.menu.current.querySelector(".mute-member").addEventListener("click",()=>{k(q.id),F(pt=>({show:!1,...pt}))}),ie.menu.current.querySelector(".kick-member").addEventListener("click",()=>{js(q.id),F(pt=>({show:!1,...pt}))}),ie.menu.current.querySelector(".ban-member").addEventListener("click",()=>{$r(q.id),F(pt=>({show:!1,...pt}))}),document.addEventListener("click",function pt(et){!ie.menu.current.contains(et.target)&&!et.target.closest(".member-item")&&(F(Xi=>({show:!1,...Xi})),document.removeEventListener("click",pt))})}function zo(X,q){X!==s.current&&(q?rr(Ge($e(),`comunidades/${f}/admins/${X}`)).then(()=>{delete a.current[X],ye(h)}).catch(Ce=>{console.error("Erro ao remover administrador:",Ce),alert("Não foi possível remover o administrador.")}):bs(Ge($e(),`comunidades/${f}/admins/${X}`),!0).then(()=>{a.current[X]=!0,ye(h)}).catch(Ce=>{console.error("Erro ao definir administrador:",Ce),alert("Não foi possível definir o administrador.")}))}function js(X){if(X===s.current){alert("Não é possível expulsar o líder da comunidade.");return}if(e.uid!==s.current&&a.current[e.uid]&&a.current[X]){alert("Você não tem permissão para fazer isso.");return}confirm("Tem certeza que deseja expulsar este membro da comunidade?")&&rr(Ge($e(),`comunidades/${f}/membros/${X}`)).then(()=>a.current[X]?rr(Ge($e(),`comunidades/${f}/admins/${X}`)):Promise.resolve()).then(()=>{h.current=h.current.filter(q=>q.id!==X),document.getElementById("membersCount").textContent=`(${h.current.length})`,ye(h)}).catch(q=>{console.error("Erro ao expulsar membro:",q),alert("Não foi possível expulsar o membro.")})}function $r(X){if(X===s.current){alert("Não é possível banir o líder da comunidade.");return}if(e.uid!==s.current&&a.current[e.uid]&&a.current[X]){alert("Você não tem permissão para fazer isso.");return}confirm("Tem certeza que deseja banir permanentemente este membro da comunidade?")&&bs(Ge($e(),`comunidades/${f}/banidos/${X}`),{by:e.uid,timestamp:fo(),reason:"Banido por administrador"}).then(()=>rr(Ge($e(),`comunidades/${f}/membros/${X}`))).then(()=>a.current[X]?rr(Ge($e(),`comunidades/${f}/admins/${X}`)):Promise.resolve()).then(()=>{h.current=h.current.filter(q=>q.id!==X),document.getElementById("membersCount").textContent=`(${h.current.length})`,ye(h)}).catch(q=>{console.error("Erro ao banir membro:",q),alert("Não foi possível banir o membro.")})}return V.useEffect(()=>{f.current=Z("id")},[location]),V.useEffect(()=>{uv(Ce=>{p.current=Ce}),document.addEventListener("click",function(Ce){_&&!Ce.target.closest(".mensagem-usuario")&&Ht()});const X=document.getElementById("memberSearch"),q=document.getElementById("searchButton");if(X&&q){let Ce=function(){const Re=X.value.toLowerCase().trim();if(Re===""){ye(h.current);return}const Se=h.current.filter(ve=>(ve.nome||"").toLowerCase().includes(Re));ye(Se)};q.addEventListener("click",Ce),X.addEventListener("keypress",function(Re){Re.key==="Enter"&&(Re.preventDefault(),Ce())}),X.addEventListener("input",function(){Ce()})}},[]),V.useEffect(()=>{e&&(f.current=Z("id"),f.current?me().then(X=>{X?(I(),ge(),W()):(alert("Você não tem permissão para acessar esta comunidade."),t("/"))}):(alert("ID da comunidade não encontrado."),t("/")))},[e]),E.jsxs("div",{id:"com-page",className:"page",children:[E.jsx("div",{id:"bannerOverlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.3)",display:"none",justifyContent:"center",alignItems:"center",color:"white",fontSize:18},children:"Clique para editar o banner"}),E.jsx("main",{children:E.jsxs("div",{className:"community-container",children:[E.jsxs("div",{className:"community-left",children:[E.jsxs("div",{className:"comunidade-info",children:[E.jsx("div",{id:"communityBanner",style:{width:"100%",height:200,backgroundColor:"#f0f0f0",backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer",borderTopRightRadius:30,borderTopLeftRadius:30}}),E.jsx("img",{id:"comunidadeImagem",src:Yf,alt:"Imagem da comunidade"}),E.jsx("h2",{id:"comunidadeTitulo",children:"Nome da Comunidade"}),E.jsx("p",{id:"comunidadeDescricao",children:"Descrição da comunidade"}),E.jsxs("p",{id:"comunidadeTags",children:["Tags: ",E.jsx("span",{})]})]}),E.jsx("div",{id:"botao-entrar-container",style:{textAlign:"center",margin:"15px 0",display:"none"},children:E.jsx("button",{id:"botao-entrar",style:{padding:"10px 20px",fontSize:16,background:"#248232",color:"#fff",border:"none",borderRadius:5,cursor:"pointer"},children:"Entrar na Comunidade"})}),E.jsxs("div",{id:"chat-container",children:[E.jsx("h3",{children:"Chat da Comunidade"}),E.jsx("div",{id:"chat-messages"}),E.jsxs("div",{id:"chat-input",children:[E.jsx("input",{type:"file",ref:ie.fileInput,id:"fileUpload",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar,image/*,video/*",style:{display:"none"},onChange:st}),E.jsx("textarea",{ref:ie.messageInput,id:"messageInput",placeholder:"Digite sua mensagem..."}),E.jsx("i",{onClick:we,className:"fa-solid fa-paper-plane send-item","aria-hidden":"true"}),E.jsx("i",{onClick:()=>ie.fileInput.current.click(),className:"fa-solid fa-paperclip send-item","aria-hidden":"true"}),E.jsx("i",{onClick:M,id:"audio-record-btn",title:"Gravar mensagem voz",className:"fa-solid  attachment-btn send-item "+(G?"fa-stop recording":"fa-microphone")})]})]})]}),E.jsx("div",{className:"community-right",children:E.jsxs("div",{className:"members-container",children:[E.jsxs("div",{className:"members-header",children:[E.jsxs("h3",{children:["Membros ",E.jsxs("span",{id:"membersCount",children:["(",S,")"]})]}),E.jsxs("div",{className:"search-box",children:[E.jsx("input",{type:"text",id:"memberSearch",placeholder:"Buscar membro..."}),E.jsx("button",{id:"searchButton",children:E.jsx("i",{className:"fas fa-search"})})]})]}),E.jsx("div",{id:"membersList",children:T.map((X,q)=>E.jsxs(Ft,{to:"/perfil?id="+X.id,className:"member-item",onClick:Ce=>{const Re=c&&X.id!==e.uid,Se=e.uid===s.current;Re&&(Se||X.id!==s.current)&&Nc(Ce,X)},children:[E.jsx("img",{src:X.fotoPerfil||jn,alt:X.nome,className:"member-avatar"}),E.jsx("div",{className:"member-info",children:E.jsxs("div",{className:"member-name",children:[E.jsx("div",{children:X.nome||"Usuário"}),X.isCreator?E.jsx("i",{className:"fas fa-crown crown-icon",title:"Líder da comunidade"}):E.jsx(E.Fragment,{}),X.isAdmin&&!X.isCreator?E.jsx("span",{className:"admin-badge",children:"Admin"}):E.jsx(E.Fragment,{})]})})]},q))})]})})]})}),E.jsx("div",{id:"bannerModal",style:{display:"none",position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",zIndex:1e3},children:E.jsxs("div",{style:{background:"white",padding:20,borderRadius:10,width:"90%",maxWidth:500},children:[E.jsx("h3",{children:"Editar Banner da Comunidade"}),E.jsx("input",{type:"file",id:"bannerFileInput",accept:"image/*",style:{margin:"10px 0"}}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[E.jsx("button",{onClick:N,style:{padding:"10px 20px",background:"#f44336",color:"white",border:"none",borderRadius:5,cursor:"pointer"},children:"Cancelar"}),E.jsx("button",{onClick:O,style:{padding:"10px 20px",background:"#4CAF50",color:"white",border:"none",borderRadius:5,cursor:"pointer"},children:"Salvar"})]})]})}),E.jsxs("div",{className:"member-options",style:{position:"absolute",display:D.show?"block":"none",left:D.left,top:D.top},ref:ie.menu,children:[E.jsxs(Ft,{to:"/perfil?id="+D.id,className:"member-options-header",children:[E.jsx("img",{src:D.fotoPerfil||jn,alt:D.nome}),D.nome||"Usuário"]}),D.isUserCreator&&E.jsx("div",{className:"option-item toggle-admin",children:D.targetIsAdmin?"Remover administrador":"Definir como administrador"}),E.jsx("div",{className:"option-item mute-member",children:"Silenciar membro"}),E.jsx("div",{className:"option-item danger kick-member",children:"Expulsar da comunidade"}),E.jsx("div",{className:"option-item danger ban-member",children:"Banir permanentemente"})]}),E.jsx(Ic,{showPopup:i})]})}function Eq(){const{worker_server:n,usuarioLogado:e,setUsuarioLogado:t}=oi(),i=V.useRef(null),s=a=>{a.preventDefault();const c=document.getElementById("loginNameEmail").value,h=document.getElementById("loginSenha").value;xa.post(n+"/login",{name_email:c,password:h}).then(f=>{f.data.result?t(f.data.user):i.current("Nome de usuário, e-mail ou senha incorreto.")})};return e?E.jsx(E.Fragment,{}):E.jsxs(E.Fragment,{children:[E.jsx("div",{id:"signin",className:"page",children:E.jsxs("form",{onSubmit:s,id:"sign-container",children:[E.jsx("img",{id:"logo",src:Xh,width:"150px"}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Nome ou e-mail:"}),E.jsx("input",{id:"loginNameEmail",required:!0})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Senha:"}),E.jsx("input",{type:"password",id:"loginSenha",required:!0})]}),E.jsxs("p",{children:["Não possui conta? ",E.jsx(Ft,{to:"/registro",children:"Registre-se"})]}),E.jsx("button",{id:"btn-submit",type:"submit",children:"Entrar"})]})}),E.jsx(Ic,{showPopup:i})]})}function Ek(){const{mobile:n,usuarioLogado:e,setNavigate:t}=oi(),i=Ls(),s=hr();return V.useEffect(()=>{window.navigate=i,t(a=>i(a))},[]),V.useEffect(()=>{if(e){hv();const a=document.getElementById("sidebar"),c=document.getElementById("toggleSidebar"),h=document.querySelector("body");c.addEventListener("click",function(){a.classList.toggle("collapsed");const f=document.querySelectorAll("#sidebar .btn-text"),p=document.getElementById("buscar");a.classList.contains("collapsed")?(a.style.width="50px",c.style.left="60px",h.style.marginLeft="60px",f.forEach(_=>_.style.display="none"),p&&(p.style.display="none")):(a.style.width="250px",c.style.left="260px",h.style.marginLeft="260px",f.forEach(_=>_.style.display="inline"),p&&(p.style.display="flex"))}),document.addEventListener("DOMContentLoaded",function(){setTimeout(hv,2e3)}),document.addEventListener("DOMContentLoaded",function(){const f=document.querySelector("body");f.style.marginLeft="60px"})}},[e]),e?E.jsxs(E.Fragment,{children:[E.jsx("aside",{id:"sidebar",className:"collapsed",children:E.jsxs("div",{id:"sidebar-content",style:{overflowY:"auto",flexGrow:1},children:[E.jsx("br",{}),E.jsxs("nav",{id:"mainnav",children:[n?E.jsx(E.Fragment,{}):E.jsx("div",{className:"header_logo",children:E.jsx(Ft,{to:"/",children:E.jsx("img",{src:Xh,width:"40px",alt:"Logo"})})}),E.jsx(Ft,{to:"/",className:"defbtn"+(s.pathname==="/"?" selected":""),children:E.jsx("i",{className:"fa-solid fa-house"})}),E.jsx(Ft,{to:"/search",className:"defbtn"+(s.pathname==="/search"?" selected":""),children:E.jsx("i",{className:"fa-solid fa-magnifying-glass","aria-hidden":"true",style:{color:"#9ecc9e"}})}),E.jsx(Ft,{to:"/amigos",className:"defbtn"+(s.pathname==="/amigos"?" selected":""),children:E.jsx("i",{className:"fa-solid fa-user-group"})}),n?E.jsx(E.Fragment,{}):E.jsxs(Ft,{to:"/chats",className:"defbtn"+(s.pathname==="/chats"||s.pathname.startsWith("/chat")?" selected":""),id:"chatButton",children:[E.jsx("i",{className:"fa-solid fa-comment-dots"}),E.jsx("span",{id:"chatNotification"})]}),E.jsx(Ft,{to:"/perfil",className:"defbtn"+(s.pathname==="/perfil"?" selected":""),children:E.jsx("i",{className:"fas fa-user","aria-hidden":"true"})}),E.jsx(Ft,{to:"/ferramentas",className:"defbtn"+(["/ferramentas","/flashcards","/add-posts"].includes(s.pathname)?" selected":""),children:E.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),E.jsx("button",{id:"toggleSidebar",children:"☰"})]}):E.jsx(E.Fragment,{})}const Tq={ISINF:"Integrado em Informática",ISSEG:"Integrado em Segurança do Trabalho",ISADM:"Integrado em Administração",ISMEC:"Integrado em Mecânica",ISL:"Técnico em Logística",TADS:"Técnico em ADS",TSEG:"Técnico em Segurança do Trabalho",ISDEV:"Desenvolvedor",LOAD:""},bq=()=>{const{socket:n,server:e,usuarioLogado:t}=oi(),[i,s]=V.useState("Carregando..."),[a,c]=V.useState(0),[h,f]=V.useState(jn),[p,_]=V.useState(!1),[v,T]=V.useState(null),A=Ls(),S={avatar:V.useRef(null),fileInput:V.useRef(null),removePhotoBtn:V.useRef(null)};function P(re){const ie=new FormData,ye=new Date().getTime().toString();ie.append("type","update"),ie.append("timestamp",ye.toString()),ie.append("file",re),ie.append("user_uid",t.uid),xa.post(e+"/perfil",ie).then(k=>{S.avatar.current.src=Lr(k.data.file_id),S.removePhotoBtn.current.style.display="block"})}const D=()=>{t.uid!=v.uid?n.send("/chat",{operation:"go_to_chat",user_to_navigate_chat:v.uid}).then(re=>{re.result&&A(`/chat/${re.chat_id}`)}):A("/chats")},F=()=>{const re=document.getElementById("fileInput");re&&re.click()},z=re=>{if(re.target.files&&re.target.files[0]&&t&&t.uid===v.uid){const ie=re.target.files[0],ye=new FileReader;ye.onloadend=()=>{f(ye.result),_(!0),P(ie)},ye.readAsDataURL(ie)}},G=re=>{re.preventDefault(),f(jn),_(!1);const ie=document.getElementById("fileInput");ie&&(ie.value="")};return V.useEffect(()=>{if(t){let re=function(R){return new URLSearchParams(window.location.search).get(R)},ie=function(R){n.send("/perfil",{uid:R}).then(I=>{if(I.result){const N=I.perfil;s(N.name||"Usuário"),c(N.nFriends),T({...N,uid:R}),N.logo?f(Lr(N.logo)):f(jn),t&&t.uid===R?(S.avatar.current.style.cursor="pointer",S.removePhotoBtn.current.addEventListener("click",ye),S.removePhotoBtn.current.style.display=N.logo?"block":"none"):S.removePhotoBtn.current.style.display="none"}else document.getElementById("profileName").textContent="Usuário não encontrado"}).catch(I=>{console.error("Erro ao buscar dados do usuário:",I)})},ye=function(){ap(Ge($e(),"usuarios/"+t.uid),{fotoPerfil:null}).then(()=>{S.avatar.current.src=jn,S.removePhotoBtn.current.style.display="none"}).catch(R=>{console.error("Erro ao remover foto de perfil:",R)})};const k=re("id");ie(k||t.uid)}},[t]),E.jsxs(E.Fragment,{children:[E.jsxs("main",{id:"perfil-page",className:"page",children:[E.jsxs("section",{id:"perfil",children:[E.jsxs("div",{id:"profile-content",children:[E.jsx("div",{className:"avatar-container",children:E.jsxs("div",{className:"avatar-wrapper",children:[E.jsx("img",{onClick:()=>t&&v&&t.uid===v.uid&&S.fileInput.current.click(),src:h,alt:"Avatar do usuário",id:"avatar",style:{cursor:t&&v&&t.uid===v.uid?"pointer":"default"}}),t&&v&&t.uid===v.uid&&E.jsx("div",{className:"edit-icon",id:"editIcon",onClick:F,style:{cursor:"pointer"},children:E.jsx("i",{className:"fas fa-pencil-alt"})}),E.jsx("div",{className:"user-type-indicator",children:v&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"aluno-tag alunotag",children:[E.jsx("i",{className:"fa-solid fa-user-graduate"})," Aluno"]}),E.jsxs("div",{className:"aluno-tag",children:[E.jsx("i",{className:"fa-solid fa-user"})," ",Tq[v.matricula.split("111")[1].split("0")[0]]]}),E.jsxs("div",{id:"go-to-chat",className:"aluno-tag",onClick:D,children:[E.jsx("i",{className:"fa-solid fa-message"})," Mensagem"]})]})})]})}),E.jsxs("div",{id:"profile-info",children:[E.jsx("span",{id:"displayName",children:i}),E.jsxs("div",{id:"n-divs",children:[E.jsxs("div",{id:"n-friends",children:[E.jsx("div",{className:"value",children:a}),E.jsx("div",{className:"label",children:"Amigos"})]}),E.jsxs("div",{id:"n-comunitys",children:[E.jsx("div",{className:"value",children:"0"}),E.jsx("div",{className:"label",children:"Comunidades"})]})]})]})]}),p&&E.jsx("button",{id:"removePhotoBtn",onClick:G,style:{marginTop:"10px",backgroundColor:"red",color:"white",border:"none",padding:"5px 10px",borderRadius:"5px",cursor:"pointer"},children:"Remover Foto"}),E.jsx("input",{ref:S.fileInput,type:"file",id:"fileInput",style:{display:"none"},accept:"image/*",onChange:z}),E.jsx("br",{}),E.jsx(Ft,{to:"/settings",children:E.jsx("i",{id:"btn-menu",className:"fa-solid fa-ellipsis-vertical"})})]}),E.jsx(ek,{userPerfilUid:v?v.uid:""})]}),E.jsx(Ek,{})]})},MA={ISINF:140,ISSEG:50,ISADM:50,ISMEC:50,ISL:50,TADS:50,TSEG:50,ISDEV:50};function wq(){const n=V.useRef(null),{worker_server:e,usuarioLogado:t,setUsuarioLogado:i}=oi(),[s,a]=V.useState(!1),c={matricula:V.useRef(null)},h=f=>{var P;if(f.preventDefault(),t)return;const p=document.getElementById("regNome").value,_=document.getElementById("regEmail").value,v=document.getElementById("regSenha").value,T="ID-"+Date.now()+"-"+Math.floor(Math.random()*1e3),A=c.matricula.current.value;if(!/^20[0-9]{2}(1|2)(1|2)(1|2)[A-Z]+0(140|1[0-3][0-9]|0[0-9]{2})$/.test(A)){a(!0),(P=n.current)==null||P.call(n,"Matrícula inválida.");return}const S=A.match(/11([A-Z]+)0(\d+)$/);S[1]in MA&&Number(S[2])<=MA[S[1]]?xa.post(e+"/registro",{email:_,id:T,matricula:A,name:p,password:v}).then(D=>{if(D.data.result)i(D.data.user);else switch(D.data.reason){case"email-already-in-use":n.current("E-mail já está em uso.");break}}):a(!0)};return t?null:E.jsxs(E.Fragment,{children:[E.jsx("div",{id:"signup",className:"page",children:E.jsxs("form",{onSubmit:h,id:"sign-container",children:[E.jsx("img",{id:"logo",src:Xh,width:"150px"}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Nome:"}),E.jsx("input",{type:"text",id:"regNome",required:!0})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"E-mail:"}),E.jsx("input",{type:"email",id:"regEmail",required:!0})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Matrícula:"}),E.jsx("input",{ref:c.matricula,type:"text",id:"regMatricula",required:!0,style:{border:s?"1px solid red":void 0,outlineColor:s?"red":void 0},onChange:()=>a(!1)}),s&&E.jsx("p",{style:{color:"red",fontSize:"13px"},children:"Matrícula inválida"})]}),E.jsxs("div",{className:"input-group",children:[E.jsx("label",{children:"Senha:"}),E.jsx("input",{type:"password",id:"regSenha",required:!0})]}),E.jsxs("p",{children:["Já possui conta? ",E.jsx(Ft,{to:"/login",children:"Fazer login"})]}),E.jsx("button",{id:"btn-submit",type:"submit",children:"Registrar"})]})}),E.jsx(Ic,{showPopup:n})]})}var PA;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(PA||(PA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LA;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(LA||(LA={}));var UA;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(UA||(UA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=["user","model","function","system"];var jA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(jA||(jA={}));var BA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(BA||(BA={}));var FA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(FA||(FA={}));var zA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(zA||(zA={}));var sh;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(sh||(sh={}));var qA;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(qA||(qA={}));var HA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(HA||(HA={}));var GA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(GA||(GA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class zl extends Qn{constructor(e,t){super(e),this.response=t}}class Tk extends Qn{constructor(e,t,i,s){super(e),this.status=t,this.statusText=i,this.errorDetails=s}}class Io extends Qn{}class bk extends Qn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq="https://generativelanguage.googleapis.com",Cq="v1beta",Aq="0.24.1",Rq="genai-js";var Fa;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Fa||(Fa={}));class Iq{constructor(e,t,i,s,a){this.model=e,this.task=t,this.apiKey=i,this.stream=s,this.requestOptions=a}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Cq;let a=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||Sq}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function xq(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${Rq}/${Aq}`),e.join(" ")}async function Nq(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",xq(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new Io(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,a]of i.entries()){if(s==="x-goog-api-key")throw new Io(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Io(`Header name ${s} can only be set using the apiClient field`);t.append(s,a)}}return t}async function kq(n,e,t,i,s,a){const c=new Iq(n,e,t,i,a);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},Pq(a)),{method:"POST",headers:await Nq(c),body:s})}}async function Zh(n,e,t,i,s,a={},c=fetch){const{url:h,fetchOptions:f}=await kq(n,e,t,i,s,a);return Oq(h,f,c)}async function Oq(n,e,t=fetch){let i;try{i=await t(n,e)}catch(s){Dq(s,n)}return i.ok||await Mq(i,n),i}function Dq(n,e){let t=n;throw t.name==="AbortError"?(t=new bk(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof Tk||n instanceof Io||(t=new Qn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function Mq(n,e){let t="",i;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new Tk(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function Pq(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Wf(n.candidates[0]))throw new zl(`${mo(n)}`,n);return Lq(n)}else if(n.promptFeedback)throw new zl(`Text not available. ${mo(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Wf(n.candidates[0]))throw new zl(`${mo(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),$A(n)[0]}else if(n.promptFeedback)throw new zl(`Function call not available. ${mo(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Wf(n.candidates[0]))throw new zl(`${mo(n)}`,n);return $A(n)}else if(n.promptFeedback)throw new zl(`Function call not available. ${mo(n)}`,n)},n}function Lq(n){var e,t,i,s;const a=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)c.text&&a.push(c.text),c.executableCode&&a.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&a.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function $A(n){var e,t,i,s;const a=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&a.push(c.functionCall);if(a.length>0)return a}const Uq=[sh.RECITATION,sh.SAFETY,sh.LANGUAGE];function Wf(n){return!!n.finishReason&&Uq.includes(n.finishReason)}function mo(n){var e,t,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const a=n.candidates[0];Wf(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function Ih(n){return this instanceof Ih?(this.v=n,this):new Ih(n)}function Vq(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,a=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(T){i[T]&&(s[T]=function(A){return new Promise(function(S,P){a.push([T,A,S,P])>1||h(T,A)})})}function h(T,A){try{f(i[T](A))}catch(S){v(a[0][3],S)}}function f(T){T.value instanceof Ih?Promise.resolve(T.value.v).then(p,_):v(a[0][2],T)}function p(T){h("next",T)}function _(T){h("throw",T)}function v(T,A){T(A),a.shift(),a.length&&h(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function jq(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=zq(e),[i,s]=t.tee();return{stream:Fq(i),response:Bq(s)}}async function Bq(n){const e=[],t=n.getReader();for(;;){const{done:i,value:s}=await t.read();if(i)return v0(qq(e));e.push(s)}}function Fq(n){return Vq(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:s}=yield Ih(t.read());if(s)break;yield yield Ih(v0(i))}})}function zq(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return a();function a(){return e.read().then(({value:c,done:h})=>{if(h){if(s.trim()){i.error(new Qn("Failed to parse stream"));return}i.close();return}s+=c;let f=s.match(KA),p;for(;f;){try{p=JSON.parse(f[1])}catch{i.error(new Qn(`Error parsing JSON response: "${f[1]}"`));return}i.enqueue(p),s=s.substring(f[0].length),f=s.match(KA)}return a()}).catch(c=>{let h=c;throw h.stack=c.stack,h.name==="AbortError"?h=new bk("Request aborted when reading from the stream"):h=new Qn("Error reading from the stream"),h})}}})}function qq(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const a of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=a.citationMetadata,t.candidates[s].groundingMetadata=a.groundingMetadata,t.candidates[s].finishReason=a.finishReason,t.candidates[s].finishMessage=a.finishMessage,t.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){t.candidates[s].content||(t.candidates[s].content={role:a.content.role||"user",parts:[]});const c={};for(const h of a.content.parts)h.text&&(c.text=h.text),h.functionCall&&(c.functionCall=h.functionCall),h.executableCode&&(c.executableCode=h.executableCode),h.codeExecutionResult&&(c.codeExecutionResult=h.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(n,e,t,i){const s=await Zh(e,Fa.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return jq(s)}async function Sk(n,e,t,i){const a=await(await Zh(e,Fa.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:v0(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function xh(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return Hq(e)}function Hq(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,s=!1;for(const a of n)"functionResponse"in a?(t.parts.push(a),s=!0):(e.parts.push(a),i=!0);if(i&&s)throw new Qn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new Qn("No content is provided for sending chat message.");return i?e:t}function Gq(n,e){var t;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new Io("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const a=xh(n);i.contents=[a]}return{generateContentRequest:i}}function QA(n){let e;return n.contents?e=n:e={contents:[xh(n)]},n.systemInstruction&&(e.systemInstruction=Ck(n.systemInstruction)),e}function $q(n){return typeof n=="string"||Array.isArray(n)?{content:xh(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Kq={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Qq(n){let e=!1;for(const t of n){const{role:i,parts:s}=t;if(!e&&i!=="user")throw new Qn(`First content should be with role 'user', got ${i}`);if(!VA.includes(i))throw new Qn(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(VA)}`);if(!Array.isArray(s))throw new Qn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Qn("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const h of s)for(const f of YA)f in h&&(a[f]+=1);const c=Kq[i];for(const h of YA)if(!c.includes(h)&&a[h]>0)throw new Qn(`Content with role '${i}' can't contain '${h}' part`);e=!0}}function WA(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const i of t.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="SILENT_ERROR";class Yq{constructor(e,t,i,s={}){this.model=t,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(Qq(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,s,a,c,h,f;await this._sendPromise;const p=xh(e),_={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),t);let T;return this._sendPromise=this._sendPromise.then(()=>Sk(this._apiKey,this.model,_,v)).then(A=>{var S;if(WA(A.response)){this._history.push(p);const P=Object.assign({parts:[],role:"model"},(S=A.response.candidates)===null||S===void 0?void 0:S[0].content);this._history.push(P)}else{const P=mo(A.response);P&&console.warn(`sendMessage() was unsuccessful. ${P}. Inspect response object for details.`)}T=A}).catch(A=>{throw this._sendPromise=Promise.resolve(),A}),await this._sendPromise,T}async sendMessageStream(e,t={}){var i,s,a,c,h,f;await this._sendPromise;const p=xh(e),_={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),t),T=wk(this._apiKey,this.model,_,v);return this._sendPromise=this._sendPromise.then(()=>T).catch(A=>{throw new Error(XA)}).then(A=>A.response).then(A=>{if(WA(A)){this._history.push(p);const S=Object.assign({},A.candidates[0].content);S.role||(S.role="model"),this._history.push(S)}else{const S=mo(A);S&&console.warn(`sendMessageStream() was unsuccessful. ${S}. Inspect response object for details.`)}}).catch(A=>{A.message!==XA&&console.error(A)}),T}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wq(n,e,t,i){return(await Zh(e,Fa.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq(n,e,t,i){return(await Zh(e,Fa.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function Jq(n,e,t,i){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await Zh(e,Fa.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Ck(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const s=QA(e),a=Object.assign(Object.assign({},this._requestOptions),t);return Sk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),a)}async generateContentStream(e,t={}){var i;const s=QA(e),a=Object.assign(Object.assign({},this._requestOptions),t);return wk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),a)}startChat(e){var t;return new Yq(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=Gq(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return Wq(this.apiKey,this.model,i,s)}async embedContent(e,t={}){const i=$q(e),s=Object.assign(Object.assign({},this._requestOptions),t);return Xq(this.apiKey,this.model,i,s)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return Jq(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Qn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new JA(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new Io("Cached content must contain a `name` field.");if(!e.model)throw new Io("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t!=null&&t[c]&&e[c]&&(t==null?void 0:t[c])!==e[c]){if(c==="model"){const h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(h===f)continue}throw new Io(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const a=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new JA(this.apiKey,a,i)}}const eH="AIzaSyA8ABX5SrNQ1x14aMuUb0xJBeERPVzQtuE";function tH(){const{usuarioLogado:n}=oi(),e=V.useRef(null),[t,i]=V.useState(!0),[s,a]=V.useState([]),[c,h]=V.useState(""),[f,p]=V.useState(0),[_,v]=V.useState("decks"),[T,A]=V.useState(!1),[S,P]=V.useState(!1),[D,F]=V.useState("0"),[z,G]=V.useState(!1),re={ask:V.useRef(null)};function ie(){ye()}function ye(){const W=localStorage.getItem("flashcardDecks");if(W){const le=JSON.parse(W);a(le),ne(le)}}function k(W){localStorage.setItem("flashcardDecks",JSON.stringify(W))}function R(W){document.getElementById("deckForm").classList.toggle("hidden",!W)}function I(W){document.getElementById("flashcardForm").classList.toggle("hidden",!W)}function N(){document.getElementById("deckName").value="",document.getElementById("deckDescription").value=""}function O(){document.getElementById("cardFront").value="",document.getElementById("cardBack").value=""}function j(){const W=document.getElementById("deckName").value.trim(),le=document.getElementById("deckDescription").value.trim();if(!W){e.current("Por favor, insira um nome para o deck.");return}const ge={id:Date.now().toString(),name:W,description:le,flashcards:[]},pe=[...s,ge];a(pe),k(pe),ne(pe),R(!1),N()}function M(){const W=document.getElementById("cardFront").value.trim(),le=document.getElementById("cardBack").value.trim();if(!W||!le){e.current("Por favor, preencha ambos os lados do flashcard.");return}a(ge=>{console.log(c,ge);const pe=ge.find(Ee=>Ee.id===c);if(console.log(pe),pe){pe.flashcards.push({id:Date.now().toString(),front:W,back:le});const Ee=ge.map(Ae=>Ae.id===c?pe:Ae);return k(Ee),ke(pe.id,Ee),I(!1),O(),Ee}return ge})}function Ze(W){const le=s.filter(ge=>ge.id!==W);a(le),k(le),ne(le)}function yt(W){const le=s.find(ge=>ge.id===c);if(le){le.flashcards=le.flashcards.filter(pe=>pe.id!==W);const ge=s.map(pe=>pe.id==c?le:pe);k(ge),ke(le.id)}}function ne(W){i(W.length>0)}function be(W){const le=s.find(ge=>ge.id===W);console.log(le,W),le&&(h(W),ke(W),v("flashcards"))}function ke(W,le=null){const pe=(le||s).find(Ae=>Ae.id===W);if(console.log(pe),!pe)return;const Ee=pe.flashcards;for(let Ae=Ee.length-1;Ae>0;Ae--){const mt=Math.floor(Math.random()*(Ae+1));[Ee[Ae],Ee[mt]]=[Ee[mt],Ee[Ae]]}pe.flashcards=Ee,a(Ae=>(le||Ae).map(mt=>mt.id==pe.id?pe:mt))}function st(){const W=s.find(ge=>ge.id===c);if(!W||W.flashcards.length===0){e.current("Este deck não possui flashcards para estudar.");return}const le=0;p(le),U(le),ce(le),v("study")}function U(W){const le=s.find(ge=>ge.id===c);!le||!le.flashcards[W]||P(!1)}function ce(W){const le=s.find(pe=>pe.id===c);if(!le)return;const ge=W/le.flashcards.length*100;F(`${ge}%`)}function we(){if(f>0){const W=f-1;U(W),ce(W)}}function me(){const W=s.find(le=>le.id===c);if(W)if(f<W.flashcards.length-1){const le=f+1;p(le),U(le),ce(le)}else v("flashcards")}function Z(){P(!0)}const se=async()=>{A(!1);const W=re.ask.current.value,le=new Zq(eH);try{const pe=le.getGenerativeModel({model:"gemini-2.5-flash-preview-05-20"}),Ee=`Gere 3 flashcards sobre o assunto: ${W}. OBS: Sua respoosta dese seguir o seguinte formato: "{Pergunta}"//"{Resposta}"`;G(!0);const Ae=await pe.generateContent(Ee);G(!1);var ge=Ae.response.text();ge='"'+ge.split('"').splice(1).join('"');const Ht=/"([^"]+)"\/\/\s*"([^"]+)"/g,Wi=[...ge.matchAll(Ht)].map(ai=>({front:ai[1],back:ai[2],id:Date.now().toString()})),mr=s.map(ai=>ai.id==c?{...ai,flashcards:[...ai.flashcards,...Wi]}:ai);k(mr),a(mr)}catch(pe){console.error("Erro ao gerar conteúdo:",pe)}};return V.useEffect(()=>{n&&ie()},[n]),E.jsxs(E.Fragment,{children:[E.jsxs("div",{id:"flash",className:"container page",children:[E.jsx("main",{children:_=="decks"?E.jsx("div",{id:"decksView",children:E.jsxs("div",{className:"card",children:[E.jsx("h2",{children:"Meus decks"}),E.jsxs("button",{id:"createDeckBtn",className:"btn",onClick:()=>R(!0),children:[E.jsx("i",{className:"fas fa-plus"})," Criar novo deck"]}),E.jsxs("div",{id:"deckForm",className:"hidden",children:[E.jsx("div",{className:"flex-row",children:E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"deckName",placeholder:"Nome do deck",required:!0}),E.jsx("textarea",{id:"deckDescription",placeholder:"Descrição (opcional)",rows:3})]})}),E.jsxs("div",{children:[E.jsx("button",{id:"saveDeckBtn",className:"btn btn-success",onClick:()=>j(),children:"Criar"}),E.jsx("button",{id:"cancelDeckBtn",className:"btn btn-outline",onClick:()=>{R(!1),N()},children:"Cancelar"})]})]}),E.jsx("div",{id:"decksList",className:"decks-container",children:t?s.map((W,le)=>E.jsxs("div",{className:"deck",onClick:()=>be(W.id),children:[E.jsx("div",{className:"deck-actions",children:E.jsx("button",{onClick:()=>Ze(W.id),children:E.jsx("i",{className:"fas fa-trash"})})}),E.jsx("h3",{children:W.name}),E.jsx("p",{children:W.description||"Sem descrição"}),E.jsxs("p",{children:[E.jsx("strong",{children:W.flashcards.length})," flashcards"]})]},le)):E.jsxs("div",{className:"empty-state",children:[E.jsx("i",{className:"fas fa-inbox"}),E.jsx("h3",{children:"Nenhum deck encontrado"}),E.jsx("p",{children:"Crie seu primeiro deck para começar a adicionar flashcards"}),E.jsx("button",{className:"btn",onClick:()=>R(!0),children:"Criar deck"})]})})]})}):_=="flashcards"?E.jsx("div",{id:"flashcardsView",children:E.jsxs("div",{className:"card",children:[E.jsx("h2",{id:"currentDeckName",children:s.filter(W=>W.id==c)[0].name}),E.jsxs("div",{id:"flash-btns",children:[E.jsxs("button",{id:"backToDecksBtn",className:"btn btn-outline",onClick:()=>v("decks"),children:[E.jsx("i",{className:"fas fa-arrow-left"})," Voltar para Decks"]}),E.jsxs("button",{id:"addFlashcardBtn",className:"btn",onClick:()=>I(!0),children:[E.jsx("i",{className:"fas fa-plus"})," Adicionar flashcard"]}),E.jsxs("button",{id:"studyDeckBtn",className:"btn btn-success",onClick:()=>st(),children:[E.jsx("i",{className:"fas fa-graduation-cap"})," Estudar deck"]}),E.jsx("button",{id:"generateFlashCard",onClick:()=>A(!0),children:z?"Gerando...":"Gerar flashcards"})]}),E.jsxs("div",{id:"flashcardForm",children:[E.jsxs("div",{className:"flex-row",children:[E.jsxs("div",{children:[E.jsx("h3",{children:"Frente do card"}),E.jsx("textarea",{id:"cardFront",placeholder:"Pergunta",rows:3,required:!0})]}),E.jsxs("div",{children:[E.jsx("h3",{children:"Verso do card"}),E.jsx("textarea",{id:"cardBack",placeholder:"Resposta",rows:3,required:!0})]})]}),E.jsxs("div",{children:[E.jsx("button",{id:"saveFlashcardBtn",className:"btn btn-success",onClick:()=>M(),children:"Salvar flashcard"}),E.jsx("button",{id:"cancelFlashcardBtn",className:"btn btn-outline",onClick:()=>{I(!1),O()},children:"Cancelar"})]})]}),E.jsx("div",{id:"flashcardsList",className:"flashcards-container",children:c==""?E.jsxs("div",{className:"empty-state",children:[E.jsx("i",{className:"fas fa-sticky-note"}),E.jsx("h3",{children:"Nenhum flashcard neste deck"}),E.jsx("p",{children:"Adicione seu primeiro flashcard para começar a estudar"}),E.jsx("button",{className:"btn",onClick:()=>I(!0),children:"Adicionar flashcard"})]}):s.filter(W=>W.id==c)[0].flashcards.map((W,le)=>E.jsxs("div",{className:"flashcard",onClick:ge=>!ge.target.closest(".card-actions")&&ge.target.classList.toggle("show-back"),children:[E.jsx("div",{className:"flashcard-front",children:E.jsx("h3",{children:W.front})}),E.jsx("div",{className:"flashcard-back",children:E.jsx("h3",{children:W.back})}),E.jsx("div",{className:"card-actions",children:E.jsx("button",{className:"btn btn-danger",onClick:()=>yt(W.id),children:E.jsx("i",{className:"fas fa-trash"})})})]},le))})]})}):E.jsx("div",{id:"studyView",children:E.jsxs("div",{className:"card study-mode",children:[E.jsxs("h2",{children:["Estudando: ",E.jsx("span",{id:"studyDeckName",children:s.filter(W=>W.id==c)[0].name})]}),E.jsx("div",{className:"progress-bar",children:E.jsx("div",{className:"progress",id:"studyProgress",children:D})}),E.jsxs("p",{children:[" Progresso: ",E.jsx("span",{id:"currentCard",children:f+1})," de ",E.jsx("span",{id:"totalCards",children:s.filter(W=>W.id==c)[0].flashcards.length})]}),E.jsxs("div",{className:"study-card",id:"studyCard",onClick:()=>Z(),children:[E.jsxs("div",{className:"study-card-front",style:{display:S?"none":"block"},children:[E.jsx("h3",{id:"studyFront",children:s.filter(W=>W.id==c)[0].flashcards[f].front}),E.jsx("p",{children:"Clique no card para ver a resposta"})]}),E.jsxs("div",{className:"study-card-back",style:{display:S?"block":"none"},children:[E.jsx("h3",{id:"studyBack",children:s.filter(W=>W.id==c)[0].flashcards[f].back}),E.jsx("p",{children:"Clique no card para voltar"})]})]}),E.jsxs("div",{className:"study-controls",children:[E.jsxs("button",{id:"prevCardBtn",className:"btn btn-outline",onClick:()=>we(),children:[E.jsx("i",{className:"fas fa-arrow-left"})," Anterior"]}),E.jsxs("button",{id:"nextCardBtn",className:"btn",onClick:()=>me(),children:["Próximo ",E.jsx("i",{className:"fas fa-arrow-right"})]}),E.jsxs("button",{id:"endStudyBtn",className:"btn btn-danger",onClick:()=>v("flashcards"),children:[E.jsx("i",{className:"fas fa-times"})," Sair"]})]})]})})}),E.jsxs("div",{style:{display:T?"block":"none"},id:"flashcard-menu",children:[E.jsx("input",{ref:re.ask,placeholder:"Digite o assunto..."}),E.jsxs("div",{id:"fm-btns",children:[E.jsx("div",{id:"fm-ask",onClick:se,children:"Perguntar"}),E.jsx("div",{id:"fm-cancel",onClick:()=>A(!1),children:"Cancelar"})]})]})]}),E.jsx(Ic,{showPopup:e})]})}function nH(){return E.jsx("div",{id:"tools",className:"page",children:E.jsxs("div",{id:"tools-list",children:[E.jsx(Ft,{to:"/flashcards",className:"tools-item",children:"FlashCards"}),E.jsx(Ft,{to:"/add-posts",className:"tools-item",children:"Adicionar Posts"})]})})}const iH="/assets/no-image-BguYpm9N.jpg";function rH(){const{db:n,server:e,usuarioLogado:t}=oi(),[i,s]=V.useState(iH),a={file:V.useRef(null),description:V.useRef(null)},c=()=>{const f=a.file.current.files[0];if(!f)return;const p=new FileReader;p.onload=_=>{typeof _.target.result=="string"&&s(_.target.result)},p.readAsDataURL(f)},h=()=>{if(!t)return;const f=a.file.current.files[0],p=a.description.current.value,_=new Date().getTime(),v=new FormData;v.append("type","upload"),v.append("timestamp",_.toString()),v.append("file",f),xa.post(e+"/posts",v).then(T=>{const A={type:0,userUid:t.uid,user:t.name||"",image:T.data.file_id,description:p,description_lower:p.toLowerCase(),timestamp:_};gF(Mm(n.current,"posts"),A)})};return E.jsxs("div",{id:"add-post",className:"page",children:[E.jsx("img",{id:"img-view",src:i}),E.jsx("div",{id:"label-description",children:"Descrição:"}),E.jsx("input",{ref:a.description,id:"description"}),E.jsx("div",{id:"add-image",onClick:()=>a.file.current.click(),children:"Adicionar imagem"}),E.jsx("input",{id:"input-file",ref:a.file,onChange:c,type:"file",accept:"image/jpeg"}),E.jsx("div",{id:"btn-submit",onClick:h,children:"Enviar"})]})}const sH=(n,e)=>E.jsxs("select",{id:"filtroOrdenacao",value:n,onChange:t=>e(t.target.value),style:{width:"100%",padding:"10px",marginBottom:"10px"},children:[E.jsx("option",{value:"maisNovos",children:"Mais Novos"}),E.jsx("option",{value:"maisAntigos",children:"Mais Antigos"}),E.jsx("option",{value:"maisMembros",children:"Mais Membros"}),E.jsx("option",{value:"menosMembros",children:"Menos Membros"})]});function oH(){const[n,e]=V.useState(!1),t=V.useRef(null),i={createButton:V.useRef(null),listaComunidades:V.useRef(null)},s=()=>{e(!0),i.createButton.current.style.display="none"},a=()=>{const G=document.getElementById("containerFormComunidade");G&&G.remove();const re=document.querySelector('button[onclick="mostrarFormularioCriarComunidade()"]');re.style.display="inline-block"},c=()=>{const G=document.getElementById("nomeComunidade").value.trim(),re=document.getElementById("descricaoComunidade").value.trim(),ye=document.getElementById("imagemComunidade").files[0],k=document.getElementById("tipoPrivacidade").value;if(!G){t.current("A comunidade deve ter um nome.");return}if(G.length<3||G.length>50){t.current("O nome da comunidade deve ter entre 3 e 50 caracteres.");return}if(re.length>200){t.current("A descrição deve ter no máximo 200 caracteres.");return}const R=Ry().currentUser;if(!R){t.current("Você não está autenticado.");return}const I=Dr(Ge($e(),"comunidades")).key;function N(O){const j=Date.now(),M={nome:G,descricao:re,imagem:O,privacidade:k,criador:R.uid,membros:{[R.uid]:!0},timestamp:j},Ze={};Ze[`comunidades/${I}`]=M,Ze[`usuarios/${R.uid}/comunidades/${I}`]=!0,ap(Ge($e()),Ze).then(()=>{console.log("Comunidade criada com sucesso!"),a()}).catch(yt=>{console.error("Erro ao criar comunidade:",yt),t.current("Erro ao criar comunidade: "+yt.message)})}if(ye){const O=ye.name.split(".").pop(),j=`comunidades/${I}/imagem.${O}`;ih(zi(qi(),j),ye).then(M=>Mr(M.ref)).then(M=>{N(M)}).catch(M=>{console.error("Erro ao fazer upload da imagem:",M),t.current("Erro ao enviar imagem. A comunidade será criada com imagem padrão."),N(Yf)})}else N(Yf)},h=G=>G.membros?Object.keys(G.membros).length:0,[f,p]=V.useState([]),[_,v]=V.useState(!1),[T,A]=V.useState(""),[S,P]=V.useState("maisNovos");V.useEffect(()=>{const G=$e(),re=Ge(G,"comunidades"),ie=cp(re,ye=>{const k=[];switch(ye.forEach(R=>{const I=R.val();I.id=R.key,I.membroCount=h(I);const N=T.toLowerCase().trim();(N===""||I.nome.toLowerCase().includes(N)||I.descricao&&I.descricao.toLowerCase().includes(N))&&k.push(I)}),S){case"maisNovos":k.sort((R,I)=>(I.timestamp||0)-(R.timestamp||0));break;case"maisAntigos":k.sort((R,I)=>(R.timestamp||0)-(I.timestamp||0));break;case"maisMembros":k.sort((R,I)=>I.membroCount-R.membroCount);break;case"menosMembros":k.sort((R,I)=>R.membroCount-I.membroCount);break}p(k)});return()=>ie()},[T,S]);const D=G=>{if(window.confirm("Tem certeza que deseja excluir esta comunidade?")){const re=$e();rr(Ge(re,"comunidades/"+G)).then(()=>{console.log("Comunidade excluída")}).catch(ie=>{console.error("Erro ao excluir comunidade:",ie)})}},F=Ry().currentUser,z=_?f:f.slice(0,10);return E.jsxs("div",{id:"comunitys",children:[E.jsx("div",{id:"novacomunidade",children:n?E.jsx("div",{id:"containerFormComunidade",children:E.jsxs("div",{id:"formCriarComunidade",style:{border:"1px solid #ccc",padding:"20px",marginTop:"10px",borderRadius:"5px"},children:[E.jsx("h3",{children:"Criar Nova Comunidade"}),E.jsxs("form",{id:"comunidadeForm",children:[E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Nome da comunidade:"}),E.jsx("input",{type:"text",id:"nomeComunidade",required:!0,style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Descrição:"}),E.jsx("textarea",{id:"descricaoComunidade",rows:3,style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Imagem da comunidade (opcional):"}),E.jsx("input",{type:"file",id:"imagemComunidade",accept:"image/*",style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),E.jsxs("div",{style:{marginBottom:"15px"},children:[E.jsx("label",{children:"Tipo de privacidade:"}),E.jsxs("select",{id:"tipoPrivacidade",style:{width:"100%",padding:"8px",marginTop:"5px"},children:[E.jsx("option",{value:"publica",children:"Pública"}),E.jsx("option",{value:"privada",children:"Privada"})]})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"spaceBetween"},children:[E.jsx("button",{type:"button",onClick:a,style:{padding:"8px 15px"},children:"Cancelar"}),E.jsx("button",{type:"button",onClick:c,style:{padding:"8px 15px",backgroundColor:"#4CAF50",color:"white",border:"none"},children:"Criar"})]})]})]})}):E.jsx(E.Fragment,{})}),E.jsx("section",{id:"comunidades",children:E.jsxs("div",{children:[E.jsxs("div",{children:[E.jsx("input",{type:"text",placeholder:"Pesquisar comunidades...",value:T,onChange:G=>A(G.target.value),style:{width:"calc(100% - 42px",padding:"10px",marginBottom:"10px"}}),E.jsx("button",{id:"btn-show-form-comunity",ref:i.createButton,onClick:s,children:E.jsx("i",{className:"fa-solid fa-plus"})})]}),sH(S,P),E.jsx("div",{id:"comunity-list",ref:i.listaComunidades,children:z.length===0?E.jsx("p",{children:"Nenhuma comunidade encontrada."}):z.map(G=>E.jsxs(Ft,{to:"/comunidade?id="+G.id,className:"comunity-item",children:[E.jsx("img",{src:G.banner||jn,alt:G.nome,className:"banner"}),E.jsx("img",{className:"photo",src:G.imagem||Yf,alt:G.nome}),E.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:G.nome}),E.jsxs("div",{style:{color:"#666",fontSize:"0.8em"},children:["Membros: ",G.membroCount]}),F&&G.criador===F.uid&&E.jsx("button",{style:{marginTop:"10px"},onClick:re=>{re.stopPropagation(),D(G.id)},children:"Excluir"})]},G.id))}),f.length>10&&E.jsx("button",{style:{marginTop:"10px",width:"100%"},onClick:()=>v(!_),children:_?"Mostrar menos":"Mostrar todas as comunidades"})]})}),E.jsx(Ic,{showPopup:t})]})}function aH(){return E.jsx("div",{id:"search",className:"page",children:E.jsx(oH,{})})}function lH(){const{logout:n}=oi();return E.jsx("div",{id:"settings",className:"page",children:E.jsxs("div",{className:"setting-item",children:[E.jsxs(Ft,{to:"/login",onClick:e=>{e.preventDefault(),n()},id:"logoutBtn",children:[E.jsx("i",{className:"fa-solid fa-arrow-right-from-bracket"})," "]}),E.jsx("div",{id:"sair",children:"Sair"})]})})}const Ai=({Element:n})=>E.jsxs(E.Fragment,{children:[E.jsx(n,{}),E.jsx(Ek,{}),E.jsx(Z5,{})]});function cH(){const[n,e]=V.useState(!1);return V.useEffect(()=>{Ry().onAuthStateChanged(t=>{fv(t)})},[]),E.jsx(J5,{setShow:e,children:n?E.jsx(bM,{children:E.jsxs(JD,{children:[E.jsx(fi,{path:"/",element:E.jsx(Ai,{Element:ez})}),E.jsx(fi,{path:"/search",element:E.jsx(Ai,{Element:aH})}),E.jsx(fi,{path:"/amigos",element:E.jsx(Ai,{Element:tz})}),E.jsx(fi,{path:"/chats",element:E.jsx(Ai,{Element:DA})}),E.jsx(fi,{path:"/chat/:id/",element:E.jsx(Ai,{Element:DA})}),E.jsx(fi,{path:"/comunidade",element:E.jsx(Ai,{Element:vq})}),E.jsx(fi,{path:"/login",element:E.jsx(Ai,{Element:Eq})}),E.jsx(fi,{path:"/registro",element:E.jsx(Ai,{Element:wq})}),E.jsx(fi,{path:"/perfil",element:E.jsx(Ai,{Element:bq})}),E.jsx(fi,{path:"/settings",element:E.jsx(Ai,{Element:lH})}),E.jsx(fi,{path:"/ferramentas",element:E.jsx(Ai,{Element:nH})}),E.jsx(fi,{path:"/flashcards",element:E.jsx(Ai,{Element:tH})}),E.jsx(fi,{path:"/add-posts",element:E.jsx(Ai,{Element:rH})})]})}):E.jsx("div",{id:"loading",children:E.jsx("div",{className:"header_logo",children:E.jsx("img",{src:Xh,width:"150px"})})})})}aD.createRoot(document.getElementById("root")).render(E.jsx(cH,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(n=>{console.log("[SW] Registrado com sucesso:",n.scope)}).catch(n=>{console.error("[SW] Falha no registro:",n)})});
