(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var F_={exports:{}},Du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function ok(){if(Sw)return Du;Sw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var c=null;if(a!==void 0&&(c=""+a),s.key!==void 0&&(c=""+s.key),"key"in s){a={};for(var d in s)d!=="key"&&(a[d]=s[d])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:a}}return Du.Fragment=e,Du.jsx=t,Du.jsxs=t,Du}var Aw;function ak(){return Aw||(Aw=1,F_.exports=ok()),F_.exports}var b=ak(),z_={exports:{}},Pu={},q_={exports:{}},H_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function lk(){return Rw||(Rw=1,function(n){function e(oe,be){var Pe=oe.length;oe.push(be);e:for(;0<Pe;){var ct=Pe-1>>>1,B=oe[ct];if(0<s(B,be))oe[ct]=be,oe[Pe]=B,Pe=ct;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var be=oe[0],Pe=oe.pop();if(Pe!==be){oe[0]=Pe;e:for(var ct=0,B=oe.length,fe=B>>>1;ct<fe;){var Ce=2*(ct+1)-1,pe=oe[Ce],De=Ce+1,re=oe[De];if(0>s(pe,Pe))De<B&&0>s(re,pe)?(oe[ct]=re,oe[De]=Pe,ct=De):(oe[ct]=pe,oe[Ce]=Pe,ct=Ce);else if(De<B&&0>s(re,Pe))oe[ct]=re,oe[De]=Pe,ct=De;else break e}}return be}function s(oe,be){var Pe=oe.sortIndex-be.sortIndex;return Pe!==0?Pe:oe.id-be.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],p=[],_=1,v=null,E=3,R=!1,C=!1,k=!1,O=!1,H=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function F(oe){for(var be=t(p);be!==null;){if(be.callback===null)i(p);else if(be.startTime<=oe)i(p),be.sortIndex=be.expirationTime,e(f,be);else break;be=t(p)}}function U(oe){if(k=!1,F(oe),!C)if(t(f)!==null)C=!0,Z||(Z=!0,G());else{var be=t(p);be!==null&&Xe(U,be.startTime-oe)}}var Z=!1,x=-1,A=5,N=-1;function L(){return O?!0:!(n.unstable_now()-N<A)}function V(){if(O=!1,Z){var oe=n.unstable_now();N=oe;var be=!0;try{e:{C=!1,k&&(k=!1,j(x),x=-1),R=!0;var Pe=E;try{t:{for(F(oe),v=t(f);v!==null&&!(v.expirationTime>oe&&L());){var ct=v.callback;if(typeof ct=="function"){v.callback=null,E=v.priorityLevel;var B=ct(v.expirationTime<=oe);if(oe=n.unstable_now(),typeof B=="function"){v.callback=B,F(oe),be=!0;break t}v===t(f)&&i(f),F(oe)}else i(f);v=t(f)}if(v!==null)be=!0;else{var fe=t(p);fe!==null&&Xe(U,fe.startTime-oe),be=!1}}break e}finally{v=null,E=Pe,R=!1}be=void 0}}finally{be?G():Z=!1}}}var G;if(typeof D=="function")G=function(){D(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,vt=P.port2;P.port1.onmessage=V,G=function(){vt.postMessage(null)}}else G=function(){H(V,0)};function Xe(oe,be){x=H(function(){oe(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(oe){switch(E){case 1:case 2:case 3:var be=3;break;default:be=E}var Pe=E;E=be;try{return oe()}finally{E=Pe}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(oe,be){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Pe=E;E=oe;try{return be()}finally{E=Pe}},n.unstable_scheduleCallback=function(oe,be,Pe){var ct=n.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?ct+Pe:ct):Pe=ct,oe){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Pe+B,oe={id:_++,callback:be,priorityLevel:oe,startTime:Pe,expirationTime:B,sortIndex:-1},Pe>ct?(oe.sortIndex=Pe,e(p,oe),t(f)===null&&oe===t(p)&&(k?(j(x),x=-1):k=!0,Xe(U,Pe-ct))):(oe.sortIndex=B,e(f,oe),C||R||(C=!0,Z||(Z=!0,G()))),oe},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(oe){var be=E;return function(){var Pe=E;E=be;try{return oe.apply(this,arguments)}finally{E=Pe}}}}(H_)),H_}var Iw;function ck(){return Iw||(Iw=1,q_.exports=lk()),q_.exports}var G_={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function uk(){if(xw)return Je;xw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function O(B,fe,Ce){this.props=B,this.context=fe,this.refs=k,this.updater=Ce||R}O.prototype.isReactComponent={},O.prototype.setState=function(B,fe){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,fe,"setState")},O.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function H(){}H.prototype=O.prototype;function j(B,fe,Ce){this.props=B,this.context=fe,this.refs=k,this.updater=Ce||R}var D=j.prototype=new H;D.constructor=j,C(D,O.prototype),D.isPureReactComponent=!0;var F=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function x(B,fe,Ce,pe,De,re){return Ce=re.ref,{$$typeof:n,type:B,key:fe,ref:Ce!==void 0?Ce:null,props:re}}function A(B,fe){return x(B.type,fe,void 0,void 0,void 0,B.props)}function N(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function L(B){var fe={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Ce){return fe[Ce]})}var V=/\/+/g;function G(B,fe){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):fe.toString(36)}function P(){}function vt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(P,P):(B.status="pending",B.then(function(fe){B.status==="pending"&&(B.status="fulfilled",B.value=fe)},function(fe){B.status==="pending"&&(B.status="rejected",B.reason=fe)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function Xe(B,fe,Ce,pe,De){var re=typeof B;(re==="undefined"||re==="boolean")&&(B=null);var Q=!1;if(B===null)Q=!0;else switch(re){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(B.$$typeof){case n:case e:Q=!0;break;case _:return Q=B._init,Xe(Q(B._payload),fe,Ce,pe,De)}}if(Q)return De=De(B),Q=pe===""?"."+G(B,0):pe,F(De)?(Ce="",Q!=null&&(Ce=Q.replace(V,"$&/")+"/"),Xe(De,fe,Ce,"",function(Ue){return Ue})):De!=null&&(N(De)&&(De=A(De,Ce+(De.key==null||B&&B.key===De.key?"":(""+De.key).replace(V,"$&/")+"/")+Q)),fe.push(De)),1;Q=0;var ye=pe===""?".":pe+":";if(F(B))for(var me=0;me<B.length;me++)pe=B[me],re=ye+G(pe,me),Q+=Xe(pe,fe,Ce,re,De);else if(me=E(B),typeof me=="function")for(B=me.call(B),me=0;!(pe=B.next()).done;)pe=pe.value,re=ye+G(pe,me++),Q+=Xe(pe,fe,Ce,re,De);else if(re==="object"){if(typeof B.then=="function")return Xe(vt(B),fe,Ce,pe,De);throw fe=String(B),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return Q}function oe(B,fe,Ce){if(B==null)return B;var pe=[],De=0;return Xe(B,pe,"","",function(re){return fe.call(Ce,re,De++)}),pe}function be(B){if(B._status===-1){var fe=B._result;fe=fe(),fe.then(function(Ce){(B._status===0||B._status===-1)&&(B._status=1,B._result=Ce)},function(Ce){(B._status===0||B._status===-1)&&(B._status=2,B._result=Ce)}),B._status===-1&&(B._status=0,B._result=fe)}if(B._status===1)return B._result.default;throw B._result}var Pe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function ct(){}return Je.Children={map:oe,forEach:function(B,fe,Ce){oe(B,function(){fe.apply(this,arguments)},Ce)},count:function(B){var fe=0;return oe(B,function(){fe++}),fe},toArray:function(B){return oe(B,function(fe){return fe})||[]},only:function(B){if(!N(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Je.Component=O,Je.Fragment=t,Je.Profiler=s,Je.PureComponent=j,Je.StrictMode=i,Je.Suspense=f,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Je.__COMPILER_RUNTIME={__proto__:null,c:function(B){return U.H.useMemoCache(B)}},Je.cache=function(B){return function(){return B.apply(null,arguments)}},Je.cloneElement=function(B,fe,Ce){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var pe=C({},B.props),De=B.key,re=void 0;if(fe!=null)for(Q in fe.ref!==void 0&&(re=void 0),fe.key!==void 0&&(De=""+fe.key),fe)!Z.call(fe,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&fe.ref===void 0||(pe[Q]=fe[Q]);var Q=arguments.length-2;if(Q===1)pe.children=Ce;else if(1<Q){for(var ye=Array(Q),me=0;me<Q;me++)ye[me]=arguments[me+2];pe.children=ye}return x(B.type,De,void 0,void 0,re,pe)},Je.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Je.createElement=function(B,fe,Ce){var pe,De={},re=null;if(fe!=null)for(pe in fe.key!==void 0&&(re=""+fe.key),fe)Z.call(fe,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(De[pe]=fe[pe]);var Q=arguments.length-2;if(Q===1)De.children=Ce;else if(1<Q){for(var ye=Array(Q),me=0;me<Q;me++)ye[me]=arguments[me+2];De.children=ye}if(B&&B.defaultProps)for(pe in Q=B.defaultProps,Q)De[pe]===void 0&&(De[pe]=Q[pe]);return x(B,re,void 0,void 0,null,De)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(B){return{$$typeof:d,render:B}},Je.isValidElement=N,Je.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:be}},Je.memo=function(B,fe){return{$$typeof:p,type:B,compare:fe===void 0?null:fe}},Je.startTransition=function(B){var fe=U.T,Ce={};U.T=Ce;try{var pe=B(),De=U.S;De!==null&&De(Ce,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(ct,Pe)}catch(re){Pe(re)}finally{U.T=fe}},Je.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Je.use=function(B){return U.H.use(B)},Je.useActionState=function(B,fe,Ce){return U.H.useActionState(B,fe,Ce)},Je.useCallback=function(B,fe){return U.H.useCallback(B,fe)},Je.useContext=function(B){return U.H.useContext(B)},Je.useDebugValue=function(){},Je.useDeferredValue=function(B,fe){return U.H.useDeferredValue(B,fe)},Je.useEffect=function(B,fe,Ce){var pe=U.H;if(typeof Ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return pe.useEffect(B,fe)},Je.useId=function(){return U.H.useId()},Je.useImperativeHandle=function(B,fe,Ce){return U.H.useImperativeHandle(B,fe,Ce)},Je.useInsertionEffect=function(B,fe){return U.H.useInsertionEffect(B,fe)},Je.useLayoutEffect=function(B,fe){return U.H.useLayoutEffect(B,fe)},Je.useMemo=function(B,fe){return U.H.useMemo(B,fe)},Je.useOptimistic=function(B,fe){return U.H.useOptimistic(B,fe)},Je.useReducer=function(B,fe,Ce){return U.H.useReducer(B,fe,Ce)},Je.useRef=function(B){return U.H.useRef(B)},Je.useState=function(B){return U.H.useState(B)},Je.useSyncExternalStore=function(B,fe,Ce){return U.H.useSyncExternalStore(B,fe,Ce)},Je.useTransition=function(){return U.H.useTransition()},Je.version="19.1.0",Je}var Nw;function Tv(){return Nw||(Nw=1,G_.exports=uk()),G_.exports}var $_={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function dk(){if(Ow)return Wn;Ow=1;var n=Tv();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,p,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:p,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Wn.createPortal=function(f,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(f,p,null,_)},Wn.flushSync=function(f){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=_,i.d.f()}},Wn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},Wn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Wn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var _=p.as,v=d(_,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:R}):_==="script"&&i.d.X(f,{crossOrigin:v,integrity:E,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Wn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},Wn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,v=d(_,p.crossOrigin);i.d.L(f,_,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Wn.preloadModule=function(f,p){if(typeof f=="string")if(p){var _=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},Wn.requestFormReset=function(f){i.d.r(f)},Wn.unstable_batchedUpdates=function(f,p){return f(p)},Wn.useFormState=function(f,p,_){return c.H.useFormState(f,p,_)},Wn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Wn.version="19.1.0",Wn}var kw;function hk(){if(kw)return $_.exports;kw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$_.exports=dk(),$_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function fk(){if(Dw)return Pu;Dw=1;var n=ck(),e=Tv(),t=hk();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(i(188))}function f(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,u=o;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return d(m),r;if(g===u)return d(m),o;g=g.sibling}throw Error(i(188))}if(l.return!==u.return)l=m,u=g;else{for(var w=!1,S=m.child;S;){if(S===l){w=!0,l=m,u=g;break}if(S===u){w=!0,u=m,l=g;break}S=S.sibling}if(!w){for(S=g.child;S;){if(S===l){w=!0,l=g,u=m;break}if(S===u){w=!0,u=g,l=m;break}S=S.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function p(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=p(r),o!==null)return o;r=r.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function G(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var P=Symbol.for("react.client.reference");function vt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===P?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case O:return"Profiler";case k:return"StrictMode";case U:return"Suspense";case Z:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case D:return(r.displayName||"Context")+".Provider";case j:return(r._context.displayName||"Context")+".Consumer";case F:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return o=r.displayName||null,o!==null?o:vt(r.type)||"Memo";case A:o=r._payload,r=r._init;try{return vt(r(o))}catch{}}return null}var Xe=Array.isArray,oe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},ct=[],B=-1;function fe(r){return{current:r}}function Ce(r){0>B||(r.current=ct[B],ct[B]=null,B--)}function pe(r,o){B++,ct[B]=r.current,r.current=o}var De=fe(null),re=fe(null),Q=fe(null),ye=fe(null);function me(r,o){switch(pe(Q,o),pe(re,r),pe(De,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Zb(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Zb(o),r=ew(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Ce(De),pe(De,r)}function Ue(){Ce(De),Ce(re),Ce(Q)}function Re(r){r.memoizedState!==null&&pe(ye,r);var o=De.current,l=ew(o,r.type);o!==l&&(pe(re,r),pe(De,l))}function ae(r){re.current===r&&(Ce(De),Ce(re)),ye.current===r&&(Ce(ye),Iu._currentValue=Pe)}var ke=Object.prototype.hasOwnProperty,Et=n.unstable_scheduleCallback,Ze=n.unstable_cancelCallback,mi=n.unstable_shouldYield,Ci=n.unstable_requestPaint,ht=n.unstable_now,Si=n.unstable_getCurrentPriorityLevel,hn=n.unstable_ImmediatePriority,Dt=n.unstable_UserBlockingPriority,W=n.unstable_NormalPriority,$=n.unstable_LowPriority,ve=n.unstable_IdlePriority,Se=n.log,Ne=n.unstable_setDisableYieldValue,we=null,se=null;function xe(r){if(typeof Se=="function"&&Ne(r),se&&typeof se.setStrictMode=="function")try{se.setStrictMode(we,r)}catch{}}var Qe=Math.clz32?Math.clz32:er,ft=Math.log,mt=Math.LN2;function er(r){return r>>>=0,r===0?32:31-(ft(r)/mt|0)|0}var yr=256,Wt=4194304;function Ln(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ai(r,o,l){var u=r.pendingLanes;if(u===0)return 0;var m=0,g=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var S=u&134217727;return S!==0?(u=S&~g,u!==0?m=Ln(u):(w&=S,w!==0?m=Ln(w):l||(l=S&~r,l!==0&&(m=Ln(l))))):(S=u&~g,S!==0?m=Ln(S):w!==0?m=Ln(w):l||(l=u&~r,l!==0&&(m=Ln(l)))),m===0?0:o!==0&&o!==m&&(o&g)===0&&(g=m&-m,l=o&-o,g>=l||g===32&&(l&4194048)!==0)?o:m}function wt(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function jt(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ye(){var r=yr;return yr<<=1,(yr&4194048)===0&&(yr=256),r}function Bt(){var r=Wt;return Wt<<=1,(Wt&62914560)===0&&(Wt=4194304),r}function Ve(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Ge(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ut(r,o,l,u,m,g){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var S=r.entanglements,M=r.expirationTimes,J=r.hiddenUpdates;for(l=w&~l;0<l;){var le=31-Qe(l),de=1<<le;S[le]=0,M[le]=-1;var ee=J[le];if(ee!==null)for(J[le]=null,le=0;le<ee.length;le++){var te=ee[le];te!==null&&(te.lane&=-536870913)}l&=~de}u!==0&&Ct(r,u,0),g!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=g&~(w&~o))}function Ct(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var u=31-Qe(o);r.entangledLanes|=o,r.entanglements[u]=r.entanglements[u]|1073741824|l&4194090}function Un(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var u=31-Qe(l),m=1<<u;m&o|r[u]&o&&(r[u]|=o),l&=~m}}function Vn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function An(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function tr(){var r=be.p;return r!==0?r:(r=window.event,r===void 0?32:vw(r.type))}function Za(r,o){var l=be.p;try{return be.p=r,o()}finally{be.p=l}}var Ft=Math.random().toString(36).slice(2),an="__reactFiber$"+Ft,zt="__reactProps$"+Ft,Rn="__reactContainer$"+Ft,Fs="__reactEvents$"+Ft,lh="__reactListeners$"+Ft,vr="__reactHandles$"+Ft,ch="__reactResources$"+Ft,Zo="__reactMarker$"+Ft;function zs(r){delete r[an],delete r[zt],delete r[Fs],delete r[lh],delete r[vr]}function Wr(r){var o=r[an];if(o)return o;for(var l=r.parentNode;l;){if(o=l[Rn]||l[an]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=rw(r);r!==null;){if(l=r[an])return l;r=rw(r)}return o}r=l,l=r.parentNode}return null}function Er(r){if(r=r[an]||r[Rn]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Tr(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function oi(r){var o=r[ch];return o||(o=r[ch]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ln(r){r[Zo]=!0}var Pc=new Set,el={};function nr(r,o){Xr(r,o),Xr(r+"Capture",o)}function Xr(r,o){for(el[r]=o,r=0;r<o.length;r++)Pc.add(o[r])}var uh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dh={},ea={};function hh(r){return ke.call(ea,r)?!0:ke.call(dh,r)?!1:uh.test(r)?ea[r]=!0:(dh[r]=!0,!1)}function qs(r,o,l){if(hh(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function br(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function jn(r,o,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+u)}}var ta,fh;function Jr(r){if(ta===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);ta=o&&o[1]||"",fh=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ta+r+fh}var tl=!1;function nl(r,o){if(!r||tl)return"";tl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(te){var ee=te}Reflect.construct(r,[],de)}else{try{de.call()}catch(te){ee=te}r.call(de.prototype)}}else{try{throw Error()}catch(te){ee=te}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(te){if(te&&ee&&typeof te.stack=="string")return[te.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],S=g[1];if(w&&S){var M=w.split(`
`),J=S.split(`
`);for(m=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;m<J.length&&!J[m].includes("DetermineComponentFrameRoot");)m++;if(u===M.length||m===J.length)for(u=M.length-1,m=J.length-1;1<=u&&0<=m&&M[u]!==J[m];)m--;for(;1<=u&&0<=m;u--,m--)if(M[u]!==J[m]){if(u!==1||m!==1)do if(u--,m--,0>m||M[u]!==J[m]){var le=`
`+M[u].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=u&&0<=m);break}}}finally{tl=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Jr(l):""}function Mc(r){switch(r.tag){case 26:case 27:case 5:return Jr(r.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 15:return nl(r.type,!1);case 11:return nl(r.type.render,!1);case 1:return nl(r.type,!0);case 31:return Jr("Activity");default:return""}}function il(r){try{var o="";do o+=Mc(r),r=r.return;while(r);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ai(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Lc(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Gp(r){var o=Lc(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),u=""+r[o];if(!r.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,g=l.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return m.call(this)},set:function(w){u=""+w,g.call(this,w)}}),Object.defineProperty(r,o,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function rl(r){r._valueTracker||(r._valueTracker=Gp(r))}function Uc(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),u="";return r&&(u=Lc(r)?r.checked?"true":"false":r.value),r=u,r!==l?(o.setValue(r),!0):!1}function na(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var $p=/[\n"\\]/g;function fn(r){return r.replace($p,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ri(r,o,l,u,m,g,w,S){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),o!=null?w==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+ai(o)):r.value!==""+ai(o)&&(r.value=""+ai(o)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),o!=null?Hs(r,w,ai(o)):l!=null?Hs(r,w,ai(l)):u!=null&&r.removeAttribute("value"),m==null&&g!=null&&(r.defaultChecked=!!g),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+ai(S):r.removeAttribute("name")}function ia(r,o,l,u,m,g,w,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),o!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||o!=null))return;l=l!=null?""+ai(l):"",o=o!=null?""+ai(o):l,S||o===r.value||(r.value=o),r.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=S?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function Hs(r,o,l){o==="number"&&na(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Zr(r,o,l,u){if(r=r.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=o.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&u&&(r[l].defaultSelected=!0)}else{for(l=""+ai(l),o=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}o!==null||r[m].disabled||(o=r[m])}o!==null&&(o.selected=!0)}}function Pt(r,o,l){if(o!=null&&(o=""+ai(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+ai(l):""}function ra(r,o,l,u){if(o==null){if(u!=null){if(l!=null)throw Error(i(92));if(Xe(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),o=l}l=ai(o),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u)}function ji(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var sa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mh(r,o,l){var u=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":u?r.setProperty(o,l):typeof l!="number"||l===0||sa.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function Vc(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&l[m]!==u&&mh(r,m,u)}else for(var g in o)o.hasOwnProperty(g)&&mh(r,g,o[g])}function jc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sl(r){return Qp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var es=null;function Bi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ts=null,ns=null;function Bc(r){var o=Er(r);if(o&&(r=o.stateNode)){var l=r[zt]||null;e:switch(r=o.stateNode,o.type){case"input":if(Ri(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+fn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var u=l[o];if(u!==r&&u.form===r.form){var m=u[zt]||null;if(!m)throw Error(i(90));Ri(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<l.length;o++)u=l[o],u.form===r.form&&Uc(u)}break e;case"textarea":Pt(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Zr(r,!!l.multiple,o,!1)}}}var wr=!1;function ph(r,o,l){if(wr)return r(o,l);wr=!0;try{var u=r(o);return u}finally{if(wr=!1,(ts!==null||ns!==null)&&(cf(),ts&&(o=ts,r=ns,ns=ts=null,Bc(o),r)))for(o=0;o<r.length;o++)Bc(r[o])}}function oa(r,o){var l=r.stateNode;if(l===null)return null;var u=l[zt]||null;if(u===null)return null;l=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=!1;if(ir)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){Fi=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{Fi=!1}var Cr=null,Gs=null,is=null;function Fc(){if(is)return is;var r,o=Gs,l=o.length,u,m="value"in Cr?Cr.value:Cr.textContent,g=m.length;for(r=0;r<l&&o[r]===m[r];r++);var w=l-r;for(u=1;u<=w&&o[l-u]===m[g-u];u++);return is=m.slice(r,1<u?1-u:void 0)}function Sr(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ar(){return!0}function zc(){return!1}function In(r){function o(l,u,m,g,w){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(l=r[S],this[S]=l?l(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ar:zc,this.isPropagationStopped=zc,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),o}var Rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=In(Rt),la=_({},Rt,{view:0,detail:0}),gh=In(la),al,ll,Rr,ca=_({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Rr&&(Rr&&r.type==="mousemove"?(al=r.screenX-Rr.screenX,ll=r.screenY-Rr.screenY):ll=al=0,Rr=r),al)},movementY:function(r){return"movementY"in r?r.movementY:ll}}),zi=In(ca),_h=_({},ca,{dataTransfer:0}),Yp=In(_h),ua=_({},la,{relatedTarget:0}),cl=In(ua),qc=_({},Rt,{animationName:0,elapsedTime:0,pseudoElement:0}),ul=In(qc),yh=_({},Rt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),dl=In(yh),Wp=_({},Rt,{data:0}),Hc=In(Wp),da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Eh[r])?!!o[r]:!1}function ha(){return Gc}var Th=_({},la,{key:function(r){if(r.key){var o=da[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Sr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?vh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(r){return r.type==="keypress"?Sr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Sr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),hl=In(Th),bh=_({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=In(bh),rs=_({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),wh=In(rs),Ch=_({},Rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sh=In(Ch),Ah=_({},ca,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),fl=In(Ah),li=_({},Rt,{newState:0,oldState:0}),Rh=In(li),Ih=[9,13,27,32],Ir=ir&&"CompositionEvent"in window,h=null;ir&&"documentMode"in document&&(h=document.documentMode);var y=ir&&"TextEvent"in window&&!h,T=ir&&(!Ir||h&&8<h&&11>=h),I=" ",Y=!1;function ne(r,o){switch(r){case"keyup":return Ih.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Te(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var pt=!1;function yn(r,o){switch(r){case"compositionend":return Te(o);case"keypress":return o.which!==32?null:(Y=!0,I);case"textInput":return r=o.data,r===I&&Y?null:r;default:return null}}function gt(r,o){if(pt)return r==="compositionend"||!Ir&&ne(r,o)?(r=Fc(),is=Gs=Cr=null,pt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return T&&o.locale!=="ko"?null:o.data;default:return null}}var xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vn(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!xn[r.type]:o==="textarea"}function ss(r,o,l,u){ts?ns?ns.push(u):ns=[u]:ts=u,o=pf(o,"onChange"),0<o.length&&(l=new ol("onChange","change",null,l,u),r.push({event:l,listeners:o}))}var Bn=null,xr=null;function Kc(r){Qb(r,0)}function xh(r){var o=Tr(r);if(Uc(o))return r}function p0(r,o){if(r==="change")return o}var g0=!1;if(ir){var Xp;if(ir){var Jp="oninput"in document;if(!Jp){var _0=document.createElement("div");_0.setAttribute("oninput","return;"),Jp=typeof _0.oninput=="function"}Xp=Jp}else Xp=!1;g0=Xp&&(!document.documentMode||9<document.documentMode)}function y0(){Bn&&(Bn.detachEvent("onpropertychange",v0),xr=Bn=null)}function v0(r){if(r.propertyName==="value"&&xh(xr)){var o=[];ss(o,xr,r,Bi(r)),ph(Kc,o)}}function LN(r,o,l){r==="focusin"?(y0(),Bn=o,xr=l,Bn.attachEvent("onpropertychange",v0)):r==="focusout"&&y0()}function UN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xh(xr)}function VN(r,o){if(r==="click")return xh(o)}function jN(r,o){if(r==="input"||r==="change")return xh(o)}function BN(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Ii=typeof Object.is=="function"?Object.is:BN;function Qc(r,o){if(Ii(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),u=Object.keys(o);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!ke.call(o,m)||!Ii(r[m],o[m]))return!1}return!0}function E0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function T0(r,o){var l=E0(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=o&&u>=o)return{node:l,offset:o-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=E0(l)}}function b0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?b0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function w0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=na(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=na(r.document)}return o}function Zp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var FN=ir&&"documentMode"in document&&11>=document.documentMode,ml=null,eg=null,Yc=null,tg=!1;function C0(r,o,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;tg||ml==null||ml!==na(u)||(u=ml,"selectionStart"in u&&Zp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Yc&&Qc(Yc,u)||(Yc=u,u=pf(eg,"onSelect"),0<u.length&&(o=new ol("onSelect","select",null,o,l),r.push({event:o,listeners:u}),o.target=ml)))}function fa(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var pl={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionrun:fa("Transition","TransitionRun"),transitionstart:fa("Transition","TransitionStart"),transitioncancel:fa("Transition","TransitionCancel"),transitionend:fa("Transition","TransitionEnd")},ng={},S0={};ir&&(S0=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function ma(r){if(ng[r])return ng[r];if(!pl[r])return r;var o=pl[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in S0)return ng[r]=o[l];return r}var A0=ma("animationend"),R0=ma("animationiteration"),I0=ma("animationstart"),zN=ma("transitionrun"),qN=ma("transitionstart"),HN=ma("transitioncancel"),x0=ma("transitionend"),N0=new Map,ig="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ig.push("scrollEnd");function rr(r,o){N0.set(r,o),nr(o,[r])}var O0=new WeakMap;function qi(r,o){if(typeof r=="object"&&r!==null){var l=O0.get(r);return l!==void 0?l:(o={value:r,source:o,stack:il(o)},O0.set(r,o),o)}return{value:r,source:o,stack:il(o)}}var Hi=[],gl=0,rg=0;function Nh(){for(var r=gl,o=rg=gl=0;o<r;){var l=Hi[o];Hi[o++]=null;var u=Hi[o];Hi[o++]=null;var m=Hi[o];Hi[o++]=null;var g=Hi[o];if(Hi[o++]=null,u!==null&&m!==null){var w=u.pending;w===null?m.next=m:(m.next=w.next,w.next=m),u.pending=m}g!==0&&k0(l,m,g)}}function Oh(r,o,l,u){Hi[gl++]=r,Hi[gl++]=o,Hi[gl++]=l,Hi[gl++]=u,rg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function sg(r,o,l,u){return Oh(r,o,l,u),kh(r)}function _l(r,o){return Oh(r,null,null,o),kh(r)}function k0(r,o,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var m=!1,g=r.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(m=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,m&&o!==null&&(m=31-Qe(l),r=g.hiddenUpdates,u=r[m],u===null?r[m]=[o]:u.push(o),o.lane=l|536870912),g):null}function kh(r){if(50<Eu)throw Eu=0,d_=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var yl={};function GN(r,o,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(r,o,l,u){return new GN(r,o,l,u)}function og(r){return r=r.prototype,!(!r||!r.isReactComponent)}function os(r,o){var l=r.alternate;return l===null?(l=xi(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function D0(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Dh(r,o,l,u,m,g){var w=0;if(u=r,typeof r=="function")og(r)&&(w=1);else if(typeof r=="string")w=KO(r,l,De.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=xi(31,l,o,m),r.elementType=N,r.lanes=g,r;case C:return pa(l.children,m,g,o);case k:w=8,m|=24;break;case O:return r=xi(12,l,o,m|2),r.elementType=O,r.lanes=g,r;case U:return r=xi(13,l,o,m),r.elementType=U,r.lanes=g,r;case Z:return r=xi(19,l,o,m),r.elementType=Z,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case H:case D:w=10;break e;case j:w=9;break e;case F:w=11;break e;case x:w=14;break e;case A:w=16,u=null;break e}w=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return o=xi(w,l,o,m),o.elementType=r,o.type=u,o.lanes=g,o}function pa(r,o,l,u){return r=xi(7,r,u,o),r.lanes=l,r}function ag(r,o,l){return r=xi(6,r,null,o),r.lanes=l,r}function lg(r,o,l){return o=xi(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var vl=[],El=0,Ph=null,Mh=0,Gi=[],$i=0,ga=null,as=1,ls="";function _a(r,o){vl[El++]=Mh,vl[El++]=Ph,Ph=r,Mh=o}function P0(r,o,l){Gi[$i++]=as,Gi[$i++]=ls,Gi[$i++]=ga,ga=r;var u=as;r=ls;var m=32-Qe(u)-1;u&=~(1<<m),l+=1;var g=32-Qe(o)+m;if(30<g){var w=m-m%5;g=(u&(1<<w)-1).toString(32),u>>=w,m-=w,as=1<<32-Qe(o)+m|l<<m|u,ls=g+r}else as=1<<g|l<<m|u,ls=r}function cg(r){r.return!==null&&(_a(r,1),P0(r,1,0))}function ug(r){for(;r===Ph;)Ph=vl[--El],vl[El]=null,Mh=vl[--El],vl[El]=null;for(;r===ga;)ga=Gi[--$i],Gi[$i]=null,ls=Gi[--$i],Gi[$i]=null,as=Gi[--$i],Gi[$i]=null}var ci=null,rn=null,St=!1,ya=null,Nr=!1,dg=Error(i(519));function va(r){var o=Error(i(418,""));throw Jc(qi(o,r)),dg}function M0(r){var o=r.stateNode,l=r.type,u=r.memoizedProps;switch(o[an]=r,o[zt]=u,l){case"dialog":at("cancel",o),at("close",o);break;case"iframe":case"object":case"embed":at("load",o);break;case"video":case"audio":for(l=0;l<bu.length;l++)at(bu[l],o);break;case"source":at("error",o);break;case"img":case"image":case"link":at("error",o),at("load",o);break;case"details":at("toggle",o);break;case"input":at("invalid",o),ia(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),rl(o);break;case"select":at("invalid",o);break;case"textarea":at("invalid",o),ra(o,u.value,u.defaultValue,u.children),rl(o)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||u.suppressHydrationWarning===!0||Jb(o.textContent,l)?(u.popover!=null&&(at("beforetoggle",o),at("toggle",o)),u.onScroll!=null&&at("scroll",o),u.onScrollEnd!=null&&at("scrollend",o),u.onClick!=null&&(o.onclick=gf),o=!0):o=!1,o||va(r)}function L0(r){for(ci=r.return;ci;)switch(ci.tag){case 5:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:ci=ci.return}}function Wc(r){if(r!==ci)return!1;if(!St)return L0(r),St=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||R_(r.type,r.memoizedProps)),l=!l),l&&rn&&va(r),L0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(o===0){rn=or(r.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;r=r.nextSibling}rn=null}}else o===27?(o=rn,ao(r.type)?(r=O_,O_=null,rn=r):rn=o):rn=ci?or(r.stateNode.nextSibling):null;return!0}function Xc(){rn=ci=null,St=!1}function U0(){var r=ya;return r!==null&&(_i===null?_i=r:_i.push.apply(_i,r),ya=null),r}function Jc(r){ya===null?ya=[r]:ya.push(r)}var hg=fe(null),Ea=null,cs=null;function $s(r,o,l){pe(hg,o._currentValue),o._currentValue=l}function us(r){r._currentValue=hg.current,Ce(hg)}function fg(r,o,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),r===l)break;r=r.return}}function mg(r,o,l,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var g=m.dependencies;if(g!==null){var w=m.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=m;for(var M=0;M<o.length;M++)if(S.context===o[M]){g.lanes|=l,S=g.alternate,S!==null&&(S.lanes|=l),fg(g.return,l,r),u||(w=null);break e}g=S.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(i(341));w.lanes|=l,g=w.alternate,g!==null&&(g.lanes|=l),fg(w,l,r),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===r){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function Zc(r,o,l,u){r=null;for(var m=o,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var S=m.type;Ii(m.pendingProps.value,w.value)||(r!==null?r.push(S):r=[S])}}else if(m===ye.current){if(w=m.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Iu):r=[Iu])}m=m.return}r!==null&&mg(o,r,l,u),o.flags|=262144}function Lh(r){for(r=r.firstContext;r!==null;){if(!Ii(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ta(r){Ea=r,cs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Yn(r){return V0(Ea,r)}function Uh(r,o){return Ea===null&&Ta(r),V0(r,o)}function V0(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},cs===null){if(r===null)throw Error(i(308));cs=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else cs=cs.next=o;return l}var $N=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},KN=n.unstable_scheduleCallback,QN=n.unstable_NormalPriority,En={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pg(){return{controller:new $N,data:new Map,refCount:0}}function eu(r){r.refCount--,r.refCount===0&&KN(QN,function(){r.controller.abort()})}var tu=null,gg=0,Tl=0,bl=null;function YN(r,o){if(tu===null){var l=tu=[];gg=0,Tl=y_(),bl={status:"pending",value:void 0,then:function(u){l.push(u)}}}return gg++,o.then(j0,j0),o}function j0(){if(--gg===0&&tu!==null){bl!==null&&(bl.status="fulfilled");var r=tu;tu=null,Tl=0,bl=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function WN(r,o){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return r.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<l.length;m++)(0,l[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var B0=oe.S;oe.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&YN(r,o),B0!==null&&B0(r,o)};var ba=fe(null);function _g(){var r=ba.current;return r!==null?r:qt.pooledCache}function Vh(r,o){o===null?pe(ba,ba.current):pe(ba,o.pool)}function F0(){var r=_g();return r===null?null:{parent:En._currentValue,pool:r}}var nu=Error(i(460)),z0=Error(i(474)),jh=Error(i(542)),yg={then:function(){}};function q0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Bh(){}function H0(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(Bh,Bh),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,$0(r),r;default:if(typeof o.status=="string")o.then(Bh,Bh);else{if(r=qt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,$0(r),r}throw iu=o,nu}}var iu=null;function G0(){if(iu===null)throw Error(i(459));var r=iu;return iu=null,r}function $0(r){if(r===nu||r===jh)throw Error(i(483))}var Ks=!1;function vg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eg(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Qs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ys(r,o,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Nt&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=kh(r),k0(r,null,l),o}return Oh(r,u,o,l),kh(r)}function ru(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var u=o.lanes;u&=r.pendingLanes,l|=u,o.lanes=l,Un(r,l)}}function Tg(r,o){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?m=g=o:g=g.next=o}else m=g=o;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var bg=!1;function su(){if(bg){var r=bl;if(r!==null)throw r}}function ou(r,o,l,u){bg=!1;var m=r.updateQueue;Ks=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var M=S,J=M.next;M.next=null,w===null?g=J:w.next=J,w=M;var le=r.alternate;le!==null&&(le=le.updateQueue,S=le.lastBaseUpdate,S!==w&&(S===null?le.firstBaseUpdate=J:S.next=J,le.lastBaseUpdate=M))}if(g!==null){var de=m.baseState;w=0,le=J=M=null,S=g;do{var ee=S.lane&-536870913,te=ee!==S.lane;if(te?(_t&ee)===ee:(u&ee)===ee){ee!==0&&ee===Tl&&(bg=!0),le!==null&&(le=le.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var He=r,je=S;ee=o;var Ut=l;switch(je.tag){case 1:if(He=je.payload,typeof He=="function"){de=He.call(Ut,de,ee);break e}de=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=je.payload,ee=typeof He=="function"?He.call(Ut,de,ee):He,ee==null)break e;de=_({},de,ee);break e;case 2:Ks=!0}}ee=S.callback,ee!==null&&(r.flags|=64,te&&(r.flags|=8192),te=m.callbacks,te===null?m.callbacks=[ee]:te.push(ee))}else te={lane:ee,tag:S.tag,payload:S.payload,callback:S.callback,next:null},le===null?(J=le=te,M=de):le=le.next=te,w|=ee;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;te=S,S=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);le===null&&(M=de),m.baseState=M,m.firstBaseUpdate=J,m.lastBaseUpdate=le,g===null&&(m.shared.lanes=0),io|=w,r.lanes=w,r.memoizedState=de}}function K0(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function Q0(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)K0(l[r],o)}var wl=fe(null),Fh=fe(0);function Y0(r,o){r=_s,pe(Fh,r),pe(wl,o),_s=r|o.baseLanes}function wg(){pe(Fh,_s),pe(wl,wl.current)}function Cg(){_s=Fh.current,Ce(wl),Ce(Fh)}var Ws=0,et=null,Mt=null,mn=null,zh=!1,Cl=!1,wa=!1,qh=0,au=0,Sl=null,XN=0;function cn(){throw Error(i(321))}function Sg(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!Ii(r[l],o[l]))return!1;return!0}function Ag(r,o,l,u,m,g){return Ws=g,et=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,oe.H=r===null||r.memoizedState===null?kT:DT,wa=!1,g=l(u,m),wa=!1,Cl&&(g=X0(o,l,u,m)),W0(r),g}function W0(r){oe.H=Yh;var o=Mt!==null&&Mt.next!==null;if(Ws=0,mn=Mt=et=null,zh=!1,au=0,Sl=null,o)throw Error(i(300));r===null||Nn||(r=r.dependencies,r!==null&&Lh(r)&&(Nn=!0))}function X0(r,o,l,u){et=r;var m=0;do{if(Cl&&(Sl=null),au=0,Cl=!1,25<=m)throw Error(i(301));if(m+=1,mn=Mt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}oe.H=rO,g=o(l,u)}while(Cl);return g}function JN(){var r=oe.H,o=r.useState()[0];return o=typeof o.then=="function"?lu(o):o,r=r.useState()[0],(Mt!==null?Mt.memoizedState:null)!==r&&(et.flags|=1024),o}function Rg(){var r=qh!==0;return qh=0,r}function Ig(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function xg(r){if(zh){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}zh=!1}Ws=0,mn=Mt=et=null,Cl=!1,au=qh=0,Sl=null}function pi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?et.memoizedState=mn=r:mn=mn.next=r,mn}function pn(){if(Mt===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=Mt.next;var o=mn===null?et.memoizedState:mn.next;if(o!==null)mn=o,Mt=r;else{if(r===null)throw et.alternate===null?Error(i(467)):Error(i(310));Mt=r,r={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},mn===null?et.memoizedState=mn=r:mn=mn.next=r}return mn}function Ng(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(r){var o=au;return au+=1,Sl===null&&(Sl=[]),r=H0(Sl,r,o),o=et,(mn===null?o.memoizedState:mn.next)===null&&(o=o.alternate,oe.H=o===null||o.memoizedState===null?kT:DT),r}function Hh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return lu(r);if(r.$$typeof===D)return Yn(r)}throw Error(i(438,String(r)))}function Og(r){var o=null,l=et.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var u=et.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Ng(),et.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),u=0;u<r;u++)l[u]=L;return o.index++,l}function ds(r,o){return typeof o=="function"?o(r):o}function Gh(r){var o=pn();return kg(o,Mt,r)}function kg(r,o,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var m=r.baseQueue,g=u.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}o.baseQueue=m=g,u.pending=null}if(g=r.baseState,m===null)r.memoizedState=g;else{o=m.next;var S=w=null,M=null,J=o,le=!1;do{var de=J.lane&-536870913;if(de!==J.lane?(_t&de)===de:(Ws&de)===de){var ee=J.revertLane;if(ee===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),de===Tl&&(le=!0);else if((Ws&ee)===ee){J=J.next,ee===Tl&&(le=!0);continue}else de={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},M===null?(S=M=de,w=g):M=M.next=de,et.lanes|=ee,io|=ee;de=J.action,wa&&l(g,de),g=J.hasEagerState?J.eagerState:l(g,de)}else ee={lane:de,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},M===null?(S=M=ee,w=g):M=M.next=ee,et.lanes|=de,io|=de;J=J.next}while(J!==null&&J!==o);if(M===null?w=g:M.next=S,!Ii(g,r.memoizedState)&&(Nn=!0,le&&(l=bl,l!==null)))throw l;r.memoizedState=g,r.baseState=w,r.baseQueue=M,u.lastRenderedState=g}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Dg(r){var o=pn(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,m=l.pending,g=o.memoizedState;if(m!==null){l.pending=null;var w=m=m.next;do g=r(g,w.action),w=w.next;while(w!==m);Ii(g,o.memoizedState)||(Nn=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),l.lastRenderedState=g}return[g,u]}function J0(r,o,l){var u=et,m=pn(),g=St;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=o();var w=!Ii((Mt||m).memoizedState,l);w&&(m.memoizedState=l,Nn=!0),m=m.queue;var S=tT.bind(null,u,m,r);if(cu(2048,8,S,[r]),m.getSnapshot!==o||w||mn!==null&&mn.memoizedState.tag&1){if(u.flags|=2048,Al(9,$h(),eT.bind(null,u,m,l,o),null),qt===null)throw Error(i(349));g||(Ws&124)!==0||Z0(u,o,l)}return l}function Z0(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=et.updateQueue,o===null?(o=Ng(),et.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function eT(r,o,l,u){o.value=l,o.getSnapshot=u,nT(o)&&iT(r)}function tT(r,o,l){return l(function(){nT(o)&&iT(r)})}function nT(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!Ii(r,l)}catch{return!0}}function iT(r){var o=_l(r,2);o!==null&&Pi(o,r,2)}function Pg(r){var o=pi();if(typeof r=="function"){var l=r;if(r=l(),wa){xe(!0);try{l()}finally{xe(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:r},o}function rT(r,o,l,u){return r.baseState=l,kg(r,Mt,typeof u=="function"?u:ds)}function ZN(r,o,l,u,m){if(Qh(r))throw Error(i(485));if(r=o.action,r!==null){var g={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};oe.T!==null?l(!0):g.isTransition=!1,u(g),l=o.pending,l===null?(g.next=o.pending=g,sT(o,g)):(g.next=l.next,o.pending=l.next=g)}}function sT(r,o){var l=o.action,u=o.payload,m=r.state;if(o.isTransition){var g=oe.T,w={};oe.T=w;try{var S=l(m,u),M=oe.S;M!==null&&M(w,S),oT(r,o,S)}catch(J){Mg(r,o,J)}finally{oe.T=g}}else try{g=l(m,u),oT(r,o,g)}catch(J){Mg(r,o,J)}}function oT(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){aT(r,o,u)},function(u){return Mg(r,o,u)}):aT(r,o,l)}function aT(r,o,l){o.status="fulfilled",o.value=l,lT(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,sT(r,l)))}function Mg(r,o,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=l,lT(o),o=o.next;while(o!==u)}r.action=null}function lT(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function cT(r,o){return o}function uT(r,o){if(St){var l=qt.formState;if(l!==null){e:{var u=et;if(St){if(rn){t:{for(var m=rn,g=Nr;m.nodeType!==8;){if(!g){m=null;break t}if(m=or(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){rn=or(m.nextSibling),u=m.data==="F!";break e}}va(u)}u=!1}u&&(o=l[0])}}return l=pi(),l.memoizedState=l.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cT,lastRenderedState:o},l.queue=u,l=xT.bind(null,et,u),u.dispatch=l,u=Pg(!1),g=Bg.bind(null,et,!1,u.queue),u=pi(),m={state:o,dispatch:null,action:r,pending:null},u.queue=m,l=ZN.bind(null,et,m,g,l),m.dispatch=l,u.memoizedState=r,[o,l,!1]}function dT(r){var o=pn();return hT(o,Mt,r)}function hT(r,o,l){if(o=kg(r,o,cT)[0],r=Gh(ds)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=lu(o)}catch(w){throw w===nu?jh:w}else u=o;o=pn();var m=o.queue,g=m.dispatch;return l!==o.memoizedState&&(et.flags|=2048,Al(9,$h(),eO.bind(null,m,l),null)),[u,g,r]}function eO(r,o){r.action=o}function fT(r){var o=pn(),l=Mt;if(l!==null)return hT(o,l,r);pn(),o=o.memoizedState,l=pn();var u=l.queue.dispatch;return l.memoizedState=r,[o,u,!1]}function Al(r,o,l,u){return r={tag:r,create:l,deps:u,inst:o,next:null},o=et.updateQueue,o===null&&(o=Ng(),et.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,o.lastEffect=r),r}function $h(){return{destroy:void 0,resource:void 0}}function mT(){return pn().memoizedState}function Kh(r,o,l,u){var m=pi();u=u===void 0?null:u,et.flags|=r,m.memoizedState=Al(1|o,$h(),l,u)}function cu(r,o,l,u){var m=pn();u=u===void 0?null:u;var g=m.memoizedState.inst;Mt!==null&&u!==null&&Sg(u,Mt.memoizedState.deps)?m.memoizedState=Al(o,g,l,u):(et.flags|=r,m.memoizedState=Al(1|o,g,l,u))}function pT(r,o){Kh(8390656,8,r,o)}function gT(r,o){cu(2048,8,r,o)}function _T(r,o){return cu(4,2,r,o)}function yT(r,o){return cu(4,4,r,o)}function vT(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function ET(r,o,l){l=l!=null?l.concat([r]):null,cu(4,4,vT.bind(null,o,r),l)}function Lg(){}function TT(r,o){var l=pn();o=o===void 0?null:o;var u=l.memoizedState;return o!==null&&Sg(o,u[1])?u[0]:(l.memoizedState=[r,o],r)}function bT(r,o){var l=pn();o=o===void 0?null:o;var u=l.memoizedState;if(o!==null&&Sg(o,u[1]))return u[0];if(u=r(),wa){xe(!0);try{r()}finally{xe(!1)}}return l.memoizedState=[u,o],u}function Ug(r,o,l){return l===void 0||(Ws&1073741824)!==0?r.memoizedState=o:(r.memoizedState=l,r=Sb(),et.lanes|=r,io|=r,l)}function wT(r,o,l,u){return Ii(l,o)?l:wl.current!==null?(r=Ug(r,l,u),Ii(r,o)||(Nn=!0),r):(Ws&42)===0?(Nn=!0,r.memoizedState=l):(r=Sb(),et.lanes|=r,io|=r,o)}function CT(r,o,l,u,m){var g=be.p;be.p=g!==0&&8>g?g:8;var w=oe.T,S={};oe.T=S,Bg(r,!1,o,l);try{var M=m(),J=oe.S;if(J!==null&&J(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var le=WN(M,u);uu(r,o,le,Di(r))}else uu(r,o,u,Di(r))}catch(de){uu(r,o,{then:function(){},status:"rejected",reason:de},Di())}finally{be.p=g,oe.T=w}}function tO(){}function Vg(r,o,l,u){if(r.tag!==5)throw Error(i(476));var m=ST(r).queue;CT(r,m,o,Pe,l===null?tO:function(){return AT(r),l(u)})}function ST(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:Pe},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function AT(r){var o=ST(r).next.queue;uu(r,o,{},Di())}function jg(){return Yn(Iu)}function RT(){return pn().memoizedState}function IT(){return pn().memoizedState}function nO(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Di();r=Qs(l);var u=Ys(o,r,l);u!==null&&(Pi(u,o,l),ru(u,o,l)),o={cache:pg()},r.payload=o;return}o=o.return}}function iO(r,o,l){var u=Di();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Qh(r)?NT(o,l):(l=sg(r,o,l,u),l!==null&&(Pi(l,r,u),OT(l,o,u)))}function xT(r,o,l){var u=Di();uu(r,o,l,u)}function uu(r,o,l,u){var m={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Qh(r))NT(o,m);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var w=o.lastRenderedState,S=g(w,l);if(m.hasEagerState=!0,m.eagerState=S,Ii(S,w))return Oh(r,o,m,0),qt===null&&Nh(),!1}catch{}finally{}if(l=sg(r,o,m,u),l!==null)return Pi(l,r,u),OT(l,o,u),!0}return!1}function Bg(r,o,l,u){if(u={lane:2,revertLane:y_(),action:u,hasEagerState:!1,eagerState:null,next:null},Qh(r)){if(o)throw Error(i(479))}else o=sg(r,l,u,2),o!==null&&Pi(o,r,2)}function Qh(r){var o=r.alternate;return r===et||o!==null&&o===et}function NT(r,o){Cl=zh=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function OT(r,o,l){if((l&4194048)!==0){var u=o.lanes;u&=r.pendingLanes,l|=u,o.lanes=l,Un(r,l)}}var Yh={readContext:Yn,use:Hh,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn},kT={readContext:Yn,use:Hh,useCallback:function(r,o){return pi().memoizedState=[r,o===void 0?null:o],r},useContext:Yn,useEffect:pT,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,Kh(4194308,4,vT.bind(null,o,r),l)},useLayoutEffect:function(r,o){return Kh(4194308,4,r,o)},useInsertionEffect:function(r,o){Kh(4,2,r,o)},useMemo:function(r,o){var l=pi();o=o===void 0?null:o;var u=r();if(wa){xe(!0);try{r()}finally{xe(!1)}}return l.memoizedState=[u,o],u},useReducer:function(r,o,l){var u=pi();if(l!==void 0){var m=l(o);if(wa){xe(!0);try{l(o)}finally{xe(!1)}}}else m=o;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=iO.bind(null,et,r),[u.memoizedState,r]},useRef:function(r){var o=pi();return r={current:r},o.memoizedState=r},useState:function(r){r=Pg(r);var o=r.queue,l=xT.bind(null,et,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:Lg,useDeferredValue:function(r,o){var l=pi();return Ug(l,r,o)},useTransition:function(){var r=Pg(!1);return r=CT.bind(null,et,r.queue,!0,!1),pi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var u=et,m=pi();if(St){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),qt===null)throw Error(i(349));(_t&124)!==0||Z0(u,o,l)}m.memoizedState=l;var g={value:l,getSnapshot:o};return m.queue=g,pT(tT.bind(null,u,g,r),[r]),u.flags|=2048,Al(9,$h(),eT.bind(null,u,g,l,o),null),l},useId:function(){var r=pi(),o=qt.identifierPrefix;if(St){var l=ls,u=as;l=(u&~(1<<32-Qe(u)-1)).toString(32)+l,o="«"+o+"R"+l,l=qh++,0<l&&(o+="H"+l.toString(32)),o+="»"}else l=XN++,o="«"+o+"r"+l.toString(32)+"»";return r.memoizedState=o},useHostTransitionStatus:jg,useFormState:uT,useActionState:uT,useOptimistic:function(r){var o=pi();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Bg.bind(null,et,!0,l),l.dispatch=o,[r,o]},useMemoCache:Og,useCacheRefresh:function(){return pi().memoizedState=nO.bind(null,et)}},DT={readContext:Yn,use:Hh,useCallback:TT,useContext:Yn,useEffect:gT,useImperativeHandle:ET,useInsertionEffect:_T,useLayoutEffect:yT,useMemo:bT,useReducer:Gh,useRef:mT,useState:function(){return Gh(ds)},useDebugValue:Lg,useDeferredValue:function(r,o){var l=pn();return wT(l,Mt.memoizedState,r,o)},useTransition:function(){var r=Gh(ds)[0],o=pn().memoizedState;return[typeof r=="boolean"?r:lu(r),o]},useSyncExternalStore:J0,useId:RT,useHostTransitionStatus:jg,useFormState:dT,useActionState:dT,useOptimistic:function(r,o){var l=pn();return rT(l,Mt,r,o)},useMemoCache:Og,useCacheRefresh:IT},rO={readContext:Yn,use:Hh,useCallback:TT,useContext:Yn,useEffect:gT,useImperativeHandle:ET,useInsertionEffect:_T,useLayoutEffect:yT,useMemo:bT,useReducer:Dg,useRef:mT,useState:function(){return Dg(ds)},useDebugValue:Lg,useDeferredValue:function(r,o){var l=pn();return Mt===null?Ug(l,r,o):wT(l,Mt.memoizedState,r,o)},useTransition:function(){var r=Dg(ds)[0],o=pn().memoizedState;return[typeof r=="boolean"?r:lu(r),o]},useSyncExternalStore:J0,useId:RT,useHostTransitionStatus:jg,useFormState:fT,useActionState:fT,useOptimistic:function(r,o){var l=pn();return Mt!==null?rT(l,Mt,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Og,useCacheRefresh:IT},Rl=null,du=0;function Wh(r){var o=du;return du+=1,Rl===null&&(Rl=[]),H0(Rl,r,o)}function hu(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Xh(r,o){throw o.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function PT(r){var o=r._init;return o(r._payload)}function MT(r){function o(K,z){if(r){var X=K.deletions;X===null?(K.deletions=[z],K.flags|=16):X.push(z)}}function l(K,z){if(!r)return null;for(;z!==null;)o(K,z),z=z.sibling;return null}function u(K){for(var z=new Map;K!==null;)K.key!==null?z.set(K.key,K):z.set(K.index,K),K=K.sibling;return z}function m(K,z){return K=os(K,z),K.index=0,K.sibling=null,K}function g(K,z,X){return K.index=X,r?(X=K.alternate,X!==null?(X=X.index,X<z?(K.flags|=67108866,z):X):(K.flags|=67108866,z)):(K.flags|=1048576,z)}function w(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function S(K,z,X,ce){return z===null||z.tag!==6?(z=ag(X,K.mode,ce),z.return=K,z):(z=m(z,X),z.return=K,z)}function M(K,z,X,ce){var Oe=X.type;return Oe===C?le(K,z,X.props.children,ce,X.key):z!==null&&(z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===A&&PT(Oe)===z.type)?(z=m(z,X.props),hu(z,X),z.return=K,z):(z=Dh(X.type,X.key,X.props,null,K.mode,ce),hu(z,X),z.return=K,z)}function J(K,z,X,ce){return z===null||z.tag!==4||z.stateNode.containerInfo!==X.containerInfo||z.stateNode.implementation!==X.implementation?(z=lg(X,K.mode,ce),z.return=K,z):(z=m(z,X.children||[]),z.return=K,z)}function le(K,z,X,ce,Oe){return z===null||z.tag!==7?(z=pa(X,K.mode,ce,Oe),z.return=K,z):(z=m(z,X),z.return=K,z)}function de(K,z,X){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=ag(""+z,K.mode,X),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case E:return X=Dh(z.type,z.key,z.props,null,K.mode,X),hu(X,z),X.return=K,X;case R:return z=lg(z,K.mode,X),z.return=K,z;case A:var ce=z._init;return z=ce(z._payload),de(K,z,X)}if(Xe(z)||G(z))return z=pa(z,K.mode,X,null),z.return=K,z;if(typeof z.then=="function")return de(K,Wh(z),X);if(z.$$typeof===D)return de(K,Uh(K,z),X);Xh(K,z)}return null}function ee(K,z,X,ce){var Oe=z!==null?z.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Oe!==null?null:S(K,z,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case E:return X.key===Oe?M(K,z,X,ce):null;case R:return X.key===Oe?J(K,z,X,ce):null;case A:return Oe=X._init,X=Oe(X._payload),ee(K,z,X,ce)}if(Xe(X)||G(X))return Oe!==null?null:le(K,z,X,ce,null);if(typeof X.then=="function")return ee(K,z,Wh(X),ce);if(X.$$typeof===D)return ee(K,z,Uh(K,X),ce);Xh(K,X)}return null}function te(K,z,X,ce,Oe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(X)||null,S(z,K,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case E:return K=K.get(ce.key===null?X:ce.key)||null,M(z,K,ce,Oe);case R:return K=K.get(ce.key===null?X:ce.key)||null,J(z,K,ce,Oe);case A:var nt=ce._init;return ce=nt(ce._payload),te(K,z,X,ce,Oe)}if(Xe(ce)||G(ce))return K=K.get(X)||null,le(z,K,ce,Oe,null);if(typeof ce.then=="function")return te(K,z,X,Wh(ce),Oe);if(ce.$$typeof===D)return te(K,z,X,Uh(z,ce),Oe);Xh(z,ce)}return null}function He(K,z,X,ce){for(var Oe=null,nt=null,Me=z,Be=z=0,kn=null;Me!==null&&Be<X.length;Be++){Me.index>Be?(kn=Me,Me=null):kn=Me.sibling;var Tt=ee(K,Me,X[Be],ce);if(Tt===null){Me===null&&(Me=kn);break}r&&Me&&Tt.alternate===null&&o(K,Me),z=g(Tt,z,Be),nt===null?Oe=Tt:nt.sibling=Tt,nt=Tt,Me=kn}if(Be===X.length)return l(K,Me),St&&_a(K,Be),Oe;if(Me===null){for(;Be<X.length;Be++)Me=de(K,X[Be],ce),Me!==null&&(z=g(Me,z,Be),nt===null?Oe=Me:nt.sibling=Me,nt=Me);return St&&_a(K,Be),Oe}for(Me=u(Me);Be<X.length;Be++)kn=te(Me,K,Be,X[Be],ce),kn!==null&&(r&&kn.alternate!==null&&Me.delete(kn.key===null?Be:kn.key),z=g(kn,z,Be),nt===null?Oe=kn:nt.sibling=kn,nt=kn);return r&&Me.forEach(function(fo){return o(K,fo)}),St&&_a(K,Be),Oe}function je(K,z,X,ce){if(X==null)throw Error(i(151));for(var Oe=null,nt=null,Me=z,Be=z=0,kn=null,Tt=X.next();Me!==null&&!Tt.done;Be++,Tt=X.next()){Me.index>Be?(kn=Me,Me=null):kn=Me.sibling;var fo=ee(K,Me,Tt.value,ce);if(fo===null){Me===null&&(Me=kn);break}r&&Me&&fo.alternate===null&&o(K,Me),z=g(fo,z,Be),nt===null?Oe=fo:nt.sibling=fo,nt=fo,Me=kn}if(Tt.done)return l(K,Me),St&&_a(K,Be),Oe;if(Me===null){for(;!Tt.done;Be++,Tt=X.next())Tt=de(K,Tt.value,ce),Tt!==null&&(z=g(Tt,z,Be),nt===null?Oe=Tt:nt.sibling=Tt,nt=Tt);return St&&_a(K,Be),Oe}for(Me=u(Me);!Tt.done;Be++,Tt=X.next())Tt=te(Me,K,Be,Tt.value,ce),Tt!==null&&(r&&Tt.alternate!==null&&Me.delete(Tt.key===null?Be:Tt.key),z=g(Tt,z,Be),nt===null?Oe=Tt:nt.sibling=Tt,nt=Tt);return r&&Me.forEach(function(sk){return o(K,sk)}),St&&_a(K,Be),Oe}function Ut(K,z,X,ce){if(typeof X=="object"&&X!==null&&X.type===C&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case E:e:{for(var Oe=X.key;z!==null;){if(z.key===Oe){if(Oe=X.type,Oe===C){if(z.tag===7){l(K,z.sibling),ce=m(z,X.props.children),ce.return=K,K=ce;break e}}else if(z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===A&&PT(Oe)===z.type){l(K,z.sibling),ce=m(z,X.props),hu(ce,X),ce.return=K,K=ce;break e}l(K,z);break}else o(K,z);z=z.sibling}X.type===C?(ce=pa(X.props.children,K.mode,ce,X.key),ce.return=K,K=ce):(ce=Dh(X.type,X.key,X.props,null,K.mode,ce),hu(ce,X),ce.return=K,K=ce)}return w(K);case R:e:{for(Oe=X.key;z!==null;){if(z.key===Oe)if(z.tag===4&&z.stateNode.containerInfo===X.containerInfo&&z.stateNode.implementation===X.implementation){l(K,z.sibling),ce=m(z,X.children||[]),ce.return=K,K=ce;break e}else{l(K,z);break}else o(K,z);z=z.sibling}ce=lg(X,K.mode,ce),ce.return=K,K=ce}return w(K);case A:return Oe=X._init,X=Oe(X._payload),Ut(K,z,X,ce)}if(Xe(X))return He(K,z,X,ce);if(G(X)){if(Oe=G(X),typeof Oe!="function")throw Error(i(150));return X=Oe.call(X),je(K,z,X,ce)}if(typeof X.then=="function")return Ut(K,z,Wh(X),ce);if(X.$$typeof===D)return Ut(K,z,Uh(K,X),ce);Xh(K,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,z!==null&&z.tag===6?(l(K,z.sibling),ce=m(z,X),ce.return=K,K=ce):(l(K,z),ce=ag(X,K.mode,ce),ce.return=K,K=ce),w(K)):l(K,z)}return function(K,z,X,ce){try{du=0;var Oe=Ut(K,z,X,ce);return Rl=null,Oe}catch(Me){if(Me===nu||Me===jh)throw Me;var nt=xi(29,Me,null,K.mode);return nt.lanes=ce,nt.return=K,nt}finally{}}}var Il=MT(!0),LT=MT(!1),Ki=fe(null),Or=null;function Xs(r){var o=r.alternate;pe(Tn,Tn.current&1),pe(Ki,r),Or===null&&(o===null||wl.current!==null||o.memoizedState!==null)&&(Or=r)}function UT(r){if(r.tag===22){if(pe(Tn,Tn.current),pe(Ki,r),Or===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(Or=r)}}else Js()}function Js(){pe(Tn,Tn.current),pe(Ki,Ki.current)}function hs(r){Ce(Ki),Or===r&&(Or=null),Ce(Tn)}var Tn=fe(0);function Jh(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||N_(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Fg(r,o,l,u){o=r.memoizedState,l=l(u,o),l=l==null?o:_({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var zg={enqueueSetState:function(r,o,l){r=r._reactInternals;var u=Di(),m=Qs(u);m.payload=o,l!=null&&(m.callback=l),o=Ys(r,m,u),o!==null&&(Pi(o,r,u),ru(o,r,u))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var u=Di(),m=Qs(u);m.tag=1,m.payload=o,l!=null&&(m.callback=l),o=Ys(r,m,u),o!==null&&(Pi(o,r,u),ru(o,r,u))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Di(),u=Qs(l);u.tag=2,o!=null&&(u.callback=o),o=Ys(r,u,l),o!==null&&(Pi(o,r,l),ru(o,r,l))}};function VT(r,o,l,u,m,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,w):o.prototype&&o.prototype.isPureReactComponent?!Qc(l,u)||!Qc(m,g):!0}function jT(r,o,l,u){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,u),o.state!==r&&zg.enqueueReplaceState(o,o.state,null)}function Ca(r,o){var l=o;if("ref"in o){l={};for(var u in o)u!=="ref"&&(l[u]=o[u])}if(r=r.defaultProps){l===o&&(l=_({},l));for(var m in r)l[m]===void 0&&(l[m]=r[m])}return l}var Zh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function BT(r){Zh(r)}function FT(r){console.error(r)}function zT(r){Zh(r)}function ef(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function qT(r,o,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function qg(r,o,l){return l=Qs(l),l.tag=3,l.payload={element:null},l.callback=function(){ef(r,o)},l}function HT(r){return r=Qs(r),r.tag=3,r}function GT(r,o,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;r.payload=function(){return m(g)},r.callback=function(){qT(o,l,u)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){qT(o,l,u),typeof m!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function sO(r,o,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=l.alternate,o!==null&&Zc(o,l,m,!0),l=Ki.current,l!==null){switch(l.tag){case 13:return Or===null?f_():l.alternate===null&&sn===0&&(sn=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===yg?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([u]):o.add(u),p_(r,u,m)),!1;case 22:return l.flags|=65536,u===yg?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([u]):l.add(u)),p_(r,u,m)),!1}throw Error(i(435,l.tag))}return p_(r,u,m),f_(),!1}if(St)return o=Ki.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==dg&&(r=Error(i(422),{cause:u}),Jc(qi(r,l)))):(u!==dg&&(o=Error(i(423),{cause:u}),Jc(qi(o,l))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=qi(u,l),m=qg(r.stateNode,u,m),Tg(r,m),sn!==4&&(sn=2)),!1;var g=Error(i(520),{cause:u});if(g=qi(g,l),vu===null?vu=[g]:vu.push(g),sn!==4&&(sn=2),o===null)return!0;u=qi(u,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=m&-m,l.lanes|=r,r=qg(l.stateNode,u,r),Tg(l,r),!1;case 1:if(o=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ro===null||!ro.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=HT(m),GT(m,r,l,u),Tg(l,m),!1}l=l.return}while(l!==null);return!1}var $T=Error(i(461)),Nn=!1;function Fn(r,o,l,u){o.child=r===null?LT(o,null,l,u):Il(o,r.child,l,u)}function KT(r,o,l,u,m){l=l.render;var g=o.ref;if("ref"in u){var w={};for(var S in u)S!=="ref"&&(w[S]=u[S])}else w=u;return Ta(o),u=Ag(r,o,l,w,g,m),S=Rg(),r!==null&&!Nn?(Ig(r,o,m),fs(r,o,m)):(St&&S&&cg(o),o.flags|=1,Fn(r,o,u,m),o.child)}function QT(r,o,l,u,m){if(r===null){var g=l.type;return typeof g=="function"&&!og(g)&&g.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=g,YT(r,o,g,u,m)):(r=Dh(l.type,null,u,o,o.mode,m),r.ref=o.ref,r.return=o,o.child=r)}if(g=r.child,!Xg(r,m)){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:Qc,l(w,u)&&r.ref===o.ref)return fs(r,o,m)}return o.flags|=1,r=os(g,u),r.ref=o.ref,r.return=o,o.child=r}function YT(r,o,l,u,m){if(r!==null){var g=r.memoizedProps;if(Qc(g,u)&&r.ref===o.ref)if(Nn=!1,o.pendingProps=u=g,Xg(r,m))(r.flags&131072)!==0&&(Nn=!0);else return o.lanes=r.lanes,fs(r,o,m)}return Hg(r,o,l,u,m)}function WT(r,o,l){var u=o.pendingProps,m=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((o.flags&128)!==0){if(u=g!==null?g.baseLanes|l:l,r!==null){for(m=o.child=r.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;o.childLanes=g&~u}else o.childLanes=0,o.child=null;return XT(r,o,u,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Vh(o,g!==null?g.cachePool:null),g!==null?Y0(o,g):wg(),UT(o);else return o.lanes=o.childLanes=536870912,XT(r,o,g!==null?g.baseLanes|l:l,l)}else g!==null?(Vh(o,g.cachePool),Y0(o,g),Js(),o.memoizedState=null):(r!==null&&Vh(o,null),wg(),Js());return Fn(r,o,m,l),o.child}function XT(r,o,l,u){var m=_g();return m=m===null?null:{parent:En._currentValue,pool:m},o.memoizedState={baseLanes:l,cachePool:m},r!==null&&Vh(o,null),wg(),UT(o),r!==null&&Zc(r,o,u,!0),null}function tf(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function Hg(r,o,l,u,m){return Ta(o),l=Ag(r,o,l,u,void 0,m),u=Rg(),r!==null&&!Nn?(Ig(r,o,m),fs(r,o,m)):(St&&u&&cg(o),o.flags|=1,Fn(r,o,l,m),o.child)}function JT(r,o,l,u,m,g){return Ta(o),o.updateQueue=null,l=X0(o,u,l,m),W0(r),u=Rg(),r!==null&&!Nn?(Ig(r,o,g),fs(r,o,g)):(St&&u&&cg(o),o.flags|=1,Fn(r,o,l,g),o.child)}function ZT(r,o,l,u,m){if(Ta(o),o.stateNode===null){var g=yl,w=l.contextType;typeof w=="object"&&w!==null&&(g=Yn(w)),g=new l(u,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=zg,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=u,g.state=o.memoizedState,g.refs={},vg(o),w=l.contextType,g.context=typeof w=="object"&&w!==null?Yn(w):yl,g.state=o.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Fg(o,l,w,u),g.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&zg.enqueueReplaceState(g,g.state,null),ou(o,u,g,m),su(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(r===null){g=o.stateNode;var S=o.memoizedProps,M=Ca(l,S);g.props=M;var J=g.context,le=l.contextType;w=yl,typeof le=="object"&&le!==null&&(w=Yn(le));var de=l.getDerivedStateFromProps;le=typeof de=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=o.pendingProps!==S,le||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||J!==w)&&jT(o,g,u,w),Ks=!1;var ee=o.memoizedState;g.state=ee,ou(o,u,g,m),su(),J=o.memoizedState,S||ee!==J||Ks?(typeof de=="function"&&(Fg(o,l,de,u),J=o.memoizedState),(M=Ks||VT(o,l,M,u,ee,J,w))?(le||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=J),g.props=u,g.state=J,g.context=w,u=M):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{g=o.stateNode,Eg(r,o),w=o.memoizedProps,le=Ca(l,w),g.props=le,de=o.pendingProps,ee=g.context,J=l.contextType,M=yl,typeof J=="object"&&J!==null&&(M=Yn(J)),S=l.getDerivedStateFromProps,(J=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==de||ee!==M)&&jT(o,g,u,M),Ks=!1,ee=o.memoizedState,g.state=ee,ou(o,u,g,m),su();var te=o.memoizedState;w!==de||ee!==te||Ks||r!==null&&r.dependencies!==null&&Lh(r.dependencies)?(typeof S=="function"&&(Fg(o,l,S,u),te=o.memoizedState),(le=Ks||VT(o,l,le,u,ee,te,M)||r!==null&&r.dependencies!==null&&Lh(r.dependencies))?(J||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,te,M),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,te,M)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=te),g.props=u,g.state=te,g.context=M,u=le):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&ee===r.memoizedState||(o.flags|=1024),u=!1)}return g=u,tf(r,o),u=(o.flags&128)!==0,g||u?(g=o.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,r!==null&&u?(o.child=Il(o,r.child,null,m),o.child=Il(o,null,l,m)):Fn(r,o,l,m),o.memoizedState=g.state,r=o.child):r=fs(r,o,m),r}function eb(r,o,l,u){return Xc(),o.flags|=256,Fn(r,o,l,u),o.child}var Gg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $g(r){return{baseLanes:r,cachePool:F0()}}function Kg(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=Qi),r}function tb(r,o,l){var u=o.pendingProps,m=!1,g=(o.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(Tn.current&2)!==0),w&&(m=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,r===null){if(St){if(m?Xs(o):Js(),St){var S=rn,M;if(M=S){e:{for(M=S,S=Nr;M.nodeType!==8;){if(!S){S=null;break e}if(M=or(M.nextSibling),M===null){S=null;break e}}S=M}S!==null?(o.memoizedState={dehydrated:S,treeContext:ga!==null?{id:as,overflow:ls}:null,retryLane:536870912,hydrationErrors:null},M=xi(18,null,null,0),M.stateNode=S,M.return=o,o.child=M,ci=o,rn=null,M=!0):M=!1}M||va(o)}if(S=o.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return N_(S)?o.lanes=32:o.lanes=536870912,null;hs(o)}return S=u.children,u=u.fallback,m?(Js(),m=o.mode,S=nf({mode:"hidden",children:S},m),u=pa(u,m,l,null),S.return=o,u.return=o,S.sibling=u,o.child=S,m=o.child,m.memoizedState=$g(l),m.childLanes=Kg(r,w,l),o.memoizedState=Gg,u):(Xs(o),Qg(o,S))}if(M=r.memoizedState,M!==null&&(S=M.dehydrated,S!==null)){if(g)o.flags&256?(Xs(o),o.flags&=-257,o=Yg(r,o,l)):o.memoizedState!==null?(Js(),o.child=r.child,o.flags|=128,o=null):(Js(),m=u.fallback,S=o.mode,u=nf({mode:"visible",children:u.children},S),m=pa(m,S,l,null),m.flags|=2,u.return=o,m.return=o,u.sibling=m,o.child=u,Il(o,r.child,null,l),u=o.child,u.memoizedState=$g(l),u.childLanes=Kg(r,w,l),o.memoizedState=Gg,o=m);else if(Xs(o),N_(S)){if(w=S.nextSibling&&S.nextSibling.dataset,w)var J=w.dgst;w=J,u=Error(i(419)),u.stack="",u.digest=w,Jc({value:u,source:null,stack:null}),o=Yg(r,o,l)}else if(Nn||Zc(r,o,l,!1),w=(l&r.childLanes)!==0,Nn||w){if(w=qt,w!==null&&(u=l&-l,u=(u&42)!==0?1:Vn(u),u=(u&(w.suspendedLanes|l))!==0?0:u,u!==0&&u!==M.retryLane))throw M.retryLane=u,_l(r,u),Pi(w,r,u),$T;S.data==="$?"||f_(),o=Yg(r,o,l)}else S.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=M.treeContext,rn=or(S.nextSibling),ci=o,St=!0,ya=null,Nr=!1,r!==null&&(Gi[$i++]=as,Gi[$i++]=ls,Gi[$i++]=ga,as=r.id,ls=r.overflow,ga=o),o=Qg(o,u.children),o.flags|=4096);return o}return m?(Js(),m=u.fallback,S=o.mode,M=r.child,J=M.sibling,u=os(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,J!==null?m=os(J,m):(m=pa(m,S,l,null),m.flags|=2),m.return=o,u.return=o,u.sibling=m,o.child=u,u=m,m=o.child,S=r.child.memoizedState,S===null?S=$g(l):(M=S.cachePool,M!==null?(J=En._currentValue,M=M.parent!==J?{parent:J,pool:J}:M):M=F0(),S={baseLanes:S.baseLanes|l,cachePool:M}),m.memoizedState=S,m.childLanes=Kg(r,w,l),o.memoizedState=Gg,u):(Xs(o),l=r.child,r=l.sibling,l=os(l,{mode:"visible",children:u.children}),l.return=o,l.sibling=null,r!==null&&(w=o.deletions,w===null?(o.deletions=[r],o.flags|=16):w.push(r)),o.child=l,o.memoizedState=null,l)}function Qg(r,o){return o=nf({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function nf(r,o){return r=xi(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Yg(r,o,l){return Il(o,r.child,null,l),r=Qg(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function nb(r,o,l){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o),fg(r.return,o,l)}function Wg(r,o,l,u,m){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=m)}function ib(r,o,l){var u=o.pendingProps,m=u.revealOrder,g=u.tail;if(Fn(r,o,u.children,l),u=Tn.current,(u&2)!==0)u=u&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&nb(r,l,o);else if(r.tag===19)nb(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(pe(Tn,u),m){case"forwards":for(l=o.child,m=null;l!==null;)r=l.alternate,r!==null&&Jh(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),Wg(o,!1,m,l,g);break;case"backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(r=m.alternate,r!==null&&Jh(r)===null){o.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}Wg(o,!0,l,null,g);break;case"together":Wg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function fs(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),io|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(Zc(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=os(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=os(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function Xg(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Lh(r)))}function oO(r,o,l){switch(o.tag){case 3:me(o,o.stateNode.containerInfo),$s(o,En,r.memoizedState.cache),Xc();break;case 27:case 5:Re(o);break;case 4:me(o,o.stateNode.containerInfo);break;case 10:$s(o,o.type,o.memoizedProps.value);break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Xs(o),o.flags|=128,null):(l&o.child.childLanes)!==0?tb(r,o,l):(Xs(o),r=fs(r,o,l),r!==null?r.sibling:null);Xs(o);break;case 19:var m=(r.flags&128)!==0;if(u=(l&o.childLanes)!==0,u||(Zc(r,o,l,!1),u=(l&o.childLanes)!==0),m){if(u)return ib(r,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),pe(Tn,Tn.current),u)break;return null;case 22:case 23:return o.lanes=0,WT(r,o,l);case 24:$s(o,En,r.memoizedState.cache)}return fs(r,o,l)}function rb(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)Nn=!0;else{if(!Xg(r,l)&&(o.flags&128)===0)return Nn=!1,oO(r,o,l);Nn=(r.flags&131072)!==0}else Nn=!1,St&&(o.flags&1048576)!==0&&P0(o,Mh,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var u=o.elementType,m=u._init;if(u=m(u._payload),o.type=u,typeof u=="function")og(u)?(r=Ca(u,r),o.tag=1,o=ZT(null,o,u,r,l)):(o.tag=0,o=Hg(null,o,u,r,l));else{if(u!=null){if(m=u.$$typeof,m===F){o.tag=11,o=KT(null,o,u,r,l);break e}else if(m===x){o.tag=14,o=QT(null,o,u,r,l);break e}}throw o=vt(u)||u,Error(i(306,o,""))}}return o;case 0:return Hg(r,o,o.type,o.pendingProps,l);case 1:return u=o.type,m=Ca(u,o.pendingProps),ZT(r,o,u,m,l);case 3:e:{if(me(o,o.stateNode.containerInfo),r===null)throw Error(i(387));u=o.pendingProps;var g=o.memoizedState;m=g.element,Eg(r,o),ou(o,u,null,l);var w=o.memoizedState;if(u=w.cache,$s(o,En,u),u!==g.cache&&mg(o,[En],l,!0),su(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=eb(r,o,u,l);break e}else if(u!==m){m=qi(Error(i(424)),o),Jc(m),o=eb(r,o,u,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(rn=or(r.firstChild),ci=o,St=!0,ya=null,Nr=!0,l=LT(o,null,u,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Xc(),u===m){o=fs(r,o,l);break e}Fn(r,o,u,l)}o=o.child}return o;case 26:return tf(r,o),r===null?(l=lw(o.type,null,o.pendingProps,null))?o.memoizedState=l:St||(l=o.type,r=o.pendingProps,u=_f(Q.current).createElement(l),u[an]=o,u[zt]=r,qn(u,l,r),ln(u),o.stateNode=u):o.memoizedState=lw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Re(o),r===null&&St&&(u=o.stateNode=sw(o.type,o.pendingProps,Q.current),ci=o,Nr=!0,m=rn,ao(o.type)?(O_=m,rn=or(u.firstChild)):rn=m),Fn(r,o,o.pendingProps.children,l),tf(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&St&&((m=u=rn)&&(u=PO(u,o.type,o.pendingProps,Nr),u!==null?(o.stateNode=u,ci=o,rn=or(u.firstChild),Nr=!1,m=!0):m=!1),m||va(o)),Re(o),m=o.type,g=o.pendingProps,w=r!==null?r.memoizedProps:null,u=g.children,R_(m,g)?u=null:w!==null&&R_(m,w)&&(o.flags|=32),o.memoizedState!==null&&(m=Ag(r,o,JN,null,null,l),Iu._currentValue=m),tf(r,o),Fn(r,o,u,l),o.child;case 6:return r===null&&St&&((r=l=rn)&&(l=MO(l,o.pendingProps,Nr),l!==null?(o.stateNode=l,ci=o,rn=null,r=!0):r=!1),r||va(o)),null;case 13:return tb(r,o,l);case 4:return me(o,o.stateNode.containerInfo),u=o.pendingProps,r===null?o.child=Il(o,null,u,l):Fn(r,o,u,l),o.child;case 11:return KT(r,o,o.type,o.pendingProps,l);case 7:return Fn(r,o,o.pendingProps,l),o.child;case 8:return Fn(r,o,o.pendingProps.children,l),o.child;case 12:return Fn(r,o,o.pendingProps.children,l),o.child;case 10:return u=o.pendingProps,$s(o,o.type,u.value),Fn(r,o,u.children,l),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,Ta(o),m=Yn(m),u=u(m),o.flags|=1,Fn(r,o,u,l),o.child;case 14:return QT(r,o,o.type,o.pendingProps,l);case 15:return YT(r,o,o.type,o.pendingProps,l);case 19:return ib(r,o,l);case 31:return u=o.pendingProps,l=o.mode,u={mode:u.mode,children:u.children},r===null?(l=nf(u,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=os(r.child,u),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return WT(r,o,l);case 24:return Ta(o),u=Yn(En),r===null?(m=_g(),m===null&&(m=qt,g=pg(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),o.memoizedState={parent:u,cache:m},vg(o),$s(o,En,m)):((r.lanes&l)!==0&&(Eg(r,o),ou(o,null,null,l),su()),m=r.memoizedState,g=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),$s(o,En,u)):(u=g.cache,$s(o,En,u),u!==m.cache&&mg(o,[En],l,!0))),Fn(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ms(r){r.flags|=4}function sb(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!fw(o)){if(o=Ki.current,o!==null&&((_t&4194048)===_t?Or!==null:(_t&62914560)!==_t&&(_t&536870912)===0||o!==Or))throw iu=yg,z0;r.flags|=8192}}function rf(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Bt():536870912,r.lanes|=o,kl|=o)}function fu(r,o){if(!St)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Xt(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(o)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=l,o}function aO(r,o,l){var u=o.pendingProps;switch(ug(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(o),null;case 1:return Xt(o),null;case 3:return l=o.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),us(En),Ue(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Wc(o)?ms(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,U0())),Xt(o),null;case 26:return l=o.memoizedState,r===null?(ms(o),l!==null?(Xt(o),sb(o,l)):(Xt(o),o.flags&=-16777217)):l?l!==r.memoizedState?(ms(o),Xt(o),sb(o,l)):(Xt(o),o.flags&=-16777217):(r.memoizedProps!==u&&ms(o),Xt(o),o.flags&=-16777217),null;case 27:ae(o),l=Q.current;var m=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==u&&ms(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return Xt(o),null}r=De.current,Wc(o)?M0(o):(r=sw(m,u,l),o.stateNode=r,ms(o))}return Xt(o),null;case 5:if(ae(o),l=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==u&&ms(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return Xt(o),null}if(r=De.current,Wc(o))M0(o);else{switch(m=_f(Q.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?m.createElement("select",{is:u.is}):m.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?m.createElement(l,{is:u.is}):m.createElement(l)}}r[an]=o,r[zt]=u;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=r;e:switch(qn(r,l,u),l){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ms(o)}}return Xt(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==u&&ms(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(i(166));if(r=Q.current,Wc(o)){if(r=o.stateNode,l=o.memoizedProps,u=null,m=ci,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[an]=o,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Jb(r.nodeValue,l)),r||va(o)}else r=_f(r).createTextNode(u),r[an]=o,o.stateNode=r}return Xt(o),null;case 13:if(u=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Wc(o),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[an]=o}else Xc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Xt(o),m=!1}else m=U0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(hs(o),o):(hs(o),null)}if(hs(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=u!==null,r=r!==null&&r.memoizedState!==null,l){u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)}return l!==r&&l&&(o.child.flags|=8192),rf(o,o.updateQueue),Xt(o),null;case 4:return Ue(),r===null&&b_(o.stateNode.containerInfo),Xt(o),null;case 10:return us(o.type),Xt(o),null;case 19:if(Ce(Tn),m=o.memoizedState,m===null)return Xt(o),null;if(u=(o.flags&128)!==0,g=m.rendering,g===null)if(u)fu(m,!1);else{if(sn!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(g=Jh(r),g!==null){for(o.flags|=128,fu(m,!1),r=g.updateQueue,o.updateQueue=r,rf(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)D0(l,r),l=l.sibling;return pe(Tn,Tn.current&1|2),o.child}r=r.sibling}m.tail!==null&&ht()>af&&(o.flags|=128,u=!0,fu(m,!1),o.lanes=4194304)}else{if(!u)if(r=Jh(g),r!==null){if(o.flags|=128,u=!0,r=r.updateQueue,o.updateQueue=r,rf(o,r),fu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!St)return Xt(o),null}else 2*ht()-m.renderingStartTime>af&&l!==536870912&&(o.flags|=128,u=!0,fu(m,!1),o.lanes=4194304);m.isBackwards?(g.sibling=o.child,o.child=g):(r=m.last,r!==null?r.sibling=g:o.child=g,m.last=g)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=ht(),o.sibling=null,r=Tn.current,pe(Tn,u?r&1|2:r&1),o):(Xt(o),null);case 22:case 23:return hs(o),Cg(),u=o.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(l&536870912)!==0&&(o.flags&128)===0&&(Xt(o),o.subtreeFlags&6&&(o.flags|=8192)):Xt(o),l=o.updateQueue,l!==null&&rf(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==l&&(o.flags|=2048),r!==null&&Ce(ba),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),us(En),Xt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function lO(r,o){switch(ug(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return us(En),Ue(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ae(o),null;case 13:if(hs(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Xc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return Ce(Tn),null;case 4:return Ue(),null;case 10:return us(o.type),null;case 22:case 23:return hs(o),Cg(),r!==null&&Ce(ba),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return us(En),null;case 25:return null;default:return null}}function ob(r,o){switch(ug(o),o.tag){case 3:us(En),Ue();break;case 26:case 27:case 5:ae(o);break;case 4:Ue();break;case 13:hs(o);break;case 19:Ce(Tn);break;case 10:us(o.type);break;case 22:case 23:hs(o),Cg(),r!==null&&Ce(ba);break;case 24:us(En)}}function mu(r,o){try{var l=o.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&r)===r){u=void 0;var g=l.create,w=l.inst;u=g(),w.destroy=u}l=l.next}while(l!==m)}}catch(S){Vt(o,o.return,S)}}function Zs(r,o,l){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&r)===r){var w=u.inst,S=w.destroy;if(S!==void 0){w.destroy=void 0,m=o;var M=l,J=S;try{J()}catch(le){Vt(m,M,le)}}}u=u.next}while(u!==g)}}catch(le){Vt(o,o.return,le)}}function ab(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{Q0(o,l)}catch(u){Vt(r,r.return,u)}}}function lb(r,o,l){l.props=Ca(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){Vt(r,o,u)}}function pu(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(m){Vt(r,o,m)}}function kr(r,o){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){Vt(r,o,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Vt(r,o,m)}else l.current=null}function cb(r){var o=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){Vt(r,r.return,m)}}function Jg(r,o,l){try{var u=r.stateNode;xO(u,r.type,l,o),u[zt]=o}catch(m){Vt(r,r.return,m)}}function ub(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ao(r.type)||r.tag===4}function Zg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ub(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ao(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function e_(r,o,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=gf));else if(u!==4&&(u===27&&ao(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(e_(r,o,l),r=r.sibling;r!==null;)e_(r,o,l),r=r.sibling}function sf(r,o,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(u!==4&&(u===27&&ao(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(sf(r,o,l),r=r.sibling;r!==null;)sf(r,o,l),r=r.sibling}function db(r){var o=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);qn(o,u,l),o[an]=r,o[zt]=l}catch(g){Vt(r,r.return,g)}}var ps=!1,un=!1,t_=!1,hb=typeof WeakSet=="function"?WeakSet:Set,On=null;function cO(r,o){if(r=r.containerInfo,S_=wf,r=w0(r),Zp(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,S=-1,M=-1,J=0,le=0,de=r,ee=null;t:for(;;){for(var te;de!==l||m!==0&&de.nodeType!==3||(S=w+m),de!==g||u!==0&&de.nodeType!==3||(M=w+u),de.nodeType===3&&(w+=de.nodeValue.length),(te=de.firstChild)!==null;)ee=de,de=te;for(;;){if(de===r)break t;if(ee===l&&++J===m&&(S=w),ee===g&&++le===u&&(M=w),(te=de.nextSibling)!==null)break;de=ee,ee=de.parentNode}de=te}l=S===-1||M===-1?null:{start:S,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(A_={focusedElem:r,selectionRange:l},wf=!1,On=o;On!==null;)if(o=On,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,On=r;else for(;On!==null;){switch(o=On,g=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=o,m=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var He=Ca(l.type,m,l.elementType===l.type);r=u.getSnapshotBeforeUpdate(He,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(je){Vt(l,l.return,je)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)x_(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":x_(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,On=r;break}On=o.return}}function fb(r,o,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:eo(r,l),u&4&&mu(5,l);break;case 1:if(eo(r,l),u&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(w){Vt(l,l.return,w)}else{var m=Ca(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(m,o,r.__reactInternalSnapshotBeforeUpdate)}catch(w){Vt(l,l.return,w)}}u&64&&ab(l),u&512&&pu(l,l.return);break;case 3:if(eo(r,l),u&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Q0(r,o)}catch(w){Vt(l,l.return,w)}}break;case 27:o===null&&u&4&&db(l);case 26:case 5:eo(r,l),o===null&&u&4&&cb(l),u&512&&pu(l,l.return);break;case 12:eo(r,l);break;case 13:eo(r,l),u&4&&gb(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=yO.bind(null,l),LO(r,l))));break;case 22:if(u=l.memoizedState!==null||ps,!u){o=o!==null&&o.memoizedState!==null||un,m=ps;var g=un;ps=u,(un=o)&&!g?to(r,l,(l.subtreeFlags&8772)!==0):eo(r,l),ps=m,un=g}break;case 30:break;default:eo(r,l)}}function mb(r){var o=r.alternate;o!==null&&(r.alternate=null,mb(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&zs(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Yt=null,gi=!1;function gs(r,o,l){for(l=l.child;l!==null;)pb(r,o,l),l=l.sibling}function pb(r,o,l){if(se&&typeof se.onCommitFiberUnmount=="function")try{se.onCommitFiberUnmount(we,l)}catch{}switch(l.tag){case 26:un||kr(l,o),gs(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:un||kr(l,o);var u=Yt,m=gi;ao(l.type)&&(Yt=l.stateNode,gi=!1),gs(r,o,l),Cu(l.stateNode),Yt=u,gi=m;break;case 5:un||kr(l,o);case 6:if(u=Yt,m=gi,Yt=null,gs(r,o,l),Yt=u,gi=m,Yt!==null)if(gi)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(l.stateNode)}catch(g){Vt(l,o,g)}else try{Yt.removeChild(l.stateNode)}catch(g){Vt(l,o,g)}break;case 18:Yt!==null&&(gi?(r=Yt,iw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),ku(r)):iw(Yt,l.stateNode));break;case 4:u=Yt,m=gi,Yt=l.stateNode.containerInfo,gi=!0,gs(r,o,l),Yt=u,gi=m;break;case 0:case 11:case 14:case 15:un||Zs(2,l,o),un||Zs(4,l,o),gs(r,o,l);break;case 1:un||(kr(l,o),u=l.stateNode,typeof u.componentWillUnmount=="function"&&lb(l,o,u)),gs(r,o,l);break;case 21:gs(r,o,l);break;case 22:un=(u=un)||l.memoizedState!==null,gs(r,o,l),un=u;break;default:gs(r,o,l)}}function gb(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ku(r)}catch(l){Vt(o,o.return,l)}}function uO(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new hb),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new hb),o;default:throw Error(i(435,r.tag))}}function n_(r,o){var l=uO(r);o.forEach(function(u){var m=vO.bind(null,r,u);l.has(u)||(l.add(u),u.then(m,m))})}function Ni(r,o){var l=o.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],g=r,w=o,S=w;e:for(;S!==null;){switch(S.tag){case 27:if(ao(S.type)){Yt=S.stateNode,gi=!1;break e}break;case 5:Yt=S.stateNode,gi=!1;break e;case 3:case 4:Yt=S.stateNode.containerInfo,gi=!0;break e}S=S.return}if(Yt===null)throw Error(i(160));pb(g,w,m),Yt=null,gi=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)_b(o,r),o=o.sibling}var sr=null;function _b(r,o){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ni(o,r),Oi(r),u&4&&(Zs(3,r,r.return),mu(3,r),Zs(5,r,r.return));break;case 1:Ni(o,r),Oi(r),u&512&&(un||l===null||kr(l,l.return)),u&64&&ps&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=sr;if(Ni(o,r),Oi(r),u&512&&(un||l===null||kr(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Zo]||g[an]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),qn(g,u,l),g[an]=r,ln(g),u=g;break e;case"link":var w=dw("link","href",m).get(u+(l.href||""));if(w){for(var S=0;S<w.length;S++)if(g=w[S],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(S,1);break t}}g=m.createElement(u),qn(g,u,l),m.head.appendChild(g);break;case"meta":if(w=dw("meta","content",m).get(u+(l.content||""))){for(S=0;S<w.length;S++)if(g=w[S],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(S,1);break t}}g=m.createElement(u),qn(g,u,l),m.head.appendChild(g);break;default:throw Error(i(468,u))}g[an]=r,ln(g),u=g}r.stateNode=u}else hw(m,r.type,r.stateNode);else r.stateNode=uw(m,u,r.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?hw(m,r.type,r.stateNode):uw(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Jg(r,r.memoizedProps,l.memoizedProps)}break;case 27:Ni(o,r),Oi(r),u&512&&(un||l===null||kr(l,l.return)),l!==null&&u&4&&Jg(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Ni(o,r),Oi(r),u&512&&(un||l===null||kr(l,l.return)),r.flags&32){m=r.stateNode;try{ji(m,"")}catch(te){Vt(r,r.return,te)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,Jg(r,m,l!==null?l.memoizedProps:m)),u&1024&&(t_=!0);break;case 6:if(Ni(o,r),Oi(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(te){Vt(r,r.return,te)}}break;case 3:if(Ef=null,m=sr,sr=yf(o.containerInfo),Ni(o,r),sr=m,Oi(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{ku(o.containerInfo)}catch(te){Vt(r,r.return,te)}t_&&(t_=!1,yb(r));break;case 4:u=sr,sr=yf(r.stateNode.containerInfo),Ni(o,r),Oi(r),sr=u;break;case 12:Ni(o,r),Oi(r);break;case 13:Ni(o,r),Oi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(l_=ht()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,n_(r,u)));break;case 22:m=r.memoizedState!==null;var M=l!==null&&l.memoizedState!==null,J=ps,le=un;if(ps=J||m,un=le||M,Ni(o,r),un=le,ps=J,Oi(r),u&8192)e:for(o=r.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(l===null||M||ps||un||Sa(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){M=l=o;try{if(g=M.stateNode,m)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{S=M.stateNode;var de=M.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null;S.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(te){Vt(M,M.return,te)}}}else if(o.tag===6){if(l===null){M=o;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(te){Vt(M,M.return,te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,n_(r,l))));break;case 19:Ni(o,r),Oi(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,n_(r,u)));break;case 30:break;case 21:break;default:Ni(o,r),Oi(r)}}function Oi(r){var o=r.flags;if(o&2){try{for(var l,u=r.return;u!==null;){if(ub(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,g=Zg(r);sf(r,g,m);break;case 5:var w=l.stateNode;l.flags&32&&(ji(w,""),l.flags&=-33);var S=Zg(r);sf(r,S,w);break;case 3:case 4:var M=l.stateNode.containerInfo,J=Zg(r);e_(r,J,M);break;default:throw Error(i(161))}}catch(le){Vt(r,r.return,le)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function yb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;yb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function eo(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)fb(r,o.alternate,o),o=o.sibling}function Sa(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Zs(4,o,o.return),Sa(o);break;case 1:kr(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&lb(o,o.return,l),Sa(o);break;case 27:Cu(o.stateNode);case 26:case 5:kr(o,o.return),Sa(o);break;case 22:o.memoizedState===null&&Sa(o);break;case 30:Sa(o);break;default:Sa(o)}r=r.sibling}}function to(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=r,g=o,w=g.flags;switch(g.tag){case 0:case 11:case 15:to(m,g,l),mu(4,g);break;case 1:if(to(m,g,l),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(J){Vt(u,u.return,J)}if(u=g,m=u.updateQueue,m!==null){var S=u.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)K0(M[m],S)}catch(J){Vt(u,u.return,J)}}l&&w&64&&ab(g),pu(g,g.return);break;case 27:db(g);case 26:case 5:to(m,g,l),l&&u===null&&w&4&&cb(g),pu(g,g.return);break;case 12:to(m,g,l);break;case 13:to(m,g,l),l&&w&4&&gb(m,g);break;case 22:g.memoizedState===null&&to(m,g,l),pu(g,g.return);break;case 30:break;default:to(m,g,l)}o=o.sibling}}function i_(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&eu(l))}function r_(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&eu(r))}function Dr(r,o,l,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vb(r,o,l,u),o=o.sibling}function vb(r,o,l,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:Dr(r,o,l,u),m&2048&&mu(9,o);break;case 1:Dr(r,o,l,u);break;case 3:Dr(r,o,l,u),m&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&eu(r)));break;case 12:if(m&2048){Dr(r,o,l,u),r=o.stateNode;try{var g=o.memoizedProps,w=g.id,S=g.onPostCommit;typeof S=="function"&&S(w,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){Vt(o,o.return,M)}}else Dr(r,o,l,u);break;case 13:Dr(r,o,l,u);break;case 23:break;case 22:g=o.stateNode,w=o.alternate,o.memoizedState!==null?g._visibility&2?Dr(r,o,l,u):gu(r,o):g._visibility&2?Dr(r,o,l,u):(g._visibility|=2,xl(r,o,l,u,(o.subtreeFlags&10256)!==0)),m&2048&&i_(w,o);break;case 24:Dr(r,o,l,u),m&2048&&r_(o.alternate,o);break;default:Dr(r,o,l,u)}}function xl(r,o,l,u,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var g=r,w=o,S=l,M=u,J=w.flags;switch(w.tag){case 0:case 11:case 15:xl(g,w,S,M,m),mu(8,w);break;case 23:break;case 22:var le=w.stateNode;w.memoizedState!==null?le._visibility&2?xl(g,w,S,M,m):gu(g,w):(le._visibility|=2,xl(g,w,S,M,m)),m&&J&2048&&i_(w.alternate,w);break;case 24:xl(g,w,S,M,m),m&&J&2048&&r_(w.alternate,w);break;default:xl(g,w,S,M,m)}o=o.sibling}}function gu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,u=o,m=u.flags;switch(u.tag){case 22:gu(l,u),m&2048&&i_(u.alternate,u);break;case 24:gu(l,u),m&2048&&r_(u.alternate,u);break;default:gu(l,u)}o=o.sibling}}var _u=8192;function Nl(r){if(r.subtreeFlags&_u)for(r=r.child;r!==null;)Eb(r),r=r.sibling}function Eb(r){switch(r.tag){case 26:Nl(r),r.flags&_u&&r.memoizedState!==null&&YO(sr,r.memoizedState,r.memoizedProps);break;case 5:Nl(r);break;case 3:case 4:var o=sr;sr=yf(r.stateNode.containerInfo),Nl(r),sr=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=_u,_u=16777216,Nl(r),_u=o):Nl(r));break;default:Nl(r)}}function Tb(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function yu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];On=u,wb(u,r)}Tb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bb(r),r=r.sibling}function bb(r){switch(r.tag){case 0:case 11:case 15:yu(r),r.flags&2048&&Zs(9,r,r.return);break;case 3:yu(r);break;case 12:yu(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,of(r)):yu(r);break;default:yu(r)}}function of(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];On=u,wb(u,r)}Tb(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Zs(8,o,o.return),of(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,of(o));break;default:of(o)}r=r.sibling}}function wb(r,o){for(;On!==null;){var l=On;switch(l.tag){case 0:case 11:case 15:Zs(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:eu(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,On=u;else e:for(l=r;On!==null;){u=On;var m=u.sibling,g=u.return;if(mb(u),u===l){On=null;break e}if(m!==null){m.return=g,On=m;break e}On=g}}}var dO={getCacheForType:function(r){var o=Yn(En),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l}},hO=typeof WeakMap=="function"?WeakMap:Map,Nt=0,qt=null,ot=null,_t=0,Ot=0,ki=null,no=!1,Ol=!1,s_=!1,_s=0,sn=0,io=0,Aa=0,o_=0,Qi=0,kl=0,vu=null,_i=null,a_=!1,l_=0,af=1/0,lf=null,ro=null,zn=0,so=null,Dl=null,Pl=0,c_=0,u_=null,Cb=null,Eu=0,d_=null;function Di(){if((Nt&2)!==0&&_t!==0)return _t&-_t;if(oe.T!==null){var r=Tl;return r!==0?r:y_()}return tr()}function Sb(){Qi===0&&(Qi=(_t&536870912)===0||St?Ye():536870912);var r=Ki.current;return r!==null&&(r.flags|=32),Qi}function Pi(r,o,l){(r===qt&&(Ot===2||Ot===9)||r.cancelPendingCommit!==null)&&(Ml(r,0),oo(r,_t,Qi,!1)),Ge(r,l),((Nt&2)===0||r!==qt)&&(r===qt&&((Nt&2)===0&&(Aa|=l),sn===4&&oo(r,_t,Qi,!1)),Pr(r))}function Ab(r,o,l){if((Nt&6)!==0)throw Error(i(327));var u=!l&&(o&124)===0&&(o&r.expiredLanes)===0||wt(r,o),m=u?pO(r,o):m_(r,o,!0),g=u;do{if(m===0){Ol&&!u&&oo(r,o,0,!1);break}else{if(l=r.current.alternate,g&&!fO(l)){m=m_(r,o,!1),g=!1;continue}if(m===2){if(g=o,r.errorRecoveryDisabledLanes&g)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var S=r;m=vu;var M=S.current.memoizedState.isDehydrated;if(M&&(Ml(S,w).flags|=256),w=m_(S,w,!1),w!==2){if(s_&&!M){S.errorRecoveryDisabledLanes|=g,Aa|=g,m=4;break e}g=_i,_i=m,g!==null&&(_i===null?_i=g:_i.push.apply(_i,g))}m=w}if(g=!1,m!==2)continue}}if(m===1){Ml(r,0),oo(r,o,0,!0);break}e:{switch(u=r,g=m,g){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:oo(u,o,Qi,!no);break e;case 2:_i=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(m=l_+300-ht(),10<m)){if(oo(u,o,Qi,!no),Ai(u,0,!0)!==0)break e;u.timeoutHandle=tw(Rb.bind(null,u,l,_i,lf,a_,o,Qi,Aa,kl,no,g,2,-0,0),m);break e}Rb(u,l,_i,lf,a_,o,Qi,Aa,kl,no,g,0,-0,0)}}break}while(!0);Pr(r)}function Rb(r,o,l,u,m,g,w,S,M,J,le,de,ee,te){if(r.timeoutHandle=-1,de=o.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(Ru={stylesheets:null,count:0,unsuspend:QO},Eb(o),de=WO(),de!==null)){r.cancelPendingCommit=de(Pb.bind(null,r,o,g,l,u,m,w,S,M,le,1,ee,te)),oo(r,g,w,!J);return}Pb(r,o,g,l,u,m,w,S,M)}function fO(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],g=m.getSnapshot;m=m.value;try{if(!Ii(g(),m))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function oo(r,o,l,u){o&=~o_,o&=~Aa,r.suspendedLanes|=o,r.pingedLanes&=~o,u&&(r.warmLanes|=o),u=r.expirationTimes;for(var m=o;0<m;){var g=31-Qe(m),w=1<<g;u[g]=-1,m&=~w}l!==0&&Ct(r,l,o)}function cf(){return(Nt&6)===0?(Tu(0),!1):!0}function h_(){if(ot!==null){if(Ot===0)var r=ot.return;else r=ot,cs=Ea=null,xg(r),Rl=null,du=0,r=ot;for(;r!==null;)ob(r.alternate,r),r=r.return;ot=null}}function Ml(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,OO(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),h_(),qt=r,ot=l=os(r.current,null),_t=o,Ot=0,ki=null,no=!1,Ol=wt(r,o),s_=!1,kl=Qi=o_=Aa=io=sn=0,_i=vu=null,a_=!1,(o&8)!==0&&(o|=o&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=o;0<u;){var m=31-Qe(u),g=1<<m;o|=r[m],u&=~g}return _s=o,Nh(),l}function Ib(r,o){et=null,oe.H=Yh,o===nu||o===jh?(o=G0(),Ot=3):o===z0?(o=G0(),Ot=4):Ot=o===$T?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ki=o,ot===null&&(sn=1,ef(r,qi(o,r.current)))}function xb(){var r=oe.H;return oe.H=Yh,r===null?Yh:r}function Nb(){var r=oe.A;return oe.A=dO,r}function f_(){sn=4,no||(_t&4194048)!==_t&&Ki.current!==null||(Ol=!0),(io&134217727)===0&&(Aa&134217727)===0||qt===null||oo(qt,_t,Qi,!1)}function m_(r,o,l){var u=Nt;Nt|=2;var m=xb(),g=Nb();(qt!==r||_t!==o)&&(lf=null,Ml(r,o)),o=!1;var w=sn;e:do try{if(Ot!==0&&ot!==null){var S=ot,M=ki;switch(Ot){case 8:h_(),w=6;break e;case 3:case 2:case 9:case 6:Ki.current===null&&(o=!0);var J=Ot;if(Ot=0,ki=null,Ll(r,S,M,J),l&&Ol){w=0;break e}break;default:J=Ot,Ot=0,ki=null,Ll(r,S,M,J)}}mO(),w=sn;break}catch(le){Ib(r,le)}while(!0);return o&&r.shellSuspendCounter++,cs=Ea=null,Nt=u,oe.H=m,oe.A=g,ot===null&&(qt=null,_t=0,Nh()),w}function mO(){for(;ot!==null;)Ob(ot)}function pO(r,o){var l=Nt;Nt|=2;var u=xb(),m=Nb();qt!==r||_t!==o?(lf=null,af=ht()+500,Ml(r,o)):Ol=wt(r,o);e:do try{if(Ot!==0&&ot!==null){o=ot;var g=ki;t:switch(Ot){case 1:Ot=0,ki=null,Ll(r,o,g,1);break;case 2:case 9:if(q0(g)){Ot=0,ki=null,kb(o);break}o=function(){Ot!==2&&Ot!==9||qt!==r||(Ot=7),Pr(r)},g.then(o,o);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:q0(g)?(Ot=0,ki=null,kb(o)):(Ot=0,ki=null,Ll(r,o,g,7));break;case 5:var w=null;switch(ot.tag){case 26:w=ot.memoizedState;case 5:case 27:var S=ot;if(!w||fw(w)){Ot=0,ki=null;var M=S.sibling;if(M!==null)ot=M;else{var J=S.return;J!==null?(ot=J,uf(J)):ot=null}break t}}Ot=0,ki=null,Ll(r,o,g,5);break;case 6:Ot=0,ki=null,Ll(r,o,g,6);break;case 8:h_(),sn=6;break e;default:throw Error(i(462))}}gO();break}catch(le){Ib(r,le)}while(!0);return cs=Ea=null,oe.H=u,oe.A=m,Nt=l,ot!==null?0:(qt=null,_t=0,Nh(),sn)}function gO(){for(;ot!==null&&!mi();)Ob(ot)}function Ob(r){var o=rb(r.alternate,r,_s);r.memoizedProps=r.pendingProps,o===null?uf(r):ot=o}function kb(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=JT(l,o,o.pendingProps,o.type,void 0,_t);break;case 11:o=JT(l,o,o.pendingProps,o.type.render,o.ref,_t);break;case 5:xg(o);default:ob(l,o),o=ot=D0(o,_s),o=rb(l,o,_s)}r.memoizedProps=r.pendingProps,o===null?uf(r):ot=o}function Ll(r,o,l,u){cs=Ea=null,xg(o),Rl=null,du=0;var m=o.return;try{if(sO(r,m,o,l,_t)){sn=1,ef(r,qi(l,r.current)),ot=null;return}}catch(g){if(m!==null)throw ot=m,g;sn=1,ef(r,qi(l,r.current)),ot=null;return}o.flags&32768?(St||u===1?r=!0:Ol||(_t&536870912)!==0?r=!1:(no=r=!0,(u===2||u===9||u===3||u===6)&&(u=Ki.current,u!==null&&u.tag===13&&(u.flags|=16384))),Db(o,r)):uf(o)}function uf(r){var o=r;do{if((o.flags&32768)!==0){Db(o,no);return}r=o.return;var l=aO(o.alternate,o,_s);if(l!==null){ot=l;return}if(o=o.sibling,o!==null){ot=o;return}ot=o=r}while(o!==null);sn===0&&(sn=5)}function Db(r,o){do{var l=lO(r.alternate,r);if(l!==null){l.flags&=32767,ot=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){ot=r;return}ot=r=l}while(r!==null);sn=6,ot=null}function Pb(r,o,l,u,m,g,w,S,M){r.cancelPendingCommit=null;do df();while(zn!==0);if((Nt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(g=o.lanes|o.childLanes,g|=rg,ut(r,l,g,w,S,M),r===qt&&(ot=qt=null,_t=0),Dl=o,so=r,Pl=l,c_=g,u_=m,Cb=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,EO(W,function(){return jb(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=oe.T,oe.T=null,m=be.p,be.p=2,w=Nt,Nt|=4;try{cO(r,o,l)}finally{Nt=w,be.p=m,oe.T=u}}zn=1,Mb(),Lb(),Ub()}}function Mb(){if(zn===1){zn=0;var r=so,o=Dl,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=oe.T,oe.T=null;var u=be.p;be.p=2;var m=Nt;Nt|=4;try{_b(o,r);var g=A_,w=w0(r.containerInfo),S=g.focusedElem,M=g.selectionRange;if(w!==S&&S&&S.ownerDocument&&b0(S.ownerDocument.documentElement,S)){if(M!==null&&Zp(S)){var J=M.start,le=M.end;if(le===void 0&&(le=J),"selectionStart"in S)S.selectionStart=J,S.selectionEnd=Math.min(le,S.value.length);else{var de=S.ownerDocument||document,ee=de&&de.defaultView||window;if(ee.getSelection){var te=ee.getSelection(),He=S.textContent.length,je=Math.min(M.start,He),Ut=M.end===void 0?je:Math.min(M.end,He);!te.extend&&je>Ut&&(w=Ut,Ut=je,je=w);var K=T0(S,je),z=T0(S,Ut);if(K&&z&&(te.rangeCount!==1||te.anchorNode!==K.node||te.anchorOffset!==K.offset||te.focusNode!==z.node||te.focusOffset!==z.offset)){var X=de.createRange();X.setStart(K.node,K.offset),te.removeAllRanges(),je>Ut?(te.addRange(X),te.extend(z.node,z.offset)):(X.setEnd(z.node,z.offset),te.addRange(X))}}}}for(de=[],te=S;te=te.parentNode;)te.nodeType===1&&de.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<de.length;S++){var ce=de[S];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}wf=!!S_,A_=S_=null}finally{Nt=m,be.p=u,oe.T=l}}r.current=o,zn=2}}function Lb(){if(zn===2){zn=0;var r=so,o=Dl,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=oe.T,oe.T=null;var u=be.p;be.p=2;var m=Nt;Nt|=4;try{fb(r,o.alternate,o)}finally{Nt=m,be.p=u,oe.T=l}}zn=3}}function Ub(){if(zn===4||zn===3){zn=0,Ci();var r=so,o=Dl,l=Pl,u=Cb;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?zn=5:(zn=0,Dl=so=null,Vb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(ro=null),An(l),o=o.stateNode,se&&typeof se.onCommitFiberRoot=="function")try{se.onCommitFiberRoot(we,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=oe.T,m=be.p,be.p=2,oe.T=null;try{for(var g=r.onRecoverableError,w=0;w<u.length;w++){var S=u[w];g(S.value,{componentStack:S.stack})}}finally{oe.T=o,be.p=m}}(Pl&3)!==0&&df(),Pr(r),m=r.pendingLanes,(l&4194090)!==0&&(m&42)!==0?r===d_?Eu++:(Eu=0,d_=r):Eu=0,Tu(0)}}function Vb(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,eu(o)))}function df(r){return Mb(),Lb(),Ub(),jb()}function jb(){if(zn!==5)return!1;var r=so,o=c_;c_=0;var l=An(Pl),u=oe.T,m=be.p;try{be.p=32>l?32:l,oe.T=null,l=u_,u_=null;var g=so,w=Pl;if(zn=0,Dl=so=null,Pl=0,(Nt&6)!==0)throw Error(i(331));var S=Nt;if(Nt|=4,bb(g.current),vb(g,g.current,w,l),Nt=S,Tu(0,!1),se&&typeof se.onPostCommitFiberRoot=="function")try{se.onPostCommitFiberRoot(we,g)}catch{}return!0}finally{be.p=m,oe.T=u,Vb(r,o)}}function Bb(r,o,l){o=qi(l,o),o=qg(r.stateNode,o,2),r=Ys(r,o,2),r!==null&&(Ge(r,2),Pr(r))}function Vt(r,o,l){if(r.tag===3)Bb(r,r,l);else for(;o!==null;){if(o.tag===3){Bb(o,r,l);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ro===null||!ro.has(u))){r=qi(l,r),l=HT(2),u=Ys(o,l,2),u!==null&&(GT(l,u,o,r),Ge(u,2),Pr(u));break}}o=o.return}}function p_(r,o,l){var u=r.pingCache;if(u===null){u=r.pingCache=new hO;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(l)||(s_=!0,m.add(l),r=_O.bind(null,r,o,l),o.then(r,r))}function _O(r,o,l){var u=r.pingCache;u!==null&&u.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,qt===r&&(_t&l)===l&&(sn===4||sn===3&&(_t&62914560)===_t&&300>ht()-l_?(Nt&2)===0&&Ml(r,0):o_|=l,kl===_t&&(kl=0)),Pr(r)}function Fb(r,o){o===0&&(o=Bt()),r=_l(r,o),r!==null&&(Ge(r,o),Pr(r))}function yO(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),Fb(r,l)}function vO(r,o){var l=0;switch(r.tag){case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(o),Fb(r,l)}function EO(r,o){return Et(r,o)}var hf=null,Ul=null,g_=!1,ff=!1,__=!1,Ra=0;function Pr(r){r!==Ul&&r.next===null&&(Ul===null?hf=Ul=r:Ul=Ul.next=r),ff=!0,g_||(g_=!0,bO())}function Tu(r,o){if(!__&&ff){__=!0;do for(var l=!1,u=hf;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var w=u.suspendedLanes,S=u.pingedLanes;g=(1<<31-Qe(42|r)+1)-1,g&=m&~(w&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Gb(u,g))}else g=_t,g=Ai(u,u===qt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||wt(u,g)||(l=!0,Gb(u,g));u=u.next}while(l);__=!1}}function TO(){zb()}function zb(){ff=g_=!1;var r=0;Ra!==0&&(NO()&&(r=Ra),Ra=0);for(var o=ht(),l=null,u=hf;u!==null;){var m=u.next,g=qb(u,o);g===0?(u.next=null,l===null?hf=m:l.next=m,m===null&&(Ul=l)):(l=u,(r!==0||(g&3)!==0)&&(ff=!0)),u=m}Tu(r)}function qb(r,o){for(var l=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var w=31-Qe(g),S=1<<w,M=m[w];M===-1?((S&l)===0||(S&u)!==0)&&(m[w]=jt(S,o)):M<=o&&(r.expiredLanes|=S),g&=~S}if(o=qt,l=_t,l=Ai(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===o&&(Ot===2||Ot===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ze(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||wt(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(u!==null&&Ze(u),An(l)){case 2:case 8:l=Dt;break;case 32:l=W;break;case 268435456:l=ve;break;default:l=W}return u=Hb.bind(null,r),l=Et(l,u),r.callbackPriority=o,r.callbackNode=l,o}return u!==null&&u!==null&&Ze(u),r.callbackPriority=2,r.callbackNode=null,2}function Hb(r,o){if(zn!==0&&zn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(df()&&r.callbackNode!==l)return null;var u=_t;return u=Ai(r,r===qt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Ab(r,u,o),qb(r,ht()),r.callbackNode!=null&&r.callbackNode===l?Hb.bind(null,r):null)}function Gb(r,o){if(df())return null;Ab(r,o,!0)}function bO(){kO(function(){(Nt&6)!==0?Et(hn,TO):zb()})}function y_(){return Ra===0&&(Ra=Ye()),Ra}function $b(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:sl(""+r)}function Kb(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function wO(r,o,l,u,m){if(o==="submit"&&l&&l.stateNode===m){var g=$b((m[zt]||null).action),w=u.submitter;w&&(o=(o=w[zt]||null)?$b(o.formAction):w.getAttribute("formAction"),o!==null&&(g=o,w=null));var S=new ol("action","action",null,u,m);r.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ra!==0){var M=w?Kb(m,w):new FormData(m);Vg(l,{pending:!0,data:M,method:m.method,action:g},null,M)}}else typeof g=="function"&&(S.preventDefault(),M=w?Kb(m,w):new FormData(m),Vg(l,{pending:!0,data:M,method:m.method,action:g},g,M))},currentTarget:m}]})}}for(var v_=0;v_<ig.length;v_++){var E_=ig[v_],CO=E_.toLowerCase(),SO=E_[0].toUpperCase()+E_.slice(1);rr(CO,"on"+SO)}rr(A0,"onAnimationEnd"),rr(R0,"onAnimationIteration"),rr(I0,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(zN,"onTransitionRun"),rr(qN,"onTransitionStart"),rr(HN,"onTransitionCancel"),rr(x0,"onTransitionEnd"),Xr("onMouseEnter",["mouseout","mouseover"]),Xr("onMouseLeave",["mouseout","mouseover"]),Xr("onPointerEnter",["pointerout","pointerover"]),Xr("onPointerLeave",["pointerout","pointerover"]),nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function Qb(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],m=u.event;u=u.listeners;e:{var g=void 0;if(o)for(var w=u.length-1;0<=w;w--){var S=u[w],M=S.instance,J=S.currentTarget;if(S=S.listener,M!==g&&m.isPropagationStopped())break e;g=S,m.currentTarget=J;try{g(m)}catch(le){Zh(le)}m.currentTarget=null,g=M}else for(w=0;w<u.length;w++){if(S=u[w],M=S.instance,J=S.currentTarget,S=S.listener,M!==g&&m.isPropagationStopped())break e;g=S,m.currentTarget=J;try{g(m)}catch(le){Zh(le)}m.currentTarget=null,g=M}}}}function at(r,o){var l=o[Fs];l===void 0&&(l=o[Fs]=new Set);var u=r+"__bubble";l.has(u)||(Yb(o,r,2,!1),l.add(u))}function T_(r,o,l){var u=0;o&&(u|=4),Yb(l,r,u,o)}var mf="_reactListening"+Math.random().toString(36).slice(2);function b_(r){if(!r[mf]){r[mf]=!0,Pc.forEach(function(l){l!=="selectionchange"&&(AO.has(l)||T_(l,!1,r),T_(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[mf]||(o[mf]=!0,T_("selectionchange",!1,o))}}function Yb(r,o,l,u){switch(vw(o)){case 2:var m=ZO;break;case 8:m=ek;break;default:m=L_}l=m.bind(null,o,l,r),m=void 0,!Fi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(o,l,{capture:!0,passive:m}):r.addEventListener(o,l,!0):m!==void 0?r.addEventListener(o,l,{passive:m}):r.addEventListener(o,l,!1)}function w_(r,o,l,u,m){var g=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var S=u.stateNode.containerInfo;if(S===m)break;if(w===4)for(w=u.return;w!==null;){var M=w.tag;if((M===3||M===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;S!==null;){if(w=Wr(S),w===null)return;if(M=w.tag,M===5||M===6||M===26||M===27){u=g=w;continue e}S=S.parentNode}}u=u.return}ph(function(){var J=g,le=Bi(l),de=[];e:{var ee=N0.get(r);if(ee!==void 0){var te=ol,He=r;switch(r){case"keypress":if(Sr(l)===0)break e;case"keydown":case"keyup":te=hl;break;case"focusin":He="focus",te=cl;break;case"focusout":He="blur",te=cl;break;case"beforeblur":case"afterblur":te=cl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=zi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Yp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=wh;break;case A0:case R0:case I0:te=ul;break;case x0:te=Sh;break;case"scroll":case"scrollend":te=gh;break;case"wheel":te=fl;break;case"copy":case"cut":case"paste":te=dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=$c;break;case"toggle":case"beforetoggle":te=Rh}var je=(o&4)!==0,Ut=!je&&(r==="scroll"||r==="scrollend"),K=je?ee!==null?ee+"Capture":null:ee;je=[];for(var z=J,X;z!==null;){var ce=z;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||K===null||(ce=oa(z,K),ce!=null&&je.push(wu(z,ce,X))),Ut)break;z=z.return}0<je.length&&(ee=new te(ee,He,null,l,le),de.push({event:ee,listeners:je}))}}if((o&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",te=r==="mouseout"||r==="pointerout",ee&&l!==es&&(He=l.relatedTarget||l.fromElement)&&(Wr(He)||He[Rn]))break e;if((te||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,te?(He=l.relatedTarget||l.toElement,te=J,He=He?Wr(He):null,He!==null&&(Ut=a(He),je=He.tag,He!==Ut||je!==5&&je!==27&&je!==6)&&(He=null)):(te=null,He=J),te!==He)){if(je=zi,ce="onMouseLeave",K="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(je=$c,ce="onPointerLeave",K="onPointerEnter",z="pointer"),Ut=te==null?ee:Tr(te),X=He==null?ee:Tr(He),ee=new je(ce,z+"leave",te,l,le),ee.target=Ut,ee.relatedTarget=X,ce=null,Wr(le)===J&&(je=new je(K,z+"enter",He,l,le),je.target=X,je.relatedTarget=Ut,ce=je),Ut=ce,te&&He)t:{for(je=te,K=He,z=0,X=je;X;X=Vl(X))z++;for(X=0,ce=K;ce;ce=Vl(ce))X++;for(;0<z-X;)je=Vl(je),z--;for(;0<X-z;)K=Vl(K),X--;for(;z--;){if(je===K||K!==null&&je===K.alternate)break t;je=Vl(je),K=Vl(K)}je=null}else je=null;te!==null&&Wb(de,ee,te,je,!1),He!==null&&Ut!==null&&Wb(de,Ut,He,je,!0)}}e:{if(ee=J?Tr(J):window,te=ee.nodeName&&ee.nodeName.toLowerCase(),te==="select"||te==="input"&&ee.type==="file")var Oe=p0;else if(vn(ee))if(g0)Oe=jN;else{Oe=UN;var nt=LN}else te=ee.nodeName,!te||te.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&jc(J.elementType)&&(Oe=p0):Oe=VN;if(Oe&&(Oe=Oe(r,J))){ss(de,Oe,l,le);break e}nt&&nt(r,ee,J),r==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&Hs(ee,"number",ee.value)}switch(nt=J?Tr(J):window,r){case"focusin":(vn(nt)||nt.contentEditable==="true")&&(ml=nt,eg=J,Yc=null);break;case"focusout":Yc=eg=ml=null;break;case"mousedown":tg=!0;break;case"contextmenu":case"mouseup":case"dragend":tg=!1,C0(de,l,le);break;case"selectionchange":if(FN)break;case"keydown":case"keyup":C0(de,l,le)}var Me;if(Ir)e:{switch(r){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else pt?ne(r,l)&&(Be="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Be="onCompositionStart");Be&&(T&&l.locale!=="ko"&&(pt||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&pt&&(Me=Fc()):(Cr=le,Gs="value"in Cr?Cr.value:Cr.textContent,pt=!0)),nt=pf(J,Be),0<nt.length&&(Be=new Hc(Be,r,null,l,le),de.push({event:Be,listeners:nt}),Me?Be.data=Me:(Me=Te(l),Me!==null&&(Be.data=Me)))),(Me=y?yn(r,l):gt(r,l))&&(Be=pf(J,"onBeforeInput"),0<Be.length&&(nt=new Hc("onBeforeInput","beforeinput",null,l,le),de.push({event:nt,listeners:Be}),nt.data=Me)),wO(de,r,J,l,le)}Qb(de,o)})}function wu(r,o,l){return{instance:r,listener:o,currentTarget:l}}function pf(r,o){for(var l=o+"Capture",u=[];r!==null;){var m=r,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=oa(r,l),m!=null&&u.unshift(wu(r,m,g)),m=oa(r,o),m!=null&&u.push(wu(r,m,g))),r.tag===3)return u;r=r.return}return[]}function Vl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Wb(r,o,l,u,m){for(var g=o._reactName,w=[];l!==null&&l!==u;){var S=l,M=S.alternate,J=S.stateNode;if(S=S.tag,M!==null&&M===u)break;S!==5&&S!==26&&S!==27||J===null||(M=J,m?(J=oa(l,g),J!=null&&w.unshift(wu(l,J,M))):m||(J=oa(l,g),J!=null&&w.push(wu(l,J,M)))),l=l.return}w.length!==0&&r.push({event:o,listeners:w})}var RO=/\r\n?/g,IO=/\u0000|\uFFFD/g;function Xb(r){return(typeof r=="string"?r:""+r).replace(RO,`
`).replace(IO,"")}function Jb(r,o){return o=Xb(o),Xb(r)===o}function gf(){}function Lt(r,o,l,u,m,g){switch(l){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||ji(r,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&ji(r,""+u);break;case"className":br(r,"class",u);break;case"tabIndex":br(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":br(r,l,u);break;case"style":Vc(r,u,g);break;case"data":if(o!=="object"){br(r,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=sl(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(o!=="input"&&Lt(r,o,"name",m.name,m,null),Lt(r,o,"formEncType",m.formEncType,m,null),Lt(r,o,"formMethod",m.formMethod,m,null),Lt(r,o,"formTarget",m.formTarget,m,null)):(Lt(r,o,"encType",m.encType,m,null),Lt(r,o,"method",m.method,m,null),Lt(r,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=sl(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=gf);break;case"onScroll":u!=null&&at("scroll",r);break;case"onScrollEnd":u!=null&&at("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=sl(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":at("beforetoggle",r),at("toggle",r),qs(r,"popover",u);break;case"xlinkActuate":jn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":jn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":jn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":jn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":jn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":jn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":jn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":jn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":jn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":qs(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Kp.get(l)||l,qs(r,l,u))}}function C_(r,o,l,u,m,g){switch(l){case"style":Vc(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?ji(r,u):(typeof u=="number"||typeof u=="bigint")&&ji(r,""+u);break;case"onScroll":u!=null&&at("scroll",r);break;case"onScrollEnd":u!=null&&at("scrollend",r);break;case"onClick":u!=null&&(r.onclick=gf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!el.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),o=l.slice(2,m?l.length-7:void 0),g=r[zt]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(o,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,u,m);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):qs(r,l,u)}}}function qn(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",r),at("load",r);var u=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var w=l[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Lt(r,o,g,w,l,null)}}m&&Lt(r,o,"srcSet",l.srcSet,l,null),u&&Lt(r,o,"src",l.src,l,null);return;case"input":at("invalid",r);var S=g=w=m=null,M=null,J=null;for(u in l)if(l.hasOwnProperty(u)){var le=l[u];if(le!=null)switch(u){case"name":m=le;break;case"type":w=le;break;case"checked":M=le;break;case"defaultChecked":J=le;break;case"value":g=le;break;case"defaultValue":S=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,o));break;default:Lt(r,o,u,le,l,null)}}ia(r,g,S,M,J,w,m,!1),rl(r);return;case"select":at("invalid",r),u=w=g=null;for(m in l)if(l.hasOwnProperty(m)&&(S=l[m],S!=null))switch(m){case"value":g=S;break;case"defaultValue":w=S;break;case"multiple":u=S;default:Lt(r,o,m,S,l,null)}o=g,l=w,r.multiple=!!u,o!=null?Zr(r,!!u,o,!1):l!=null&&Zr(r,!!u,l,!0);return;case"textarea":at("invalid",r),g=m=u=null;for(w in l)if(l.hasOwnProperty(w)&&(S=l[w],S!=null))switch(w){case"value":u=S;break;case"defaultValue":m=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Lt(r,o,w,S,l,null)}ra(r,u,m,g),rl(r);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(u=l[M],u!=null))switch(M){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Lt(r,o,M,u,l,null)}return;case"dialog":at("beforetoggle",r),at("toggle",r),at("cancel",r),at("close",r);break;case"iframe":case"object":at("load",r);break;case"video":case"audio":for(u=0;u<bu.length;u++)at(bu[u],r);break;case"image":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"embed":case"source":case"link":at("error",r),at("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(u=l[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Lt(r,o,J,u,l,null)}return;default:if(jc(o)){for(le in l)l.hasOwnProperty(le)&&(u=l[le],u!==void 0&&C_(r,o,le,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&Lt(r,o,S,u,l,null))}function xO(r,o,l,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,w=null,S=null,M=null,J=null,le=null;for(te in l){var de=l[te];if(l.hasOwnProperty(te)&&de!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":M=de;default:u.hasOwnProperty(te)||Lt(r,o,te,null,u,de)}}for(var ee in u){var te=u[ee];if(de=l[ee],u.hasOwnProperty(ee)&&(te!=null||de!=null))switch(ee){case"type":g=te;break;case"name":m=te;break;case"checked":J=te;break;case"defaultChecked":le=te;break;case"value":w=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:te!==de&&Lt(r,o,ee,te,u,de)}}Ri(r,w,S,M,J,le,g,m);return;case"select":te=w=S=ee=null;for(g in l)if(M=l[g],l.hasOwnProperty(g)&&M!=null)switch(g){case"value":break;case"multiple":te=M;default:u.hasOwnProperty(g)||Lt(r,o,g,null,u,M)}for(m in u)if(g=u[m],M=l[m],u.hasOwnProperty(m)&&(g!=null||M!=null))switch(m){case"value":ee=g;break;case"defaultValue":S=g;break;case"multiple":w=g;default:g!==M&&Lt(r,o,m,g,u,M)}o=S,l=w,u=te,ee!=null?Zr(r,!!l,ee,!1):!!u!=!!l&&(o!=null?Zr(r,!!l,o,!0):Zr(r,!!l,l?[]:"",!1));return;case"textarea":te=ee=null;for(S in l)if(m=l[S],l.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Lt(r,o,S,null,u,m)}for(w in u)if(m=u[w],g=l[w],u.hasOwnProperty(w)&&(m!=null||g!=null))switch(w){case"value":ee=m;break;case"defaultValue":te=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==g&&Lt(r,o,w,m,u,g)}Pt(r,ee,te);return;case"option":for(var He in l)if(ee=l[He],l.hasOwnProperty(He)&&ee!=null&&!u.hasOwnProperty(He))switch(He){case"selected":r.selected=!1;break;default:Lt(r,o,He,null,u,ee)}for(M in u)if(ee=u[M],te=l[M],u.hasOwnProperty(M)&&ee!==te&&(ee!=null||te!=null))switch(M){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Lt(r,o,M,ee,u,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in l)ee=l[je],l.hasOwnProperty(je)&&ee!=null&&!u.hasOwnProperty(je)&&Lt(r,o,je,null,u,ee);for(J in u)if(ee=u[J],te=l[J],u.hasOwnProperty(J)&&ee!==te&&(ee!=null||te!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:Lt(r,o,J,ee,u,te)}return;default:if(jc(o)){for(var Ut in l)ee=l[Ut],l.hasOwnProperty(Ut)&&ee!==void 0&&!u.hasOwnProperty(Ut)&&C_(r,o,Ut,void 0,u,ee);for(le in u)ee=u[le],te=l[le],!u.hasOwnProperty(le)||ee===te||ee===void 0&&te===void 0||C_(r,o,le,ee,u,te);return}}for(var K in l)ee=l[K],l.hasOwnProperty(K)&&ee!=null&&!u.hasOwnProperty(K)&&Lt(r,o,K,null,u,ee);for(de in u)ee=u[de],te=l[de],!u.hasOwnProperty(de)||ee===te||ee==null&&te==null||Lt(r,o,de,ee,u,te)}var S_=null,A_=null;function _f(r){return r.nodeType===9?r:r.ownerDocument}function Zb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ew(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function R_(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var I_=null;function NO(){var r=window.event;return r&&r.type==="popstate"?r===I_?!1:(I_=r,!0):(I_=null,!1)}var tw=typeof setTimeout=="function"?setTimeout:void 0,OO=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,kO=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(r){return nw.resolve(null).then(r).catch(DO)}:tw;function DO(r){setTimeout(function(){throw r})}function ao(r){return r==="head"}function iw(r,o){var l=o,u=0,m=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<u&&8>u){l=u;var w=r.ownerDocument;if(l&1&&Cu(w.documentElement),l&2&&Cu(w.body),l&4)for(l=w.head,Cu(l),w=l.firstChild;w;){var S=w.nextSibling,M=w.nodeName;w[Zo]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=S}}if(m===0){r.removeChild(g),ku(o);return}m--}else l==="$"||l==="$?"||l==="$!"?m++:u=l.charCodeAt(0)-48;else u=0;l=g}while(l);ku(o)}function x_(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":x_(l),zs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function PO(r,o,l,u){for(;r.nodeType===1;){var m=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Zo])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=or(r.nextSibling),r===null)break}return null}function MO(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=or(r.nextSibling),r===null))return null;return r}function N_(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function LO(r,o){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")o();else{var u=function(){o(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function or(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var O_=null;function rw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return r;o--}else l==="/$"&&o++}r=r.previousSibling}return null}function sw(r,o,l){switch(o=_f(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Cu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);zs(r)}var Yi=new Map,ow=new Set;function yf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ys=be.d;be.d={f:UO,r:VO,D:jO,C:BO,L:FO,m:zO,X:HO,S:qO,M:GO};function UO(){var r=ys.f(),o=cf();return r||o}function VO(r){var o=Er(r);o!==null&&o.tag===5&&o.type==="form"?AT(o):ys.r(r)}var jl=typeof document>"u"?null:document;function aw(r,o,l){var u=jl;if(u&&typeof o=="string"&&o){var m=fn(o);m='link[rel="'+r+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),ow.has(m)||(ow.add(m),r={rel:r,crossOrigin:l,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),qn(o,"link",r),ln(o),u.head.appendChild(o)))}}function jO(r){ys.D(r),aw("dns-prefetch",r,null)}function BO(r,o){ys.C(r,o),aw("preconnect",r,o)}function FO(r,o,l){ys.L(r,o,l);var u=jl;if(u&&r&&o){var m='link[rel="preload"][as="'+fn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+fn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+fn(l.imageSizes)+'"]')):m+='[href="'+fn(r)+'"]';var g=m;switch(o){case"style":g=Bl(r);break;case"script":g=Fl(r)}Yi.has(g)||(r=_({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),Yi.set(g,r),u.querySelector(m)!==null||o==="style"&&u.querySelector(Su(g))||o==="script"&&u.querySelector(Au(g))||(o=u.createElement("link"),qn(o,"link",r),ln(o),u.head.appendChild(o)))}}function zO(r,o){ys.m(r,o);var l=jl;if(l&&r){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(r)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Fl(r)}if(!Yi.has(g)&&(r=_({rel:"modulepreload",href:r},o),Yi.set(g,r),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Au(g)))return}u=l.createElement("link"),qn(u,"link",r),ln(u),l.head.appendChild(u)}}}function qO(r,o,l){ys.S(r,o,l);var u=jl;if(u&&r){var m=oi(u).hoistableStyles,g=Bl(r);o=o||"default";var w=m.get(g);if(!w){var S={loading:0,preload:null};if(w=u.querySelector(Su(g)))S.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":o},l),(l=Yi.get(g))&&k_(r,l);var M=w=u.createElement("link");ln(M),qn(M,"link",r),M._p=new Promise(function(J,le){M.onload=J,M.onerror=le}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,vf(w,o,u)}w={type:"stylesheet",instance:w,count:1,state:S},m.set(g,w)}}}function HO(r,o){ys.X(r,o);var l=jl;if(l&&r){var u=oi(l).hoistableScripts,m=Fl(r),g=u.get(m);g||(g=l.querySelector(Au(m)),g||(r=_({src:r,async:!0},o),(o=Yi.get(m))&&D_(r,o),g=l.createElement("script"),ln(g),qn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function GO(r,o){ys.M(r,o);var l=jl;if(l&&r){var u=oi(l).hoistableScripts,m=Fl(r),g=u.get(m);g||(g=l.querySelector(Au(m)),g||(r=_({src:r,async:!0,type:"module"},o),(o=Yi.get(m))&&D_(r,o),g=l.createElement("script"),ln(g),qn(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function lw(r,o,l,u){var m=(m=Q.current)?yf(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Bl(l.href),l=oi(m).hoistableStyles,u=l.get(o),u||(u={type:"style",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Bl(l.href);var g=oi(m).hoistableStyles,w=g.get(r);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,w),(g=m.querySelector(Su(r)))&&!g._p&&(w.instance=g,w.state.loading=5),Yi.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Yi.set(r,l),g||$O(m,r,l,w.state))),o&&u===null)throw Error(i(528,""));return w}if(o&&u!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Fl(l),l=oi(m).hoistableScripts,u=l.get(o),u||(u={type:"script",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Bl(r){return'href="'+fn(r)+'"'}function Su(r){return'link[rel="stylesheet"]['+r+"]"}function cw(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function $O(r,o,l,u){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=r.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),qn(o,"link",l),ln(o),r.head.appendChild(o))}function Fl(r){return'[src="'+fn(r)+'"]'}function Au(r){return"script[async]"+r}function uw(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var u=r.querySelector('style[data-href~="'+fn(l.href)+'"]');if(u)return o.instance=u,ln(u),u;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),ln(u),qn(u,"style",m),vf(u,l.precedence,r),o.instance=u;case"stylesheet":m=Bl(l.href);var g=r.querySelector(Su(m));if(g)return o.state.loading|=4,o.instance=g,ln(g),g;u=cw(l),(m=Yi.get(m))&&k_(u,m),g=(r.ownerDocument||r).createElement("link"),ln(g);var w=g;return w._p=new Promise(function(S,M){w.onload=S,w.onerror=M}),qn(g,"link",u),o.state.loading|=4,vf(g,l.precedence,r),o.instance=g;case"script":return g=Fl(l.src),(m=r.querySelector(Au(g)))?(o.instance=m,ln(m),m):(u=l,(m=Yi.get(g))&&(u=_({},l),D_(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),ln(m),qn(m,"link",u),r.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,vf(u,l.precedence,r));return o.instance}function vf(r,o,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,w=0;w<u.length;w++){var S=u[w];if(S.dataset.precedence===o)g=S;else if(g!==m)break}g?g.parentNode.insertBefore(r,g.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function k_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function D_(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Ef=null;function dw(r,o,l){if(Ef===null){var u=new Map,m=Ef=new Map;m.set(l,u)}else m=Ef,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),m=0;m<l.length;m++){var g=l[m];if(!(g[Zo]||g[an]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(o)||"";w=r+w;var S=u.get(w);S?S.push(g):u.set(w,[g])}}return u}function hw(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function KO(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function fw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ru=null;function QO(){}function YO(r,o,l){if(Ru===null)throw Error(i(475));var u=Ru;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Bl(l.href),g=r.querySelector(Su(m));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Tf.bind(u),r.then(u,u)),o.state.loading|=4,o.instance=g,ln(g);return}g=r.ownerDocument||r,l=cw(l),(m=Yi.get(m))&&k_(l,m),g=g.createElement("link"),ln(g);var w=g;w._p=new Promise(function(S,M){w.onload=S,w.onerror=M}),qn(g,"link",l),o.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(u.count++,o=Tf.bind(u),r.addEventListener("load",o),r.addEventListener("error",o))}}function WO(){if(Ru===null)throw Error(i(475));var r=Ru;return r.stylesheets&&r.count===0&&P_(r,r.stylesheets),0<r.count?function(o){var l=setTimeout(function(){if(r.stylesheets&&P_(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(l)}}:null}function Tf(){if(this.count--,this.count===0){if(this.stylesheets)P_(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var bf=null;function P_(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,bf=new Map,o.forEach(XO,r),bf=null,Tf.call(r))}function XO(r,o){if(!(o.state.loading&4)){var l=bf.get(r);if(l)var u=l.get(null);else{l=new Map,bf.set(r,l);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var w=m[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),u=w)}u&&l.set(null,u)}m=o.instance,w=m.getAttribute("data-precedence"),g=l.get(w)||u,g===u&&l.set(null,m),l.set(w,m),this.count++,u=Tf.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),o.state.loading|=4}}var Iu={$$typeof:D,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function JO(r,o,l,u,m,g,w,S){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.hiddenUpdates=Ve(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function mw(r,o,l,u,m,g,w,S,M,J,le,de){return r=new JO(r,o,l,w,S,M,J,de),o=1,g===!0&&(o|=24),g=xi(3,null,null,o),r.current=g,g.stateNode=r,o=pg(),o.refCount++,r.pooledCache=o,o.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:o},vg(g),r}function pw(r){return r?(r=yl,r):yl}function gw(r,o,l,u,m,g){m=pw(m),u.context===null?u.context=m:u.pendingContext=m,u=Qs(o),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=Ys(r,u,o),l!==null&&(Pi(l,r,o),ru(l,r,o))}function _w(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function M_(r,o){_w(r,o),(r=r.alternate)&&_w(r,o)}function yw(r){if(r.tag===13){var o=_l(r,67108864);o!==null&&Pi(o,r,67108864),M_(r,67108864)}}var wf=!0;function ZO(r,o,l,u){var m=oe.T;oe.T=null;var g=be.p;try{be.p=2,L_(r,o,l,u)}finally{be.p=g,oe.T=m}}function ek(r,o,l,u){var m=oe.T;oe.T=null;var g=be.p;try{be.p=8,L_(r,o,l,u)}finally{be.p=g,oe.T=m}}function L_(r,o,l,u){if(wf){var m=U_(u);if(m===null)w_(r,o,u,Cf,l),Ew(r,u);else if(nk(m,r,o,l,u))u.stopPropagation();else if(Ew(r,u),o&4&&-1<tk.indexOf(r)){for(;m!==null;){var g=Er(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=Ln(g.pendingLanes);if(w!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;w;){var M=1<<31-Qe(w);S.entanglements[1]|=M,w&=~M}Pr(g),(Nt&6)===0&&(af=ht()+500,Tu(0))}}break;case 13:S=_l(g,2),S!==null&&Pi(S,g,2),cf(),M_(g,2)}if(g=U_(u),g===null&&w_(r,o,u,Cf,l),g===m)break;m=g}m!==null&&u.stopPropagation()}else w_(r,o,u,null,l)}}function U_(r){return r=Bi(r),V_(r)}var Cf=null;function V_(r){if(Cf=null,r=Wr(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=c(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Cf=r,null}function vw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Si()){case hn:return 2;case Dt:return 8;case W:case $:return 32;case ve:return 268435456;default:return 32}default:return 32}}var j_=!1,lo=null,co=null,uo=null,xu=new Map,Nu=new Map,ho=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ew(r,o){switch(r){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":xu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(o.pointerId)}}function Ou(r,o,l,u,m,g){return r===null||r.nativeEvent!==g?(r={blockedOn:o,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},o!==null&&(o=Er(o),o!==null&&yw(o)),r):(r.eventSystemFlags|=u,o=r.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),r)}function nk(r,o,l,u,m){switch(o){case"focusin":return lo=Ou(lo,r,o,l,u,m),!0;case"dragenter":return co=Ou(co,r,o,l,u,m),!0;case"mouseover":return uo=Ou(uo,r,o,l,u,m),!0;case"pointerover":var g=m.pointerId;return xu.set(g,Ou(xu.get(g)||null,r,o,l,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Nu.set(g,Ou(Nu.get(g)||null,r,o,l,u,m)),!0}return!1}function Tw(r){var o=Wr(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){r.blockedOn=o,Za(r.priority,function(){if(l.tag===13){var u=Di();u=Vn(u);var m=_l(l,u);m!==null&&Pi(m,l,u),M_(l,u)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sf(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=U_(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);es=u,l.target.dispatchEvent(u),es=null}else return o=Er(l),o!==null&&yw(o),r.blockedOn=l,!1;o.shift()}return!0}function bw(r,o,l){Sf(r)&&l.delete(o)}function ik(){j_=!1,lo!==null&&Sf(lo)&&(lo=null),co!==null&&Sf(co)&&(co=null),uo!==null&&Sf(uo)&&(uo=null),xu.forEach(bw),Nu.forEach(bw)}function Af(r,o){r.blockedOn===o&&(r.blockedOn=null,j_||(j_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ik)))}var Rf=null;function ww(r){Rf!==r&&(Rf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rf===r&&(Rf=null);for(var o=0;o<r.length;o+=3){var l=r[o],u=r[o+1],m=r[o+2];if(typeof u!="function"){if(V_(u||l)===null)continue;break}var g=Er(l);g!==null&&(r.splice(o,3),o-=3,Vg(g,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function ku(r){function o(M){return Af(M,r)}lo!==null&&Af(lo,r),co!==null&&Af(co,r),uo!==null&&Af(uo,r),xu.forEach(o),Nu.forEach(o);for(var l=0;l<ho.length;l++){var u=ho[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ho.length&&(l=ho[0],l.blockedOn===null);)Tw(l),l.blockedOn===null&&ho.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],g=l[u+1],w=m[zt]||null;if(typeof g=="function")w||ww(l);else if(w){var S=null;if(g&&g.hasAttribute("formAction")){if(m=g,w=g[zt]||null)S=w.formAction;else if(V_(m)!==null)continue}else S=w.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),ww(l)}}}function B_(r){this._internalRoot=r}If.prototype.render=B_.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,u=Di();gw(l,u,r,o,null,null)},If.prototype.unmount=B_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;gw(r.current,2,null,r,null,null),cf(),o[Rn]=null}};function If(r){this._internalRoot=r}If.prototype.unstable_scheduleHydration=function(r){if(r){var o=tr();r={blockedOn:null,target:r,priority:o};for(var l=0;l<ho.length&&o!==0&&o<ho[l].priority;l++);ho.splice(l,0,r),l===0&&Tw(r)}};var Cw=e.version;if(Cw!=="19.1.0")throw Error(i(527,Cw,"19.1.0"));be.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(o),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var rk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{we=xf.inject(rk),se=xf}catch{}}return Pu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var l=!1,u="",m=BT,g=FT,w=zT,S=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(S=o.unstable_transitionCallbacks)),o=mw(r,1,!1,null,null,l,u,m,g,w,S,null),r[Rn]=o.current,b_(r),new B_(o)},Pu.hydrateRoot=function(r,o,l){if(!s(r))throw Error(i(299));var u=!1,m="",g=BT,w=FT,S=zT,M=null,J=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks),l.formState!==void 0&&(J=l.formState)),o=mw(r,1,!0,o,l??null,u,m,g,w,S,M,J),o.context=pw(null),l=o.current,u=Di(),u=Vn(u),m=Qs(u),m.callback=null,Ys(l,m,u),l=u,o.current.lanes=l,Ge(o,l),Pr(o),r[Rn]=o.current,b_(r),new If(o)},Pu.version="19.1.0",Pu}var Pw;function mk(){if(Pw)return z_.exports;Pw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),z_.exports=fk(),z_.exports}var pk=mk(),q=Tv(),Mu={},Mw;function gk(){if(Mw)return Mu;Mw=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.parse=c,Mu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function c(E,R){const C=new a,k=E.length;if(k<2)return C;const O=(R==null?void 0:R.decode)||_;let H=0;do{const j=E.indexOf("=",H);if(j===-1)break;const D=E.indexOf(";",H),F=D===-1?k:D;if(j>F){H=E.lastIndexOf(";",j-1)+1;continue}const U=d(E,H,j),Z=f(E,j,U),x=E.slice(U,Z);if(C[x]===void 0){let A=d(E,j+1,F),N=f(E,F,A);const L=O(E.slice(A,N));C[x]=L}H=F+1}while(H<k);return C}function d(E,R,C){do{const k=E.charCodeAt(R);if(k!==32&&k!==9)return R}while(++R<C);return C}function f(E,R,C){for(;R>C;){const k=E.charCodeAt(--R);if(k!==32&&k!==9)return R+1}return C}function p(E,R,C){const k=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const O=k(R);if(!e.test(O))throw new TypeError(`argument val is invalid: ${R}`);let H=E+"="+O;if(!C)return H;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);H+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);H+="; Domain="+C.domain}if(C.path){if(!i.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);H+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);H+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(H+="; HttpOnly"),C.secure&&(H+="; Secure"),C.partitioned&&(H+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return H}function _(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function v(E){return s.call(E)==="[object Date]"}return Mu}gk();var Lw="popstate";function _k(n={}){function e(i,s){let{pathname:a,search:c,hash:d}=i.location;return vy("",{pathname:a,search:c,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:dd(s)}return vk(e,t,null,n)}function Zt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yk(){return Math.random().toString(36).substring(2,10)}function Uw(n,e){return{usr:n.state,key:n.key,idx:e}}function vy(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vc(e):e,state:t,key:e&&e.key||i||yk()}}function dd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function vk(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,c=s.history,d="POP",f=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function v(){d="POP";let O=_(),H=O==null?null:O-p;p=O,f&&f({action:d,location:k.location,delta:H})}function E(O,H){d="PUSH";let j=vy(k.location,O,H);p=_()+1;let D=Uw(j,p),F=k.createHref(j);try{c.pushState(D,"",F)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(F)}a&&f&&f({action:d,location:k.location,delta:1})}function R(O,H){d="REPLACE";let j=vy(k.location,O,H);p=_();let D=Uw(j,p),F=k.createHref(j);c.replaceState(D,"",F),a&&f&&f({action:d,location:k.location,delta:0})}function C(O){return Ek(O)}let k={get action(){return d},get location(){return n(s,c)},listen(O){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Lw,v),f=O,()=>{s.removeEventListener(Lw,v),f=null}},createHref(O){return e(s,O)},createURL:C,encodeLocation(O){let H=C(O);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:E,replace:R,go(O){return c.go(O)}};return k}function Ek(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:dd(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function MA(n,e,t="/"){return Tk(n,e,t,!1)}function Tk(n,e,t,i){let s=typeof e=="string"?vc(e):e,a=Is(s.pathname||"/",t);if(a==null)return null;let c=LA(n);bk(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let p=Dk(a);d=Ok(c[f],p,i)}return d}function LA(n,e=[],t=[],i=""){let s=(a,c,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Zt(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let p=Cs([i,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Zt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),LA(a.children,e,_,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:xk(p,a.index),routesMeta:_})};return n.forEach((a,c)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,c);else for(let f of UA(a.path))s(a,c,f)}),e}function UA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let c=UA(i.join("/")),d=[];return d.push(...c.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...c),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function bk(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Nk(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var wk=/^:[\w-]+$/,Ck=3,Sk=2,Ak=1,Rk=10,Ik=-2,Vw=n=>n==="*";function xk(n,e){let t=n.split("/"),i=t.length;return t.some(Vw)&&(i+=Ik),e&&(i+=Sk),t.filter(s=>!Vw(s)).reduce((s,a)=>s+(wk.test(a)?Ck:a===""?Ak:Rk),i)}function Nk(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function Ok(n,e,t=!1){let{routesMeta:i}=n,s={},a="/",c=[];for(let d=0;d<i.length;++d){let f=i[d],p=d===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",v=am({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},_),E=f.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=am({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!v)return null;Object.assign(s,v.params),c.push({params:s,pathname:Cs([a,v.pathname]),pathnameBase:Uk(Cs([a,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(a=Cs([a,v.pathnameBase]))}return c}function am(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=kk(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:v},E)=>{if(_==="*"){let C=d[E]||"";c=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const R=d[E];return v&&!R?p[_]=void 0:p[_]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:n}}function kk(n,e=!1,t=!0){Gr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Dk(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Is(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Pk(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?vc(n):n;return{pathname:t?t.startsWith("/")?t:Mk(t,e):e,search:Vk(i),hash:jk(s)}}function Mk(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function K_(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lk(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function VA(n){let e=Lk(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function jA(n,e,t,i=!1){let s;typeof n=="string"?s=vc(n):(s={...n},Zt(!s.pathname||!s.pathname.includes("?"),K_("?","pathname","search",s)),Zt(!s.pathname||!s.pathname.includes("#"),K_("#","pathname","hash",s)),Zt(!s.search||!s.search.includes("#"),K_("#","search","hash",s)));let a=n===""||s.pathname==="",c=a?"/":s.pathname,d;if(c==null)d=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}d=v>=0?e[v]:"/"}let f=Pk(s,d),p=c&&c!=="/"&&c.endsWith("/"),_=(a||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||_)&&(f.pathname+="/"),f}var Cs=n=>n.join("/").replace(/\/\/+/g,"/"),Uk=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Vk=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jk=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Bk(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var BA=["POST","PUT","PATCH","DELETE"];new Set(BA);var Fk=["GET",...BA];new Set(Fk);var Ec=q.createContext(null);Ec.displayName="DataRouter";var Gm=q.createContext(null);Gm.displayName="DataRouterState";var FA=q.createContext({isTransitioning:!1});FA.displayName="ViewTransition";var zk=q.createContext(new Map);zk.displayName="Fetchers";var qk=q.createContext(null);qk.displayName="Await";var Kr=q.createContext(null);Kr.displayName="Navigation";var Ld=q.createContext(null);Ld.displayName="Location";var Ms=q.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var bv=q.createContext(null);bv.displayName="RouteError";function Hk(n,{relative:e}={}){Zt(Ud(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=q.useContext(Kr),{hash:s,pathname:a,search:c}=Vd(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:Cs([t,a])),i.createHref({pathname:d,search:c,hash:s})}function Ud(){return q.useContext(Ld)!=null}function Ls(){return Zt(Ud(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Ld).location}var zA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qA(n){q.useContext(Kr).static||q.useLayoutEffect(n)}function Us(){let{isDataRoute:n}=q.useContext(Ms);return n?iD():Gk()}function Gk(){Zt(Ud(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext(Ec),{basename:e,navigator:t}=q.useContext(Kr),{matches:i}=q.useContext(Ms),{pathname:s}=Ls(),a=JSON.stringify(VA(i)),c=q.useRef(!1);return qA(()=>{c.current=!0}),q.useCallback((f,p={})=>{if(Gr(c.current,zA),!c.current)return;if(typeof f=="number"){t.go(f);return}let _=jA(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Cs([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,a,s,n])}q.createContext(null);function Vd(n,{relative:e}={}){let{matches:t}=q.useContext(Ms),{pathname:i}=Ls(),s=JSON.stringify(VA(t));return q.useMemo(()=>jA(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function $k(n,e){return HA(n,e)}function HA(n,e,t,i){var H;Zt(Ud(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=q.useContext(Kr),{matches:a}=q.useContext(Ms),c=a[a.length-1],d=c?c.params:{},f=c?c.pathname:"/",p=c?c.pathnameBase:"/",_=c&&c.route;{let j=_&&_.path||"";GA(f,!_||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let v=Ls(),E;if(e){let j=typeof e=="string"?vc(e):e;Zt(p==="/"||((H=j.pathname)==null?void 0:H.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${j.pathname}" was given in the \`location\` prop.`),E=j}else E=v;let R=E.pathname||"/",C=R;if(p!=="/"){let j=p.replace(/^\//,"").split("/");C="/"+R.replace(/^\//,"").split("/").slice(j.length).join("/")}let k=MA(n,{pathname:C});Gr(_||k!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Gr(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=Xk(k&&k.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:Cs([p,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:Cs([p,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,t,i);return e&&O?q.createElement(Ld.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},O):O}function Kk(){let n=nD(),e=Bk(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:s},t):null,c)}var Qk=q.createElement(Kk,null),Yk=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?q.createElement(Ms.Provider,{value:this.props.routeContext},q.createElement(bv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Wk({routeContext:n,match:e,children:t}){let i=q.useContext(Ec);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Ms.Provider,{value:n},t)}function Xk(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t==null?void 0:t.errors;if(a!=null){let f=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);Zt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:_,errors:v}=t,E=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||E){c=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,p,_)=>{let v,E=!1,R=null,C=null;t&&(v=a&&p.route.id?a[p.route.id]:void 0,R=p.route.errorElement||Qk,c&&(d<0&&_===0?(GA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,C=null):d===_&&(E=!0,C=p.route.hydrateFallbackElement||null)));let k=e.concat(s.slice(0,_+1)),O=()=>{let H;return v?H=R:E?H=C:p.route.Component?H=q.createElement(p.route.Component,null):p.route.element?H=p.route.element:H=f,q.createElement(Wk,{match:p,routeContext:{outlet:f,matches:k,isDataRoute:t!=null},children:H})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?q.createElement(Yk,{location:t.location,revalidation:t.revalidation,component:R,error:v,children:O(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):O()},null)}function wv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jk(n){let e=q.useContext(Ec);return Zt(e,wv(n)),e}function Zk(n){let e=q.useContext(Gm);return Zt(e,wv(n)),e}function eD(n){let e=q.useContext(Ms);return Zt(e,wv(n)),e}function Cv(n){let e=eD(n),t=e.matches[e.matches.length-1];return Zt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function tD(){return Cv("useRouteId")}function nD(){var i;let n=q.useContext(bv),e=Zk("useRouteError"),t=Cv("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function iD(){let{router:n}=Jk("useNavigate"),e=Cv("useNavigate"),t=q.useRef(!1);return qA(()=>{t.current=!0}),q.useCallback(async(s,a={})=>{Gr(t.current,zA),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var jw={};function GA(n,e,t){!e&&!jw[n]&&(jw[n]=!0,Gr(!1,t))}q.memo(rD);function rD({routes:n,future:e,state:t}){return HA(n,void 0,t,e)}function Wi(n){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1}){Zt(!Ud(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:c,navigator:s,static:a,future:{}}),[c,s,a]);typeof t=="string"&&(t=vc(t));let{pathname:f="/",search:p="",hash:_="",state:v=null,key:E="default"}=t,R=q.useMemo(()=>{let C=Is(f,c);return C==null?null:{location:{pathname:C,search:p,hash:_,state:v,key:E},navigationType:i}},[c,f,p,_,v,E,i]);return Gr(R!=null,`<Router basename="${c}"> is not able to match the URL "${f}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:q.createElement(Kr.Provider,{value:d},q.createElement(Ld.Provider,{children:e,value:R}))}function oD({children:n,location:e}){return $k(Ey(n),e)}function Ey(n,e=[]){let t=[];return q.Children.forEach(n,(i,s)=>{if(!q.isValidElement(i))return;let a=[...e,s];if(i.type===q.Fragment){t.push.apply(t,Ey(i.props.children,a));return}Zt(i.type===Wi,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Ey(i.props.children,a)),t.push(c)}),t}var zf="get",qf="application/x-www-form-urlencoded";function $m(n){return n!=null&&typeof n.tagName=="string"}function aD(n){return $m(n)&&n.tagName.toLowerCase()==="button"}function lD(n){return $m(n)&&n.tagName.toLowerCase()==="form"}function cD(n){return $m(n)&&n.tagName.toLowerCase()==="input"}function uD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dD(n,e){return n.button===0&&(!e||e==="_self")&&!uD(n)}var Nf=null;function hD(){if(Nf===null)try{new FormData(document.createElement("form"),0),Nf=!1}catch{Nf=!0}return Nf}var fD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Q_(n){return n!=null&&!fD.has(n)?(Gr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qf}"`),null):n}function mD(n,e){let t,i,s,a,c;if(lD(n)){let d=n.getAttribute("action");i=d?Is(d,e):null,t=n.getAttribute("method")||zf,s=Q_(n.getAttribute("enctype"))||qf,a=new FormData(n)}else if(aD(n)||cD(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(i=f?Is(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||zf,s=Q_(n.getAttribute("formenctype"))||Q_(d.getAttribute("enctype"))||qf,a=new FormData(d,n),!hD()){let{name:p,type:_,value:v}=n;if(_==="image"){let E=p?`${p}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else p&&a.append(p,v)}}else{if($m(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zf,i=null,s=qf,c=n}return a&&s==="text/plain"&&(c=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:c}}function Sv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function pD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _D(n,e,t){let i=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await pD(a,t);return c.links?c.links():[]}return[]}));return TD(i.flat(1).filter(gD).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Bw(n,e,t,i,s,a){let c=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,d=(f,p)=>{var _;return t[p].pathname!==f.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>c(f,p)||d(f,p)):a==="data"?e.filter((f,p)=>{var v;let _=i.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(c(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let E=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function yD(n,e,{includeHydrateFallback:t}={}){return vD(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function vD(n){return[...new Set(n)]}function ED(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function TD(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let a=JSON.stringify(ED(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var bD=new Set([100,101,204,205]);function wD(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Is(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function $A(){let n=q.useContext(Ec);return Sv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function CD(){let n=q.useContext(Gm);return Sv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Av=q.createContext(void 0);Av.displayName="FrameworkContext";function KA(){let n=q.useContext(Av);return Sv(n,"You must render this element inside a <HydratedRouter> element"),n}function SD(n,e){let t=q.useContext(Av),[i,s]=q.useState(!1),[a,c]=q.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:_,onTouchStart:v}=e,E=q.useRef(null);q.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let k=H=>{H.forEach(j=>{c(j.isIntersecting)})},O=new IntersectionObserver(k,{threshold:.5});return E.current&&O.observe(E.current),()=>{O.disconnect()}}},[n]),q.useEffect(()=>{if(i){let k=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(k)}}},[i]);let R=()=>{s(!0)},C=()=>{s(!1),c(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:Lu(d,R),onBlur:Lu(f,C),onMouseEnter:Lu(p,R),onMouseLeave:Lu(_,C),onTouchStart:Lu(v,R)}]:[!1,E,{}]}function Lu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function AD({page:n,...e}){let{router:t}=$A(),i=q.useMemo(()=>MA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?q.createElement(ID,{page:n,matches:i,...e}):null}function RD(n){let{manifest:e,routeModules:t}=KA(),[i,s]=q.useState([]);return q.useEffect(()=>{let a=!1;return _D(n,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[n,e,t]),i}function ID({page:n,matches:e,...t}){let i=Ls(),{manifest:s,routeModules:a}=KA(),{basename:c}=$A(),{loaderData:d,matches:f}=CD(),p=q.useMemo(()=>Bw(n,e,f,s,i,"data"),[n,e,f,s,i]),_=q.useMemo(()=>Bw(n,e,f,s,i,"assets"),[n,e,f,s,i]),v=q.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,k=!1;if(e.forEach(H=>{var D;let j=s.routes[H.route.id];!j||!j.hasLoader||(!p.some(F=>F.route.id===H.route.id)&&H.route.id in d&&((D=a[H.route.id])!=null&&D.shouldRevalidate)||j.hasClientLoader?k=!0:C.add(H.route.id))}),C.size===0)return[];let O=wD(n,c);return k&&C.size>0&&O.searchParams.set("_routes",e.filter(H=>C.has(H.route.id)).map(H=>H.route.id).join(",")),[O.pathname+O.search]},[c,d,i,s,p,e,n,a]),E=q.useMemo(()=>yD(_,s),[_,s]),R=RD(_);return q.createElement(q.Fragment,null,v.map(C=>q.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),E.map(C=>q.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),R.map(({key:C,link:k})=>q.createElement("link",{key:C,...k})))}function xD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var QA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QA&&(window.__reactRouterVersion="7.6.1")}catch{}function ND({basename:n,children:e,window:t}){let i=q.useRef();i.current==null&&(i.current=_k({window:t,v5Compat:!0}));let s=i.current,[a,c]=q.useState({action:s.action,location:s.location}),d=q.useCallback(f=>{q.startTransition(()=>c(f))},[c]);return q.useLayoutEffect(()=>s.listen(d),[s,d]),q.createElement(sD,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var YA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mn=q.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:c,state:d,target:f,to:p,preventScrollReset:_,viewTransition:v,...E},R){let{basename:C}=q.useContext(Kr),k=typeof p=="string"&&YA.test(p),O,H=!1;if(typeof p=="string"&&k&&(O=p,QA))try{let N=new URL(window.location.href),L=p.startsWith("//")?new URL(N.protocol+p):new URL(p),V=Is(L.pathname,C);L.origin===N.origin&&V!=null?p=V+L.search+L.hash:H=!0}catch{Gr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=Hk(p,{relative:s}),[D,F,U]=SD(i,E),Z=PD(p,{replace:c,state:d,target:f,preventScrollReset:_,relative:s,viewTransition:v});function x(N){e&&e(N),N.defaultPrevented||Z(N)}let A=q.createElement("a",{...E,...U,href:O||j,onClick:H||a?e:x,ref:xD(R,F),target:f,"data-discover":!k&&t==="render"?"true":void 0});return D&&!k?q.createElement(q.Fragment,null,A,q.createElement(AD,{page:j})):A});Mn.displayName="Link";var OD=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:c,viewTransition:d,children:f,...p},_){let v=Vd(c,{relative:p.relative}),E=Ls(),R=q.useContext(Gm),{navigator:C,basename:k}=q.useContext(Kr),O=R!=null&&jD(v)&&d===!0,H=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,j=E.pathname,D=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(j=j.toLowerCase(),D=D?D.toLowerCase():null,H=H.toLowerCase()),D&&k&&(D=Is(D,k)||D);const F=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let U=j===H||!s&&j.startsWith(H)&&j.charAt(F)==="/",Z=D!=null&&(D===H||!s&&D.startsWith(H)&&D.charAt(H.length)==="/"),x={isActive:U,isPending:Z,isTransitioning:O},A=U?e:void 0,N;typeof i=="function"?N=i(x):N=[i,U?"active":null,Z?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(x):a;return q.createElement(Mn,{...p,"aria-current":A,className:N,ref:_,style:L,to:c,viewTransition:d},typeof f=="function"?f(x):f)});OD.displayName="NavLink";var kD=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:c=zf,action:d,onSubmit:f,relative:p,preventScrollReset:_,viewTransition:v,...E},R)=>{let C=UD(),k=VD(d,{relative:p}),O=c.toLowerCase()==="get"?"get":"post",H=typeof d=="string"&&YA.test(d),j=D=>{if(f&&f(D),D.defaultPrevented)return;D.preventDefault();let F=D.nativeEvent.submitter,U=(F==null?void 0:F.getAttribute("formmethod"))||c;C(F||D.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:a,relative:p,preventScrollReset:_,viewTransition:v})};return q.createElement("form",{ref:R,method:O,action:k,onSubmit:i?f:j,...E,"data-discover":!H&&n==="render"?"true":void 0})});kD.displayName="Form";function DD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WA(n){let e=q.useContext(Ec);return Zt(e,DD(n)),e}function PD(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:c}={}){let d=Us(),f=Ls(),p=Vd(n,{relative:a});return q.useCallback(_=>{if(dD(_,e)){_.preventDefault();let v=t!==void 0?t:dd(f)===dd(p);d(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:c})}},[f,d,p,t,i,e,n,s,a,c])}var MD=0,LD=()=>`__${String(++MD)}__`;function UD(){let{router:n}=WA("useSubmit"),{basename:e}=q.useContext(Kr),t=tD();return q.useCallback(async(i,s={})=>{let{action:a,method:c,encType:d,formData:f,body:p}=mD(i,e);if(s.navigate===!1){let _=s.fetcherKey||LD();await n.fetch(_,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||d,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||c,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function VD(n,{relative:e}={}){let{basename:t}=q.useContext(Kr),i=q.useContext(Ms);Zt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Vd(n||".",{relative:e})},c=Ls();if(n==null){a.search=c.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(_=>_==="")){d.delete("index"),f.filter(v=>v).forEach(v=>d.append("index",v));let _=d.toString();a.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Cs([t,a.pathname])),dd(a)}function jD(n,e={}){let t=q.useContext(FA);Zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=WA("useViewTransitionState"),s=Vd(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Is(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Is(t.nextLocation.pathname,i)||t.nextLocation.pathname;return am(s.pathname,c)!=null||am(s.pathname,a)!=null}[...bD];const BD=()=>{};var Fw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee=function(n,e){if(!n)throw Tc(e)},Tc=function(n){return new Error("Firebase Database ("+XA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},FD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],c=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Rv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],c=s+1<n.length,d=c?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,_=a>>2,v=(a&3)<<4|d>>4;let E=(d&15)<<2|p>>6,R=p&63;f||(R=64,c||(E=64)),i.push(t[_],t[v],t[E],t[R])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||p==null||v==null)throw new zD;const E=a<<2|d>>4;if(i.push(E),p!==64){const R=d<<4&240|p>>2;if(i.push(R),v!==64){const C=p<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZA=function(n){const e=JA(n);return Rv.encodeByteArray(e,!0)},lm=function(n){return ZA(n).replace(/\./g,"")},cm=function(n){try{return Rv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(n){return eR(void 0,n)}function eR(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!HD(t)||(n[t]=eR(n[t],e[t]));return n}function HD(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=()=>GD().__FIREBASE_DEFAULTS__,KD=()=>{if(typeof process>"u"||typeof Fw>"u")return;const n=Fw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cm(n[1]);return e&&JSON.parse(e)},Km=()=>{try{return BD()||$D()||KD()||QD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},tR=n=>{var e,t;return(t=(e=Km())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Iv=n=>{const e=tR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},nR=()=>{var n;return(n=Km())===null||n===void 0?void 0:n.config},iR=n=>{var e;return(e=Km())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n){return n.endsWith(".cloudworkstations.dev")}async function Qm(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lm(JSON.stringify(t)),lm(JSON.stringify(c)),""].join(".")}const Wu={};function YD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wu))Wu[e]?n.emulator.push(e):n.prod.push(e);return n}function WD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zw=!1;function Ym(n,e){if(typeof window>"u"||typeof document>"u"||!Vs(window.location.host)||Wu[n]===e||Wu[n]||zw)return;Wu[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=YD().prod.length>0;function c(){const E=document.getElementById(i);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,R){E.setAttribute("width","24"),E.setAttribute("id",R),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{zw=!0,c()},E}function _(E,R){E.setAttribute("id",R),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=WD(i),R=t("text"),C=document.getElementById(R)||document.createElement("span"),k=t("learnmore"),O=document.getElementById(k)||document.createElement("a"),H=t("preprendIcon"),j=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const D=E.element;d(D),_(O,k);const F=p();f(j,H),D.append(j,C,O,F),document.body.appendChild(D)}a?(C.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function XD(){var n;const e=(n=Km())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eP(){const n=si();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tP(){return XA.NODE_ADMIN===!0}function nP(){return!XD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iP(){try{return typeof indexedDB=="object"}catch{return!1}}function rP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="FirebaseError";class Qr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=sP,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bd.prototype.create)}}class Bd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],c=a?oP(a,i):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new Qr(s,d,i)}}function oP(n,e){return n.replace(aP,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const aP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n){return JSON.parse(n)}function wn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=function(n){let e={},t={},i={},s="";try{const a=n.split(".");e=hd(cm(a[0])||""),t=hd(cm(a[1])||""),s=a[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}},lP=function(n){const e=sR(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},cP=function(n){const e=sR(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function sc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Ty(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function um(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function Po(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],c=e[s];if(qw(a)&&qw(c)){if(!Po(a,c))return!1}else if(a!==c)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function qw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Hu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const E=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(E<<1|E>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],c=this.chain_[2],d=this.chain_[3],f=this.chain_[4],p,_;for(let v=0;v<80;v++){v<40?v<20?(p=d^a&(c^d),_=1518500249):(p=a^c^d,_=1859775393):v<60?(p=a&c|d&(a|c),_=2400959708):(p=a^c^d,_=3395469782);const E=(s<<5|s>>>27)+p+f+_+i[v]&4294967295;f=d,d=c,c=(a<<30|a>>>2)&4294967295,a=s,s=E}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let s=0;const a=this.buf_;let c=this.inbuf_;for(;s<t;){if(c===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(a[c]=e.charCodeAt(s),++c,++s,c===this.blockSize){this.compress_(a),c=0;break}}else for(;s<t;)if(a[c]=e[s],++c,++s,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)e[i]=this.chain_[s]>>a&255,++i;return e}}function dP(n,e){const t=new hP(n,e);return t.subscribe.bind(t)}class hP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");fP(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Y_),s.error===void 0&&(s.error=Y_),s.complete===void 0&&(s.complete=Y_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Y_(){}function Wm(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const a=s-55296;i++,Ee(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;s=65536+(a<<10)+c}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Xm=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n){return n&&n._delegate?n._delegate:n}class xs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new jd;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_P(e))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ia){return this.instances.has(e)}getOptions(e=Ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&c.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ia){return this.component?this.component.multipleInstances?e:Ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gP(n){return n===Ia?void 0:n}function _P(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const vP={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},EP=lt.INFO,TP={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},bP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=TP[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jm{constructor(e){this.name=e,this._logLevel=EP,this._logHandler=bP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const wP=(n,e)=>e.some(t=>n instanceof t);let Hw,Gw;function CP(){return Hw||(Hw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SP(){return Gw||(Gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oR=new WeakMap,by=new WeakMap,aR=new WeakMap,W_=new WeakMap,Ov=new WeakMap;function AP(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(So(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&oR.set(t,n)}).catch(()=>{}),Ov.set(e,n),e}function RP(n){if(by.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});by.set(n,e)}let wy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return by.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return So(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IP(n){wy=n(wy)}function xP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(X_(this),e,...t);return aR.set(i,e.sort?e.sort():[e]),So(i)}:SP().includes(n)?function(...e){return n.apply(X_(this),e),So(oR.get(this))}:function(...e){return So(n.apply(X_(this),e))}}function NP(n){return typeof n=="function"?xP(n):(n instanceof IDBTransaction&&RP(n),wP(n,CP())?new Proxy(n,wy):n)}function So(n){if(n instanceof IDBRequest)return AP(n);if(W_.has(n))return W_.get(n);const e=NP(n);return e!==n&&(W_.set(n,e),Ov.set(e,n)),e}const X_=n=>Ov.get(n);function OP(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const c=indexedDB.open(n,e),d=So(c);return i&&c.addEventListener("upgradeneeded",f=>{i(So(c.result),f.oldVersion,f.newVersion,So(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const kP=["get","getKey","getAll","getAllKeys","count"],DP=["put","add","delete","clear"],J_=new Map;function $w(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(J_.get(e))return J_.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=DP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||kP.includes(t)))return;const a=async function(c,...d){const f=this.transaction(c,s?"readwrite":"readonly");let p=f.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),s&&f.done]))[0]};return J_.set(e,a),a}IP(n=>({...n,get:(e,t,i)=>$w(e,t)||n.get(e,t,i),has:(e,t)=>!!$w(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(MP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function MP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cy="@firebase/app",Kw="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Jm("@firebase/app"),LP="@firebase/app-compat",UP="@firebase/analytics-compat",VP="@firebase/analytics",jP="@firebase/app-check-compat",BP="@firebase/app-check",FP="@firebase/auth",zP="@firebase/auth-compat",qP="@firebase/database",HP="@firebase/data-connect",GP="@firebase/database-compat",$P="@firebase/functions",KP="@firebase/functions-compat",QP="@firebase/installations",YP="@firebase/installations-compat",WP="@firebase/messaging",XP="@firebase/messaging-compat",JP="@firebase/performance",ZP="@firebase/performance-compat",eM="@firebase/remote-config",tM="@firebase/remote-config-compat",nM="@firebase/storage",iM="@firebase/storage-compat",rM="@firebase/firestore",sM="@firebase/ai",oM="@firebase/firestore-compat",aM="firebase",lM="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="[DEFAULT]",cM={[Cy]:"fire-core",[LP]:"fire-core-compat",[VP]:"fire-analytics",[UP]:"fire-analytics-compat",[BP]:"fire-app-check",[jP]:"fire-app-check-compat",[FP]:"fire-auth",[zP]:"fire-auth-compat",[qP]:"fire-rtdb",[HP]:"fire-data-connect",[GP]:"fire-rtdb-compat",[$P]:"fire-fn",[KP]:"fire-fn-compat",[QP]:"fire-iid",[YP]:"fire-iid-compat",[WP]:"fire-fcm",[XP]:"fire-fcm-compat",[JP]:"fire-perf",[ZP]:"fire-perf-compat",[eM]:"fire-rc",[tM]:"fire-rc-compat",[nM]:"fire-gcs",[iM]:"fire-gcs-compat",[rM]:"fire-fst",[oM]:"fire-fst-compat",[sM]:"fire-vertex","fire-js":"fire-js",[aM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=new Map,uM=new Map,Ay=new Map;function Qw(n,e){try{n.container.addComponent(e)}catch(t){Ns.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mo(n){const e=n.name;if(Ay.has(e))return Ns.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,n);for(const t of dm.values())Qw(t,n);for(const t of uM.values())Qw(t,n);return!0}function Fd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ei(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ao=new Bd("app","Firebase",dM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=lM;function lR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Sy,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw Ao.create("bad-app-name",{appName:String(s)});if(t||(t=nR()),!t)throw Ao.create("no-options");const a=dm.get(s);if(a){if(Po(t,a.options)&&Po(i,a.config))return a;throw Ao.create("duplicate-app",{appName:s})}const c=new yP(s);for(const f of Ay.values())c.addComponent(f);const d=new hM(t,i,c);return dm.set(s,d),d}function Zm(n=Sy){const e=dm.get(n);if(!e&&n===Sy&&nR())return lR();if(!e)throw Ao.create("no-app",{appName:n});return e}function Ji(n,e,t){var i;let s=(i=cM[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ns.warn(d.join(" "));return}Mo(new xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM="firebase-heartbeat-database",mM=1,fd="firebase-heartbeat-store";let Z_=null;function cR(){return Z_||(Z_=OP(fM,mM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ao.create("idb-open",{originalErrorMessage:n.message})})),Z_}async function pM(n){try{const t=(await cR()).transaction(fd),i=await t.objectStore(fd).get(uR(n));return await t.done,i}catch(e){if(e instanceof Qr)Ns.warn(e.message);else{const t=Ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ns.warn(t.message)}}}async function Yw(n,e){try{const i=(await cR()).transaction(fd,"readwrite");await i.objectStore(fd).put(e,uR(n)),await i.done}catch(t){if(t instanceof Qr)Ns.warn(t.message);else{const i=Ao.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ns.warn(i.message)}}}function uR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=1024,_M=30;class yM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EM(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ww();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>_M){const c=TM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ns.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ww(),{heartbeatsToSend:i,unsentEntries:s}=vM(this._heartbeatsCache.heartbeats),a=lm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ns.warn(t),""}}}function Ww(){return new Date().toISOString().substring(0,10)}function vM(n,e=gM){const t=[];let i=n.slice();for(const s of n){const a=t.find(c=>c.agent===s.agent);if(a){if(a.dates.push(s.date),Xw(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Xw(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class EM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iP()?rP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Yw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Yw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xw(n){return lm(JSON.stringify({version:2,heartbeats:n})).length}function TM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n){Mo(new xs("platform-logger",e=>new PP(e),"PRIVATE")),Mo(new xs("heartbeat",e=>new yM(e),"PRIVATE")),Ji(Cy,Kw,n),Ji(Cy,Kw,"esm2017"),Ji("fire-js","")}bM("");function kv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function dR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wM=dR,hR=new Bd("auth","Firebase",dR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=new Jm("@firebase/auth");function CM(n,...e){hm.logLevel<=lt.WARN&&hm.warn(`Auth (${Ko}): ${n}`,...e)}function Hf(n,...e){hm.logLevel<=lt.ERROR&&hm.error(`Auth (${Ko}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n,...e){throw Dv(n,...e)}function Br(n,...e){return Dv(n,...e)}function fR(n,e,t){const i=Object.assign(Object.assign({},wM()),{[e]:t});return new Bd("auth","Firebase",i).create(e,{appName:n.name})}function Ss(n){return fR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return hR.create(n,...e)}function Fe(n,e,...t){if(!n)throw Dv(e,...t)}function Ts(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Hf(e),new Error(e)}function Os(n,e){n||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SM(){return Jw()==="http:"||Jw()==="https:"}function Jw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SM()||ZD()||"connection"in navigator)?navigator.onLine:!0}function RM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Os(t>e,"Short delay should be less than long delay!"),this.isMobile=Nv()||rR()}get(){return AM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(n,e){Os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NM=new zd(3e4,6e4);function Qo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Yo(n,e,t,i,s={}){return pR(n,s,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const d=bc(Object.assign({key:n.config.apiKey},c)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},a);return JD()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Vs(n.emulatorConfig.host)&&(p.credentials="include"),mR.fetch()(await gR(n,n.config.apiHost,t,d),p)})}async function pR(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},IM),e);try{const s=new kM(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Of(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Of(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Of(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Of(n,"user-disabled",c);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw fR(n,_,p);mr(n,_)}}catch(s){if(s instanceof Qr)throw s;mr(n,"network-request-failed",{message:String(s)})}}async function qd(n,e,t,i,s={}){const a=await Yo(n,e,t,i,s);return"mfaPendingCredential"in a&&mr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function gR(n,e,t,i){const s=`${e}${t}?${i}`,a=n,c=a.config.emulator?Pv(n.config,s):`${n.config.apiScheme}://${s}`;return xM.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function OM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Br(this.auth,"network-request-failed")),NM.get())})}}function Of(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Br(n,e,i);return s.customData._tokenResponse=t,s}function Zw(n){return n!==void 0&&n.enterprise!==void 0}class DM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return OM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PM(n,e){return Yo(n,"GET","/v2/recaptchaConfig",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(n,e){return Yo(n,"POST","/v1/accounts:delete",e)}async function fm(n,e){return Yo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LM(n,e=!1){const t=At(n),i=await t.getIdToken(e),s=Mv(i);Fe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Xu(ey(s.auth_time)),issuedAtTime:Xu(ey(s.iat)),expirationTime:Xu(ey(s.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function ey(n){return Number(n)*1e3}function Mv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{const s=cm(t);return s?JSON.parse(s):(Hf("Failed to decode base64 JWT payload"),null)}catch(s){return Hf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function eC(n){const e=Mv(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Qr&&UM(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function UM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mm(n){var e;const t=n.auth,i=await n.getIdToken(),s=await md(n,fm(t,{idToken:i}));Fe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?_R(a.providerUserInfo):[],d=BM(n.providerData,c),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!(d!=null&&d.length),_=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Iy(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function jM(n){const e=At(n);await mm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BM(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function _R(n){return n.map(e=>{var{providerId:t}=e,i=kv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(n,e){const t=await pR(n,{},async()=>{const i=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,c=await gR(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",mR.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zM(n,e){return Yo(n,"POST","/v2/accounts:revokeToken",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=eC(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await FM(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,c=new Jl;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(Fe(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),a&&(Fe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,a=kv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Iy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await md(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LM(this,e)}reload(){return jM(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await mm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ei(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await md(this,MM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,a,c,d,f,p,_;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,C=(c=t.photoURL)!==null&&c!==void 0?c:void 0,k=(d=t.tenantId)!==null&&d!==void 0?d:void 0,O=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,H=(p=t.createdAt)!==null&&p!==void 0?p:void 0,j=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:D,emailVerified:F,isAnonymous:U,providerData:Z,stsTokenManager:x}=t;Fe(D&&x,e,"internal-error");const A=Jl.fromJSON(this.name,x);Fe(typeof D=="string",e,"internal-error"),mo(v,e.name),mo(E,e.name),Fe(typeof F=="boolean",e,"internal-error"),Fe(typeof U=="boolean",e,"internal-error"),mo(R,e.name),mo(C,e.name),mo(k,e.name),mo(O,e.name),mo(H,e.name),mo(j,e.name);const N=new dr({uid:D,auth:e,email:E,emailVerified:F,displayName:v,isAnonymous:U,photoURL:C,phoneNumber:R,tenantId:k,stsTokenManager:A,createdAt:H,lastLoginAt:j});return Z&&Array.isArray(Z)&&(N.providerData=Z.map(L=>Object.assign({},L))),O&&(N._redirectEventId=O),N}static async _fromIdTokenResponse(e,t,i=!1){const s=new Jl;s.updateFromServerResponse(t);const a=new dr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await mm(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Fe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?_R(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),d=new Jl;d.updateFromIdToken(i);const f=new dr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Iy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;function bs(n){Os(n instanceof Function,"Expected a class definition");let e=tC.get(n);return e?(Os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tC.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yR.type="NONE";const nC=yR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n,e,t){return`firebase:${n}:${e}:${t}`}class Zl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Gf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Gf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fm(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Zl(bs(nC),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||bs(nC);const c=Gf(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const _=await p._get(c);if(_){let v;if(typeof _=="string"){const E=await fm(e,{idToken:_}).catch(()=>{});if(!E)break;v=await dr._fromGetAccountInfoResponse(e,E,_)}else v=dr._fromJSON(e,_);p!==a&&(d=v),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Zl(a,e,i):(a=f[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(c)}catch{}})),new Zl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CR(e))return"Blackberry";if(SR(e))return"Webos";if(ER(e))return"Safari";if((e.includes("chrome/")||TR(e))&&!e.includes("edge/"))return"Chrome";if(wR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function vR(n=si()){return/firefox\//i.test(n)}function ER(n=si()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TR(n=si()){return/crios\//i.test(n)}function bR(n=si()){return/iemobile/i.test(n)}function wR(n=si()){return/android/i.test(n)}function CR(n=si()){return/blackberry/i.test(n)}function SR(n=si()){return/webos/i.test(n)}function Lv(n=si()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function qM(n=si()){var e;return Lv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HM(){return eP()&&document.documentMode===10}function AR(n=si()){return Lv(n)||wR(n)||SR(n)||CR(n)||/windows phone/i.test(n)||bR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(n,e=[]){let t;switch(n){case"Browser":t=iC(si());break;case"Worker":t=`${iC(si())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ko}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,d)=>{try{const f=e(a);c(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(n,e={}){return Yo(n,"GET","/v2/passwordPolicy",Qo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=6;class QM{constructor(e){var t,i,s,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:KM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,a,c,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(c=f.containsNumericCharacter)!==null&&c!==void 0?c:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rC(this),this.idTokenSubscription=new rC(this),this.beforeStateQueue=new GM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bs(t)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fm(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ei(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&(f!=null&&f.user)&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ei(this.app))return Promise.reject(Ss(this));const t=e?At(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ei(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ei(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $M(this),t=new QM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bd("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await zM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bs(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,s);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CM(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ka(n){return At(n)}class rC{constructor(e){this.auth=e,this.observer=null,this.addObserver=dP(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WM(n){ep=n}function IR(n){return ep.loadJS(n)}function XM(){return ep.recaptchaEnterpriseScript}function JM(){return ep.gapiScript}function ZM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class e2{constructor(){this.enterprise=new t2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class t2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const n2="recaptcha-enterprise",xR="NO_RECAPTCHA";class i2{constructor(e){this.type=n2,this.auth=Ka(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,d)=>{PM(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new DM(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,c(p.siteKey)}}).catch(f=>{d(f)})})}function s(a,c,d){const f=window.grecaptcha;Zw(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{c(p)}).catch(()=>{c(xR)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e2().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(d=>{if(!t&&Zw(window.grecaptcha))s(d,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=XM();f.length!==0&&(f+=d),IR(f).then(()=>{s(d,a,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function sC(n,e,t,i=!1,s=!1){const a=new i2(n);let c;if(s)c=xR;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function xy(n,e,t,i,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sC(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await sC(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(n,e){const t=Fd(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Po(a,e??{}))return s;mr(s,"already-initialized")}return t.initialize({options:e})}function s2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(bs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function o2(n,e,t){const i=Ka(n);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=NR(e),{host:c,port:d}=a2(e),f=d===null?"":`:${d}`,p={url:`${a}//${c}${f}/`},_=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Po(p,i.config.emulator)&&Po(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Vs(c)?(Qm(`${a}//${c}${f}`),Ym("Auth",!0)):l2()}function NR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function a2(n){const e=NR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:oC(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:oC(c)}}}function oC(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function l2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function c2(n,e){return Yo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(n,e){return qd(n,"POST","/v1/accounts:signInWithPassword",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(n,e){return qd(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}async function h2(n,e){return qd(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends Uv{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new pd(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new pd(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xy(e,t,"signInWithPassword",u2);case"emailLink":return d2(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xy(e,i,"signUpPassword",c2);case"emailLink":return h2(e,{idToken:t,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(n,e){return qd(n,"POST","/v1/accounts:signInWithIdp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="http://localhost";class Ua extends Uv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,a=kv(t,["providerId","signInMethod"]);if(!i||!s)return null;const c=new Ua(i,s);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ec(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ec(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ec(e,t)}buildRequest(){const e={requestUri:f2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function p2(n){const e=qu(Hu(n)).link,t=e?qu(Hu(e)).deep_link_id:null,i=qu(Hu(n)).deep_link_id;return(i?qu(Hu(i)).link:null)||i||t||e||n}class Vv{constructor(e){var t,i,s,a,c,d;const f=qu(Hu(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(i=f.oobCode)!==null&&i!==void 0?i:null,v=m2((s=f.mode)!==null&&s!==void 0?s:null);Fe(p&&_&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=_,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=f.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=p2(e);try{return new Vv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.providerId=wc.PROVIDER_ID}static credential(e,t){return pd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Vv.parseLink(t);return Fe(i,"argument-error"),pd._fromEmailAndCode(e,i.code,i.tenantId)}}wc.PROVIDER_ID="password";wc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends OR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Hd{constructor(){super("facebook.com")}static credential(e){return Ua._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com";_o.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ua._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return yo.credential(t,i)}catch{return null}}}yo.GOOGLE_SIGN_IN_METHOD="google.com";yo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Hd{constructor(){super("github.com")}static credential(e){return Ua._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.GITHUB_SIGN_IN_METHOD="github.com";vo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Hd{constructor(){super("twitter.com")}static credential(e,t){return Ua._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Eo.credential(t,i)}catch{return null}}}Eo.TWITTER_SIGN_IN_METHOD="twitter.com";Eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(n,e){return qd(n,"POST","/v1/accounts:signUp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await dr._fromIdTokenResponse(e,i,s),c=aC(i);return new Va({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=aC(i);return new Va({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function aC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends Qr{constructor(e,t,i,s){var a;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,pm.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new pm(e,t,i,s)}}function kR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?pm._fromErrorAndOperation(n,a,e,i):a})}async function _2(n,e,t=!1){const i=await md(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Va._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(n,e,t=!1){const{auth:i}=n;if(Ei(i.app))return Promise.reject(Ss(i));const s="reauthenticate";try{const a=await md(n,kR(i,s,e,n),t);Fe(a.idToken,i,"internal-error");const c=Mv(a.idToken);Fe(c,i,"internal-error");const{sub:d}=c;return Fe(n.uid===d,i,"user-mismatch"),Va._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&mr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(n,e,t=!1){if(Ei(n.app))return Promise.reject(Ss(n));const i="signIn",s=await kR(n,i,e),a=await Va._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}async function v2(n,e){return DR(Ka(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(n){const e=Ka(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function E2(n,e,t){if(Ei(n.app))return Promise.reject(Ss(n));const i=Ka(n),c=await xy(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g2).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&PR(n),f}),d=await Va._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function T2(n,e,t){return Ei(n.app)?Promise.reject(Ss(n)):v2(At(n),wc.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&PR(n),i})}function b2(n,e,t,i){return At(n).onIdTokenChanged(e,t,i)}function w2(n,e,t){return At(n).beforeAuthStateChanged(e,t)}const gm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gm,"1"),this.storage.removeItem(gm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=1e3,S2=10;class LR extends MR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);HM()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,S2):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},C2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LR.type="LOCAL";const A2=LR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR extends MR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}UR.type="SESSION";const VR=UR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new tp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const d=Array.from(c).map(async p=>p(t.origin,a)),f=await R2(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((d,f)=>{const p=jv("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function x2(n){Fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function N2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function k2(){return jR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="firebaseLocalStorageDb",D2=1,_m="firebaseLocalStorage",FR="fbase_key";class Gd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function np(n,e){return n.transaction([_m],e?"readwrite":"readonly").objectStore(_m)}function P2(){const n=indexedDB.deleteDatabase(BR);return new Gd(n).toPromise()}function Ny(){const n=indexedDB.open(BR,D2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(_m,{keyPath:FR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(_m)?e(i):(i.close(),await P2(),e(await Ny()))})})}async function lC(n,e,t){const i=np(n,!0).put({[FR]:e,value:t});return new Gd(i).toPromise()}async function M2(n,e){const t=np(n,!1).get(e),i=await new Gd(t).toPromise();return i===void 0?null:i.value}function cC(n,e){const t=np(n,!0).delete(e);return new Gd(t).toPromise()}const L2=800,U2=3;class zR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ny(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>U2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(k2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await N2(),!this.activeServiceWorker)return;this.sender=new I2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ny();return await lC(e,gm,"1"),await cC(e,gm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lC(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>M2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cC(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=np(s,!1).getAll();return new Gd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zR.type="LOCAL";const V2=zR;new zd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(n,e){return e?bs(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends Uv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ec(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ec(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ec(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function B2(n){return DR(n.auth,new Bv(n),n.bypassAuthState)}function F2(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),y2(t,new Bv(n),n.bypassAuthState)}async function z2(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),_2(t,new Bv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B2;case"linkViaPopup":case"linkViaRedirect":return z2;case"reauthViaPopup":case"reauthViaRedirect":return F2;default:mr(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new zd(2e3,1e4);class Yl extends qR{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Yl.currentPopupAction&&Yl.currentPopupAction.cancel(),Yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q2.get())};e()}}Yl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="pendingRedirect",$f=new Map;class G2 extends qR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=$f.get(this.auth._key());if(!e){try{const i=await $2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}$f.set(this.auth._key(),e)}return this.bypassAuthState||$f.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $2(n,e){const t=Y2(e),i=Q2(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function K2(n,e){$f.set(n._key(),e)}function Q2(n){return bs(n._redirectPersistence)}function Y2(n){return Gf(H2,n.config.apiKey,n.name)}async function W2(n,e,t=!1){if(Ei(n.app))return Promise.reject(Ss(n));const i=Ka(n),s=j2(i,e),c=await new G2(i,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=10*60*1e3;class J2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Z2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!HR(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Br(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=X2&&this.cachedEventUids.clear(),this.cachedEventUids.has(uC(e))}saveEventToCache(e){this.cachedEventUids.add(uC(e)),this.lastProcessedEventTime=Date.now()}}function uC(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function HR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Z2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(n,e={}){return Yo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nL=/^https?/;async function iL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eL(n);for(const t of e)try{if(rL(t))return}catch{}mr(n,"unauthorized-domain")}function rL(n){const e=Ry(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!nL.test(t))return!1;if(tL.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new zd(3e4,6e4);function dC(){const n=Fr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oL(n){return new Promise((e,t)=>{var i,s,a;function c(){dC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dC(),t(Br(n,"network-request-failed"))},timeout:sL.get()})}if(!((s=(i=Fr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Fr().gapi)===null||a===void 0)&&a.load)c();else{const d=ZM("iframefcb");return Fr()[d]=()=>{gapi.load?c():t(Br(n,"network-request-failed"))},IR(`${JM()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function aL(n){return Kf=Kf||oL(n),Kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new zd(5e3,15e3),cL="__/auth/iframe",uL="emulator/auth/iframe",dL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fL(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Pv(e,uL):`https://${n.config.authDomain}/${cL}`,i={apiKey:e.apiKey,appName:n.name,v:Ko},s=hL.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${bc(i).slice(1)}`}async function mL(n){const e=await aL(n),t=Fr().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:fL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dL,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const c=Br(n,"network-request-failed"),d=Fr().setTimeout(()=>{a(c)},lL.get());function f(){Fr().clearTimeout(d),s(i)}i.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gL=500,_L=600,yL="_blank",vL="http://localhost";class hC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EL(n,e,t,i=gL,s=_L){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},pL),{width:i.toString(),height:s.toString(),top:a,left:c}),p=si().toLowerCase();t&&(d=TR(p)?yL:t),vR(p)&&(e=e||vL,f.scrollbars="yes");const _=Object.entries(f).reduce((E,[R,C])=>`${E}${R}=${C},`,"");if(qM(p)&&d!=="_self")return TL(e||"",d),new hC(null);const v=window.open(e||"",d,_);Fe(v,n,"popup-blocked");try{v.focus()}catch{}return new hC(v)}function TL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="__/auth/handler",wL="emulator/auth/handler",CL=encodeURIComponent("fac");async function fC(n,e,t,i,s,a){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ko,eventId:s};if(e instanceof OR){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Ty(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))c[_]=v}if(e instanceof Hd){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),p=f?`#${CL}=${encodeURIComponent(f)}`:"";return`${SL(n)}?${bc(d).slice(1)}${p}`}function SL({config:n}){return n.emulator?Pv(n,wL):`https://${n.authDomain}/${bL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="webStorageSupport";class AL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VR,this._completeRedirectFn=W2,this._overrideRedirectResult=K2}async _openPopup(e,t,i,s){var a;Os((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await fC(e,t,i,Ry(),s);return EL(e,c,jv())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await fC(e,t,i,Ry(),s);return x2(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Os(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await mL(e),i=new J2(e);return t.register("authEvent",s=>(Fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ty,{type:ty},s=>{var a;const c=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[ty];c!==void 0&&t(!!c),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AR()||ER()||Lv()}}const RL=AL;var mC="@firebase/auth",pC="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NL(n){Mo(new xs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Fe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RR(n)},p=new YM(i,s,a,f);return s2(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Mo(new xs("auth-internal",e=>{const t=Ka(e.getProvider("auth").getImmediate());return(i=>new IL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(mC,pC,xL(n)),Ji(mC,pC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=5*60,kL=iR("authIdTokenMaxAge")||OL;let gC=null;const DL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>kL)return;const s=t==null?void 0:t.token;gC!==s&&(gC=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lo(n=Zm()){const e=Fd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=r2(n,{popupRedirectResolver:RL,persistence:[V2,A2,VR]}),i=iR("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=DL(a.toString());w2(t,c,()=>c(t.currentUser)),b2(t,d=>c(d))}}const s=tR("auth");return s&&o2(t,`http://${s}`),t}function PL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}WM({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=Br("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",PL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NL("Browser");var _C={};const yC="@firebase/database",vC="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GR="";function ML(n){GR=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:hd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Yr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LL(e)}}catch{}return new UL},Na=$R("localStorage"),VL=$R("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Jm("@firebase/database"),jL=function(){let n=1;return function(){return n++}}(),KR=function(n){const e=mP(n),t=new uP;t.update(e);const i=t.digest();return Rv.encodeByteArray(i)},$d=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=$d.apply(null,i):typeof i=="object"?e+=wn(i):e+=i,e+=" "}return e};let Ju=null,EC=!0;const BL=function(n,e){Ee(!0,"Can't turn on custom loggers persistently."),tc.logLevel=lt.VERBOSE,Ju=tc.log.bind(tc)},Gn=function(...n){if(EC===!0&&(EC=!1,Ju===null&&VL.get("logging_enabled")===!0&&BL()),Ju){const e=$d.apply(null,n);Ju(e)}},Kd=function(n){return function(...e){Gn(n,...e)}},Oy=function(...n){const e="FIREBASE INTERNAL ERROR: "+$d(...n);tc.error(e)},ks=function(...n){const e=`FIREBASE FATAL ERROR: ${$d(...n)}`;throw tc.error(e),new Error(e)},fi=function(...n){const e="FIREBASE WARNING: "+$d(...n);tc.warn(e)},FL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},zL=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ja="[MIN_NAME]",Uo="[MAX_NAME]",Qa=function(n,e){if(n===e)return 0;if(n===ja||e===Uo)return-1;if(e===ja||n===Uo)return 1;{const t=TC(n),i=TC(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},qL=function(n,e){return n===e?0:n<e?-1:1},Uu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+wn(e))},zv=function(n){if(typeof n!="object"||n===null)return wn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=wn(e[i]),t+=":",t+=zv(n[e[i]]);return t+="}",t},QR=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function Kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const YR=function(n){Ee(!Fv(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,a,c,d,f;n===0?(a=0,c=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=d+i,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(a=0,c=Math.round(n/Math.pow(2,1-i-t))));const p=[];for(f=t;f;f-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(f=e;f;f-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(s?1:0),p.reverse();const _=p.join("");let v="";for(f=0;f<64;f+=8){let E=parseInt(_.substr(f,8),2).toString(16);E.length===1&&(E="0"+E),v=v+E}return v.toLowerCase()},HL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},GL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $L(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const KL=new RegExp("^-?(0*)\\d{1,10}$"),QL=-2147483648,YL=2147483647,TC=function(n){if(KL.test(n)){const e=Number(n);if(e>=QL&&e<=YL)return e}return null},Cc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw fi("Exception was thrown by user callback.",t),e},Math.floor(0))}},WL=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Ei(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){fi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fi(e)}}class Qf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Qf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="5",WR="v",XR="s",JR="r",ZR="f",eI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tI="ls",nI="p",ky="ac",iI="websocket",rI="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t,i,s,a=!1,c="",d=!1,f=!1,p=null){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Na.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Na.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ZL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function oI(n,e,t){Ee(typeof e=="string","typeof type must == string"),Ee(typeof t=="object","typeof params must == object");let i;if(e===iI)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===rI)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ZL(n)&&(t.ns=n.namespace);const s=[];return Kn(t,(a,c)=>{s.push(a+"="+c)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.counters_={}}incrementCounter(e,t=1){Yr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return qD(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny={},iy={};function Hv(n){const e=n.toString();return ny[e]||(ny[e]=new eU),ny[e]}function tU(n,e){const t=n.toString();return iy[t]||(iy[t]=e()),iy[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Cc(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="start",iU="close",rU="pLPCommand",sU="pRTLPCB",aI="id",lI="pw",cI="ser",oU="cb",aU="seg",lU="ts",cU="d",uU="dframe",uI=1870,dI=30,dU=uI-dI,hU=25e3,fU=3e4;class Wl{constructor(e,t,i,s,a,c,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kd(e),this.stats_=Hv(t),this.urlFn=f=>(this.appCheckToken&&(f[ky]=this.appCheckToken),oI(t,rI,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(fU)),zL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gv((...a)=>{const[c,d,f,p,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===bC)this.id=d,this.password=f;else if(c===iU)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[bC]="t",i[cI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[oU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[WR]=qv,this.transportSessionId&&(i[XR]=this.transportSessionId),this.lastSessionId&&(i[tI]=this.lastSessionId),this.applicationId&&(i[nI]=this.applicationId),this.appCheckToken&&(i[ky]=this.appCheckToken),typeof location<"u"&&location.hostname&&eI.test(location.hostname)&&(i[JR]=ZR);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wl.forceAllow_=!0}static forceDisallow(){Wl.forceDisallow_=!0}static isAvailable(){return Wl.forceAllow_?!0:!Wl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!HL()&&!GL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=wn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=ZA(t),s=QR(i,dU);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[uU]="t",i[aI]=e,i[lI]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=wn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Gv{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=jL(),window[rU+this.uniqueCallbackIdentifier]=e,window[sU+this.uniqueCallbackIdentifier]=t,this.myIFrame=Gv.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Gn("frame writing exception"),d.stack&&Gn(d.stack),Gn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Gn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[aI]=this.myID,e[lI]=this.myPW,e[cI]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+dI+i.length<=uI;){const c=this.pendingSegs.shift();i=i+"&"+aU+s+"="+c.seg+"&"+lU+s+"="+c.ts+"&"+cU+s+"="+c.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(hU)),a=()=>{clearTimeout(s),i()};this.addTag(e,a)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Gn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=16384,pU=45e3;let ym=null;typeof MozWebSocket<"u"?ym=MozWebSocket:typeof WebSocket<"u"&&(ym=WebSocket);class lr{constructor(e,t,i,s,a,c,d){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kd(this.connId),this.stats_=Hv(t),this.connURL=lr.connectionURL_(t,c,d,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,a){const c={};return c[WR]=qv,typeof location<"u"&&location.hostname&&eI.test(location.hostname)&&(c[JR]=ZR),t&&(c[XR]=t),i&&(c[tI]=i),s&&(c[ky]=s),a&&(c[nI]=a),oI(e,iI,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Na.set("previous_websocket_failure",!0);try{let i;tP(),this.mySock=new ym(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){lr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ym!==null&&!lr.forceDisallow_}static previouslyFailed(){return Na.isInMemoryStorage||Na.get("previous_websocket_failure")===!0}markConnectionHealthy(){Na.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=hd(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ee(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=wn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=QR(t,mU);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(pU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}lr.responsesRequiredToBeHealthy=2;lr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{static get ALL_TRANSPORTS(){return[Wl,lr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=lr&&lr.isAvailable();let i=t&&!lr.previouslyFailed();if(e.webSocketOnly&&(t||fi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[lr];else{const s=this.transports_=[];for(const a of gd.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);gd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}gd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU=6e4,_U=5e3,yU=10*1024,vU=100*1024,ry="t",wC="d",EU="s",CC="r",TU="e",SC="o",AC="a",RC="n",IC="p",bU="h";class wU{constructor(e,t,i,s,a,c,d,f,p,_){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kd("c:"+this.id+":"),this.transportManager_=new gd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Zu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>vU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>yU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ry in e){const t=e[ry];t===AC?this.upgradeIfSecondaryHealthy_():t===CC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===SC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Uu("t",e),i=Uu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:IC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:AC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:RC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Uu("t",e),i=Uu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Uu(ry,e);if(wC in e){const i=e[wC];if(t===bU){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===RC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===EU?this.onConnectionShutdown_(i):t===CC?this.onReset_(i):t===TU?Oy("Server Error: "+i):t===SC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),qv!==i&&fi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Zu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_U))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:IC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Na.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.allowedEvents_=e,this.listeners_={},Ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let a=0;a<s.length;a++)if(s[a].callback===t&&(!i||i===s[a].context)){s.splice(a,1);return}}validateEventType_(e){Ee(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends fI{static getInstance(){return new vm}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Nv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ee(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=32,NC=768;class kt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function bt(){return new kt("")}function it(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vo(n){return n.pieces_.length-n.pieceNum_}function $t(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new kt(n.pieces_,e)}function $v(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function CU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function _d(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function mI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new kt(e,0)}function on(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof kt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new kt(t,0)}function rt(n){return n.pieceNum_>=n.pieces_.length}function di(n,e){const t=it(n),i=it(e);if(t===null)return e;if(t===i)return di($t(n),$t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SU(n,e){const t=_d(n,0),i=_d(e,0);for(let s=0;s<t.length&&s<i.length;s++){const a=Qa(t[s],i[s]);if(a!==0)return a}return t.length===i.length?0:t.length<i.length?-1:1}function Kv(n,e){if(Vo(n)!==Vo(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Xi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Vo(n)>Vo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class AU{constructor(e,t){this.errorPrefix_=t,this.parts_=_d(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Xm(this.parts_[i]);pI(this)}}function RU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Xm(e),pI(n)}function IU(n){const e=n.parts_.pop();n.byteLength_-=Xm(e),n.parts_.length>0&&(n.byteLength_-=1)}function pI(n){if(n.byteLength_>NC)throw new Error(n.errorPrefix_+"has a key path longer than "+NC+" bytes ("+n.byteLength_+").");if(n.parts_.length>xC)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+xC+") or object contains a cycle "+xa(n))}function xa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends fI{static getInstance(){return new Qv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return Ee(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=1e3,xU=60*5*1e3,OC=30*1e3,NU=1.3,OU=3e4,kU="server_kill",kC=3;class As extends hI{constructor(e,t,i,s,a,c,d,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=f,this.id=As.nextPersistentConnectionId_++,this.log_=Kd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vu,this.maxReconnectDelay_=xU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vm.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,a={r:s,a:e,b:t};this.log_(wn(a)),Ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new jd,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),t.promise}listen(e,t,i,s){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ee(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const d={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(c).set(a,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const a={p:i},c="q";e.tag&&(a.q=t._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,d=>{const f=d.d,p=d.s;As.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",d),p!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(p,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Yr(e,"w")){const i=sc(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();fi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||cP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=OC)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=lP(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const a=s.s,c=s.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const a={p:e},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const a={p:t,d:i};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,a){this.initConnection_();const c={p:t,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:s}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,a=>{this.log_(t+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Oy("Unrecognized action received from server: "+wn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Vu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>OU&&(this.reconnectDelay_=Vu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*NU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+As.nextConnectionId_++,a=this.lastSessionId;let c=!1,d=null;const f=function(){d?d.close():(c=!0,i())},p=function(v){Ee(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(v)};this.realtime_={close:f,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,E]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Gn("getToken() completed but was canceled"):(Gn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=E&&E.token,d=new wU(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,R=>{fi(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(kU)},a))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&fi(v),f())}}}interrupt(e){Gn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Gn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ty(this.interruptReasons_)&&(this.reconnectDelay_=Vu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(a=>zv(a)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new kt(e).toString();let s;if(this.listens.has(i)){const a=this.listens.get(i);s=a.get(t),a.delete(t),a.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){Gn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=kC&&(this.reconnectDelay_=OC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Gn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=kC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+GR.replace(/\./g,"-")]=1,Nv()?e["framework.cordova"]=1:rR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vm.getInstance().currentlyOnline();return Ty(this.interruptReasons_)&&e}}As.nextPersistentConnectionId_=0;As.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new st(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new st(ja,e),s=new st(ja,t);return this.compare(i,s)!==0}minPost(){return st.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf;class gI extends ip{static get __EMPTY_NODE(){return kf}static set __EMPTY_NODE(e){kf=e}compare(e,t){return Qa(e.name,t.name)}isDefinedOn(e){throw Tc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return st.MIN}maxPost(){return new st(Uo,kf)}makePost(e,t){return Ee(typeof e=="string","KeyIndex indexValue must always be a string."),new st(e,kf)}toString(){return".key"}}const Pa=new gI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df=class{constructor(e,t,i,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,s&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Mi=class Gu{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??Gu.RED,this.left=s??Vr.EMPTY_NODE,this.right=a??Vr.EMPTY_NODE}copy(e,t,i,s,a){return new Gu(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Vr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Gu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Gu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};Mi.RED=!0;Mi.BLACK=!1;class DU{copy(e,t,i,s,a){return this}insert(e,t,i){return new Mi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Vr=class Yf{constructor(e,t=Yf.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Yf(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Mi.BLACK,null,null))}remove(e){return new Yf(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mi.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Df(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Df(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Df(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Df(this.root_,null,this.comparator_,!0,e)}};Vr.EMPTY_NODE=new DU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(n,e){return Qa(n.name,e.name)}function Yv(n,e){return Qa(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dy;function MU(n){Dy=n}const _I=function(n){return typeof n=="number"?"number:"+YR(n):"string:"+n},yI=function(n){if(n.isLeafNode()){const e=n.val();Ee(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yr(e,".sv"),"Priority must be a string or number.")}else Ee(n===Dy||n.isEmpty(),"priority of unexpected type.");Ee(n===Dy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DC;class Dn{static set __childrenNodeConstructor(e){DC=e}static get __childrenNodeConstructor(){return DC}constructor(e,t=Dn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Dn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Dn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rt(e)?this:it(e)===".priority"?this.priorityNode_:Dn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Dn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=it(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(Ee(i!==".priority"||Vo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Dn.__childrenNodeConstructor.EMPTY_NODE.updateChild($t(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+_I(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=YR(this.value_):e+=this.value_,this.lazyHash_=KR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Dn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Dn.__childrenNodeConstructor?-1:(Ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=Dn.VALUE_TYPE_ORDER.indexOf(t),a=Dn.VALUE_TYPE_ORDER.indexOf(i);return Ee(s>=0,"Unknown leaf type: "+t),Ee(a>=0,"Unknown leaf type: "+i),s===a?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Dn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vI,EI;function LU(n){vI=n}function UU(n){EI=n}class VU extends ip{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),a=i.compareTo(s);return a===0?Qa(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return st.MIN}maxPost(){return new st(Uo,new Dn("[PRIORITY-POST]",EI))}makePost(e,t){const i=vI(e);return new st(t,new Dn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Jt=new VU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU=Math.log(2);class BU{constructor(e){const t=a=>parseInt(Math.log(a)/jU,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Em=function(n,e,t,i){n.sort(e);const s=function(f,p){const _=p-f;let v,E;if(_===0)return null;if(_===1)return v=n[f],E=t?t(v):v,new Mi(E,v.node,Mi.BLACK,null,null);{const R=parseInt(_/2,10)+f,C=s(f,R),k=s(R+1,p);return v=n[R],E=t?t(v):v,new Mi(E,v.node,Mi.BLACK,C,k)}},a=function(f){let p=null,_=null,v=n.length;const E=function(C,k){const O=v-C,H=v;v-=C;const j=s(O+1,H),D=n[O],F=t?t(D):D;R(new Mi(F,D.node,k,null,j))},R=function(C){p?(p.left=C,p=C):(_=C,p=C)};for(let C=0;C<f.count;++C){const k=f.nextBitIsOne(),O=Math.pow(2,f.count-(C+1));k?E(O,Mi.BLACK):(E(O,Mi.BLACK),E(O,Mi.RED))}return _},c=new BU(n.length),d=a(c);return new Vr(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sy;const zl={};class ws{static get Default(){return Ee(zl&&Jt,"ChildrenNode.ts has not been loaded"),sy=sy||new ws({".priority":zl},{".priority":Jt}),sy}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=sc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Vr?t:null}hasIndex(e){return Yr(this.indexSet_,e.toString())}addIndex(e,t){Ee(e!==Pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const a=t.getIterator(st.Wrap);let c=a.getNext();for(;c;)s=s||e.isDefinedOn(c.node),i.push(c),c=a.getNext();let d;s?d=Em(i,e.getCompare()):d=zl;const f=e.toString(),p=Object.assign({},this.indexSet_);p[f]=e;const _=Object.assign({},this.indexes_);return _[f]=d,new ws(_,p)}addToIndexes(e,t){const i=um(this.indexes_,(s,a)=>{const c=sc(this.indexSet_,a);if(Ee(c,"Missing index implementation for "+a),s===zl)if(c.isDefinedOn(e.node)){const d=[],f=t.getIterator(st.Wrap);let p=f.getNext();for(;p;)p.name!==e.name&&d.push(p),p=f.getNext();return d.push(e),Em(d,c.getCompare())}else return zl;else{const d=t.get(e.name);let f=s;return d&&(f=f.remove(new st(e.name,d))),f.insert(e,e.node)}});return new ws(i,this.indexSet_)}removeFromIndexes(e,t){const i=um(this.indexes_,s=>{if(s===zl)return s;{const a=t.get(e.name);return a?s.remove(new st(e.name,a)):s}});return new ws(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju;class ze{static get EMPTY_NODE(){return ju||(ju=new ze(new Vr(Yv),null,ws.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yI(this.priorityNode_),this.children_.isEmpty()&&Ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ju}updatePriority(e){return this.children_.isEmpty()?this:new ze(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?ju:t}}getChild(e){const t=it(e);return t===null?this:this.getImmediateChild(t).getChild($t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(Ee(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new st(e,t);let s,a;t.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),a=this.indexMap_.addToIndexes(i,this.children_));const c=s.isEmpty()?ju:this.priorityNode_;return new ze(s,c,a)}}updateChild(e,t){const i=it(e);if(i===null)return t;{Ee(it(e)!==".priority"||Vo(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild($t(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,a=!0;if(this.forEachChild(Jt,(c,d)=>{t[c]=d.val(e),i++,a&&ze.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):a=!1}),!e&&a&&s<2*i){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+_I(this.getPriority().val())+":"),this.forEachChild(Jt,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":KR(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const a=s.getPredecessorKey(new st(e,t));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new st(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new st(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,st.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,st.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qd?-1:0}withIndex(e){if(e===Pa||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ze(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Pa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Jt),s=t.getIterator(Jt);let a=i.getNext(),c=s.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=i.getNext(),c=s.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Pa?null:this.indexMap_.get(e.toString())}}ze.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class FU extends ze{constructor(){super(new Vr(Yv),ze.EMPTY_NODE,ws.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ze.EMPTY_NODE}isEmpty(){return!1}}const Qd=new FU;Object.defineProperties(st,{MIN:{value:new st(ja,ze.EMPTY_NODE)},MAX:{value:new st(Uo,Qd)}});gI.__EMPTY_NODE=ze.EMPTY_NODE;Dn.__childrenNodeConstructor=ze;MU(Qd);UU(Qd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=!0;function bn(n,e=null){if(n===null)return ze.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Ee(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Dn(t,bn(e))}if(!(n instanceof Array)&&zU){const t=[];let i=!1;if(Kn(n,(c,d)=>{if(c.substring(0,1)!=="."){const f=bn(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new st(c,f)))}}),t.length===0)return ze.EMPTY_NODE;const a=Em(t,PU,c=>c.name,Yv);if(i){const c=Em(t,Jt.getCompare());return new ze(a,bn(e),new ws({".priority":c},{".priority":Jt}))}else return new ze(a,bn(e),ws.Default)}else{let t=ze.EMPTY_NODE;return Kn(n,(i,s)=>{if(Yr(n,i)&&i.substring(0,1)!=="."){const a=bn(s);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(bn(e))}}LU(bn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends ip{constructor(e){super(),this.indexPath_=e,Ee(!rt(e)&&it(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),a=i.compareTo(s);return a===0?Qa(e.name,t.name):a}makePost(e,t){const i=bn(e),s=ze.EMPTY_NODE.updateChild(this.indexPath_,i);return new st(t,s)}maxPost(){const e=ze.EMPTY_NODE.updateChild(this.indexPath_,Qd);return new st(Uo,e)}toString(){return _d(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU extends ip{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Qa(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return st.MIN}maxPost(){return st.MAX}makePost(e,t){const i=bn(e);return new st(t,i)}toString(){return".value"}}const TI=new qU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(n){return{type:"value",snapshotNode:n}}function oc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function yd(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function vd(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function HU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.index_=e}updateChild(e,t,i,s,a,c){Ee(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(s).equals(i.getChild(s))&&d.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(yd(t,d)):Ee(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(oc(t,i)):c.trackChildChange(vd(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Jt,(s,a)=>{t.hasChild(s)||i.trackChildChange(yd(s,a))}),t.isLeafNode()||t.forEachChild(Jt,(s,a)=>{if(e.hasChild(s)){const c=e.getImmediateChild(s);c.equals(a)||i.trackChildChange(vd(s,a,c))}else i.trackChildChange(oc(s,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ze.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.indexedFilter_=new Xv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ed.getStartPost_(e),this.endPost_=Ed.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,a,c){return this.matches(new st(t,i))||(i=ze.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,a,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=ze.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(ze.EMPTY_NODE);const a=this;return t.forEachChild(Jt,(c,d)=>{a.matches(new st(c,d))||(s=s.updateImmediateChild(c,ze.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Ed(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,a,c){return this.rangedFilter_.matches(new st(t,i))||(i=ze.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,a,c):this.fullLimitUpdateChild_(e,t,i,a,c)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=ze.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=ze.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const d=a.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))s=s.updateImmediateChild(d.name,d.node),c++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(ze.EMPTY_NODE);let a;this.reverse_?a=s.getReverseIterator(this.index_):a=s.getIterator(this.index_);let c=0;for(;a.hasNext();){const d=a.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:s=s.updateImmediateChild(d.name,ze.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,a){let c;if(this.reverse_){const v=this.index_.getCompare();c=(E,R)=>v(R,E)}else c=this.index_.getCompare();const d=e;Ee(d.numChildren()===this.limit_,"");const f=new st(t,i),p=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),_=this.rangedFilter_.matches(f);if(d.hasChild(t)){const v=d.getImmediateChild(t);let E=s.getChildAfterChild(this.index_,p,this.reverse_);for(;E!=null&&(E.name===t||d.hasChild(E.name));)E=s.getChildAfterChild(this.index_,E,this.reverse_);const R=E==null?1:c(E,f);if(_&&!i.isEmpty()&&R>=0)return a!=null&&a.trackChildChange(vd(t,i,v)),d.updateImmediateChild(t,i);{a!=null&&a.trackChildChange(yd(t,v));const k=d.updateImmediateChild(t,ze.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(a!=null&&a.trackChildChange(oc(E.name,E.node)),k.updateImmediateChild(E.name,E.node)):k}}else return i.isEmpty()?e:_&&c(p,f)>=0?(a!=null&&(a.trackChildChange(yd(p.name,p.node)),a.trackChildChange(oc(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(p.name,ze.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ja}hasEnd(){return this.endSet_}getIndexEndValue(){return Ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jt}copy(){const e=new Jv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $U(n){return n.loadsAllData()?new Xv(n.getIndex()):n.hasLimit()?new GU(n):new Ed(n)}function KU(n,e){const t=n.copy();return t.index_=e,t}function PC(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Jt?t="$priority":n.index_===TI?t="$value":n.index_===Pa?t="$key":(Ee(n.index_ instanceof Wv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=wn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=wn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+wn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=wn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+wn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function MC(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Jt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends hI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Kd("p:rest:"),this.listens_={}}listen(e,t,i,s){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Tm.getListenId_(e,i),d={};this.listens_[c]=d;const f=PC(e._queryParams);this.restRequest_(a+".json",f,(p,_)=>{let v=_;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(a,v,!1,i),sc(this.listens_,c)===d){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",s(E,null)}})}unlisten(e,t){const i=Tm.getListenId_(e,t);delete this.listens_[i]}get(e){const t=PC(e._queryParams),i=e._path.toString(),s=new jd;return this.restRequest_(i+".json",t,(a,c)=>{let d=c;a===404&&(d=null,a=null),a===null?(this.onDataUpdate_(i,d,!1,null),s.resolve(d)):s.reject(new Error(d))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(t.auth=s.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bc(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=hd(d.responseText)}catch{fi("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,f)}else d.status!==401&&d.status!==404&&fi("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(){this.rootNode_=ze.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){return{value:null,children:new Map}}function wI(n,e,t){if(rt(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=it(e);n.children.has(i)||n.children.set(i,bm());const s=n.children.get(i);e=$t(e),wI(s,e,t)}}function Py(n,e,t){n.value!==null?t(e,n.value):YU(n,(i,s)=>{const a=new kt(e.toString()+"/"+i);Py(s,a,t)})}function YU(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Kn(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=10*1e3,XU=30*1e3,JU=5*60*1e3;class ZU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new WU(e);const i=LC+(XU-LC)*Math.random();Zu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Kn(e,(s,a)=>{a>0&&Yr(this.statsToReport_,s)&&(t[s]=a,i=!0)}),i&&this.server_.reportStats(t),Zu(this.reportStats_.bind(this),Math.floor(Math.random()*2*JU))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(hr||(hr={}));function Zv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function eE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=hr.ACK_USER_WRITE,this.source=Zv()}operationForChild(e){if(rt(this.path)){if(this.affectedTree.value!=null)return Ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new kt(e));return new wm(bt(),t,this.revert)}}else return Ee(it(this.path)===e,"operationForChild called for unrelated child."),new wm($t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.source=e,this.path=t,this.type=hr.LISTEN_COMPLETE}operationForChild(e){return rt(this.path)?new Td(this.source,bt()):new Td(this.source,$t(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=hr.OVERWRITE}operationForChild(e){return rt(this.path)?new Ba(this.source,bt(),this.snap.getImmediateChild(e)):new Ba(this.source,$t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=hr.MERGE}operationForChild(e){if(rt(this.path)){const t=this.children.subtree(new kt(e));return t.isEmpty()?null:t.value?new Ba(this.source,bt(),t.value):new ac(this.source,bt(),t)}else return Ee(it(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ac(this.source,$t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(rt(e))return this.isFullyInitialized()&&!this.filtered_;const t=it(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function t4(n,e,t,i){const s=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(HU(c.childName,c.snapshotNode))}),Bu(n,s,"child_removed",e,i,t),Bu(n,s,"child_added",e,i,t),Bu(n,s,"child_moved",a,i,t),Bu(n,s,"child_changed",e,i,t),Bu(n,s,"value",e,i,t),s}function Bu(n,e,t,i,s,a){const c=i.filter(d=>d.type===t);c.sort((d,f)=>i4(n,d,f)),c.forEach(d=>{const f=n4(n,d,a);s.forEach(p=>{p.respondsTo(d.type)&&e.push(p.createEvent(f,n.query_))})})}function n4(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function i4(n,e,t){if(e.childName==null||t.childName==null)throw Tc("Should only compare child_ events.");const i=new st(e.childName,e.snapshotNode),s=new st(t.childName,t.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n,e){return{eventCache:n,serverCache:e}}function ed(n,e,t,i){return rp(new jo(e,t,i),n.serverCache)}function CI(n,e,t,i){return rp(n.eventCache,new jo(e,t,i))}function Cm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oy;const r4=()=>(oy||(oy=new Vr(qL)),oy);class Ht{static fromObject(e){let t=new Ht(null);return Kn(e,(i,s)=>{t=t.set(new kt(i),s)}),t}constructor(e,t=r4()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:bt(),value:this.value};if(rt(e))return null;{const i=it(e),s=this.children.get(i);if(s!==null){const a=s.findRootMostMatchingPathAndValue($t(e),t);return a!=null?{path:on(new kt(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(rt(e))return this;{const t=it(e),i=this.children.get(t);return i!==null?i.subtree($t(e)):new Ht(null)}}set(e,t){if(rt(e))return new Ht(t,this.children);{const i=it(e),a=(this.children.get(i)||new Ht(null)).set($t(e),t),c=this.children.insert(i,a);return new Ht(this.value,c)}}remove(e){if(rt(e))return this.children.isEmpty()?new Ht(null):new Ht(null,this.children);{const t=it(e),i=this.children.get(t);if(i){const s=i.remove($t(e));let a;return s.isEmpty()?a=this.children.remove(t):a=this.children.insert(t,s),this.value===null&&a.isEmpty()?new Ht(null):new Ht(this.value,a)}else return this}}get(e){if(rt(e))return this.value;{const t=it(e),i=this.children.get(t);return i?i.get($t(e)):null}}setTree(e,t){if(rt(e))return t;{const i=it(e),a=(this.children.get(i)||new Ht(null)).setTree($t(e),t);let c;return a.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,a),new Ht(this.value,c)}}fold(e){return this.fold_(bt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,a)=>{i[s]=a.fold_(on(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,bt(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(rt(e))return null;{const a=it(e),c=this.children.get(a);return c?c.findOnPath_($t(e),on(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bt(),t)}foreachOnPath_(e,t,i){if(rt(e))return this;{this.value&&i(t,this.value);const s=it(e),a=this.children.get(s);return a?a.foreachOnPath_($t(e),on(t,s),i):new Ht(null)}}foreach(e){this.foreach_(bt(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(on(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.writeTree_=e}static empty(){return new fr(new Ht(null))}}function td(n,e,t){if(rt(e))return new fr(new Ht(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let a=i.value;const c=di(s,e);return a=a.updateChild(c,t),new fr(n.writeTree_.set(s,a))}else{const s=new Ht(t),a=n.writeTree_.setTree(e,s);return new fr(a)}}}function My(n,e,t){let i=n;return Kn(t,(s,a)=>{i=td(i,on(e,s),a)}),i}function UC(n,e){if(rt(e))return fr.empty();{const t=n.writeTree_.setTree(e,new Ht(null));return new fr(t)}}function Ly(n,e){return Ya(n,e)!=null}function Ya(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(di(t.path,e)):null}function VC(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Jt,(i,s)=>{e.push(new st(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new st(i,s.value))}),e}function Ro(n,e){if(rt(e))return n;{const t=Ya(n,e);return t!=null?new fr(new Ht(t)):new fr(n.writeTree_.subtree(e))}}function Uy(n){return n.writeTree_.isEmpty()}function lc(n,e){return SI(bt(),n.writeTree_,e)}function SI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,a)=>{s===".priority"?(Ee(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):t=SI(on(n,s),a,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(on(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n,e){return xI(e,n)}function s4(n,e,t,i,s){Ee(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=td(n.visibleWrites,e,t)),n.lastWriteId=i}function o4(n,e,t,i){Ee(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=My(n.visibleWrites,e,t),n.lastWriteId=i}function a4(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function l4(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);Ee(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,a=!1,c=n.allWrites.length-1;for(;s&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&c4(d,i.path)?s=!1:Xi(i.path,d.path)&&(a=!0)),c--}if(s){if(a)return u4(n),!0;if(i.snap)n.visibleWrites=UC(n.visibleWrites,i.path);else{const d=i.children;Kn(d,f=>{n.visibleWrites=UC(n.visibleWrites,on(i.path,f))})}return!0}else return!1}function c4(n,e){if(n.snap)return Xi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Xi(on(n.path,t),e))return!0;return!1}function u4(n){n.visibleWrites=AI(n.allWrites,d4,bt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function d4(n){return n.visible}function AI(n,e,t){let i=fr.empty();for(let s=0;s<n.length;++s){const a=n[s];if(e(a)){const c=a.path;let d;if(a.snap)Xi(t,c)?(d=di(t,c),i=td(i,d,a.snap)):Xi(c,t)&&(d=di(c,t),i=td(i,bt(),a.snap.getChild(d)));else if(a.children){if(Xi(t,c))d=di(t,c),i=My(i,d,a.children);else if(Xi(c,t))if(d=di(c,t),rt(d))i=My(i,bt(),a.children);else{const f=sc(a.children,it(d));if(f){const p=f.getChild($t(d));i=td(i,bt(),p)}}}else throw Tc("WriteRecord should have .snap or .children")}}return i}function RI(n,e,t,i,s){if(!i&&!s){const a=Ya(n.visibleWrites,e);if(a!=null)return a;{const c=Ro(n.visibleWrites,e);if(Uy(c))return t;if(t==null&&!Ly(c,bt()))return null;{const d=t||ze.EMPTY_NODE;return lc(c,d)}}}else{const a=Ro(n.visibleWrites,e);if(!s&&Uy(a))return t;if(!s&&t==null&&!Ly(a,bt()))return null;{const c=function(p){return(p.visible||s)&&(!i||!~i.indexOf(p.writeId))&&(Xi(p.path,e)||Xi(e,p.path))},d=AI(n.allWrites,c,e),f=t||ze.EMPTY_NODE;return lc(d,f)}}}function h4(n,e,t){let i=ze.EMPTY_NODE;const s=Ya(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Jt,(a,c)=>{i=i.updateImmediateChild(a,c)}),i;if(t){const a=Ro(n.visibleWrites,e);return t.forEachChild(Jt,(c,d)=>{const f=lc(Ro(a,new kt(c)),d);i=i.updateImmediateChild(c,f)}),VC(a).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const a=Ro(n.visibleWrites,e);return VC(a).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function f4(n,e,t,i,s){Ee(i||s,"Either existingEventSnap or existingServerSnap must exist");const a=on(e,t);if(Ly(n.visibleWrites,a))return null;{const c=Ro(n.visibleWrites,a);return Uy(c)?s.getChild(t):lc(c,s.getChild(t))}}function m4(n,e,t,i){const s=on(e,t),a=Ya(n.visibleWrites,s);if(a!=null)return a;if(i.isCompleteForChild(t)){const c=Ro(n.visibleWrites,s);return lc(c,i.getNode().getImmediateChild(t))}else return null}function p4(n,e){return Ya(n.visibleWrites,e)}function g4(n,e,t,i,s,a,c){let d;const f=Ro(n.visibleWrites,e),p=Ya(f,bt());if(p!=null)d=p;else if(t!=null)d=lc(f,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const _=[],v=c.getCompare(),E=a?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let R=E.getNext();for(;R&&_.length<s;)v(R,i)!==0&&_.push(R),R=E.getNext();return _}else return[]}function _4(){return{visibleWrites:fr.empty(),allWrites:[],lastWriteId:-1}}function Sm(n,e,t,i){return RI(n.writeTree,n.treePath,e,t,i)}function nE(n,e){return h4(n.writeTree,n.treePath,e)}function jC(n,e,t,i){return f4(n.writeTree,n.treePath,e,t,i)}function Am(n,e){return p4(n.writeTree,on(n.treePath,e))}function y4(n,e,t,i,s,a){return g4(n.writeTree,n.treePath,e,t,i,s,a)}function iE(n,e,t){return m4(n.writeTree,n.treePath,e,t)}function II(n,e){return xI(on(n.treePath,e),n.writeTree)}function xI(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;Ee(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Ee(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const a=s.type;if(t==="child_added"&&a==="child_removed")this.changeMap.set(i,vd(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&a==="child_changed")this.changeMap.set(i,yd(i,s.oldSnap));else if(t==="child_changed"&&a==="child_added")this.changeMap.set(i,oc(i,e.snapshotNode));else if(t==="child_changed"&&a==="child_changed")this.changeMap.set(i,vd(i,e.snapshotNode,s.oldSnap));else throw Tc("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const NI=new E4;class rE{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new jo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iE(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fa(this.viewCache_),a=y4(this.writes_,s,t,1,i,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(n){return{filter:n}}function b4(n,e){Ee(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ee(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function w4(n,e,t,i,s){const a=new v4;let c,d;if(t.type===hr.OVERWRITE){const p=t;p.source.fromUser?c=Vy(n,e,p.path,p.snap,i,s,a):(Ee(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered()&&!rt(p.path),c=Rm(n,e,p.path,p.snap,i,s,d,a))}else if(t.type===hr.MERGE){const p=t;p.source.fromUser?c=S4(n,e,p.path,p.children,i,s,a):(Ee(p.source.fromServer,"Unknown source."),d=p.source.tagged||e.serverCache.isFiltered(),c=jy(n,e,p.path,p.children,i,s,d,a))}else if(t.type===hr.ACK_USER_WRITE){const p=t;p.revert?c=I4(n,e,p.path,i,s,a):c=A4(n,e,p.path,p.affectedTree,i,s,a)}else if(t.type===hr.LISTEN_COMPLETE)c=R4(n,e,t.path,i,a);else throw Tc("Unknown operation type: "+t.type);const f=a.getChanges();return C4(e,c,f),{viewCache:c,changes:f}}function C4(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=Cm(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(bI(Cm(e)))}}function OI(n,e,t,i,s,a){const c=e.eventCache;if(Am(i,t)!=null)return e;{let d,f;if(rt(t))if(Ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Fa(e),_=p instanceof ze?p:ze.EMPTY_NODE,v=nE(i,_);d=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const p=Sm(i,Fa(e));d=n.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=it(t);if(p===".priority"){Ee(Vo(t)===1,"Can't have a priority with additional path components");const _=c.getNode();f=e.serverCache.getNode();const v=jC(i,t,_,f);v!=null?d=n.filter.updatePriority(_,v):d=c.getNode()}else{const _=$t(t);let v;if(c.isCompleteForChild(p)){f=e.serverCache.getNode();const E=jC(i,t,c.getNode(),f);E!=null?v=c.getNode().getImmediateChild(p).updateChild(_,E):v=c.getNode().getImmediateChild(p)}else v=iE(i,p,e.serverCache);v!=null?d=n.filter.updateChild(c.getNode(),p,v,_,s,a):d=c.getNode()}}return ed(e,d,c.isFullyInitialized()||rt(t),n.filter.filtersNodes())}}function Rm(n,e,t,i,s,a,c,d){const f=e.serverCache;let p;const _=c?n.filter:n.filter.getIndexedFilter();if(rt(t))p=_.updateFullNode(f.getNode(),i,null);else if(_.filtersNodes()&&!f.isFiltered()){const R=f.getNode().updateChild(t,i);p=_.updateFullNode(f.getNode(),R,null)}else{const R=it(t);if(!f.isCompleteForPath(t)&&Vo(t)>1)return e;const C=$t(t),O=f.getNode().getImmediateChild(R).updateChild(C,i);R===".priority"?p=_.updatePriority(f.getNode(),O):p=_.updateChild(f.getNode(),R,O,C,NI,null)}const v=CI(e,p,f.isFullyInitialized()||rt(t),_.filtersNodes()),E=new rE(s,v,a);return OI(n,v,t,s,E,d)}function Vy(n,e,t,i,s,a,c){const d=e.eventCache;let f,p;const _=new rE(s,e,a);if(rt(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,c),f=ed(e,p,!0,n.filter.filtersNodes());else{const v=it(t);if(v===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),i),f=ed(e,p,d.isFullyInitialized(),d.isFiltered());else{const E=$t(t),R=d.getNode().getImmediateChild(v);let C;if(rt(E))C=i;else{const k=_.getCompleteChild(v);k!=null?$v(E)===".priority"&&k.getChild(mI(E)).isEmpty()?C=k:C=k.updateChild(E,i):C=ze.EMPTY_NODE}if(R.equals(C))f=e;else{const k=n.filter.updateChild(d.getNode(),v,C,E,_,c);f=ed(e,k,d.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function BC(n,e){return n.eventCache.isCompleteForChild(e)}function S4(n,e,t,i,s,a,c){let d=e;return i.foreach((f,p)=>{const _=on(t,f);BC(e,it(_))&&(d=Vy(n,d,_,p,s,a,c))}),i.foreach((f,p)=>{const _=on(t,f);BC(e,it(_))||(d=Vy(n,d,_,p,s,a,c))}),d}function FC(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function jy(n,e,t,i,s,a,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,p;rt(t)?p=i:p=new Ht(null).setTree(t,i);const _=e.serverCache.getNode();return p.children.inorderTraversal((v,E)=>{if(_.hasChild(v)){const R=e.serverCache.getNode().getImmediateChild(v),C=FC(n,R,E);f=Rm(n,f,new kt(v),C,s,a,c,d)}}),p.children.inorderTraversal((v,E)=>{const R=!e.serverCache.isCompleteForChild(v)&&E.value===null;if(!_.hasChild(v)&&!R){const C=e.serverCache.getNode().getImmediateChild(v),k=FC(n,C,E);f=Rm(n,f,new kt(v),k,s,a,c,d)}}),f}function A4(n,e,t,i,s,a,c){if(Am(s,t)!=null)return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(rt(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return Rm(n,e,t,f.getNode().getChild(t),s,a,d,c);if(rt(t)){let p=new Ht(null);return f.getNode().forEachChild(Pa,(_,v)=>{p=p.set(new kt(_),v)}),jy(n,e,t,p,s,a,d,c)}else return e}else{let p=new Ht(null);return i.foreach((_,v)=>{const E=on(t,_);f.isCompleteForPath(E)&&(p=p.set(_,f.getNode().getChild(E)))}),jy(n,e,t,p,s,a,d,c)}}function R4(n,e,t,i,s){const a=e.serverCache,c=CI(e,a.getNode(),a.isFullyInitialized()||rt(t),a.isFiltered());return OI(n,c,t,i,NI,s)}function I4(n,e,t,i,s,a){let c;if(Am(i,t)!=null)return e;{const d=new rE(i,e,s),f=e.eventCache.getNode();let p;if(rt(t)||it(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=Sm(i,Fa(e));else{const v=e.serverCache.getNode();Ee(v instanceof ze,"serverChildren would be complete if leaf node"),_=nE(i,v)}_=_,p=n.filter.updateFullNode(f,_,a)}else{const _=it(t);let v=iE(i,_,e.serverCache);v==null&&e.serverCache.isCompleteForChild(_)&&(v=f.getImmediateChild(_)),v!=null?p=n.filter.updateChild(f,_,v,$t(t),d,a):e.eventCache.getNode().hasChild(_)?p=n.filter.updateChild(f,_,ze.EMPTY_NODE,$t(t),d,a):p=f,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Sm(i,Fa(e)),c.isLeafNode()&&(p=n.filter.updateFullNode(p,c,a)))}return c=e.serverCache.isFullyInitialized()||Am(i,bt())!=null,ed(e,p,c,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new Xv(i.getIndex()),a=$U(i);this.processor_=T4(a);const c=t.serverCache,d=t.eventCache,f=s.updateFullNode(ze.EMPTY_NODE,c.getNode(),null),p=a.updateFullNode(ze.EMPTY_NODE,d.getNode(),null),_=new jo(f,c.isFullyInitialized(),s.filtersNodes()),v=new jo(p,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=rp(v,_),this.eventGenerator_=new e4(this.query_)}get query(){return this.query_}}function N4(n){return n.viewCache_.serverCache.getNode()}function O4(n){return Cm(n.viewCache_)}function k4(n,e){const t=Fa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!rt(e)&&!t.getImmediateChild(it(e)).isEmpty())?t.getChild(e):null}function zC(n){return n.eventRegistrations_.length===0}function D4(n,e){n.eventRegistrations_.push(e)}function qC(n,e,t){const i=[];if(t){Ee(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,s);c&&i.push(c)})}if(e){let s=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(!c.matches(e))s.push(c);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function HC(n,e,t,i){e.type===hr.MERGE&&e.source.queryId!==null&&(Ee(Fa(n.viewCache_),"We should always have a full cache before handling merges"),Ee(Cm(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,a=w4(n.processor_,s,e,t,i);return b4(n.processor_,a.viewCache),Ee(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,kI(n,a.changes,a.viewCache.eventCache.getNode(),null)}function P4(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Jt,(a,c)=>{i.push(oc(a,c))}),t.isFullyInitialized()&&i.push(bI(t.getNode())),kI(n,i,t.getNode(),e)}function kI(n,e,t,i){const s=i?[i]:n.eventRegistrations_;return t4(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Im;class DI{constructor(){this.views=new Map}}function M4(n){Ee(!Im,"__referenceConstructor has already been defined"),Im=n}function L4(){return Ee(Im,"Reference.ts has not been loaded"),Im}function U4(n){return n.views.size===0}function sE(n,e,t,i){const s=e.source.queryId;if(s!==null){const a=n.views.get(s);return Ee(a!=null,"SyncTree gave us an op for an invalid query."),HC(a,e,t,i)}else{let a=[];for(const c of n.views.values())a=a.concat(HC(c,e,t,i));return a}}function PI(n,e,t,i,s){const a=e._queryIdentifier,c=n.views.get(a);if(!c){let d=Sm(t,s?i:null),f=!1;d?f=!0:i instanceof ze?(d=nE(t,i),f=!1):(d=ze.EMPTY_NODE,f=!1);const p=rp(new jo(d,f,!1),new jo(i,s,!1));return new x4(e,p)}return c}function V4(n,e,t,i,s,a){const c=PI(n,e,i,s,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),D4(c,t),P4(c,t)}function j4(n,e,t,i){const s=e._queryIdentifier,a=[];let c=[];const d=Bo(n);if(s==="default")for(const[f,p]of n.views.entries())c=c.concat(qC(p,t,i)),zC(p)&&(n.views.delete(f),p.query._queryParams.loadsAllData()||a.push(p.query));else{const f=n.views.get(s);f&&(c=c.concat(qC(f,t,i)),zC(f)&&(n.views.delete(s),f.query._queryParams.loadsAllData()||a.push(f.query)))}return d&&!Bo(n)&&a.push(new(L4())(e._repo,e._path)),{removed:a,events:c}}function MI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Io(n,e){let t=null;for(const i of n.views.values())t=t||k4(i,e);return t}function LI(n,e){if(e._queryParams.loadsAllData())return op(n);{const i=e._queryIdentifier;return n.views.get(i)}}function UI(n,e){return LI(n,e)!=null}function Bo(n){return op(n)!=null}function op(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm;function B4(n){Ee(!xm,"__referenceConstructor has already been defined"),xm=n}function F4(){return Ee(xm,"Reference.ts has not been loaded"),xm}let z4=1;class GC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ht(null),this.pendingWriteTree_=_4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VI(n,e,t,i,s){return s4(n.pendingWriteTree_,e,t,i,s),s?Sc(n,new Ba(Zv(),e,t)):[]}function q4(n,e,t,i){o4(n.pendingWriteTree_,e,t,i);const s=Ht.fromObject(t);return Sc(n,new ac(Zv(),e,s))}function wo(n,e,t=!1){const i=a4(n.pendingWriteTree_,e);if(l4(n.pendingWriteTree_,e)){let a=new Ht(null);return i.snap!=null?a=a.set(bt(),!0):Kn(i.children,c=>{a=a.set(new kt(c),!0)}),Sc(n,new wm(i.path,a,t))}else return[]}function Yd(n,e,t){return Sc(n,new Ba(eE(),e,t))}function H4(n,e,t){const i=Ht.fromObject(t);return Sc(n,new ac(eE(),e,i))}function G4(n,e){return Sc(n,new Td(eE(),e))}function $4(n,e,t){const i=aE(n,t);if(i){const s=lE(i),a=s.path,c=s.queryId,d=di(a,e),f=new Td(tE(c),d);return cE(n,a,f)}else return[]}function Nm(n,e,t,i,s=!1){const a=e._path,c=n.syncPointTree_.get(a);let d=[];if(c&&(e._queryIdentifier==="default"||UI(c,e))){const f=j4(c,e,t,i);U4(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const p=f.removed;if(d=f.events,!s){const _=p.findIndex(E=>E._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(a,(E,R)=>Bo(R));if(_&&!v){const E=n.syncPointTree_.subtree(a);if(!E.isEmpty()){const R=Y4(E);for(let C=0;C<R.length;++C){const k=R[C],O=k.query,H=zI(n,k);n.listenProvider_.startListening(nd(O),bd(n,O),H.hashFn,H.onComplete)}}}!v&&p.length>0&&!i&&(_?n.listenProvider_.stopListening(nd(e),null):p.forEach(E=>{const R=n.queryToTagMap.get(ap(E));n.listenProvider_.stopListening(nd(E),R)}))}W4(n,p)}return d}function jI(n,e,t,i){const s=aE(n,i);if(s!=null){const a=lE(s),c=a.path,d=a.queryId,f=di(c,e),p=new Ba(tE(d),f,t);return cE(n,c,p)}else return[]}function K4(n,e,t,i){const s=aE(n,i);if(s){const a=lE(s),c=a.path,d=a.queryId,f=di(c,e),p=Ht.fromObject(t),_=new ac(tE(d),f,p);return cE(n,c,_)}else return[]}function By(n,e,t,i=!1){const s=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(s,(E,R)=>{const C=di(E,s);a=a||Io(R,C),c=c||Bo(R)});let d=n.syncPointTree_.get(s);d?(c=c||Bo(d),a=a||Io(d,bt())):(d=new DI,n.syncPointTree_=n.syncPointTree_.set(s,d));let f;a!=null?f=!0:(f=!1,a=ze.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((R,C)=>{const k=Io(C,bt());k&&(a=a.updateImmediateChild(R,k))}));const p=UI(d,e);if(!p&&!e._queryParams.loadsAllData()){const E=ap(e);Ee(!n.queryToTagMap.has(E),"View does not exist, but we have a tag");const R=X4();n.queryToTagMap.set(E,R),n.tagToQueryMap.set(R,E)}const _=sp(n.pendingWriteTree_,s);let v=V4(d,e,t,_,a,f);if(!p&&!c&&!i){const E=LI(d,e);v=v.concat(J4(n,e,E))}return v}function oE(n,e,t){const s=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,d)=>{const f=di(c,e),p=Io(d,f);if(p)return p});return RI(s,e,a,t,!0)}function Q4(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(p,_)=>{const v=di(p,t);i=i||Io(_,v)});let s=n.syncPointTree_.get(t);s?i=i||Io(s,bt()):(s=new DI,n.syncPointTree_=n.syncPointTree_.set(t,s));const a=i!=null,c=a?new jo(i,!0,!1):null,d=sp(n.pendingWriteTree_,e._path),f=PI(s,e,d,a?c.getNode():ze.EMPTY_NODE,a);return O4(f)}function Sc(n,e){return BI(e,n.syncPointTree_,null,sp(n.pendingWriteTree_,bt()))}function BI(n,e,t,i){if(rt(n.path))return FI(n,e,t,i);{const s=e.get(bt());t==null&&s!=null&&(t=Io(s,bt()));let a=[];const c=it(n.path),d=n.operationForChild(c),f=e.children.get(c);if(f&&d){const p=t?t.getImmediateChild(c):null,_=II(i,c);a=a.concat(BI(d,f,p,_))}return s&&(a=a.concat(sE(s,n,i,t))),a}}function FI(n,e,t,i){const s=e.get(bt());t==null&&s!=null&&(t=Io(s,bt()));let a=[];return e.children.inorderTraversal((c,d)=>{const f=t?t.getImmediateChild(c):null,p=II(i,c),_=n.operationForChild(c);_&&(a=a.concat(FI(_,d,f,p)))}),s&&(a=a.concat(sE(s,n,i,t))),a}function zI(n,e){const t=e.query,i=bd(n,t);return{hashFn:()=>(N4(e)||ze.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?$4(n,t._path,i):G4(n,t._path);{const a=$L(s,t);return Nm(n,t,null,a)}}}}function bd(n,e){const t=ap(e);return n.queryToTagMap.get(t)}function ap(n){return n._path.toString()+"$"+n._queryIdentifier}function aE(n,e){return n.tagToQueryMap.get(e)}function lE(n){const e=n.indexOf("$");return Ee(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new kt(n.substr(0,e))}}function cE(n,e,t){const i=n.syncPointTree_.get(e);Ee(i,"Missing sync point for query tag that we're tracking");const s=sp(n.pendingWriteTree_,e);return sE(i,t,s,null)}function Y4(n){return n.fold((e,t,i)=>{if(t&&Bo(t))return[op(t)];{let s=[];return t&&(s=MI(t)),Kn(i,(a,c)=>{s=s.concat(c)}),s}})}function nd(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(F4())(n._repo,n._path):n}function W4(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=ap(i),a=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(a)}}}function X4(){return z4++}function J4(n,e,t){const i=e._path,s=bd(n,e),a=zI(n,t),c=n.listenProvider_.startListening(nd(e),s,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(i);if(s)Ee(!Bo(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((p,_,v)=>{if(!rt(p)&&_&&Bo(_))return[op(_).query];{let E=[];return _&&(E=E.concat(MI(_).map(R=>R.query))),Kn(v,(R,C)=>{E=E.concat(C)}),E}});for(let p=0;p<f.length;++p){const _=f[p];n.listenProvider_.stopListening(nd(_),bd(n,_))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new uE(t)}node(){return this.node_}}class dE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=on(this.path_,e);return new dE(this.syncTree_,t)}node(){return oE(this.syncTree_,this.path_)}}const Z4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},$C=function(n,e,t){if(!n||typeof n!="object")return n;if(Ee(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return eV(n[".sv"],e,t);if(typeof n[".sv"]=="object")return tV(n[".sv"],e);Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},eV=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Ee(!1,"Unexpected server value: "+n)}},tV=function(n,e,t){n.hasOwnProperty("increment")||Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&Ee(!1,"Unexpected increment value: "+i);const s=e.node();if(Ee(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const c=s.getValue();return typeof c!="number"?i:c+i},qI=function(n,e,t,i){return hE(e,new dE(t,n),i)},HI=function(n,e,t){return hE(n,new uE(e),t)};function hE(n,e,t){const i=n.getPriority().val(),s=$C(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,d=$C(c.getValue(),e,t);return d!==c.getValue()||s!==c.getPriority().val()?new Dn(d,bn(s)):n}else{const c=n;return a=c,s!==c.getPriority().val()&&(a=a.updatePriority(new Dn(s))),c.forEachChild(Jt,(d,f)=>{const p=hE(f,e.getImmediateChild(d),t);p!==f&&(a=a.updateImmediateChild(d,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function mE(n,e){let t=e instanceof kt?e:new kt(e),i=n,s=it(t);for(;s!==null;){const a=sc(i.node.children,s)||{children:{},childCount:0};i=new fE(s,i,a),t=$t(t),s=it(t)}return i}function Ac(n){return n.node.value}function GI(n,e){n.node.value=e,Fy(n)}function $I(n){return n.node.childCount>0}function nV(n){return Ac(n)===void 0&&!$I(n)}function lp(n,e){Kn(n.node.children,(t,i)=>{e(new fE(t,n,i))})}function KI(n,e,t,i){t&&e(n),lp(n,s=>{KI(s,e,!0)})}function iV(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Wd(n){return new kt(n.parent===null?n.name:Wd(n.parent)+"/"+n.name)}function Fy(n){n.parent!==null&&rV(n.parent,n.name,n)}function rV(n,e,t){const i=nV(t),s=Yr(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,Fy(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Fy(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=/[\[\].#$\/\u0000-\u001F\u007F]/,oV=/[\[\].#$\u0000-\u001F\u007F]/,ay=10*1024*1024,pE=function(n){return typeof n=="string"&&n.length!==0&&!sV.test(n)},QI=function(n){return typeof n=="string"&&n.length!==0&&!oV.test(n)},aV=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),QI(n)},zy=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Fv(n)||n&&typeof n=="object"&&Yr(n,".sv")},YI=function(n,e,t,i){i&&e===void 0||cp(Wm(n,"value"),e,t)},cp=function(n,e,t){const i=t instanceof kt?new AU(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+xa(i));if(typeof e=="function")throw new Error(n+"contains a function "+xa(i)+" with contents = "+e.toString());if(Fv(e))throw new Error(n+"contains "+e.toString()+" "+xa(i));if(typeof e=="string"&&e.length>ay/3&&Xm(e)>ay)throw new Error(n+"contains a string greater than "+ay+" utf8 bytes "+xa(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,a=!1;if(Kn(e,(c,d)=>{if(c===".value")s=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!pE(c)))throw new Error(n+" contains an invalid key ("+c+") "+xa(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);RU(i,c),cp(n,d,i),IU(i)}),s&&a)throw new Error(n+' contains ".value" child '+xa(i)+" in addition to actual children.")}},lV=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=_d(i);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!pE(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(SU);let s=null;for(t=0;t<e.length;t++){if(i=e[t],s!==null&&Xi(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},cV=function(n,e,t,i){const s=Wm(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const a=[];Kn(e,(c,d)=>{const f=new kt(c);if(cp(s,d,on(t,f)),$v(f)===".priority"&&!zy(d))throw new Error(s+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),lV(s,a)},gE=function(n,e,t,i){if(!QI(t))throw new Error(Wm(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},uV=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gE(n,e,t)},_E=function(n,e){if(it(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},dV=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!aV(t))throw new Error(Wm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function up(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],a=s.getPath();t!==null&&!Kv(a,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:a}),t.events.push(s)}t&&n.eventLists_.push(t)}function WI(n,e,t){up(n,t),XI(n,i=>Kv(i,e))}function Zi(n,e,t){up(n,t),XI(n,i=>Xi(i,e)||Xi(e,i))}function XI(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const a=s.path;e(a)?(fV(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function fV(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Ju&&Gn("event: "+t.toString()),Cc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="repo_interrupt",pV=25;class gV{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bm(),this.transactionQueueTree_=new fE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _V(n,e,t){if(n.stats_=Hv(n.repoInfo_),n.forceRestClient_||WL())n.server_=new Tm(n.repoInfo_,(i,s,a,c)=>{KC(n,i,s,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QC(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new As(n.repoInfo_,e,(i,s,a,c)=>{KC(n,i,s,a,c)},i=>{QC(n,i)},i=>{yV(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=tU(n.repoInfo_,()=>new ZU(n.stats_,n.server_)),n.infoData_=new QU,n.infoSyncTree_=new GC({startListening:(i,s,a,c)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=Yd(n.infoSyncTree_,i._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),yE(n,"connected",!1),n.serverSyncTree_=new GC({startListening:(i,s,a,c)=>(n.server_.listen(i,a,s,(d,f)=>{const p=c(d,f);Zi(n.eventQueue_,i._path,p)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function JI(n){const t=n.infoData_.getNode(new kt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function dp(n){return Z4({timestamp:JI(n)})}function KC(n,e,t,i,s){n.dataUpdateCount++;const a=new kt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(s)if(i){const f=um(t,p=>bn(p));c=K4(n.serverSyncTree_,a,f,s)}else{const f=bn(t);c=jI(n.serverSyncTree_,a,f,s)}else if(i){const f=um(t,p=>bn(p));c=H4(n.serverSyncTree_,a,f)}else{const f=bn(t);c=Yd(n.serverSyncTree_,a,f)}let d=a;c.length>0&&(d=cc(n,a)),Zi(n.eventQueue_,d,c)}function QC(n,e){yE(n,"connected",e),e===!1&&bV(n)}function yV(n,e){Kn(e,(t,i)=>{yE(n,t,i)})}function yE(n,e,t){const i=new kt("/.info/"+e),s=bn(t);n.infoData_.updateSnapshot(i,s);const a=Yd(n.infoSyncTree_,i,s);Zi(n.eventQueue_,i,a)}function vE(n){return n.nextWriteId_++}function vV(n,e,t){const i=Q4(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{const a=bn(s).withIndex(e._queryParams.getIndex());By(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=Yd(n.serverSyncTree_,e._path,a);else{const d=bd(n.serverSyncTree_,e);c=jI(n.serverSyncTree_,e._path,a,d)}return Zi(n.eventQueue_,e._path,c),Nm(n.serverSyncTree_,e,t,null,!0),a},s=>(Xd(n,"get for query "+wn(e)+" failed: "+s),Promise.reject(new Error(s))))}function EV(n,e,t,i,s){Xd(n,"set",{path:e.toString(),value:t,priority:i});const a=dp(n),c=bn(t,i),d=oE(n.serverSyncTree_,e),f=HI(c,d,a),p=vE(n),_=VI(n.serverSyncTree_,e,f,p,!0);up(n.eventQueue_,_),n.server_.put(e.toString(),c.val(!0),(E,R)=>{const C=E==="ok";C||fi("set at "+e+" failed: "+E);const k=wo(n.serverSyncTree_,p,!C);Zi(n.eventQueue_,e,k),qy(n,s,E,R)});const v=TE(n,e);cc(n,v),Zi(n.eventQueue_,v,[])}function TV(n,e,t,i){Xd(n,"update",{path:e.toString(),value:t});let s=!0;const a=dp(n),c={};if(Kn(t,(d,f)=>{s=!1,c[d]=qI(on(e,d),bn(f),n.serverSyncTree_,a)}),s)Gn("update() called with empty data.  Don't do anything."),qy(n,i,"ok",void 0);else{const d=vE(n),f=q4(n.serverSyncTree_,e,c,d);up(n.eventQueue_,f),n.server_.merge(e.toString(),t,(p,_)=>{const v=p==="ok";v||fi("update at "+e+" failed: "+p);const E=wo(n.serverSyncTree_,d,!v),R=E.length>0?cc(n,e):e;Zi(n.eventQueue_,R,E),qy(n,i,p,_)}),Kn(t,p=>{const _=TE(n,on(e,p));cc(n,_)}),Zi(n.eventQueue_,e,[])}}function bV(n){Xd(n,"onDisconnectEvents");const e=dp(n),t=bm();Py(n.onDisconnect_,bt(),(s,a)=>{const c=qI(s,a,n.serverSyncTree_,e);wI(t,s,c)});let i=[];Py(t,bt(),(s,a)=>{i=i.concat(Yd(n.serverSyncTree_,s,a));const c=TE(n,s);cc(n,c)}),n.onDisconnect_=bm(),Zi(n.eventQueue_,bt(),i)}function wV(n,e,t){let i;it(e._path)===".info"?i=By(n.infoSyncTree_,e,t):i=By(n.serverSyncTree_,e,t),WI(n.eventQueue_,e._path,i)}function CV(n,e,t){let i;it(e._path)===".info"?i=Nm(n.infoSyncTree_,e,t):i=Nm(n.serverSyncTree_,e,t),WI(n.eventQueue_,e._path,i)}function SV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(mV)}function Xd(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Gn(t,...e)}function qy(n,e,t,i){e&&Cc(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let a=s;i&&(a+=": "+i);const c=new Error(a);c.code=s,e(c)}})}function ZI(n,e,t){return oE(n.serverSyncTree_,e,t)||ze.EMPTY_NODE}function EE(n,e=n.transactionQueueTree_){if(e||hp(n,e),Ac(e)){const t=tx(n,e);Ee(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&AV(n,Wd(e),t)}else $I(e)&&lp(e,t=>{EE(n,t)})}function AV(n,e,t){const i=t.map(p=>p.currentWriteId),s=ZI(n,e,i);let a=s;const c=s.hash();for(let p=0;p<t.length;p++){const _=t[p];Ee(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const v=di(e,_.path);a=a.updateChild(v,_.currentOutputSnapshotRaw)}const d=a.val(!0),f=e;n.server_.put(f.toString(),d,p=>{Xd(n,"transaction put response",{path:f.toString(),status:p});let _=[];if(p==="ok"){const v=[];for(let E=0;E<t.length;E++)t[E].status=2,_=_.concat(wo(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&v.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();hp(n,mE(n.transactionQueueTree_,e)),EE(n,n.transactionQueueTree_),Zi(n.eventQueue_,e,_);for(let E=0;E<v.length;E++)Cc(v[E])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{fi("transaction at "+f.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}cc(n,e)}},c)}function cc(n,e){const t=ex(n,e),i=Wd(t),s=tx(n,t);return RV(n,s,i),i}function RV(n,e,t){if(e.length===0)return;const i=[];let s=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],p=di(t,f.path);let _=!1,v;if(Ee(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)_=!0,v=f.abortReason,s=s.concat(wo(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=pV)_=!0,v="maxretry",s=s.concat(wo(n.serverSyncTree_,f.currentWriteId,!0));else{const E=ZI(n,f.path,c);f.currentInputSnapshot=E;const R=e[d].update(E.val());if(R!==void 0){cp("transaction failed: Data returned ",R,f.path);let C=bn(R);typeof R=="object"&&R!=null&&Yr(R,".priority")||(C=C.updatePriority(E.getPriority()));const O=f.currentWriteId,H=dp(n),j=HI(C,E,H);f.currentOutputSnapshotRaw=C,f.currentOutputSnapshotResolved=j,f.currentWriteId=vE(n),c.splice(c.indexOf(O),1),s=s.concat(VI(n.serverSyncTree_,f.path,j,f.currentWriteId,f.applyLocally)),s=s.concat(wo(n.serverSyncTree_,O,!0))}else _=!0,v="nodata",s=s.concat(wo(n.serverSyncTree_,f.currentWriteId,!0))}Zi(n.eventQueue_,t,s),s=[],_&&(e[d].status=2,function(E){setTimeout(E,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(v==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(v),!1,null))))}hp(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Cc(i[d]);EE(n,n.transactionQueueTree_)}function ex(n,e){let t,i=n.transactionQueueTree_;for(t=it(e);t!==null&&Ac(i)===void 0;)i=mE(i,t),e=$t(e),t=it(e);return i}function tx(n,e){const t=[];return nx(n,e,t),t.sort((i,s)=>i.order-s.order),t}function nx(n,e,t){const i=Ac(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);lp(e,s=>{nx(n,s,t)})}function hp(n,e){const t=Ac(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,GI(e,t.length>0?t:void 0)}lp(e,i=>{hp(n,i)})}function TE(n,e){const t=Wd(ex(n,e)),i=mE(n.transactionQueueTree_,e);return iV(i,s=>{ly(n,s)}),ly(n,i),KI(i,s=>{ly(n,s)}),t}function ly(n,e){const t=Ac(e);if(t){const i=[];let s=[],a=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(Ee(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):(Ee(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),s=s.concat(wo(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?GI(e,void 0):t.length=a+1,Zi(n.eventQueue_,Wd(e),s);for(let c=0;c<i.length;c++)Cc(i[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function xV(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):fi(`Invalid query segment '${t}' in query '${n}'`)}return e}const YC=function(n,e){const t=NV(n),i=t.namespace;t.domain==="firebase.com"&&ks(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&ks("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||FL();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new sI(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new kt(t.pathString)}},NV=function(n){let e="",t="",i="",s="",a="",c=!0,d="https",f=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(d=n.substring(0,p-1),n=n.substring(p+2));let _=n.indexOf("/");_===-1&&(_=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(_,v)),_<v&&(s=IV(n.substring(_,v)));const E=xV(n.substring(Math.min(n.length,v)));p=e.indexOf(":"),p>=0?(c=d==="https"||d==="wss",f=parseInt(e.substring(p+1),10)):p=e.length;const R=e.slice(0,p);if(R.toLowerCase()==="localhost")t="localhost";else if(R.split(".").length<=2)t=R;else{const C=e.indexOf(".");i=e.substring(0,C).toLowerCase(),t=e.substring(C+1),a=i}"ns"in E&&(a=E.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:c,scheme:d,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OV=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let s;const a=new Array(8);for(s=7;s>=0;s--)a[s]=WC.charAt(t%64),t=Math.floor(t/64);Ee(t===0,"Cannot push at time == 0");let c=a.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)c+=WC.charAt(e[s]);return Ee(c.length===20,"nextPushId: Length should be 20."),c}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wn(this.snapshot.exportVal())}}class DV{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return rt(this._path)?null:$v(this._path)}get ref(){return new js(this._repo,this._path)}get _queryIdentifier(){const e=MC(this._queryParams),t=zv(e);return t==="{}"?"default":t}get _queryObject(){return MC(this._queryParams)}isEqual(e){if(e=At(e),!(e instanceof fp))return!1;const t=this._repo===e._repo,i=Kv(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+CU(this._path)}}function PV(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function MV(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pa){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ja)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==Uo)throw new Error(i);if(typeof t!="string")throw new Error(s)}}else if(n.getIndex()===Jt){if(e!=null&&!zy(e)||t!=null&&!zy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ee(n.getIndex()instanceof Wv||n.getIndex()===TI,"unknown index type."),e!=null&&typeof e=="object"||t!=null&&typeof t=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}class js extends fp{constructor(e,t){super(e,t,new Jv,!1)}get parent(){const e=mI(this._path);return e===null?null:new js(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class wd{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new kt(e),i=Cd(this.ref,e);return new wd(this._node.getChild(t),i,Jt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new wd(s,Cd(this.ref,i),Jt)))}hasChild(e){const t=new kt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ge(n,e){return n=At(n),n._checkNotDeleted("ref"),e!==void 0?Cd(n._root,e):n._root}function Cd(n,e){return n=At(n),it(n._path)===null?uV("child","path",e):gE("child","path",e),new js(n._repo,on(n._path,e))}function cr(n,e){n=At(n),_E("push",n._path),YI("push",e,n._path,!0);const t=JI(n._repo),i=OV(t),s=Cd(n,i),a=Cd(n,i);let c;return e!=null?c=hi(a,e).then(()=>a):c=Promise.resolve(a),s.then=c.then.bind(c),s.catch=c.then.bind(c,void 0),s}function Gt(n){return _E("remove",n._path),hi(n,null)}function hi(n,e){n=At(n),_E("set",n._path),YI("set",e,n._path,!1);const t=new jd;return EV(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Sd(n,e){cV("update",e,n._path);const t=new jd;return TV(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function It(n){n=At(n);const e=new ix(()=>{}),t=new mp(e);return vV(n._repo,n,t).then(i=>new wd(i,new js(n._repo,n._path),n._queryParams.getIndex()))}class mp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new kV("value",this,new wd(e.snapshotNode,new js(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new DV(this,e,t):null}matches(e){return e instanceof mp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function LV(n,e,t,i,s){const a=new ix(t,void 0),c=new mp(a);return wV(n._repo,n,c),()=>CV(n._repo,n,c)}function xo(n,e,t,i){return LV(n,"value",e)}let UV=class{};class VV extends UV{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){PV(e,"orderByChild");const t=new kt(this._path);if(rt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Wv(t),s=KU(e._queryParams,i);return MV(s),new fp(e._repo,e._path,s,!0)}}function Hy(n){return gE("orderByChild","path",n),new VV(n)}function $u(n,...e){let t=At(n);for(const i of e)t=i._apply(t);return t}M4(js);B4(js);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="FIREBASE_DATABASE_EMULATOR_HOST",Gy={};let BV=!1;function FV(n,e,t,i){const s=e.lastIndexOf(":"),a=e.substring(0,s),c=Vs(a);n.repoInfo_=new sI(e,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function zV(n,e,t,i,s){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||ks("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=YC(a,s),d=c.repoInfo,f;typeof process<"u"&&_C&&(f=_C[jV]),f?(a=`http://${f}?ns=${d.namespace}`,c=YC(a,s),d=c.repoInfo):c.repoInfo.secure;const p=new JL(n.name,n.options,e);dV("Invalid Firebase Database URL",c),rt(c.path)||ks("Database URL must point to the root of a Firebase Database (not including a child path).");const _=HV(d,n,p,new XL(n,t));return new GV(_,n)}function qV(n,e){const t=Gy[e];(!t||t[n.key]!==n)&&ks(`Database ${e}(${n.repoInfo_}) has already been deleted.`),SV(n),delete t[n.key]}function HV(n,e,t,i){let s=Gy[e.name];s||(s={},Gy[e.name]=s);let a=s[n.toURLString()];return a&&ks("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new gV(n,BV,t,i),s[n.toURLString()]=a,a}class GV{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_V(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new js(this._repo,bt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(qV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ks("Cannot call "+e+" on a deleted database.")}}function _e(n=Zm(),e){const t=Fd(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=Iv("database");i&&$V(t,...i)}return t}function $V(n,e,t,i={}){n=At(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,a=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&Po(i,a.repoInfo_.emulatorOptions))return;ks("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&ks('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Qf(Qf.OWNER);else if(i.mockUserToken){const d=typeof i.mockUserToken=="string"?i.mockUserToken:xv(i.mockUserToken,n.app.options.projectId);c=new Qf(d)}Vs(e)&&(Qm(e),Ym("Database",!0)),FV(a,s,i,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(n){ML(Ko),Mo(new xs("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return zV(i,s,a,t)},"PUBLIC").setMultipleInstances(!0)),Ji(yC,vC,n),Ji(yC,vC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={".sv":"timestamp"};function po(){return QV}As.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};As.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};KV();var YV="firebase",WV="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ji(YV,WV,"app");var XC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var No,rx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,A){function N(){}N.prototype=A.prototype,x.D=A.prototype,x.prototype=new N,x.prototype.constructor=x,x.C=function(L,V,G){for(var P=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)P[vt-2]=arguments[vt];return A.prototype[V].apply(L,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,A,N){N||(N=0);var L=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)L[V]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(V=0;16>V;++V)L[V]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=x.g[0],N=x.g[1],V=x.g[2];var G=x.g[3],P=A+(G^N&(V^G))+L[0]+3614090360&4294967295;A=N+(P<<7&4294967295|P>>>25),P=G+(V^A&(N^V))+L[1]+3905402710&4294967295,G=A+(P<<12&4294967295|P>>>20),P=V+(N^G&(A^N))+L[2]+606105819&4294967295,V=G+(P<<17&4294967295|P>>>15),P=N+(A^V&(G^A))+L[3]+3250441966&4294967295,N=V+(P<<22&4294967295|P>>>10),P=A+(G^N&(V^G))+L[4]+4118548399&4294967295,A=N+(P<<7&4294967295|P>>>25),P=G+(V^A&(N^V))+L[5]+1200080426&4294967295,G=A+(P<<12&4294967295|P>>>20),P=V+(N^G&(A^N))+L[6]+2821735955&4294967295,V=G+(P<<17&4294967295|P>>>15),P=N+(A^V&(G^A))+L[7]+4249261313&4294967295,N=V+(P<<22&4294967295|P>>>10),P=A+(G^N&(V^G))+L[8]+1770035416&4294967295,A=N+(P<<7&4294967295|P>>>25),P=G+(V^A&(N^V))+L[9]+2336552879&4294967295,G=A+(P<<12&4294967295|P>>>20),P=V+(N^G&(A^N))+L[10]+4294925233&4294967295,V=G+(P<<17&4294967295|P>>>15),P=N+(A^V&(G^A))+L[11]+2304563134&4294967295,N=V+(P<<22&4294967295|P>>>10),P=A+(G^N&(V^G))+L[12]+1804603682&4294967295,A=N+(P<<7&4294967295|P>>>25),P=G+(V^A&(N^V))+L[13]+4254626195&4294967295,G=A+(P<<12&4294967295|P>>>20),P=V+(N^G&(A^N))+L[14]+2792965006&4294967295,V=G+(P<<17&4294967295|P>>>15),P=N+(A^V&(G^A))+L[15]+1236535329&4294967295,N=V+(P<<22&4294967295|P>>>10),P=A+(V^G&(N^V))+L[1]+4129170786&4294967295,A=N+(P<<5&4294967295|P>>>27),P=G+(N^V&(A^N))+L[6]+3225465664&4294967295,G=A+(P<<9&4294967295|P>>>23),P=V+(A^N&(G^A))+L[11]+643717713&4294967295,V=G+(P<<14&4294967295|P>>>18),P=N+(G^A&(V^G))+L[0]+3921069994&4294967295,N=V+(P<<20&4294967295|P>>>12),P=A+(V^G&(N^V))+L[5]+3593408605&4294967295,A=N+(P<<5&4294967295|P>>>27),P=G+(N^V&(A^N))+L[10]+38016083&4294967295,G=A+(P<<9&4294967295|P>>>23),P=V+(A^N&(G^A))+L[15]+3634488961&4294967295,V=G+(P<<14&4294967295|P>>>18),P=N+(G^A&(V^G))+L[4]+3889429448&4294967295,N=V+(P<<20&4294967295|P>>>12),P=A+(V^G&(N^V))+L[9]+568446438&4294967295,A=N+(P<<5&4294967295|P>>>27),P=G+(N^V&(A^N))+L[14]+3275163606&4294967295,G=A+(P<<9&4294967295|P>>>23),P=V+(A^N&(G^A))+L[3]+4107603335&4294967295,V=G+(P<<14&4294967295|P>>>18),P=N+(G^A&(V^G))+L[8]+1163531501&4294967295,N=V+(P<<20&4294967295|P>>>12),P=A+(V^G&(N^V))+L[13]+2850285829&4294967295,A=N+(P<<5&4294967295|P>>>27),P=G+(N^V&(A^N))+L[2]+4243563512&4294967295,G=A+(P<<9&4294967295|P>>>23),P=V+(A^N&(G^A))+L[7]+1735328473&4294967295,V=G+(P<<14&4294967295|P>>>18),P=N+(G^A&(V^G))+L[12]+2368359562&4294967295,N=V+(P<<20&4294967295|P>>>12),P=A+(N^V^G)+L[5]+4294588738&4294967295,A=N+(P<<4&4294967295|P>>>28),P=G+(A^N^V)+L[8]+2272392833&4294967295,G=A+(P<<11&4294967295|P>>>21),P=V+(G^A^N)+L[11]+1839030562&4294967295,V=G+(P<<16&4294967295|P>>>16),P=N+(V^G^A)+L[14]+4259657740&4294967295,N=V+(P<<23&4294967295|P>>>9),P=A+(N^V^G)+L[1]+2763975236&4294967295,A=N+(P<<4&4294967295|P>>>28),P=G+(A^N^V)+L[4]+1272893353&4294967295,G=A+(P<<11&4294967295|P>>>21),P=V+(G^A^N)+L[7]+4139469664&4294967295,V=G+(P<<16&4294967295|P>>>16),P=N+(V^G^A)+L[10]+3200236656&4294967295,N=V+(P<<23&4294967295|P>>>9),P=A+(N^V^G)+L[13]+681279174&4294967295,A=N+(P<<4&4294967295|P>>>28),P=G+(A^N^V)+L[0]+3936430074&4294967295,G=A+(P<<11&4294967295|P>>>21),P=V+(G^A^N)+L[3]+3572445317&4294967295,V=G+(P<<16&4294967295|P>>>16),P=N+(V^G^A)+L[6]+76029189&4294967295,N=V+(P<<23&4294967295|P>>>9),P=A+(N^V^G)+L[9]+3654602809&4294967295,A=N+(P<<4&4294967295|P>>>28),P=G+(A^N^V)+L[12]+3873151461&4294967295,G=A+(P<<11&4294967295|P>>>21),P=V+(G^A^N)+L[15]+530742520&4294967295,V=G+(P<<16&4294967295|P>>>16),P=N+(V^G^A)+L[2]+3299628645&4294967295,N=V+(P<<23&4294967295|P>>>9),P=A+(V^(N|~G))+L[0]+4096336452&4294967295,A=N+(P<<6&4294967295|P>>>26),P=G+(N^(A|~V))+L[7]+1126891415&4294967295,G=A+(P<<10&4294967295|P>>>22),P=V+(A^(G|~N))+L[14]+2878612391&4294967295,V=G+(P<<15&4294967295|P>>>17),P=N+(G^(V|~A))+L[5]+4237533241&4294967295,N=V+(P<<21&4294967295|P>>>11),P=A+(V^(N|~G))+L[12]+1700485571&4294967295,A=N+(P<<6&4294967295|P>>>26),P=G+(N^(A|~V))+L[3]+2399980690&4294967295,G=A+(P<<10&4294967295|P>>>22),P=V+(A^(G|~N))+L[10]+4293915773&4294967295,V=G+(P<<15&4294967295|P>>>17),P=N+(G^(V|~A))+L[1]+2240044497&4294967295,N=V+(P<<21&4294967295|P>>>11),P=A+(V^(N|~G))+L[8]+1873313359&4294967295,A=N+(P<<6&4294967295|P>>>26),P=G+(N^(A|~V))+L[15]+4264355552&4294967295,G=A+(P<<10&4294967295|P>>>22),P=V+(A^(G|~N))+L[6]+2734768916&4294967295,V=G+(P<<15&4294967295|P>>>17),P=N+(G^(V|~A))+L[13]+1309151649&4294967295,N=V+(P<<21&4294967295|P>>>11),P=A+(V^(N|~G))+L[4]+4149444226&4294967295,A=N+(P<<6&4294967295|P>>>26),P=G+(N^(A|~V))+L[11]+3174756917&4294967295,G=A+(P<<10&4294967295|P>>>22),P=V+(A^(G|~N))+L[2]+718787259&4294967295,V=G+(P<<15&4294967295|P>>>17),P=N+(G^(V|~A))+L[9]+3951481745&4294967295,x.g[0]=x.g[0]+A&4294967295,x.g[1]=x.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+G&4294967295}i.prototype.u=function(x,A){A===void 0&&(A=x.length);for(var N=A-this.blockSize,L=this.B,V=this.h,G=0;G<A;){if(V==0)for(;G<=N;)s(this,x,G),G+=this.blockSize;if(typeof x=="string"){for(;G<A;)if(L[V++]=x.charCodeAt(G++),V==this.blockSize){s(this,L),V=0;break}}else for(;G<A;)if(L[V++]=x[G++],V==this.blockSize){s(this,L),V=0;break}}this.h=V,this.o+=A},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var A=1;A<x.length-8;++A)x[A]=0;var N=8*this.o;for(A=x.length-8;A<x.length;++A)x[A]=N&255,N/=256;for(this.u(x),x=Array(16),A=N=0;4>A;++A)for(var L=0;32>L;L+=8)x[N++]=this.g[A]>>>L&255;return x};function a(x,A){var N=d;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=A(x)}function c(x,A){this.h=A;for(var N=[],L=!0,V=x.length-1;0<=V;V--){var G=x[V]|0;L&&G==A||(N[V]=G,L=!1)}this.g=N}var d={};function f(x){return-128<=x&&128>x?a(x,function(A){return new c([A|0],0>A?-1:0)}):new c([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return O(p(-x));for(var A=[],N=1,L=0;x>=N;L++)A[L]=x/N|0,N*=4294967296;return new c(A,0)}function _(x,A){if(x.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(x.charAt(0)=="-")return O(_(x.substring(1),A));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(A,8)),L=v,V=0;V<x.length;V+=8){var G=Math.min(8,x.length-V),P=parseInt(x.substring(V,V+G),A);8>G?(G=p(Math.pow(A,G)),L=L.j(G).add(p(P))):(L=L.j(N),L=L.add(p(P)))}return L}var v=f(0),E=f(1),R=f(16777216);n=c.prototype,n.m=function(){if(k(this))return-O(this).m();for(var x=0,A=1,N=0;N<this.g.length;N++){var L=this.i(N);x+=(0<=L?L:4294967296+L)*A,A*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(k(this))return"-"+O(this).toString(x);for(var A=p(Math.pow(x,6)),N=this,L="";;){var V=F(N,A).g;N=H(N,V.j(A));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(x);if(N=V,C(N))return G+L;for(;6>G.length;)G="0"+G;L=G+L}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(var A=0;A<x.g.length;A++)if(x.g[A]!=0)return!1;return!0}function k(x){return x.h==-1}n.l=function(x){return x=H(this,x),k(x)?-1:C(x)?0:1};function O(x){for(var A=x.g.length,N=[],L=0;L<A;L++)N[L]=~x.g[L];return new c(N,~x.h).add(E)}n.abs=function(){return k(this)?O(this):this},n.add=function(x){for(var A=Math.max(this.g.length,x.g.length),N=[],L=0,V=0;V<=A;V++){var G=L+(this.i(V)&65535)+(x.i(V)&65535),P=(G>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);L=P>>>16,G&=65535,P&=65535,N[V]=P<<16|G}return new c(N,N[N.length-1]&-2147483648?-1:0)};function H(x,A){return x.add(O(A))}n.j=function(x){if(C(this)||C(x))return v;if(k(this))return k(x)?O(this).j(O(x)):O(O(this).j(x));if(k(x))return O(this.j(O(x)));if(0>this.l(R)&&0>x.l(R))return p(this.m()*x.m());for(var A=this.g.length+x.g.length,N=[],L=0;L<2*A;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(var V=0;V<x.g.length;V++){var G=this.i(L)>>>16,P=this.i(L)&65535,vt=x.i(V)>>>16,Xe=x.i(V)&65535;N[2*L+2*V]+=P*Xe,j(N,2*L+2*V),N[2*L+2*V+1]+=G*Xe,j(N,2*L+2*V+1),N[2*L+2*V+1]+=P*vt,j(N,2*L+2*V+1),N[2*L+2*V+2]+=G*vt,j(N,2*L+2*V+2)}for(L=0;L<A;L++)N[L]=N[2*L+1]<<16|N[2*L];for(L=A;L<2*A;L++)N[L]=0;return new c(N,0)};function j(x,A){for(;(x[A]&65535)!=x[A];)x[A+1]+=x[A]>>>16,x[A]&=65535,A++}function D(x,A){this.g=x,this.h=A}function F(x,A){if(C(A))throw Error("division by zero");if(C(x))return new D(v,v);if(k(x))return A=F(O(x),A),new D(O(A.g),O(A.h));if(k(A))return A=F(x,O(A)),new D(O(A.g),A.h);if(30<x.g.length){if(k(x)||k(A))throw Error("slowDivide_ only works with positive integers.");for(var N=E,L=A;0>=L.l(x);)N=U(N),L=U(L);var V=Z(N,1),G=Z(L,1);for(L=Z(L,2),N=Z(N,2);!C(L);){var P=G.add(L);0>=P.l(x)&&(V=V.add(N),G=P),L=Z(L,1),N=Z(N,1)}return A=H(x,V.j(A)),new D(V,A)}for(V=v;0<=x.l(A);){for(N=Math.max(1,Math.floor(x.m()/A.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),G=p(N),P=G.j(A);k(P)||0<P.l(x);)N-=L,G=p(N),P=G.j(A);C(G)&&(G=E),V=V.add(G),x=H(x,P)}return new D(V,x)}n.A=function(x){return F(this,x).h},n.and=function(x){for(var A=Math.max(this.g.length,x.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)&x.i(L);return new c(N,this.h&x.h)},n.or=function(x){for(var A=Math.max(this.g.length,x.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)|x.i(L);return new c(N,this.h|x.h)},n.xor=function(x){for(var A=Math.max(this.g.length,x.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)^x.i(L);return new c(N,this.h^x.h)};function U(x){for(var A=x.g.length+1,N=[],L=0;L<A;L++)N[L]=x.i(L)<<1|x.i(L-1)>>>31;return new c(N,x.h)}function Z(x,A){var N=A>>5;A%=32;for(var L=x.g.length-N,V=[],G=0;G<L;G++)V[G]=0<A?x.i(G+N)>>>A|x.i(G+N+1)<<32-A:x.i(G+N);return new c(V,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rx=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,No=c}).apply(typeof XC<"u"?XC:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sx,Ku,ox,Wf,$y,ax,lx,cx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,T){return h==Array.prototype||h==Object.prototype||(h[y]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function s(h,y){if(y)e:{var T=i;h=h.split(".");for(var I=0;I<h.length-1;I++){var Y=h[I];if(!(Y in T))break e;T=T[Y]}h=h[h.length-1],I=T[h],y=y(I),y!=I&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}function a(h,y){h instanceof String&&(h+="");var T=0,I=!1,Y={next:function(){if(!I&&T<h.length){var ne=T++;return{value:y(ne,h[ne]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(h){return h||function(){return a(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function f(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,T){return h.call.apply(h.bind,arguments)}function v(h,y,T){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,I),h.apply(y,Y)}}return function(){return h.apply(y,arguments)}}function E(h,y,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,E.apply(null,arguments)}function R(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function C(h,y){function T(){}T.prototype=y.prototype,h.aa=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(I,Y,ne){for(var Te=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)Te[pt-2]=arguments[pt];return y.prototype[Y].apply(I,Te)}}function k(h){const y=h.length;if(0<y){const T=Array(y);for(let I=0;I<y;I++)T[I]=h[I];return T}return[]}function O(h,y){for(let T=1;T<arguments.length;T++){const I=arguments[T];if(f(I)){const Y=h.length||0,ne=I.length||0;h.length=Y+ne;for(let Te=0;Te<ne;Te++)h[Y+Te]=I[Te]}else h.push(I)}}class H{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(h){return/^[\s\xa0]*$/.test(h)}function D(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function F(h){return F[" "](h),h}F[" "]=function(){};var U=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function Z(h,y,T){for(const I in h)y.call(T,h[I],I,h)}function x(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function A(h){const y={};for(const T in h)y[T]=h[T];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,y){let T,I;for(let Y=1;Y<arguments.length;Y++){I=arguments[Y];for(T in I)h[T]=I[T];for(let ne=0;ne<N.length;ne++)T=N[ne],Object.prototype.hasOwnProperty.call(I,T)&&(h[T]=I[T])}}function V(h){var y=1;h=h.split(":");const T=[];for(;0<y&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function G(h){d.setTimeout(()=>{throw h},0)}function P(){var h=ct;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class vt{constructor(){this.h=this.g=null}add(y,T){const I=Xe.get();I.set(y,T),this.h?this.h.next=I:this.g=I,this.h=I}}var Xe=new H(()=>new oe,h=>h.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let be,Pe=!1,ct=new vt,B=()=>{const h=d.Promise.resolve(void 0);be=()=>{h.then(fe)}};var fe=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(T){G(T)}var y=Xe;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Pe=!1};function Ce(){this.s=this.s,this.C=this.C}Ce.prototype.s=!1,Ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,y),d.removeEventListener("test",T,y)}catch{}return h}();function re(h,y){if(pe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(U){e:{try{F(y.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(y=null)}}else T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Q[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&re.aa.h.call(this)}}C(re,pe);var Q={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),me=0;function Ue(h,y,T,I,Y){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!I,this.ha=Y,this.key=++me,this.da=this.fa=!1}function Re(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ae(h){this.src=h,this.g={},this.h=0}ae.prototype.add=function(h,y,T,I,Y){var ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);var Te=Et(h,y,I,Y);return-1<Te?(y=h[Te],T||(y.fa=!1)):(y=new Ue(y,this.src,ne,!!I,Y),y.fa=T,h.push(y)),y};function ke(h,y){var T=y.type;if(T in h.g){var I=h.g[T],Y=Array.prototype.indexOf.call(I,y,void 0),ne;(ne=0<=Y)&&Array.prototype.splice.call(I,Y,1),ne&&(Re(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Et(h,y,T,I){for(var Y=0;Y<h.length;++Y){var ne=h[Y];if(!ne.da&&ne.listener==y&&ne.capture==!!T&&ne.ha==I)return Y}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),mi={};function Ci(h,y,T,I,Y){if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)Ci(h,y[ne],T,I,Y);return null}return T=Ne(T),h&&h[ye]?h.K(y,T,p(I)?!!I.capture:!1,Y):ht(h,y,T,!1,I,Y)}function ht(h,y,T,I,Y,ne){if(!y)throw Error("Invalid event type");var Te=p(Y)?!!Y.capture:!!Y,pt=ve(h);if(pt||(h[Ze]=pt=new ae(h)),T=pt.add(y,T,I,Te,ne),T.proxy)return T;if(I=Si(),T.proxy=I,I.src=h,I.listener=T,h.addEventListener)De||(Y=Te),Y===void 0&&(Y=!1),h.addEventListener(y.toString(),I,Y);else if(h.attachEvent)h.attachEvent(W(y.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Si(){function h(T){return y.call(h.src,h.listener,T)}const y=$;return h}function hn(h,y,T,I,Y){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)hn(h,y[ne],T,I,Y);else I=p(I)?!!I.capture:!!I,T=Ne(T),h&&h[ye]?(h=h.i,y=String(y).toString(),y in h.g&&(ne=h.g[y],T=Et(ne,T,I,Y),-1<T&&(Re(ne[T]),Array.prototype.splice.call(ne,T,1),ne.length==0&&(delete h.g[y],h.h--)))):h&&(h=ve(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Et(y,T,I,Y)),(T=-1<h?y[h]:null)&&Dt(T))}function Dt(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ye])ke(y.i,h);else{var T=h.type,I=h.proxy;y.removeEventListener?y.removeEventListener(T,I,h.capture):y.detachEvent?y.detachEvent(W(T),I):y.addListener&&y.removeListener&&y.removeListener(I),(T=ve(y))?(ke(T,h),T.h==0&&(T.src=null,y[Ze]=null)):Re(h)}}}function W(h){return h in mi?mi[h]:mi[h]="on"+h}function $(h,y){if(h.da)h=!0;else{y=new re(y,this);var T=h.listener,I=h.ha||h.src;h.fa&&Dt(h),h=T.call(I,y)}return h}function ve(h){return h=h[Ze],h instanceof ae?h:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ne(h){return typeof h=="function"?h:(h[Se]||(h[Se]=function(y){return h.handleEvent(y)}),h[Se])}function we(){Ce.call(this),this.i=new ae(this),this.M=this,this.F=null}C(we,Ce),we.prototype[ye]=!0,we.prototype.removeEventListener=function(h,y,T,I){hn(this,h,y,T,I)};function se(h,y){var T,I=h.F;if(I)for(T=[];I;I=I.F)T.push(I);if(h=h.M,I=y.type||y,typeof y=="string")y=new pe(y,h);else if(y instanceof pe)y.target=y.target||h;else{var Y=y;y=new pe(I,h),L(y,Y)}if(Y=!0,T)for(var ne=T.length-1;0<=ne;ne--){var Te=y.g=T[ne];Y=xe(Te,I,!0,y)&&Y}if(Te=y.g=h,Y=xe(Te,I,!0,y)&&Y,Y=xe(Te,I,!1,y)&&Y,T)for(ne=0;ne<T.length;ne++)Te=y.g=T[ne],Y=xe(Te,I,!1,y)&&Y}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var T=h.g[y],I=0;I<T.length;I++)Re(T[I]);delete h.g[y],h.h--}}this.F=null},we.prototype.K=function(h,y,T,I){return this.i.add(String(h),y,!1,T,I)},we.prototype.L=function(h,y,T,I){return this.i.add(String(h),y,!0,T,I)};function xe(h,y,T,I){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var Y=!0,ne=0;ne<y.length;++ne){var Te=y[ne];if(Te&&!Te.da&&Te.capture==T){var pt=Te.listener,yn=Te.ha||Te.src;Te.fa&&ke(h.i,Te),Y=pt.call(yn,I)!==!1&&Y}}return Y&&!I.defaultPrevented}function Qe(h,y,T){if(typeof h=="function")T&&(h=E(h,T));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function ft(h){h.g=Qe(()=>{h.g=null,h.i&&(h.i=!1,ft(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class mt extends Ce{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(h){Ce.call(this),this.h=h,this.g={}}C(er,Ce);var yr=[];function Wt(h){Z(h.g,function(y,T){this.g.hasOwnProperty(T)&&Dt(y)},h),h.g={}}er.prototype.N=function(){er.aa.N.call(this),Wt(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=d.JSON.stringify,Ai=d.JSON.parse,wt=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function jt(){}jt.prototype.h=null;function Ye(h){return h.h||(h.h=h.i())}function Bt(){}var Ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ge(){pe.call(this,"d")}C(Ge,pe);function ut(){pe.call(this,"c")}C(ut,pe);var Ct={},Un=null;function Vn(){return Un=Un||new we}Ct.La="serverreachability";function An(h){pe.call(this,Ct.La,h)}C(An,pe);function tr(h){const y=Vn();se(y,new An(y))}Ct.STAT_EVENT="statevent";function Za(h,y){pe.call(this,Ct.STAT_EVENT,h),this.stat=y}C(Za,pe);function Ft(h){const y=Vn();se(y,new Za(y,h))}Ct.Ma="timingevent";function an(h,y){pe.call(this,Ct.Ma,h),this.size=y}C(an,pe);function zt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function Fs(h,y,T,I,Y,ne){h.info(function(){if(h.g)if(ne)for(var Te="",pt=ne.split("&"),yn=0;yn<pt.length;yn++){var gt=pt[yn].split("=");if(1<gt.length){var xn=gt[0];gt=gt[1];var vn=xn.split("_");Te=2<=vn.length&&vn[1]=="type"?Te+(xn+"="+gt+"&"):Te+(xn+"=redacted&")}}else Te=null;else Te=ne;return"XMLHTTP REQ ("+I+") [attempt "+Y+"]: "+y+`
`+T+`
`+Te})}function lh(h,y,T,I,Y,ne,Te){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Y+"]: "+y+`
`+T+`
`+ne+" "+Te})}function vr(h,y,T,I){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Zo(h,T)+(I?" "+I:"")})}function ch(h,y){h.info(function(){return"TIMEOUT: "+y})}Rn.prototype.info=function(){};function Zo(h,y){if(!h.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var I=T[h];if(!(2>I.length)){var Y=I[1];if(Array.isArray(Y)&&!(1>Y.length)){var ne=Y[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var Te=1;Te<Y.length;Te++)Y[Te]=""}}}}return Ln(T)}catch{return y}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function Tr(){}C(Tr,jt),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},Er=new Tr;function oi(h,y,T,I){this.j=h,this.i=y,this.l=T,this.R=I||1,this.U=new er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ln}function ln(){this.i=null,this.g="",this.h=!1}var Pc={},el={};function nr(h,y,T){h.L=1,h.v=ra(Ri(y)),h.m=T,h.P=!0,Xr(h,null)}function Xr(h,y){h.F=Date.now(),ea(h),h.A=Ri(h.v);var T=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),Bc(T.i,"t",I),h.C=0,T=h.j.J,h.h=new ln,h.g=Sh(h.j,T?y:null,!h.m),0<h.O&&(h.M=new mt(E(h.Y,h,h.g),h.O)),y=h.U,T=h.g,I=h.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(yr[0]=Y.toString()),Y=yr);for(var ne=0;ne<Y.length;ne++){var Te=Ci(T,Y[ne],I||y.handleEvent,!1,y.h||y);if(!Te)break;y.g[Te.key]=Te}y=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),tr(),Fs(h.i,h.u,h.A,h.l,h.R,h.m)}oi.prototype.ca=function(h){h=h.target;const y=this.M;y&&zi(h)==3?y.j():this.Y(h)},oi.prototype.Y=function(h){try{if(h==this.g)e:{const vn=zi(this.g);var y=this.g.Ba();const ss=this.g.Z();if(!(3>vn)&&(vn!=3||this.g&&(this.h.h||this.g.oa()||_h(this.g)))){this.J||vn!=4||y==7||(y==8||0>=ss?tr(3):tr(2)),qs(this);var T=this.g.Z();this.X=T;t:if(uh(this)){var I=_h(this.g);h="";var Y=I.length,ne=zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jn(this),br(this);var Te="";break t}this.h.i=new d.TextDecoder}for(y=0;y<Y;y++)this.h.h=!0,h+=this.h.i.decode(I[y],{stream:!(ne&&y==Y-1)});I.length=0,this.h.g+=h,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=T==200,lh(this.i,this.u,this.A,this.l,this.R,vn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var pt,yn=this.g;if((pt=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(pt)){var gt=pt;break t}}gt=null}if(T=gt)vr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ta(this,T);else{this.o=!1,this.s=3,Ft(12),jn(this),br(this);break e}}if(this.P){T=!0;let Bn;for(;!this.J&&this.C<Te.length;)if(Bn=dh(this,Te),Bn==el){vn==4&&(this.s=4,Ft(14),T=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Pc){this.s=4,Ft(15),vr(this.i,this.l,Te,"[Invalid Chunk]"),T=!1;break}else vr(this.i,this.l,Bn,null),ta(this,Bn);if(uh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||Te.length!=0||this.h.h||(this.s=1,Ft(16),T=!1),this.o=this.o&&T,!T)vr(this.i,this.l,Te,"[Invalid Chunked Response]"),jn(this),br(this);else if(0<Te.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),ha(xn),xn.M=!0,Ft(11))}}else vr(this.i,this.l,Te,null),ta(this,Te);vn==4&&jn(this),this.o&&!this.J&&(vn==4?bh(this.j,this):(this.o=!1,ea(this)))}else Yp(this.g),T==400&&0<Te.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),jn(this),br(this)}}}catch{}finally{}};function uh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function dh(h,y){var T=h.C,I=y.indexOf(`
`,T);return I==-1?el:(T=Number(y.substring(T,I)),isNaN(T)?Pc:(I+=1,I+T>y.length?el:(y=y.slice(I,I+T),h.C=I+T,y)))}oi.prototype.cancel=function(){this.J=!0,jn(this)};function ea(h){h.S=Date.now()+h.I,hh(h,h.I)}function hh(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=zt(E(h.ba,h),y)}function qs(h){h.B&&(d.clearTimeout(h.B),h.B=null)}oi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ch(this.i,this.A),this.L!=2&&(tr(),Ft(17)),jn(this),this.s=2,br(this)):hh(this,this.S-h)};function br(h){h.j.G==0||h.J||bh(h.j,h)}function jn(h){qs(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Wt(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function ta(h,y){try{var T=h.j;if(T.G!=0&&(T.g==h||Mc(T.h,h))){if(!h.K&&Mc(T.h,h)&&T.G==3){try{var I=T.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Y=I;if(Y[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)hl(T),ul(T);else break e;Gc(T),Ft(18)}}else T.za=Y[1],0<T.za-T.T&&37500>Y[2]&&T.F&&T.v==0&&!T.C&&(T.C=zt(E(T.Za,T),6e3));if(1>=nl(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else rs(T,11)}else if((h.K||T.g==h)&&hl(T),!j(y))for(Y=T.Da.g.parse(y),y=0;y<Y.length;y++){let gt=Y[y];if(T.T=gt[0],gt=gt[1],T.G==2)if(gt[0]=="c"){T.K=gt[1],T.ia=gt[2];const xn=gt[3];xn!=null&&(T.la=xn,T.j.info("VER="+T.la));const vn=gt[4];vn!=null&&(T.Aa=vn,T.j.info("SVER="+T.Aa));const ss=gt[5];ss!=null&&typeof ss=="number"&&0<ss&&(I=1.5*ss,T.L=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const Bn=h.g;if(Bn){const xr=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xr){var ne=I.h;ne.g||xr.indexOf("spdy")==-1&&xr.indexOf("quic")==-1&&xr.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(il(ne,ne.h),ne.h=null))}if(I.D){const Kc=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Kc&&(I.ya=Kc,Pt(I.I,I.D,Kc))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),I=T;var Te=h;if(I.qa=Ch(I,I.J?I.ia:null,I.W),Te.K){ai(I.h,Te);var pt=Te,yn=I.L;yn&&(pt.I=yn),pt.B&&(qs(pt),ea(pt)),I.g=Te}else Eh(I);0<T.i.length&&dl(T)}else gt[0]!="stop"&&gt[0]!="close"||rs(T,7);else T.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?rs(T,7):qc(T):gt[0]!="noop"&&T.l&&T.l.ta(gt),T.v=0)}}tr(4)}catch{}}var fh=class{constructor(h,y){this.g=h,this.map=y}};function Jr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function nl(h){return h.h?1:h.g?h.g.size:0}function Mc(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function il(h,y){h.g?h.g.add(y):h.h=y}function ai(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Jr.prototype.cancel=function(){if(this.i=Lc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Lc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.D);return y}return k(h.i)}function Gp(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(f(h)){for(var y=[],T=h.length,I=0;I<T;I++)y.push(h[I]);return y}y=[],T=0;for(I in h)y[T++]=h[I];return y}function rl(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(f(h)||typeof h=="string"){var y=[];h=h.length;for(var T=0;T<h;T++)y.push(T);return y}y=[],T=0;for(const I in h)y[T++]=I;return y}}}function Uc(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(f(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var T=rl(h),I=Gp(h),Y=I.length,ne=0;ne<Y;ne++)y.call(void 0,I[ne],T&&T[ne],h)}var na=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $p(h,y){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var I=h[T].indexOf("="),Y=null;if(0<=I){var ne=h[T].substring(0,I);Y=h[T].substring(I+1)}else ne=h[T];y(ne,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function fn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof fn){this.h=h.h,ia(this,h.j),this.o=h.o,this.g=h.g,Hs(this,h.s),this.l=h.l;var y=h.i,T=new es;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),Zr(this,T),this.m=h.m}else h&&(y=String(h).match(na))?(this.h=!1,ia(this,y[1]||"",!0),this.o=ji(y[2]||""),this.g=ji(y[3]||"",!0),Hs(this,y[4]),this.l=ji(y[5]||"",!0),Zr(this,y[6]||"",!0),this.m=ji(y[7]||"")):(this.h=!1,this.i=new es(null,this.h))}fn.prototype.toString=function(){var h=[],y=this.j;y&&h.push(sa(y,Vc,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(sa(y,Vc,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(sa(T,T.charAt(0)=="/"?Kp:jc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",sa(T,sl)),h.join("")};function Ri(h){return new fn(h)}function ia(h,y,T){h.j=T?ji(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Hs(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Zr(h,y,T){y instanceof es?(h.i=y,ph(h.i,h.h)):(T||(y=sa(y,Qp)),h.i=new es(y,h.h))}function Pt(h,y,T){h.i.set(y,T)}function ra(h){return Pt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ji(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function sa(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,mh),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mh(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Vc=/[#\/\?@]/g,jc=/[#\?:]/g,Kp=/[#\?]/g,Qp=/[#\?@]/g,sl=/#/g;function es(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Bi(h){h.g||(h.g=new Map,h.h=0,h.i&&$p(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=es.prototype,n.add=function(h,y){Bi(this),this.i=null,h=wr(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function ts(h,y){Bi(h),y=wr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function ns(h,y){return Bi(h),y=wr(h,y),h.g.has(y)}n.forEach=function(h,y){Bi(this),this.g.forEach(function(T,I){T.forEach(function(Y){h.call(y,Y,I,this)},this)},this)},n.na=function(){Bi(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let I=0;I<y.length;I++){const Y=h[I];for(let ne=0;ne<Y.length;ne++)T.push(y[I])}return T},n.V=function(h){Bi(this);let y=[];if(typeof h=="string")ns(this,h)&&(y=y.concat(this.g.get(wr(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)y=y.concat(h[T])}return y},n.set=function(h,y){return Bi(this),this.i=null,h=wr(this,h),ns(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Bc(h,y,T){ts(h,y),0<T.length&&(h.i=null,h.g.set(wr(h,y),k(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var I=y[T];const ne=encodeURIComponent(String(I)),Te=this.V(I);for(I=0;I<Te.length;I++){var Y=ne;Te[I]!==""&&(Y+="="+encodeURIComponent(String(Te[I]))),h.push(Y)}}return this.i=h.join("&")};function wr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function ph(h,y){y&&!h.j&&(Bi(h),h.i=null,h.g.forEach(function(T,I){var Y=I.toLowerCase();I!=Y&&(ts(this,I),Bc(this,Y,T))},h)),h.j=y}function oa(h,y){const T=new Rn;if(d.Image){const I=new Image;I.onload=R(Fi,T,"TestLoadImage: loaded",!0,y,I),I.onerror=R(Fi,T,"TestLoadImage: error",!1,y,I),I.onabort=R(Fi,T,"TestLoadImage: abort",!1,y,I),I.ontimeout=R(Fi,T,"TestLoadImage: timeout",!1,y,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else y(!1)}function ir(h,y){const T=new Rn,I=new AbortController,Y=setTimeout(()=>{I.abort(),Fi(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:I.signal}).then(ne=>{clearTimeout(Y),ne.ok?Fi(T,"TestPingServer: ok",!0,y):Fi(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Y),Fi(T,"TestPingServer: error",!1,y)})}function Fi(h,y,T,I,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),I(T)}catch{}}function aa(){this.g=new wt}function Cr(h,y,T){const I=T||"";try{Uc(h,function(Y,ne){let Te=Y;p(Y)&&(Te=Ln(Y)),y.push(I+ne+"="+encodeURIComponent(Te))})}catch(Y){throw y.push(I+"type="+encodeURIComponent("_badmap")),Y}}function Gs(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Gs,jt),Gs.prototype.g=function(){return new is(this.l,this.j)},Gs.prototype.i=function(h){return function(){return h}}({});function is(h,y){we.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(is,we),n=is.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Ar(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ar(this)),this.g&&(this.readyState=3,Ar(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Sr(this):Ar(this),this.readyState==3&&Fc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Sr(this))},n.Qa=function(h){this.g&&(this.response=h,Sr(this))},n.ga=function(){this.g&&Sr(this)};function Sr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ar(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Ar(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zc(h){let y="";return Z(h,function(T,I){y+=I,y+=":",y+=T,y+=`\r
`}),y}function In(h,y,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=zc(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Pt(h,y,T))}function Rt(h){we.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Rt,we);var ol=/^https?$/i,la=["POST","PUT"];n=Rt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?Ye(this.o):Ye(Er),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){gh(this,ne);return}if(h=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Y in I)T.set(Y,I[Y]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ne of I.keys())T.set(ne,I.get(ne));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),Y=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(la,y,void 0))||I||Y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Te]of T)this.g.setRequestHeader(ne,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ca(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){gh(this,ne)}};function gh(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,al(h),Rr(h)}function al(h){h.A||(h.A=!0,se(h,"complete"),se(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,se(this,"complete"),se(this,"abort"),Rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),Rt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ll(this):this.bb())},n.bb=function(){ll(this)};function ll(h){if(h.h&&typeof c<"u"&&(!h.v[1]||zi(h)!=4||h.Z()!=2)){if(h.u&&zi(h)==4)Qe(h.Ea,0,h);else if(se(h,"readystatechange"),zi(h)==4){h.h=!1;try{const Te=h.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var I;if(I=Te===0){var Y=String(h.D).match(na)[1]||null;!Y&&d.self&&d.self.location&&(Y=d.self.location.protocol.slice(0,-1)),I=!ol.test(Y?Y.toLowerCase():"")}T=I}if(T)se(h,"complete"),se(h,"success");else{h.m=6;try{var ne=2<zi(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",al(h)}}finally{Rr(h)}}}}function Rr(h,y){if(h.g){ca(h);const T=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||se(h,"ready");try{T.onreadystatechange=I}catch{}}}function ca(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function zi(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<zi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ai(y)}};function _h(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yp(h){const y={};h=(h.g&&2<=zi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(j(h[I]))continue;var T=V(h[I]);const Y=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=y[Y]||[];y[Y]=ne,ne.push(T)}x(y,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function cl(h){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ua("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ua("baseRetryDelayMs",5e3,h),this.cb=ua("retryDelaySeedMs",1e4,h),this.Wa=ua("forwardChannelMaxRetries",2,h),this.wa=ua("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Jr(h&&h.concurrentRequestLimit),this.Da=new aa,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=cl.prototype,n.la=8,n.G=1,n.connect=function(h,y,T,I){Ft(0),this.W=h,this.H=y||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.I=Ch(this,null,this.W),dl(this)};function qc(h){if(yh(h),h.G==3){var y=h.U++,T=Ri(h.I);if(Pt(T,"SID",h.K),Pt(T,"RID",y),Pt(T,"TYPE","terminate"),da(h,T),y=new oi(h,h.j,y),y.L=2,y.v=ra(Ri(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&d.Image&&(new Image().src=y.v,T=!0),T||(y.g=Sh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ea(y)}wh(h)}function ul(h){h.g&&(ha(h),h.g.cancel(),h.g=null)}function yh(h){ul(h),h.u&&(d.clearTimeout(h.u),h.u=null),hl(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function dl(h){if(!tl(h.h)&&!h.s){h.s=!0;var y=h.Ga;be||B(),Pe||(be(),Pe=!0),ct.add(y,h),h.B=0}}function Wp(h,y){return nl(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=zt(E(h.Ga,h,y),$c(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Y=new oi(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=A(ne),L(ne,this.S)):ne=this.S),this.m!==null||this.O||(Y.H=ne,ne=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=vh(this,Y,y),T=Ri(this.I),Pt(T,"RID",h),Pt(T,"CVER",22),this.D&&Pt(T,"X-HTTP-Session-Id",this.D),da(this,T),ne&&(this.O?y="headers="+encodeURIComponent(String(zc(ne)))+"&"+y:this.m&&In(T,this.m,ne)),il(this.h,Y),this.Ua&&Pt(T,"TYPE","init"),this.P?(Pt(T,"$req",y),Pt(T,"SID","null"),Y.T=!0,nr(Y,T,null)):nr(Y,T,y),this.G=2}}else this.G==3&&(h?Hc(this,h):this.i.length==0||tl(this.h)||Hc(this))};function Hc(h,y){var T;y?T=y.l:T=h.U++;const I=Ri(h.I);Pt(I,"SID",h.K),Pt(I,"RID",T),Pt(I,"AID",h.T),da(h,I),h.m&&h.o&&In(I,h.m,h.o),T=new oi(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),y&&(h.i=y.D.concat(h.i)),y=vh(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),il(h.h,T),nr(T,I,y)}function da(h,y){h.H&&Z(h.H,function(T,I){Pt(y,I,T)}),h.l&&Uc({},function(T,I){Pt(y,I,T)})}function vh(h,y,T){T=Math.min(h.i.length,T);var I=h.l?E(h.l.Na,h.l,h):null;e:{var Y=h.i;let ne=-1;for(;;){const Te=["count="+T];ne==-1?0<T?(ne=Y[0].g,Te.push("ofs="+ne)):ne=0:Te.push("ofs="+ne);let pt=!0;for(let yn=0;yn<T;yn++){let gt=Y[yn].g;const xn=Y[yn].map;if(gt-=ne,0>gt)ne=Math.max(0,Y[yn].g-100),pt=!1;else try{Cr(xn,Te,"req"+gt+"_")}catch{I&&I(xn)}}if(pt){I=Te.join("&");break e}}}return h=h.i.splice(0,T),y.D=h,I}function Eh(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;be||B(),Pe||(be(),Pe=!0),ct.add(y,h),h.v=0}}function Gc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=zt(E(h.Fa,h),$c(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Th(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=zt(E(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),ul(this),Th(this))};function ha(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Th(h){h.g=new oi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Ri(h.qa);Pt(y,"RID","rpc"),Pt(y,"SID",h.K),Pt(y,"AID",h.T),Pt(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Pt(y,"TO",h.ja),Pt(y,"TYPE","xmlhttp"),da(h,y),h.m&&h.o&&In(y,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=ra(Ri(y)),T.m=null,T.P=!0,Xr(T,h)}n.Za=function(){this.C!=null&&(this.C=null,ul(this),Gc(this),Ft(19))};function hl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function bh(h,y){var T=null;if(h.g==y){hl(h),ha(h),h.g=null;var I=2}else if(Mc(h.h,y))T=y.D,ai(h.h,y),I=1;else return;if(h.G!=0){if(y.o)if(I==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var Y=h.B;I=Vn(),se(I,new an(I,T)),dl(h)}else Eh(h);else if(Y=y.s,Y==3||Y==0&&0<y.X||!(I==1&&Wp(h,y)||I==2&&Gc(h)))switch(T&&0<T.length&&(y=h.h,y.i=y.i.concat(T)),Y){case 1:rs(h,5);break;case 4:rs(h,10);break;case 3:rs(h,6);break;default:rs(h,2)}}}function $c(h,y){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*y}function rs(h,y){if(h.j.info("Error code "+y),y==2){var T=E(h.fb,h),I=h.Xa;const Y=!I;I=new fn(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ia(I,"https"),ra(I),Y?oa(I.toString(),T):ir(I.toString(),T)}else Ft(2);h.G=0,h.l&&h.l.sa(y),wh(h),yh(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function wh(h){if(h.G=0,h.ka=[],h.l){const y=Lc(h.h);(y.length!=0||h.i.length!=0)&&(O(h.ka,y),O(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function Ch(h,y,T){var I=T instanceof fn?Ri(T):new fn(T);if(I.g!="")y&&(I.g=y+"."+I.g),Hs(I,I.s);else{var Y=d.location;I=Y.protocol,y=y?y+"."+Y.hostname:Y.hostname,Y=+Y.port;var ne=new fn(null);I&&ia(ne,I),y&&(ne.g=y),Y&&Hs(ne,Y),T&&(ne.l=T),I=ne}return T=h.D,y=h.ya,T&&y&&Pt(I,T,y),Pt(I,"VER",h.la),da(h,I),I}function Sh(h,y,T){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Rt(new Gs({eb:T})):new Rt(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ah(){}n=Ah.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fl(){}fl.prototype.g=function(h,y){return new li(h,y)};function li(h,y){we.call(this),this.g=new cl(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!j(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!j(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ir(this)}C(li,we),li.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},li.prototype.close=function(){qc(this.g)},li.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Ln(h),h=T);y.i.push(new fh(y.Ya++,h)),y.G==3&&dl(y)},li.prototype.N=function(){this.g.l=null,delete this.j,qc(this.g),delete this.g,li.aa.N.call(this)};function Rh(h){Ge.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}C(Rh,Ge);function Ih(){ut.call(this),this.status=1}C(Ih,ut);function Ir(h){this.g=h}C(Ir,Ah),Ir.prototype.ua=function(){se(this.g,"a")},Ir.prototype.ta=function(h){se(this.g,new Rh(h))},Ir.prototype.sa=function(h){se(this.g,new Ih)},Ir.prototype.ra=function(){se(this.g,"b")},fl.prototype.createWebChannel=fl.prototype.g,li.prototype.send=li.prototype.o,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,cx=function(){return new fl},lx=function(){return Vn()},ax=Ct,$y={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Wf=zs,Wr.COMPLETE="complete",ox=Wr,Bt.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",we.prototype.listen=we.prototype.K,Ku=Bt,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,sx=Rt}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const JC="@firebase/firestore",ZC="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=new Jm("@firebase/firestore");function Gl(){return za.logLevel}function Ie(n,...e){if(za.logLevel<=lt.DEBUG){const t=e.map(bE);za.debug(`Firestore (${Rc}): ${n}`,...t)}}function Ds(n,...e){if(za.logLevel<=lt.ERROR){const t=e.map(bE);za.error(`Firestore (${Rc}): ${n}`,...t)}}function uc(n,...e){if(za.logLevel<=lt.WARN){const t=e.map(bE);za.warn(`Firestore (${Rc}): ${n}`,...t)}}function bE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,ux(n,i,t)}function ux(n,e,t){let i=`FIRESTORE (${Rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ds(i),new Error(i)}function xt(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||ux(e,s,i)}function Ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jn.UNAUTHENTICATED))}shutdown(){}}class JV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ZV{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xt(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Oo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Oo,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},d=f=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Oo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xt(typeof i.accessToken=="string",31837,{l:i}),new dx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xt(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class e3{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t3{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new e3(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n3{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ei(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xt(this.o===void 0,3512);const i=a=>{a.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new eS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=i3(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function tt(n,e){return n<e?-1:n>e?1:0}function Ky(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),s=e.codePointAt(t);if(i!==s){if(i<128&&s<128)return tt(i,s);{const a=hx(),c=r3(a.encode(tS(n,t)),a.encode(tS(e,t)));return c!==0?c:tt(i,s)}}t+=i>65535?2:1}return tt(n.length,e.length)}function tS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function r3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return tt(n[t],e[t]);return tt(n.length,e.length)}function dc(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=-62135596800,iS=1e6;class Cn{static now(){return Cn.fromMillis(Date.now())}static fromDate(e){return Cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*iS);return new Cn(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<nS)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iS}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-nS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Cn(0,0))}static max(){return new $e(new Cn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="__name__";class Lr{constructor(e,t,i){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&qe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=Lr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return tt(e.length,t.length)}static compareSegments(e,t){const i=Lr.isNumericId(e),s=Lr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Lr.extractNumericId(e).compare(Lr.extractNumericId(t)):Ky(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return No.fromString(e.substring(4,e.length-2))}}class Kt extends Lr{construct(e,t,i){return new Kt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const s3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends Lr{construct(e,t,i){return new $n(e,t,i)}static isValidIdentifier(e){return s3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rS}static keyField(){return new $n([rS])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(i+=d,s++):(a(),s++)}if(a(),c)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Kt.fromString(e))}static fromName(e){return new Le(Kt.fromString(e).popFirst(5))}static empty(){return new Le(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Kt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=-1;function o3(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(i===1e9?new Cn(t+1,0):new Cn(t,i));return new Fo(s,Le.empty(),e)}function a3(n){return new Fo(n.readTime,n.key,Ad)}class Fo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fo($e.min(),Le.empty(),Ad)}static max(){return new Fo($e.max(),Le.empty(),Ad)}}function l3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:tt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==c3)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,i)=>{t(e)})}static reject(e){return new he((t,i)=>{i(e)})}static waitFor(e){return new he((t,i)=>{let s=0,a=0,c=!1;e.forEach(d=>{++s,d.next(()=>{++a,c&&a===s&&t()},f=>i(f))}),c=!0,a===s&&t()})}static or(e){let t=he.resolve(!1);for(const i of e)t=t.next(s=>s?he.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,a)=>{i.push(t.call(this,s,a))}),this.waitFor(i)}static mapArray(e,t){return new he((i,s)=>{const a=e.length,c=new Array(a);let d=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next(_=>{c[p]=_,++d,d===a&&i(c)},_=>s(_))}})}static doWhile(e,t){return new he((i,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):i()};a()})}}function d3(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}pp.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=-1;function gp(n){return n==null}function Om(n){return n===0&&1/n==-1/0}function h3(n){return typeof n=="number"&&Number.isInteger(n)&&!Om(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="";function f3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sS(e)),e=m3(n.get(t),e);return sS(e)}function m3(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case mx:t+="";break;default:t+=a}}return t}function sS(n){return n+mx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function px(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.comparator=e,this.root=t||Hn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mf(this.root,e,this.comparator,!0)}}class Mf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??Hn.RED,this.left=s??Hn.EMPTY,this.right=a??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new Hn(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Hn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new Hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aS(this.data.getIterator())}getIteratorFrom(e){return new aS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class aS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new Li([])}unionWith(e){let t=new Sn($n.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gx("Invalid base64 string: "+a):a}}(e);return new Qn(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new Qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qn.EMPTY_BYTE_STRING=new Qn("");const p3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(n){if(xt(!!n,39018),typeof n=="string"){let e=0;const t=p3.exec(n);if(xt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dn(n.seconds),nanos:dn(n.nanos)}}function dn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qo(n){return typeof n=="string"?Qn.fromBase64String(n):Qn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="server_timestamp",yx="__type__",vx="__previous_value__",Ex="__local_write_time__";function _p(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[yx])===null||t===void 0?void 0:t.stringValue)===_x}function yp(n){const e=n.mapValue.fields[vx];return _p(e)?yp(e):e}function Rd(n){const e=zo(n.mapValue.fields[Ex].timestampValue);return new Cn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,t,i,s,a,c,d,f,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=_}}const km="(default)";class Id{constructor(e,t){this.projectId=e,this.database=t||km}static empty(){return new Id("","")}get isDefaultDatabase(){return this.database===km}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="__type__",_3="__max__",Lf={mapValue:{}},bx="__vector__",Dm="value";function Ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_p(n)?4:v3(n)?9007199254740991:y3(n)?10:11:qe(28295,{value:n})}function $r(n,e){if(n===e)return!0;const t=Ho(n);if(t!==Ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rd(n).isEqual(Rd(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=zo(s.timestampValue),d=zo(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return qo(s.bytesValue).isEqual(qo(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return dn(s.geoPointValue.latitude)===dn(a.geoPointValue.latitude)&&dn(s.geoPointValue.longitude)===dn(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return dn(s.integerValue)===dn(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=dn(s.doubleValue),d=dn(a.doubleValue);return c===d?Om(c)===Om(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return dc(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(s,a){const c=s.mapValue.fields||{},d=a.mapValue.fields||{};if(oS(c)!==oS(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!$r(c[f],d[f])))return!1;return!0}(n,e);default:return qe(52216,{left:n})}}function xd(n,e){return(n.values||[]).find(t=>$r(t,e))!==void 0}function hc(n,e){if(n===e)return 0;const t=Ho(n),i=Ho(e);if(t!==i)return tt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const d=dn(a.integerValue||a.doubleValue),f=dn(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return lS(n.timestampValue,e.timestampValue);case 4:return lS(Rd(n),Rd(e));case 5:return Ky(n.stringValue,e.stringValue);case 6:return function(a,c){const d=qo(a),f=qo(c);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),f=c.split("/");for(let p=0;p<d.length&&p<f.length;p++){const _=tt(d[p],f[p]);if(_!==0)return _}return tt(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const d=tt(dn(a.latitude),dn(c.latitude));return d!==0?d:tt(dn(a.longitude),dn(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return cS(n.arrayValue,e.arrayValue);case 10:return function(a,c){var d,f,p,_;const v=a.fields||{},E=c.fields||{},R=(d=v[Dm])===null||d===void 0?void 0:d.arrayValue,C=(f=E[Dm])===null||f===void 0?void 0:f.arrayValue,k=tt(((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return k!==0?k:cS(R,C)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===Lf.mapValue&&c===Lf.mapValue)return 0;if(a===Lf.mapValue)return 1;if(c===Lf.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),p=c.fields||{},_=Object.keys(p);f.sort(),_.sort();for(let v=0;v<f.length&&v<_.length;++v){const E=Ky(f[v],_[v]);if(E!==0)return E;const R=hc(d[f[v]],p[_[v]]);if(R!==0)return R}return tt(f.length,_.length)}(n.mapValue,e.mapValue);default:throw qe(23264,{Pe:t})}}function lS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return tt(n,e);const t=zo(n),i=zo(e),s=tt(t.seconds,i.seconds);return s!==0?s:tt(t.nanos,i.nanos)}function cS(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=hc(t[s],i[s]);if(a)return a}return tt(t.length,i.length)}function fc(n){return Qy(n)}function Qy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=zo(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=Qy(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const c of i)a?a=!1:s+=",",s+=`${c}:${Qy(t.fields[c])}`;return s+"}"}(n.mapValue):qe(61005,{value:n})}function Xf(n){switch(Ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yp(n);return e?16+Xf(e):16;case 5:return 2*n.stringValue.length;case 6:return qo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Xf(a),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return Wo(i.fields,(a,c)=>{s+=a.length+Xf(c)}),s}(n.mapValue);default:throw qe(13486,{value:n})}}function Pm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yy(n){return!!n&&"integerValue"in n}function CE(n){return!!n&&"arrayValue"in n}function uS(n){return!!n&&"nullValue"in n}function dS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jf(n){return!!n&&"mapValue"in n}function y3(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tx])===null||t===void 0?void 0:t.stringValue)===bx}function id(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wo(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=id(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=id(n.arrayValue.values[t]);return e}return Object.assign({},n)}function v3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=id(t)}setAll(e){let t=$n.emptyPath(),i={},s=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,s),i={},s=[],t=d.popLast()}c?i[d.lastSegment()]=id(c):s.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());Jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Jf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Wo(t,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new Ti(id(this.value))}}function wx(n){const e=[];return Wo(n.fields,(t,i)=>{const s=new $n([t]);if(Jf(i)){const a=wx(i.mapValue).fields;if(a.length===0)e.push(s);else for(const c of a)e.push(s.child(c))}else e.push(s)}),new Li(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,t,i,s,a,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ti(e,0,$e.min(),$e.min(),$e.min(),Ti.empty(),0)}static newFoundDocument(e,t,i,s){return new ti(e,1,t,$e.min(),i,s,0)}static newNoDocument(e,t){return new ti(e,2,t,$e.min(),$e.min(),Ti.empty(),0)}static newUnknownDocument(e,t){return new ti(e,3,t,$e.min(),$e.min(),Ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.position=e,this.inclusive=t}}function hS(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],c=n.position[s];if(a.field.isKeyField()?i=Le.comparator(Le.fromName(c.referenceValue),t.key):i=hc(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function fS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t="asc"){this.field=e,this.dir=t}}function E3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{}class _n extends Cx{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new b3(e,t,i):t==="array-contains"?new S3(e,i):t==="in"?new A3(e,i):t==="not-in"?new R3(e,i):t==="array-contains-any"?new I3(e,i):new _n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new w3(e,i):new C3(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(hc(t,this.value)):t!==null&&Ho(this.value)===Ho(t)&&this.matchesComparison(hc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends Cx{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new pr(e,t)}matches(e){return Sx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Sx(n){return n.op==="and"}function Ax(n){return T3(n)&&Sx(n)}function T3(n){for(const e of n.filters)if(e instanceof pr)return!1;return!0}function Wy(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+fc(n.value);if(Ax(n))return n.filters.map(e=>Wy(e)).join(",");{const e=n.filters.map(t=>Wy(t)).join(",");return`${n.op}(${e})`}}function Rx(n,e){return n instanceof _n?function(i,s){return s instanceof _n&&i.op===s.op&&i.field.isEqual(s.field)&&$r(i.value,s.value)}(n,e):n instanceof pr?function(i,s){return s instanceof pr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,c,d)=>a&&Rx(c,s.filters[d]),!0):!1}(n,e):void qe(19439)}function Ix(n){return n instanceof _n?function(t){return`${t.field.canonicalString()} ${t.op} ${fc(t.value)}`}(n):n instanceof pr?function(t){return t.op.toString()+" {"+t.getFilters().map(Ix).join(" ,")+"}"}(n):"Filter"}class b3 extends _n{constructor(e,t,i){super(e,t,i),this.key=Le.fromName(i.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class w3 extends _n{constructor(e,t){super(e,"in",t),this.keys=xx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class C3 extends _n{constructor(e,t){super(e,"not-in",t),this.keys=xx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Le.fromName(i.referenceValue))}class S3 extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return CE(t)&&xd(t.arrayValue,this.value)}}class A3 extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xd(this.value.arrayValue,t)}}class R3 extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xd(this.value.arrayValue,t)}}class I3 extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!CE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>xd(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t=null,i=[],s=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=c,this.endAt=d,this.Ie=null}}function mS(n,e=null,t=[],i=[],s=null,a=null,c=null){return new x3(n,e,t,i,s,a,c)}function SE(n){const e=Ke(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Wy(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),gp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>fc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>fc(i)).join(",")),e.Ie=t}return e.Ie}function AE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!E3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Rx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fS(n.startAt,e.startAt)&&fS(n.endAt,e.endAt)}function Xy(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t=null,i=[],s=[],a=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function N3(n,e,t,i,s,a,c,d){return new Xo(n,e,t,i,s,a,c,d)}function Nx(n){return new Xo(n)}function pS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RE(n){return n.collectionGroup!==null}function nc(n){const e=Ke(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Sn($n.comparator);return c.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Nd(a,i))}),t.has($n.keyField().canonicalString())||e.Ee.push(new Nd($n.keyField(),i))}return e.Ee}function zr(n){const e=Ke(n);return e.de||(e.de=O3(e,nc(n))),e.de}function O3(n,e){if(n.limitType==="F")return mS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Nd(s.field,a)});const t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return mS(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Jy(n,e){const t=n.filters.concat([e]);return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zy(n,e,t){return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vp(n,e){return AE(zr(n),zr(e))&&n.limitType===e.limitType}function Ox(n){return`${SE(zr(n))}|lt:${n.limitType}`}function $l(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>Ix(s)).join(", ")}]`),gp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>fc(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>fc(s)).join(",")),`Target(${i})`}(zr(n))}; limitType=${n.limitType})`}function Ep(n,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Le.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,s){for(const a of nc(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(c,d,f){const p=hS(c,d,f);return c.inclusive?p<=0:p<0}(i.startAt,nc(i),s)||i.endAt&&!function(c,d,f){const p=hS(c,d,f);return c.inclusive?p>=0:p>0}(i.endAt,nc(i),s))}(n,e)}function k3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kx(n){return(e,t)=>{let i=!1;for(const s of nc(n)){const a=D3(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function D3(n,e,t){const i=n.field.isKeyField()?Le.comparator(e.key,t.key):function(a,c,d){const f=c.data.field(a),p=d.data.field(a);return f!==null&&p!==null?hc(f,p):qe(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,(t,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return px(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=new en(Le.comparator);function Ps(){return P3}const Dx=new en(Le.comparator);function Qu(...n){let e=Dx;for(const t of n)e=e.insert(t.key,t);return e}function Px(n){let e=Dx;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Oa(){return rd()}function Mx(){return rd()}function rd(){return new Wa(n=>n.toString(),(n,e)=>n.isEqual(e))}const M3=new en(Le.comparator),L3=new Sn(Le.comparator);function dt(...n){let e=L3;for(const t of n)e=e.add(t);return e}const U3=new Sn(tt);function V3(){return U3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Om(e)?"-0":e}}function Lx(n){return{integerValue:""+n}}function j3(n,e){return h3(e)?Lx(e):IE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this._=void 0}}function B3(n,e,t){return n instanceof Mm?function(s,a){const c={fields:{[yx]:{stringValue:_x},[Ex]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&_p(a)&&(a=yp(a)),a&&(c.fields[vx]=a),{mapValue:c}}(t,e):n instanceof Od?Vx(n,e):n instanceof kd?jx(n,e):function(s,a){const c=Ux(s,a),d=gS(c)+gS(s.Re);return Yy(c)&&Yy(s.Re)?Lx(d):IE(s.serializer,d)}(n,e)}function F3(n,e,t){return n instanceof Od?Vx(n,e):n instanceof kd?jx(n,e):t}function Ux(n,e){return n instanceof Lm?function(i){return Yy(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Mm extends Tp{}class Od extends Tp{constructor(e){super(),this.elements=e}}function Vx(n,e){const t=Bx(e);for(const i of n.elements)t.some(s=>$r(s,i))||t.push(i);return{arrayValue:{values:t}}}class kd extends Tp{constructor(e){super(),this.elements=e}}function jx(n,e){let t=Bx(e);for(const i of n.elements)t=t.filter(s=>!$r(s,i));return{arrayValue:{values:t}}}class Lm extends Tp{constructor(e,t){super(),this.serializer=e,this.Re=t}}function gS(n){return dn(n.integerValue||n.doubleValue)}function Bx(n){return CE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function z3(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Od&&s instanceof Od||i instanceof kd&&s instanceof kd?dc(i.elements,s.elements,$r):i instanceof Lm&&s instanceof Lm?$r(i.Re,s.Re):i instanceof Mm&&s instanceof Mm}(n.transform,e.transform)}class q3{constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bp{}function Fx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qx(n.key,qr.none()):new Jd(n.key,n.data,qr.none());{const t=n.data,i=Ti.empty();let s=new Sn($n.comparator);for(let a of e.fields)if(!s.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),s=s.add(a)}return new Jo(n.key,i,new Li(s.toArray()),qr.none())}}function H3(n,e,t){n instanceof Jd?function(s,a,c){const d=s.value.clone(),f=yS(s.fieldTransforms,a,c.transformResults);d.setAll(f),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Jo?function(s,a,c){if(!Zf(s.precondition,a))return void a.convertToUnknownDocument(c.version);const d=yS(s.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(zx(s)),f.setAll(d),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function sd(n,e,t,i){return n instanceof Jd?function(a,c,d,f){if(!Zf(a.precondition,c))return d;const p=a.value.clone(),_=vS(a.fieldTransforms,f,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Jo?function(a,c,d,f){if(!Zf(a.precondition,c))return d;const p=vS(a.fieldTransforms,f,c),_=c.data;return _.setAll(zx(a)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(a,c,d){return Zf(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function G3(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=Ux(i.transform,s||null);a!=null&&(t===null&&(t=Ti.empty()),t.set(i.field,a))}return t||null}function _S(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&dc(i,s,(a,c)=>z3(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jd extends bp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jo extends bp{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function zx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function yS(n,e,t){const i=new Map;xt(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const a=n[s],c=a.transform,d=e.data.field(a.field);i.set(a.field,F3(c,d,t[s]))}return i}function vS(n,e,t){const i=new Map;for(const s of n){const a=s.transform,c=t.data.field(s.field);i.set(s.field,B3(a,c,e))}return i}class qx extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $3 extends bp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&H3(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=sd(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=sd(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Mx();return this.mutations.forEach(s=>{const a=e.get(s.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(s.key)?null:d;const f=Fx(c,d);f!==null&&i.set(s.key,f),c.isValidDocument()||c.convertToNoDocument($e.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dt())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,(t,i)=>_S(t,i))&&dc(this.baseMutations,e.baseMutations,(t,i)=>_S(t,i))}}class xE{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){xt(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let s=function(){return M3}();const a=e.mutations;for(let c=0;c<a.length;c++)s=s.insert(a[c].key,i[c].version);return new xE(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,yt;function W3(n){switch(n){case ue.OK:return qe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function Hx(n){if(n===void 0)return Ds("GRPC error has no .code"),ue.UNKNOWN;switch(n){case gn.OK:return ue.OK;case gn.CANCELLED:return ue.CANCELLED;case gn.UNKNOWN:return ue.UNKNOWN;case gn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case gn.INTERNAL:return ue.INTERNAL;case gn.UNAVAILABLE:return ue.UNAVAILABLE;case gn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case gn.NOT_FOUND:return ue.NOT_FOUND;case gn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case gn.ABORTED:return ue.ABORTED;case gn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case gn.DATA_LOSS:return ue.DATA_LOSS;default:return qe(39323,{code:n})}}(yt=gn||(gn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=new No([4294967295,4294967295],0);function ES(n){const e=hx().encode(n),t=new rx;return t.update(e),new Uint8Array(t.digest())}function TS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new No([t,i],0),new No([s,a],0)]}class NE{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Yu(`Invalid padding: ${t}`);if(i<0)throw new Yu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=No.fromNumber(this.pe)}we(e,t,i){let s=e.add(t.multiply(No.fromNumber(i)));return s.compare(X3)===1&&(s=new No([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=ES(e),[i,s]=TS(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,s,a);if(!this.Se(c))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new NE(a,s,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=ES(e),[i,s]=TS(t);for(let a=0;a<this.hashCount;a++){const c=this.we(i,s,a);this.be(c)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Zd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new wp($e.min(),s,new en(tt),Ps(),dt())}}class Zd{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Zd(i,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t,i,s){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=s}}class Gx{constructor(e,t){this.targetId=e,this.Ce=t}}class $x{constructor(e,t,i=Qn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class bS{constructor(){this.Fe=0,this.Me=wS(),this.xe=Qn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=dt(),t=dt(),i=dt();return this.Me.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:qe(38017,{changeType:a})}}),new Zd(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=wS()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,xt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class J3{constructor(e){this.ze=e,this.je=new Map,this.He=Ps(),this.Je=Uf(),this.Ye=Uf(),this.Ze=new en(tt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:qe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,i=e.Ce.count,s=this._t(t);if(s){const a=s.target;if(Xy(a))if(i===0){const c=new Le(a.path);this.tt(t,c,ti.newNoDocument(c,$e.min()))}else xt(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const d=this.ct(e),f=d?this.lt(d,e,c):1;if(f!==0){this.st(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let c,d;try{c=qo(i).toUint8Array()}catch(f){if(f instanceof gx)return uc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new NE(c,s,a)}catch(f){return uc(f instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.pe===0?null:d}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let s=0;return i.forEach(a=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),s++)}),s}It(e){const t=new Map;this.je.forEach((a,c)=>{const d=this._t(c);if(d){if(a.current&&Xy(d.target)){const f=new Le(d.target.path);this.Et(f).has(c)||this.dt(c,f)||this.tt(c,f,ti.newNoDocument(f,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let i=dt();this.Ye.forEach((a,c)=>{let d=!0;c.forEachWhile(f=>{const p=this._t(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const s=new wp(e,t,this.Ze,this.He,i);return this.He=Ps(),this.Je=Uf(),this.Ye=Uf(),this.Ze=new en(tt),s}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new bS,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Sn(tt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Sn(tt),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new bS),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Uf(){return new en(Le.comparator)}function wS(){return new en(Le.comparator)}const Z3={asc:"ASCENDING",desc:"DESCENDING"},e6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t6={and:"AND",or:"OR"};class n6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ev(n,e){return n.useProto3Json||gp(e)?e:{value:e}}function Um(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function i6(n,e){return Um(n,e.toTimestamp())}function Hr(n){return xt(!!n,49232),$e.fromTimestamp(function(t){const i=zo(t);return new Cn(i.seconds,i.nanos)}(n))}function OE(n,e){return tv(n,e).canonicalString()}function tv(n,e){const t=function(s){return new Kt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Qx(n){const e=Kt.fromString(n);return xt(Zx(e),10190,{key:e.toString()}),e}function nv(n,e){return OE(n.databaseId,e.path)}function cy(n,e){const t=Qx(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(Wx(t))}function Yx(n,e){return OE(n.databaseId,e)}function r6(n){const e=Qx(n);return e.length===4?Kt.emptyPath():Wx(e)}function iv(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Wx(n){return xt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function CS(n,e,t){return{name:nv(n,e),fields:t.value.mapValue.fields}}function s6(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:qe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(p,_){return p.useProto3Json?(xt(_===void 0||typeof _=="string",58123),Qn.fromBase64String(_||"")):(xt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Qn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?ue.UNKNOWN:Hx(p.code);return new Ae(_,p.message||"")}(c);t=new $x(i,s,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=cy(n,i.document.name),a=Hr(i.document.updateTime),c=i.document.createTime?Hr(i.document.createTime):$e.min(),d=new Ti({mapValue:{fields:i.document.fields}}),f=ti.newFoundDocument(s,a,c,d),p=i.targetIds||[],_=i.removedTargetIds||[];t=new em(p,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=cy(n,i.document),a=i.readTime?Hr(i.readTime):$e.min(),c=ti.newNoDocument(s,a),d=i.removedTargetIds||[];t=new em([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=cy(n,i.document),a=i.removedTargetIds||[];t=new em([],a,s,null)}else{if(!("filter"in e))return qe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,c=new Y3(s,a),d=i.targetId;t=new Gx(d,c)}}return t}function o6(n,e){let t;if(e instanceof Jd)t={update:CS(n,e.key,e.value)};else if(e instanceof qx)t={delete:nv(n,e.key)};else if(e instanceof Jo)t={update:CS(n,e.key,e.data),updateMask:p6(e.fieldMask)};else{if(!(e instanceof $3))return qe(16599,{ft:e.type});t={verify:nv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const d=c.transform;if(d instanceof Mm)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Od)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof kd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Lm)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw qe(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:i6(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:qe(27497)}(n,e.precondition)),t}function a6(n,e){return n&&n.length>0?(xt(e!==void 0,14353),n.map(t=>function(s,a){let c=s.updateTime?Hr(s.updateTime):Hr(a);return c.isEqual($e.min())&&(c=Hr(a)),new q3(c,s.transformResults||[])}(t,e))):[]}function l6(n,e){return{documents:[Yx(n,e.path)]}}function c6(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Yx(n,s);const a=function(p){if(p.length!==0)return Jx(pr.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(p){if(p.length!==0)return p.map(_=>function(E){return{field:Kl(E.field),direction:h6(E.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ev(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:t,parent:s}}function u6(n){let e=r6(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){xt(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(v){const E=Xx(v);return E instanceof pr&&Ax(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(v){return v.map(E=>function(C){return new Nd(Ql(C.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(E))}(t.orderBy));let d=null;t.limit&&(d=function(v){let E;return E=typeof v=="object"?v.value:v,gp(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(v){const E=!!v.before,R=v.values||[];return new mc(R,E)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const E=!v.before,R=v.values||[];return new mc(R,E)}(t.endAt)),N3(e,s,c,a,d,"F",f,p)}function d6(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Xx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ql(t.unaryFilter.field);return _n.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ql(t.unaryFilter.field);return _n.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ql(t.unaryFilter.field);return _n.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ql(t.unaryFilter.field);return _n.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}}(n):n.fieldFilter!==void 0?function(t){return _n.create(Ql(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return pr.create(t.compositeFilter.filters.map(i=>Xx(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qe(1026)}}(t.compositeFilter.op))}(n):qe(30097,{filter:n})}function h6(n){return Z3[n]}function f6(n){return e6[n]}function m6(n){return t6[n]}function Kl(n){return{fieldPath:n.canonicalString()}}function Ql(n){return $n.fromServerFormat(n.fieldPath)}function Jx(n){return n instanceof _n?function(t){if(t.op==="=="){if(dS(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NAN"}};if(uS(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dS(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NAN"}};if(uS(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(t.field),op:f6(t.op),value:t.value}}}(n):n instanceof pr?function(t){const i=t.getFilters().map(s=>Jx(s));return i.length===1?i[0]:{compositeFilter:{op:m6(t.op),filters:i}}}(n):qe(54877,{filter:n})}function p6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t,i,s,a=$e.min(),c=$e.min(),d=Qn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.wt=e}}function _6(n){const e=u6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(){this.Cn=new v6}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(Fo.min())}updateCollectionGroup(e,t,i){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class v6{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Sn(Kt.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Sn(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e1=41943040;class yi{static withCacheSize(e){return new yi(e,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi.DEFAULT_COLLECTION_PERCENTILE=10,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yi.DEFAULT=new yi(e1,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yi.DISABLED=new yi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new pc(0)}static lr(){return new pc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="LruGarbageCollector",E6=1048576;function RS([n,e],[t,i]){const s=tt(n,t);return s===0?tt(e,i):s}class T6{constructor(e){this.Er=e,this.buffer=new Sn(RS),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();RS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class b6{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ie(AS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xc(t)?Ie(AS,"Ignoring IndexedDB error during garbage collection: ",t):await Ic(t)}await this.mr(3e5)})}}class w6{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return he.resolve(pp.le);const i=new T6(t);return this.gr.forEachTarget(e,s=>i.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>i.Rr(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(SS)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SS):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,s,a,c,d,f,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,c=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,t))).next(v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(p=Date.now(),Gl()<=lt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-_}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function C6(n,e){return new w6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.changes=new Wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?he.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&sd(i.mutation,s,Li.empty(),Cn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,dt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=dt()){const s=Oa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(a=>{let c=Qu();return a.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Oa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,dt()))}populateOverlays(e,t,i){const s=[];return i.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,s){let a=Ps();const c=rd(),d=function(){return rd()}();return t.forEach((f,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof Jo)?a=a.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),sd(_.mutation,p,_.mutation.getFieldMask(),Cn.now())):c.set(p.key,Li.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var v;return d.set(p,new A6(_,(v=c.get(p))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,t){const i=rd();let s=new en((c,d)=>c-d),a=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let _=i.get(f)||Li.empty();_=d.applyToLocalView(p,_),i.set(f,_);const v=(s.get(d.batchId)||dt()).add(f);s=s.insert(d.batchId,v)})}).next(()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,_=f.value,v=Mx();_.forEach(E=>{if(!a.has(E)){const R=Fx(t.get(E),i.get(E));R!==null&&v.set(E,R),a=a.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,v))}return he.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(c){return Le.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(a=>{const c=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):he.resolve(Oa());let d=Ad,f=a;return c.next(p=>he.forEach(p,(_,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),a.get(_)?he.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{f=f.insert(_,E)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,dt())).next(_=>({batchId:d,changes:Px(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next(i=>{let s=Qu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let c=Qu();return this.indexManager.getCollectionParents(e,a).next(d=>he.forEach(d,f=>{const p=function(v,E){return new Xo(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next(_=>{_.forEach((v,E)=>{c=c.insert(v,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s))).next(c=>{a.forEach((f,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,ti.newInvalidDocument(_)))});let d=Qu();return c.forEach((f,p)=>{const _=a.get(f);_!==void 0&&sd(_.mutation,p,Li.empty(),Cn.now()),Ep(t,p)&&(d=d.insert(f,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return he.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Hr(s.createTime)}}(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(s){return{name:s.name,query:_6(s.bundledQuery),readTime:Hr(s.readTime)}}(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(){this.overlays=new en(Le.comparator),this.Qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Oa();return he.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,a)=>{this.bt(e,t,a)}),he.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Qr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(i)),he.resolve()}getOverlaysForCollection(e,t,i){const s=Oa(),a=t.length+1,c=new Le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>i&&s.set(f.getKey(),f)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new en((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=a.get(p.largestBatchId);_===null&&(_=Oa(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Oa(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=s)););return he.resolve(d)}bt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.Qr.get(s.largestBatchId).delete(i.key);this.Qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Q3(t,i));let a=this.Qr.get(t);a===void 0&&(a=dt(),this.Qr.set(t,a)),this.Qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.sessionToken=Qn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.$r=new Sn(Pn.Ur),this.Kr=new Sn(Pn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const i=new Pn(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new Pn(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){const t=new Le(new Kt([])),i=new Pn(t,e),s=new Pn(t,e+1),a=[];return this.Kr.forEachInRange([i,s],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Le(new Kt([])),i=new Pn(t,e),s=new Pn(t,e+1);let a=dt();return this.Kr.forEachInRange([i,s],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Pn(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Pn{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Le.comparator(e.key,t.key)||tt(e.Zr,t.Zr)}static Wr(e,t){return tt(e.Zr,t.Zr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Sn(Pn.Ur)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new K3(a,t,i,s);this.mutationQueue.push(c);for(const d of s)this.Xr=this.Xr.add(new Pn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ti(i),a=s<0?0:s;return he.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?wE:this.nr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Pn(t,0),s=new Pn(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([i,s],c=>{const d=this.ei(c.Zr);a.push(d)}),he.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Sn(tt);return t.forEach(s=>{const a=new Pn(s,0),c=new Pn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],d=>{i=i.add(d.Zr)})}),he.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;Le.isDocumentKey(a)||(a=a.child(""));const c=new Pn(new Le(a),0);let d=new Sn(tt);return this.Xr.forEachWhile(f=>{const p=f.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(d=d.add(f.Zr)),!0)},c),he.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(i=>{const s=this.ei(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){xt(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return he.forEach(t.mutations,s=>{const a=new Pn(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){const i=new Pn(t,0),s=this.Xr.firstAfterOrEqual(i);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.ii=e,this.docs=function(){return new en(Le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,c=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return he.resolve(i?i.document.mutableCopy():ti.newInvalidDocument(t))}getEntries(e,t){let i=Ps();return t.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():ti.newInvalidDocument(s))}),he.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=Ps();const c=t.path,d=new Le(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:_}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||l3(a3(_),i)<=0||(s.has(_.key)||Ep(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return he.resolve(a)}getAllFromCollectionGroup(e,t,i,s){qe(9500)}si(e,t){return he.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new D6(this)}getSize(e){return he.resolve(this.size)}}class D6 extends S6{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Br.addEntry(e,s)):this.Br.removeEntry(i)}),he.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.persistence=e,this.oi=new Wa(t=>SE(t),AE),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this._i=0,this.ai=new kE,this.targetCount=0,this.ui=pc.cr()}forEachTarget(e,t){return this.oi.forEach((i,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),he.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new pc(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tr(t),he.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)}),he.waitFor(a).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const i=this.oi.get(t)||null;return he.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),he.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(c=>{a.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ai.Yr(t);return he.resolve(i)}containsKey(e,t){return he.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,t){this.ci={},this.overlays={},this.li=new pp(0),this.hi=!1,this.hi=!0,this.Pi=new N6,this.referenceDelegate=e(this),this.Ti=new P6(this),this.indexManager=new y6,this.remoteDocumentCache=function(s){return new k6(s)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new g6(t),this.Ei=new I6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new x6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new O6(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){Ie("MemoryPersistence","Starting transaction:",e);const s=new M6(this.li.next());return this.referenceDelegate.di(),i(s).next(a=>this.referenceDelegate.Ai(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ri(e,t){return he.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}}class M6 extends u3{constructor(e){super(),this.currentSequenceNumber=e}}class DE{constructor(e){this.persistence=e,this.Vi=new kE,this.mi=null}static fi(e){return new DE(e)}get gi(){if(this.mi)return this.mi;throw qe(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),he.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(s=>this.gi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.gi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.gi,i=>{const s=Le.fromPath(i);return this.pi(e,s).next(a=>{a||t.removeEntry(s,$e.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return he.or([()=>he.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Vm{constructor(e,t){this.persistence=e,this.yi=new Wa(i=>f3(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=C6(this,t)}static fi(e,t){return new Vm(e,t)}di(){}Ai(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}Sr(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return he.forEach(this.yi,(i,s)=>this.Dr(e,i,s).next(a=>a?he.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.si(e,c=>this.Dr(e,c,t).next(d=>{d||(i++,a.removeEntry(c,$e.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),he.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),he.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xf(e.data.value)),t}Dr(e,t,i){return he.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.yi.get(t);return he.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.ds=i,this.As=s}static Rs(e,t){let i=dt(),s=dt();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new PE(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return nP()?8:d3(si())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.ws(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Ss(e,t,s,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new L6;return this.bs(e,t,c).next(d=>{if(a.result=d,this.fs)return this.Ds(e,t,c,d.size)})}).next(()=>a.result)}Ds(e,t,i,s){return i.documentReadCount<this.gs?(Gl()<=lt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),he.resolve()):(Gl()<=lt.DEBUG&&Ie("QueryEngine","Query:",$l(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ps*s?(Gl()<=lt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):he.resolve())}ws(e,t){if(pS(t))return he.resolve(null);let i=zr(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Zy(t,null,"F"),i=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=dt(...a);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const p=this.vs(t,d);return this.Cs(t,p,c,f.readTime)?this.ws(e,Zy(t,null,"F")):this.Fs(e,p,t,f)}))})))}Ss(e,t,i,s){return pS(t)||s.isEqual($e.min())?he.resolve(null):this.ys.getDocuments(e,i).next(a=>{const c=this.vs(t,a);return this.Cs(t,c,i,s)?he.resolve(null):(Gl()<=lt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$l(t)),this.Fs(e,c,t,o3(s,Ad)).next(d=>d))})}vs(e,t){let i=new Sn(kx(e));return t.forEach((s,a)=>{Ep(e,a)&&(i=i.add(a))}),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}bs(e,t,i){return Gl()<=lt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",$l(t)),this.ys.getDocumentsMatchingQuery(e,t,Fo.min(),i)}Fs(e,t,i,s){return this.ys.getDocumentsMatchingQuery(e,i,s).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="LocalStore",V6=3e8;class j6{constructor(e,t,i,s){this.persistence=e,this.Ms=t,this.serializer=s,this.xs=new en(tt),this.Os=new Wa(a=>SE(a),AE),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R6(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function B6(n,e,t,i){return new j6(n,e,t,i)}async function n1(n,e){const t=Ke(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],d=[];let f=dt();for(const p of s){c.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}for(const p of a){d.push(p.batchId);for(const _ of p.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next(p=>({ks:p,removedBatchIds:c,addedBatchIds:d}))})})}function F6(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,f,p,_){const v=p.batch,E=v.keys();let R=he.resolve();return E.forEach(C=>{R=R.next(()=>_.getEntry(f,C)).next(k=>{const O=p.docVersions.get(C);xt(O!==null,48541),k.version.compareTo(O)<0&&(v.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),_.addEntry(k)))})}),R.next(()=>d.mutationQueue.removeMutationBatch(f,v))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let f=dt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function i1(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function z6(n,e){const t=Ke(n),i=e.snapshotVersion;let s=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});s=t.xs;const d=[];e.targetChanges.forEach((_,v)=>{const E=s.get(v);if(!E)return;d.push(t.Ti.removeMatchingKeys(a,_.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(a,_.addedDocuments,v)));let R=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(Qn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,i)),s=s.insert(v,R),function(k,O,H){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=V6?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(E,R,_)&&d.push(t.Ti.updateTargetData(a,R))});let f=Ps(),p=dt();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),d.push(q6(a,c,e.documentUpdates).next(_=>{f=_.qs,p=_.Qs})),!i.isEqual($e.min())){const _=t.Ti.getLastRemoteSnapshotVersion(a).next(v=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,i));d.push(_)}return he.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(t.xs=s,a))}function q6(n,e,t){let i=dt(),s=dt();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let c=Ps();return t.forEach((d,f)=>{const p=a.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual($e.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Ie(ME,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)}),{qs:c,Qs:s}})}function H6(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=wE),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function G6(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Ti.getTargetData(i,e).next(a=>a?(s=a,he.resolve(s)):t.Ti.allocateTargetId(i).next(c=>(s=new Co(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.xs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}async function rv(n,e,t){const i=Ke(n),s=i.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!xc(c))throw c;Ie(ME,`Failed to update sequence numbers for target ${e}: ${c}`)}i.xs=i.xs.remove(e),i.Os.delete(s.target)}function IS(n,e,t){const i=Ke(n);let s=$e.min(),a=dt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(f,p,_){const v=Ke(f),E=v.Os.get(_);return E!==void 0?he.resolve(v.xs.get(E)):v.Ti.getTargetData(p,_)}(i,c,zr(e)).next(d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(c,d.targetId).next(f=>{a=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(c,e,t?s:$e.min(),t?a:dt())).next(d=>($6(i,k3(e),d),{documents:d,$s:a})))}function $6(n,e,t){let i=n.Ns.get(e)||$e.min();t.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.Ns.set(e,i)}class xS{constructor(){this.activeTargetIds=V3()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K6{constructor(){this.xo=new xS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new xS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="ConnectivityMonitor";class OS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ie(NS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ie(NS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vf=null;function sv(){return Vf===null?Vf=function(){return 268435456+Math.round(2147483648*Math.random())}():Vf++,"0x"+Vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="RestConnection",Y6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W6{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${s}`,this.Go=this.databaseId.database===km?`project_id=${i}`:`project_id=${i}&database_id=${s}`}zo(e,t,i,s,a){const c=sv(),d=this.jo(e,t.toUriEncodedString());Ie(uy,`Sending RPC '${e}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,s,a);const{host:p}=new URL(d),_=Vs(p);return this.Jo(e,d,f,i,_).then(v=>(Ie(uy,`Received RPC '${e}' ${c}: `,v),v),v=>{throw uc(uy,`RPC '${e}' ${c} failed with error: `,v,"url: ",d,"request:",i),v})}Yo(e,t,i,s,a,c){return this.zo(e,t,i,s,a)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}jo(e,t){const i=Y6[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="WebChannelConnection";class J6 extends W6{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,a){const c=sv();return new Promise((d,f)=>{const p=new sx;p.setWithCredentials(!0),p.listenOnce(ox.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Wf.NO_ERROR:const v=p.getResponseJson();Ie(Xn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),d(v);break;case Wf.TIMEOUT:Ie(Xn,`RPC '${e}' ${c} timed out`),f(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Wf.HTTP_ERROR:const E=p.getStatus();if(Ie(Xn,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const C=R==null?void 0:R.error;if(C&&C.status&&C.message){const k=function(H){const j=H.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(j)>=0?j:ue.UNKNOWN}(C.status);f(new Ae(k,C.message))}else f(new Ae(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ie(Xn,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(s);Ie(Xn,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",_,i,15)})}T_(e,t,i){const s=sv(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=cx(),d=lx(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=a.join("");Ie(Xn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const v=c.createWebChannel(_,f);let E=!1,R=!1;const C=new X6({Zo:O=>{R?Ie(Xn,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(E||(Ie(Xn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Ie(Xn,`RPC '${e}' stream ${s} sending:`,O),v.send(O))},Xo:()=>v.close()}),k=(O,H,j)=>{O.listen(H,D=>{try{j(D)}catch(F){setTimeout(()=>{throw F},0)}})};return k(v,Ku.EventType.OPEN,()=>{R||(Ie(Xn,`RPC '${e}' stream ${s} transport opened.`),C.__())}),k(v,Ku.EventType.CLOSE,()=>{R||(R=!0,Ie(Xn,`RPC '${e}' stream ${s} transport closed`),C.u_())}),k(v,Ku.EventType.ERROR,O=>{R||(R=!0,uc(Xn,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),C.u_(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))}),k(v,Ku.EventType.MESSAGE,O=>{var H;if(!R){const j=O.data[0];xt(!!j,16349);const D=j,F=(D==null?void 0:D.error)||((H=D[0])===null||H===void 0?void 0:H.error);if(F){Ie(Xn,`RPC '${e}' stream ${s} received error:`,F);const U=F.status;let Z=function(N){const L=gn[N];if(L!==void 0)return Hx(L)}(U),x=F.message;Z===void 0&&(Z=ue.INTERNAL,x="Unknown error status: "+U+" with message "+F.message),R=!0,C.u_(new Ae(Z,x)),v.close()}else Ie(Xn,`RPC '${e}' stream ${s} received:`,j),C.c_(j)}}),k(d,ax.STAT_EVENT,O=>{O.stat===$y.PROXY?Ie(Xn,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===$y.NOPROXY&&Ie(Xn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}}function dy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(n){return new n6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t,i=1e3,s=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=i,this.E_=s,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),i=Math.max(0,Date.now()-this.V_),s=Math.max(0,t-i);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="PersistentStream";class s1{constructor(e,t,i,s,a,c,d,f){this.xi=e,this.y_=i,this.w_=s,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new r1(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.S_===t&&this.K_(i,s)},i=>{e(()=>{const s=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.W_(s)})})}K_(e,t){const i=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{i(()=>this.W_(s))}),this.stream.onMessage(s=>{i(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Ie(kS,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(Ie(kS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z6 extends s1{constructor(e,t,i,s,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,c),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=s6(this.serializer,e),i=function(a){if(!("targetChange"in a))return $e.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?$e.min():c.readTime?Hr(c.readTime):$e.min()}(e);return this.listener.j_(t,i)}H_(e){const t={};t.database=iv(this.serializer),t.addTarget=function(a,c){let d;const f=c.target;if(d=Xy(f)?{documents:l6(a,f)}:{query:c6(a,f).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Kx(a,c.resumeToken);const p=ev(a,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo($e.min())>0){d.readTime=Um(a,c.snapshotVersion.toTimestamp());const p=ev(a,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=d6(this.serializer,e);i&&(t.labels=i),this.L_(t)}J_(e){const t={};t.database=iv(this.serializer),t.removeTarget=e,this.L_(t)}}class ej extends s1{constructor(e,t,i,s,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,c),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return xt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){xt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=a6(e.writeResults,e.commitTime),i=Hr(e.commitTime);return this.listener.ea(i,t)}ta(){const e={};e.database=iv(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>o6(this.serializer,i))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{}class nj extends tj{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.na=!1}ra(){if(this.na)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,tv(t,i),s,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(ue.UNKNOWN,a.toString())})}Yo(e,t,i,s,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,tv(t,i),s,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ue.UNKNOWN,c.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class ij{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ds(t),this.oa=!1):Ie("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="RemoteStore";class rj{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(c=>{i.enqueueAndForget(async()=>{Xa(this)&&(Ie(qa,"Restarting streams for network reachability change."),await async function(f){const p=Ke(f);p.Ta.add(4),await eh(p),p.da.set("Unknown"),p.Ta.delete(4),await Sp(p)}(this))})}),this.da=new ij(i,s)}}async function Sp(n){if(Xa(n))for(const e of n.Ia)await e(!0)}async function eh(n){for(const e of n.Ia)await e(!1)}function o1(n,e){const t=Ke(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),jE(t)?VE(t):Nc(t).M_()&&UE(t,e))}function LE(n,e){const t=Ke(n),i=Nc(t);t.Pa.delete(e),i.M_()&&a1(t,e),t.Pa.size===0&&(i.M_()?i.N_():Xa(t)&&t.da.set("Unknown"))}function UE(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nc(n).H_(e)}function a1(n,e){n.Aa.Ke(e),Nc(n).J_(e)}function VE(n){n.Aa=new J3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Nc(n).start(),n.da._a()}function jE(n){return Xa(n)&&!Nc(n).F_()&&n.Pa.size>0}function Xa(n){return Ke(n).Ta.size===0}function l1(n){n.Aa=void 0}async function sj(n){n.da.set("Online")}async function oj(n){n.Pa.forEach((e,t)=>{UE(n,e)})}async function aj(n,e){l1(n),jE(n)?(n.da.ca(e),VE(n)):n.da.set("Unknown")}async function lj(n,e,t){if(n.da.set("Online"),e instanceof $x&&e.state===2&&e.cause)try{await async function(s,a){const c=a.cause;for(const d of a.targetIds)s.Pa.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Pa.delete(d),s.Aa.removeTarget(d))}(n,e)}catch(i){Ie(qa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await jm(n,i)}else if(e instanceof em?n.Aa.Xe(e):e instanceof Gx?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual($e.min()))try{const i=await i1(n.localStore);t.compareTo(i)>=0&&await function(a,c){const d=a.Aa.It(c);return d.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Pa.get(p);_&&a.Pa.set(p,_.withResumeToken(f.resumeToken,c))}}),d.targetMismatches.forEach((f,p)=>{const _=a.Pa.get(f);if(!_)return;a.Pa.set(f,_.withResumeToken(Qn.EMPTY_BYTE_STRING,_.snapshotVersion)),a1(a,f);const v=new Co(_.target,f,p,_.sequenceNumber);UE(a,v)}),a.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){Ie(qa,"Failed to raise snapshot:",i),await jm(n,i)}}async function jm(n,e,t){if(!xc(e))throw e;n.Ta.add(1),await eh(n),n.da.set("Offline"),t||(t=()=>i1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Ie(qa,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Sp(n)})}function c1(n,e){return e().catch(t=>jm(n,t,e))}async function Ap(n){const e=Ke(n),t=Go(e);let i=e.ha.length>0?e.ha[e.ha.length-1].batchId:wE;for(;cj(e);)try{const s=await H6(e.localStore,i);if(s===null){e.ha.length===0&&t.N_();break}i=s.batchId,uj(e,s)}catch(s){await jm(e,s)}u1(e)&&d1(e)}function cj(n){return Xa(n)&&n.ha.length<10}function uj(n,e){n.ha.push(e);const t=Go(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function u1(n){return Xa(n)&&!Go(n).F_()&&n.ha.length>0}function d1(n){Go(n).start()}async function dj(n){Go(n).ta()}async function hj(n){const e=Go(n);for(const t of n.ha)e.Z_(t.mutations)}async function fj(n,e,t){const i=n.ha.shift(),s=xE.from(i,e,t);await c1(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Ap(n)}async function mj(n,e){e&&Go(n).Y_&&await async function(i,s){if(function(c){return W3(c)&&c!==ue.ABORTED}(s.code)){const a=i.ha.shift();Go(i).O_(),await c1(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Ap(i)}}(n,e),u1(n)&&d1(n)}async function DS(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Ie(qa,"RemoteStore received new credentials");const i=Xa(t);t.Ta.add(3),await eh(t),i&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Sp(t)}async function pj(n,e){const t=Ke(n);e?(t.Ta.delete(2),await Sp(t)):e||(t.Ta.add(2),await eh(t),t.da.set("Unknown"))}function Nc(n){return n.Ra||(n.Ra=function(t,i,s){const a=Ke(t);return a.ra(),new Z6(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{e_:sj.bind(null,n),n_:oj.bind(null,n),i_:aj.bind(null,n),j_:lj.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),jE(n)?VE(n):n.da.set("Unknown")):(await n.Ra.stop(),l1(n))})),n.Ra}function Go(n){return n.Va||(n.Va=function(t,i,s){const a=Ke(t);return a.ra(),new ej(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:dj.bind(null,n),i_:mj.bind(null,n),X_:hj.bind(null,n),ea:fj.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Ap(n)):(await n.Va.stop(),n.ha.length>0&&(Ie(qa,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Oo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const c=Date.now()+i,d=new BE(e,t,c,s,a);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function FE(n,e){if(Ds("AsyncQueue",`${e}: ${n}`),xc(n))return new Ae(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{static emptySet(e){return new ic(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Le.comparator(t.key,i.key):(t,i)=>Le.comparator(t.key,i.key),this.keyedMap=Qu(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ic)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ic;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.ma=new en(Le.comparator)}track(e){const t=e.doc.key,i=this.ma.get(t);i?e.type!==0&&i.type===3?this.ma=this.ma.insert(t,e):e.type===3&&i.type!==1?this.ma=this.ma.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ma=this.ma.remove(t):e.type===1&&i.type===2?this.ma=this.ma.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):qe(63341,{Vt:e,fa:i}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,i)=>{e.push(i)}),e}}class gc{constructor(e,t,i,s,a,c,d,f,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new gc(e,t,ic.emptySet(t),c,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class _j{constructor(){this.queries=MS(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,i){const s=Ke(t),a=s.queries;s.queries=MS(),a.forEach((c,d)=>{for(const f of d.ya)f.onError(i)})})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function MS(){return new Wa(n=>Ox(n),vp)}async function yj(n,e){const t=Ke(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.wa()&&e.Sa()&&(i=2):(a=new gj,i=e.Sa()?0:1);try{switch(i){case 0:a.pa=await t.onListen(s,!0);break;case 1:a.pa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=FE(c,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&zE(t)}async function vj(n,e){const t=Ke(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const c=a.ya.indexOf(e);c>=0&&(a.ya.splice(c,1),a.ya.length===0?s=e.Sa()?0:1:!a.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Ej(n,e){const t=Ke(n);let i=!1;for(const s of e){const a=s.query,c=t.queries.get(a);if(c){for(const d of c.ya)d.va(s)&&(i=!0);c.pa=s}}i&&zE(t)}function Tj(n,e,t){const i=Ke(n),s=i.queries.get(e);if(s)for(const a of s.ya)a.onError(t);i.queries.delete(e)}function zE(n){n.ba.forEach(e=>{e.next()})}var ov,LS;(LS=ov||(ov={})).Ca="default",LS.Cache="cache";class bj{constructor(e,t,i){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=i||{}}va(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new gc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const i=t!=="Offline";return(!this.options.La||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==ov.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.key=e}}class f1{constructor(e){this.key=e}}class wj{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=dt(),this.mutatedKeys=dt(),this.Ha=kx(e),this.Ja=new ic(this.Ha)}get Ya(){return this.Ga}Za(e,t){const i=t?t.Xa:new PS,s=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,v)=>{const E=s.get(_),R=Ep(this.query,v)?v:null,C=!!E&&this.mutatedKeys.has(E.key),k=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let O=!1;E&&R?E.data.isEqual(R.data)?C!==k&&(i.track({type:3,doc:R}),O=!0):this.eu(E,R)||(i.track({type:2,doc:R}),O=!0,(f&&this.Ha(R,f)>0||p&&this.Ha(R,p)<0)&&(d=!0)):!E&&R?(i.track({type:0,doc:R}),O=!0):E&&!R&&(i.track({type:1,doc:E}),O=!0,(f||p)&&(d=!0)),O&&(R?(c=c.add(R),a=k?a.add(_):a.delete(_)):(c=c.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{Ja:c,Xa:i,Cs:d,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const c=e.Xa.ga();c.sort((_,v)=>function(R,C){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Vt:O})}};return k(R)-k(C)}(_.type,v.type)||this.Ha(_.doc,v.doc)),this.tu(i),s=s!=null&&s;const d=t&&!s?this.nu():[],f=this.ja.size===0&&this.current&&!s?1:0,p=f!==this.za;return this.za=f,c.length!==0||p?{snapshot:new gc(this.query,e.Ja,a,c,e.mutatedKeys,f===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ru:d}:{ru:d}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new PS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=dt(),this.Ja.forEach(i=>{this.iu(i.key)&&(this.ja=this.ja.add(i.key))});const t=[];return e.forEach(i=>{this.ja.has(i)||t.push(new f1(i))}),this.ja.forEach(i=>{e.has(i)||t.push(new h1(i))}),t}su(e){this.Ga=e.$s,this.ja=dt();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return gc.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const qE="SyncEngine";class Cj{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Sj{constructor(e){this.key=e,this._u=!1}}class Aj{constructor(e,t,i,s,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.au={},this.uu=new Wa(d=>Ox(d),vp),this.cu=new Map,this.lu=new Set,this.hu=new en(Le.comparator),this.Pu=new Map,this.Tu=new kE,this.Iu={},this.Eu=new Map,this.du=pc.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function Rj(n,e,t=!0){const i=v1(n);let s;const a=i.uu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.ou()):s=await m1(i,e,t,!0),s}async function Ij(n,e){const t=v1(n);await m1(t,e,!0,!1)}async function m1(n,e,t,i){const s=await G6(n.localStore,zr(e)),a=s.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await xj(n,e,a,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&o1(n.remoteStore,s),d}async function xj(n,e,t,i,s){n.Ru=(v,E,R)=>async function(k,O,H,j){let D=O.view.Za(H);D.Cs&&(D=await IS(k.localStore,O.query,!1).then(({documents:x})=>O.view.Za(x,D)));const F=j&&j.targetChanges.get(O.targetId),U=j&&j.targetMismatches.get(O.targetId)!=null,Z=O.view.applyChanges(D,k.isPrimaryClient,F,U);return VS(k,O.targetId,Z.ru),Z.snapshot}(n,v,E,R);const a=await IS(n.localStore,e,!0),c=new wj(e,a.$s),d=c.Za(a.documents),f=Zd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=c.applyChanges(d,n.isPrimaryClient,f);VS(n,t,p.ru);const _=new Cj(e,t,c);return n.uu.set(e,_),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),p.snapshot}async function Nj(n,e,t){const i=Ke(n),s=i.uu.get(e),a=i.cu.get(s.targetId);if(a.length>1)return i.cu.set(s.targetId,a.filter(c=>!vp(c,e))),void i.uu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await rv(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&LE(i.remoteStore,s.targetId),av(i,s.targetId)}).catch(Ic)):(av(i,s.targetId),await rv(i.localStore,s.targetId,!0))}async function Oj(n,e){const t=Ke(n),i=t.uu.get(e),s=t.cu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),LE(t.remoteStore,i.targetId))}async function kj(n,e,t){const i=jj(n);try{const s=await function(c,d){const f=Ke(c),p=Cn.now(),_=d.reduce((R,C)=>R.add(C.key),dt());let v,E;return f.persistence.runTransaction("Locally write mutations","readwrite",R=>{let C=Ps(),k=dt();return f.Bs.getEntries(R,_).next(O=>{C=O,C.forEach((H,j)=>{j.isValidDocument()||(k=k.add(H))})}).next(()=>f.localDocuments.getOverlayedDocuments(R,C)).next(O=>{v=O;const H=[];for(const j of d){const D=G3(j,v.get(j.key).overlayedDocument);D!=null&&H.push(new Jo(j.key,D,wx(D.value.mapValue),qr.exists(!0)))}return f.mutationQueue.addMutationBatch(R,p,H,d)}).next(O=>{E=O;const H=O.applyToLocalDocumentSet(v,k);return f.documentOverlayCache.saveOverlays(R,O.batchId,H)})}).then(()=>({batchId:E.batchId,changes:Px(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(c,d,f){let p=c.Iu[c.currentUser.toKey()];p||(p=new en(tt)),p=p.insert(d,f),c.Iu[c.currentUser.toKey()]=p}(i,s.batchId,t),await th(i,s.changes),await Ap(i.remoteStore)}catch(s){const a=FE(s,"Failed to persist write");t.reject(a)}}async function p1(n,e){const t=Ke(n);try{const i=await z6(t.localStore,e);e.targetChanges.forEach((s,a)=>{const c=t.Pu.get(a);c&&(xt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c._u=!0:s.modifiedDocuments.size>0?xt(c._u,14607):s.removedDocuments.size>0&&(xt(c._u,42227),c._u=!1))}),await th(t,i,e)}catch(i){await Ic(i)}}function US(n,e,t){const i=Ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.uu.forEach((a,c)=>{const d=c.view.Da(e);d.snapshot&&s.push(d.snapshot)}),function(c,d){const f=Ke(c);f.onlineState=d;let p=!1;f.queries.forEach((_,v)=>{for(const E of v.ya)E.Da(d)&&(p=!0)}),p&&zE(f)}(i.eventManager,e),s.length&&i.au.j_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Dj(n,e,t){const i=Ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Pu.get(e),a=s&&s.key;if(a){let c=new en(Le.comparator);c=c.insert(a,ti.newNoDocument(a,$e.min()));const d=dt().add(a),f=new wp($e.min(),new Map,new en(tt),c,d);await p1(i,f),i.hu=i.hu.remove(a),i.Pu.delete(e),HE(i)}else await rv(i.localStore,e,!1).then(()=>av(i,e,t)).catch(Ic)}async function Pj(n,e){const t=Ke(n),i=e.batch.batchId;try{const s=await F6(t.localStore,e);_1(t,i,null),g1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await th(t,s)}catch(s){await Ic(s)}}async function Mj(n,e,t){const i=Ke(n);try{const s=await function(c,d){const f=Ke(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return f.mutationQueue.lookupMutationBatch(p,d).next(v=>(xt(v!==null,37113),_=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>f.localDocuments.getDocuments(p,_))})}(i.localStore,e);_1(i,e,t),g1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await th(i,s)}catch(s){await Ic(s)}}function g1(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function _1(n,e,t){const i=Ke(n);let s=i.Iu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.Iu[i.currentUser.toKey()]=s}}function av(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.cu.get(e))n.uu.delete(i),t&&n.au.Vu(i,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(i=>{n.Tu.containsKey(i)||y1(n,i)})}function y1(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(LE(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),HE(n))}function VS(n,e,t){for(const i of t)i instanceof h1?(n.Tu.addReference(i.key,e),Lj(n,i)):i instanceof f1?(Ie(qE,"Document no longer in limbo: "+i.key),n.Tu.removeReference(i.key,e),n.Tu.containsKey(i.key)||y1(n,i.key)):qe(19791,{mu:i})}function Lj(n,e){const t=e.key,i=t.path.canonicalString();n.hu.get(t)||n.lu.has(i)||(Ie(qE,"New document in limbo: "+t),n.lu.add(i),HE(n))}function HE(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new Le(Kt.fromString(e)),i=n.du.next();n.Pu.set(i,new Sj(t)),n.hu=n.hu.insert(t,i),o1(n.remoteStore,new Co(zr(Nx(t.path)),i,"TargetPurposeLimboResolution",pp.le))}}async function th(n,e,t){const i=Ke(n),s=[],a=[],c=[];i.uu.isEmpty()||(i.uu.forEach((d,f)=>{c.push(i.Ru(f,e,t).then(p=>{var _;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){s.push(p);const v=PE.Rs(f.targetId,p);a.push(v)}}))}),await Promise.all(c),i.au.j_(s),await async function(f,p){const _=Ke(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>he.forEach(p,E=>he.forEach(E.ds,R=>_.persistence.referenceDelegate.addReference(v,E.targetId,R)).next(()=>he.forEach(E.As,R=>_.persistence.referenceDelegate.removeReference(v,E.targetId,R)))))}catch(v){if(!xc(v))throw v;Ie(ME,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const R=_.xs.get(E),C=R.snapshotVersion,k=R.withLastLimboFreeSnapshotVersion(C);_.xs=_.xs.insert(E,k)}}}(i.localStore,a))}async function Uj(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Ie(qE,"User change. New user:",e.toKey());const i=await n1(t.localStore,e);t.currentUser=e,function(a,c){a.Eu.forEach(d=>{d.forEach(f=>{f.reject(new Ae(ue.CANCELLED,c))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await th(t,i.ks)}}function Vj(n,e){const t=Ke(n),i=t.Pu.get(e);if(i&&i._u)return dt().add(i.key);{let s=dt();const a=t.cu.get(e);if(!a)return s;for(const c of a){const d=t.uu.get(c);s=s.unionWith(d.view.Ya)}return s}}function v1(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=p1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dj.bind(null,e),e.au.j_=Ej.bind(null,e.eventManager),e.au.Vu=Tj.bind(null,e.eventManager),e}function jj(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mj.bind(null,e),e}class Bm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cp(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return B6(this.persistence,new U6,e.initialUser,this.serializer)}yu(e){return new t1(DE.fi,this.serializer)}pu(e){return new K6}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bm.provider={build:()=>new Bm};class Bj extends Bm{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){xt(this.persistence.referenceDelegate instanceof Vm,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new b6(i,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?yi.withCacheSize(this.cacheSizeBytes):yi.DEFAULT;return new t1(i=>Vm.fi(i,t),this.serializer)}}class lv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>US(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uj.bind(null,this.syncEngine),await pj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _j}()}createDatastore(e){const t=Cp(e.databaseInfo.databaseId),i=function(a){return new J6(a)}(e.databaseInfo);return function(a,c,d,f){return new nj(a,c,d,f)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,a,c,d){return new rj(i,s,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>US(this.syncEngine,t,0),function(){return OS.C()?new OS:new Q6}())}createSyncEngine(e,t){return function(s,a,c,d,f,p,_){const v=new Aj(s,a,c,d,f,p);return _&&(v.Au=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=Ke(s);Ie(qa,"RemoteStore shutting down."),a.Ta.add(5),await eh(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}lv.provider={build:()=>new lv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="FirestoreClient";class zj{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Jn.UNAUTHENTICATED,this.clientId=fx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{Ie($o,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Ie($o,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=FE(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function hy(n,e){n.asyncQueue.verifyOperationInProgress(),Ie($o,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await n1(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function jS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await qj(n);Ie($o,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>DS(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>DS(e.remoteStore,s)),n._onlineComponents=e}async function qj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie($o,"Using user provided OfflineComponentProvider");try{await hy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;uc("Error using user provided cache. Falling back to memory cache: "+t),await hy(n,new Bm)}}else Ie($o,"Using default OfflineComponentProvider"),await hy(n,new Bj(void 0));return n._offlineComponents}async function E1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie($o,"Using user provided OnlineComponentProvider"),await jS(n,n._uninitializedComponentsProvider._online)):(Ie($o,"Using default OnlineComponentProvider"),await jS(n,new lv))),n._onlineComponents}function Hj(n){return E1(n).then(e=>e.syncEngine)}async function Gj(n){const e=await E1(n),t=e.eventManager;return t.onListen=Rj.bind(null,e.syncEngine),t.onUnlisten=Nj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ij.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Oj.bind(null,e.syncEngine),t}function $j(n,e,t={}){const i=new Oo;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,d,f,p){const _=new Fj({next:E=>{_.Cu(),c.enqueueAndForget(()=>vj(a,v)),E.fromCache&&f.source==="server"?p.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new bj(d,_,{includeMetadataChanges:!0,La:!0});return yj(a,v)}(await Gj(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(n,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kj(n,e,t,i){if(e===!0&&i===!0)throw new Ae(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FS(n){if(!Le.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function zS(n){if(Le.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function _c(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rp(n);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firestore.googleapis.com",qS=!0;class HS{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w1,this.ssl=qS}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:qS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=e1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<E6)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T1((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ip{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new XV;switch(i.type){case"firstParty":return new t3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=BS.get(t);i&&(Ie("ComponentProvider","Removing Datastore"),BS.delete(t),i.terminate())}(this),Promise.resolve()}}function Qj(n,e,t,i={}){var s;n=_c(n,Ip);const a=Vs(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(Qm(`https://${f}`),Ym("Firestore",!0)),c.host!==w1&&c.host!==f&&uc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:f,ssl:a,emulatorOptions:i});if(!Po(p,d)&&(n._setSettings(p),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=Jn.MOCK_USER;else{_=xv(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Jn(E)}n._authCredentials=new JV(new dx(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class Vi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ko(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vi(this.firestore,e,this._key)}}class ko extends Bs{constructor(e,t,i){super(e,t,Nx(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vi(this.firestore,null,new Le(e))}withConverter(e){return new ko(this.firestore,e,this._path)}}function ur(n,e,...t){if(n=At(n),b1("collection","path",e),n instanceof Ip){const i=Kt.fromString(e,...t);return zS(i),new ko(n,null,i)}{if(!(n instanceof Vi||n instanceof ko))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(e,...t));return zS(i),new ko(n.firestore,null,i)}}function Yj(n,e,...t){if(n=At(n),arguments.length===1&&(e=fx.newId()),b1("doc","path",e),n instanceof Ip){const i=Kt.fromString(e,...t);return FS(i),new Vi(n,null,new Le(i))}{if(!(n instanceof Vi||n instanceof ko))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(e,...t));return FS(i),new Vi(n.firestore,n instanceof ko?n.converter:null,new Le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="AsyncQueue";class $S{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new r1(this,"async_queue_retry"),this.ec=()=>{const i=dy();i&&Ie(GS,"Visibility state changed to "+i.visibilityState),this.C_.p_()},this.tc=e;const t=dy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=dy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Oo;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!xc(e))throw e;Ie(GS,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(i=>{throw this.Ju=i,this.Yu=!1,Ds("INTERNAL UNHANDLED ERROR: ",KS(i)),i}).then(i=>(this.Yu=!1,i))));return this.tc=t,t}enqueueAfterDelay(e,t,i){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const s=BE.createAndSchedule(this,e,t,i,a=>this.oc(a));return this.Hu.push(s),s}nc(){this.Ju&&qe(47125,{_c:KS(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function KS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class xp extends Ip{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new $S,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $S(e),this._firestoreClient=void 0,await e}}}function Wj(n,e){const t=Zm(),i=km,s=Fd(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=Iv("firestore");a&&Qj(s,...a)}return s}function C1(n){if(n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Xj(n),n._firestoreClient}function Xj(n){var e,t,i;const s=n._freezeSettings(),a=function(d,f,p,_){return new g3(d,f,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,T1(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new zj(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yc(Qn.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yc(Qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj=/^__.*__$/;class Zj{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jd(e,this.data,t,this.fieldTransforms)}}class S1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{hc:n})}}class QE{constructor(e,t,i,s,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new QE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:i,Ec:!1});return s.dc(e),s}Ac(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Tc({path:i,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Fm(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(A1(this.hc)&&Jj.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class eB{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Cp(e)}gc(e,t,i,s=!1){return new QE({hc:e,methodName:t,fc:i,path:$n.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Op(n){const e=n._freezeSettings(),t=Cp(n._databaseId);return new eB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tB(n,e,t,i,s,a={}){const c=n.gc(a.merge||a.mergeFields?2:0,e,t,s);YE("Data must be an object, but it was:",c,i);const d=I1(i,c);let f,p;if(a.merge)f=new Li(c.fieldMask),p=c.fieldTransforms;else if(a.mergeFields){const _=[];for(const v of a.mergeFields){const E=cv(e,v,t);if(!c.contains(E))throw new Ae(ue.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);N1(_,E)||_.push(E)}f=new Li(_),p=c.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=c.fieldTransforms;return new Zj(new Ti(d),f,p)}class kp extends GE{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kp}}function nB(n,e,t,i){const s=n.gc(1,e,t);YE("Data must be an object, but it was:",s,i);const a=[],c=Ti.empty();Wo(i,(f,p)=>{const _=WE(e,f,t);p=At(p);const v=s.Ac(_);if(p instanceof kp)a.push(_);else{const E=nh(p,v);E!=null&&(a.push(_),c.set(_,E))}});const d=new Li(a);return new S1(c,d,s.fieldTransforms)}function iB(n,e,t,i,s,a){const c=n.gc(1,e,t),d=[cv(e,i,t)],f=[s];if(a.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)d.push(cv(e,a[E])),f.push(a[E+1]);const p=[],_=Ti.empty();for(let E=d.length-1;E>=0;--E)if(!N1(p,d[E])){const R=d[E];let C=f[E];C=At(C);const k=c.Ac(R);if(C instanceof kp)p.push(R);else{const O=nh(C,k);O!=null&&(p.push(R),_.set(R,O))}}const v=new Li(p);return new S1(_,v,c.fieldTransforms)}function R1(n,e,t,i=!1){return nh(t,n.gc(i?4:3,e))}function nh(n,e){if(x1(n=At(n)))return YE("Unsupported field value:",e,n),I1(n,e);if(n instanceof GE)return function(i,s){if(!A1(s.hc))throw s.Vc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(i,s){const a=[];let c=0;for(const d of i){let f=nh(d,s.Rc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}}(n,e)}return function(i,s){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return j3(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Cn.fromDate(i);return{timestampValue:Um(s.serializer,a)}}if(i instanceof Cn){const a=new Cn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Um(s.serializer,a)}}if(i instanceof $E)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yc)return{bytesValue:Kx(s.serializer,i._byteString)};if(i instanceof Vi){const a=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw s.Vc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:OE(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof KE)return function(c,d){return{mapValue:{fields:{[Tx]:{stringValue:bx},[Dm]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.Vc("VectorValues must only contain numeric values.");return IE(d.serializer,p)})}}}}}}(i,s);throw s.Vc(`Unsupported field value: ${Rp(i)}`)}(n,e)}function I1(n,e){const t={};return px(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(n,(i,s)=>{const a=nh(s,e.Ic(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function x1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Cn||n instanceof $E||n instanceof yc||n instanceof Vi||n instanceof GE||n instanceof KE)}function YE(n,e,t){if(!x1(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const i=Rp(t);throw i==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+i)}}function cv(n,e,t){if((e=At(e))instanceof Np)return e._internalPath;if(typeof e=="string")return WE(n,e);throw Fm("Field path arguments must be of type string or ",n,!1,void 0,t)}const rB=new RegExp("[~\\*/\\[\\]]");function WE(n,e,t){if(e.search(rB)>=0)throw Fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Np(...e.split("."))._internalPath}catch{throw Fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fm(n,e,t,i,s){const a=i&&!i.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${i}`),c&&(f+=` in document ${s}`),f+=")"),new Ae(ue.INVALID_ARGUMENT,d+n+f)}function N1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sB extends XE{data(){return super.data()}}function Dp(n,e){return typeof e=="string"?WE(n,e):e instanceof Np?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JE{}class Pp extends JE{}function To(n,e,...t){let i=[];e instanceof JE&&i.push(e),i=i.concat(t),function(a){const c=a.filter(f=>f instanceof ZE).length,d=a.filter(f=>f instanceof Mp).length;if(c>1||c>0&&d>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Mp extends Pp{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Mp(e,t,i)}_apply(e){const t=this._parse(e);return k1(e._query,t),new Bs(e.firestore,e.converter,Jy(e._query,t))}_parse(e){const t=Op(e.firestore);return function(a,c,d,f,p,_,v){let E;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){YS(v,_);const C=[];for(const k of v)C.push(QS(f,a,k));E={arrayValue:{values:C}}}else E=QS(f,a,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||YS(v,_),E=R1(d,c,v,_==="in"||_==="not-in");return _n.create(p,_,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ka(n,e,t){const i=e,s=Dp("where",n);return Mp._create(s,i,t)}class ZE extends JE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ZE(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let c=s;const d=a.getFlattenedFilters();for(const f of d)k1(c,f),c=Jy(c,f)}(e._query,t),new Bs(e.firestore,e.converter,Jy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class e0 extends Pp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new e0(e,t)}_apply(e){const t=function(s,a,c){if(s.startAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nd(a,c)}(e._query,this._field,this._direction);return new Bs(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new Xo(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function aB(n,e="asc"){const t=e,i=Dp("orderBy",n);return e0._create(i,t)}class t0 extends Pp{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new t0(e,t,i)}_apply(e){const t=O1(e,this.type,this._docOrFields,this._inclusive);return new Bs(e.firestore,e.converter,function(s,a){return new Xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)}(e._query,t))}}function lB(...n){return t0._create("startAt",n,!0)}class n0 extends Pp{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n0(e,t,i)}_apply(e){const t=O1(e,this.type,this._docOrFields,this._inclusive);return new Bs(e.firestore,e.converter,function(s,a){return new Xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)}(e._query,t))}}function cB(...n){return n0._create("endAt",n,!0)}function O1(n,e,t,i){if(t[0]=At(t[0]),t[0]instanceof XE)return function(a,c,d,f,p){if(!f)throw new Ae(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const v of nc(a))if(v.field.isKeyField())_.push(Pm(c,f.key));else{const E=f.data.field(v.field);if(_p(E))throw new Ae(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const R=v.field.canonicalString();throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}_.push(E)}return new mc(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=Op(n.firestore);return function(c,d,f,p,_,v){const E=c.explicitOrderBy;if(_.length>E.length)throw new Ae(ue.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let C=0;C<_.length;C++){const k=_[C];if(E[C].field.isKeyField()){if(typeof k!="string")throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof k}`);if(!RE(c)&&k.indexOf("/")!==-1)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${k}' contains a slash.`);const O=c.path.child(Kt.fromString(k));if(!Le.isDocumentKey(O))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const H=new Le(O);R.push(Pm(d,H))}else{const O=R1(f,p,k);R.push(O)}}return new mc(R,v)}(n._query,n.firestore._databaseId,s,e,t,i)}}function QS(n,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RE(e)&&t.indexOf("/")!==-1)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Kt.fromString(t));if(!Le.isDocumentKey(i))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Pm(n,new Le(i))}if(t instanceof Vi)return Pm(n,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rp(t)}.`)}function YS(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k1(n,e){const t=function(s,a){for(const c of s)for(const d of c.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uB{convertValue(e,t="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Wo(e,(s,a)=>{i[s]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,s;const a=(s=(i=(t=e.fields)===null||t===void 0?void 0:t[Dm].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(c=>dn(c.doubleValue));return new KE(a)}convertGeoPoint(e){return new $E(dn(e.latitude),dn(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=yp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Rd(e));default:return null}}convertTimestamp(e){const t=zo(e);return new Cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Kt.fromString(e);xt(Zx(i),9688,{name:e});const s=new Id(i.get(1),i.get(3)),a=new Le(i.popFirst(5));return s.isEqual(t)||Ds(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hB extends XE{constructor(e,t,i,s,a,c){super(e,t,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Dp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class tm extends hB{data(e={}){return super.data(e)}}class fB{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new jf(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new tm(this._firestore,this._userDataWriter,i.key,i,new jf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(d=>{const f=new tm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new jf(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const f=new tm(s._firestore,s._userDataWriter,d.doc.key,d.doc,new jf(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:mB(d.type),doc:f,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}class pB extends uB{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vi(this.firestore,null,t)}}function vs(n){n=_c(n,Bs);const e=_c(n.firestore,xp),t=C1(e),i=new pB(e);return oB(n._query),$j(t,n._query).then(s=>new fB(e,i,n,s))}function WS(n,e,t,...i){n=_c(n,Vi);const s=_c(n.firestore,xp),a=Op(s);let c;return c=typeof(e=At(e))=="string"||e instanceof Np?iB(a,"updateDoc",n._key,e,t,i):nB(a,"updateDoc",n._key,e),P1(s,[c.toMutation(n._key,qr.exists(!0))])}function D1(n,e){const t=_c(n.firestore,xp),i=Yj(n),s=dB(n.converter,e);return P1(t,[tB(Op(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,qr.exists(!1))]).then(()=>i)}function P1(n,e){return function(i,s){const a=new Oo;return i.asyncQueue.enqueueAndForget(async()=>kj(await Hj(i),s,a)),a.promise}(C1(n),e)}(function(e,t=!0){(function(s){Rc=s})(Ko),Mo(new xs("firestore",(i,{instanceIdentifier:s,options:a})=>{const c=i.getProvider("app").getImmediate(),d=new xp(new ZV(i.getProvider("auth-internal")),new n3(c,i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(p.options.projectId,_)}(c,s),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Ji(JC,ZC,e),Ji(JC,ZC,"esm2017")})();let M1=null;const gB={apiKey:"AIzaSyAJPSCYXRziedHYjHQVky6cE1E_WRdFZsw",authDomain:"script-39a43.firebaseapp.com",projectId:"script-39a43",storageBucket:"script-39a43.firebasestorage.app",messagingSenderId:"29280693831",appId:"1:29280693831:web:3f8184059b57e783c1cb62",measurementId:"G-DXK7GQWZQF"},L1=[];let U1=null,uv=null;const dv=n=>{U1?n(uv):L1.push(n)};(async()=>{U1=await lR(gB),uv=Wj();for(const n of L1)n(uv)})();const hv=()=>{if(!window.usuarioLogado)return;const n=document.getElementById("chatNotification");if(!n){console.error("Elemento chatNotification não encontrado!");return}xo(ge(_e(),"chats"),e=>{let t=0;e.forEach(i=>{i.forEach(s=>{const a=s.val();a.remetente!==M1.uid&&a.lida===!1&&t++})}),t>0?(n.textContent=t>99?"99+":String(t),n.style.display="inline"):n.style.display="none"})};function _B(n){const e=new Date,t=e-n,i=24*60*60*1e3,s=60*1e3;return t<s?"Agora":t<i&&n.getDate()===e.getDate()?`Hoje às ${n.getHours()}:${n.getMinutes().toString().padStart(2,"0")}`:t<i*2&&n.getDate()===e.getDate()-1?`Ontem às ${n.getHours()}:${n.getMinutes().toString().padStart(2,"0")}`:`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()} às ${n.getHours()}:${n.getMinutes().toString().padStart(2,"0")}`}function od(n){return`${n.getHours()}:${n.getMinutes().toString().padStart(2,"0")}`}const fv=n=>{M1=n},rc=n=>`https://lh3.google.com/u/0/d/${n}=w700-h607-iv1?auditContext=forDisplay`,yB="https://ifai.render.app",V1=q.createContext(void 0),vB=({setShow:n,children:e})=>{const[t,i]=q.useState(!0),[s,a]=q.useState(null),c=q.useRef(null),d=q.useRef(null),f=R=>{c.current=R},p={respa:q.useRef(null)},_=()=>{Lo().signOut().then(()=>{fv(void 0),a(void 0)})},v=()=>{i(window.innerWidth<769)};q.useEffect(()=>(dv(R=>{d.current=R,Lo().onAuthStateChanged(C=>{C?vs(To(ur(d.current,"usuarios"),ka("uid","==",C.uid))).then(k=>{const O=k.docs[0].data();fv(O),a(C)}):a(void 0),n(!0)})}),v(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}),[]);const E={db:d,server:yB,mobile:t,usuarioLogado:s,setUsuarioLogado:a,logout:_,setNavigate:f,refs:p};return b.jsx(V1.Provider,{value:E,children:e})},gr=()=>{const n=q.useContext(V1);if(!n)throw new Error("useGlobalContext must be used within a GlobalProvider");return n};function EB(){const{usuarioLogado:n}=gr(),e=Us(),t=Ls();return q.useLayoutEffect(()=>{n===void 0&&t.pathname!="/login"&&t.pathname!="registro"?e("/login"):n&&(t.pathname=="/login"||t.pathname=="/registro")&&e("/")},[n,t]),b.jsx(b.Fragment,{})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="firebasestorage.googleapis.com",B1="storageBucket",TB=2*60*1e3,bB=10*60*1e3,wB=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Qr{constructor(e,t,i=0){super(fy(e),`Firebase Storage: ${t} (${fy(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function fy(n){return"storage/"+n}function i0(){const n="An unknown error occurred, please check the error payload for server response.";return new nn(Qt.UNKNOWN,n)}function CB(n){return new nn(Qt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function SB(n){return new nn(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AB(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nn(Qt.UNAUTHENTICATED,n)}function RB(){return new nn(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IB(n){return new nn(Qt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function F1(){return new nn(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function z1(){return new nn(Qt.CANCELED,"User canceled the upload/download.")}function xB(n){return new nn(Qt.INVALID_URL,"Invalid URL '"+n+"'.")}function NB(n){return new nn(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function OB(){return new nn(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+B1+"' property when initializing the app?")}function q1(){return new nn(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kB(){return new nn(Qt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function DB(){return new nn(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PB(n){return new nn(Qt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mv(n){return new nn(Qt.INVALID_ARGUMENT,n)}function H1(){return new nn(Qt.APP_DELETED,"The Firebase app was deleted.")}function MB(n){return new nn(Qt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ad(n,e){return new nn(Qt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Fu(n){throw new nn(Qt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Ui.makeFromUrl(e,t)}catch{return new Ui(e,"")}if(i.path==="")return i;throw NB(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function a(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+s+c,"i"),f={bucket:1,path:3};function p(F){F.path_=decodeURIComponent(F.path)}const _="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",R=new RegExp(`^https?://${v}/${_}/b/${s}/o${E}`,"i"),C={bucket:1,path:3},k=t===j1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",H=new RegExp(`^https?://${k}/${s}/${O}`,"i"),D=[{regex:d,indices:f,postModify:a},{regex:R,indices:C,postModify:p},{regex:H,indices:{bucket:1,path:2},postModify:p}];for(let F=0;F<D.length;F++){const U=D[F],Z=U.regex.exec(e);if(Z){const x=Z[U.indices.bucket];let A=Z[U.indices.path];A||(A=""),i=new Ui(x,A),U.postModify(i);break}}if(i==null)throw xB(e);return i}}class LB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(n,e,t){let i=1,s=null,a=null,c=!1,d=0;function f(){return d===2}let p=!1;function _(...O){p||(p=!0,e.apply(null,O))}function v(O){s=setTimeout(()=>{s=null,n(R,f())},O)}function E(){a&&clearTimeout(a)}function R(O,...H){if(p){E();return}if(O){E(),_.call(null,O,...H);return}if(f()||c){E(),_.call(null,O,...H);return}i<64&&(i*=2);let D;d===1?(d=2,D=0):D=(i+Math.random())*1e3,v(D)}let C=!1;function k(O){C||(C=!0,E(),!p&&(s!==null?(O||(d=2),clearTimeout(s),v(0)):O||(d=1)))}return v(0),a=setTimeout(()=>{c=!0,k(!0)},t),k}function VB(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(n){return n!==void 0}function BB(n){return typeof n=="function"}function FB(n){return typeof n=="object"&&!Array.isArray(n)}function Lp(n){return typeof n=="string"||n instanceof String}function XS(n){return r0()&&n instanceof Blob}function r0(){return typeof Blob<"u"}function JS(n,e,t,i){if(i<e)throw mv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw mv(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function G1(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var Ma;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ma||(Ma={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,t,i,s,a,c,d,f,p,_,v,E=!0,R=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=v,this.retry=E,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,k)=>{this.resolve_=C,this.reject_=k,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Bf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const c=d=>{const f=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const d=a.getErrorCode()===Ma.NO_ERROR,f=a.getStatus();if(!d||$1(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Ma.ABORT;i(!1,new Bf(!1,null,_));return}const p=this.successCodes_.indexOf(f)!==-1;i(!0,new Bf(p,a))})},t=(i,s)=>{const a=this.resolve_,c=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());jB(f)?a(f):a()}catch(f){c(f)}else if(d!==null){const f=i0();f.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,f)):c(f)}else if(s.canceled){const f=this.appDelete_?H1():z1();c(f)}else{const f=F1();c(f)}};this.canceled_?t(!1,new Bf(!1,null,!0)):this.backoffId_=UB(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&VB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function qB(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function HB(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function GB(n,e){e&&(n["X-Firebase-GMPID"]=e)}function $B(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function KB(n,e,t,i,s,a,c=!0,d=!1){const f=G1(n.urlParams),p=n.url+f,_=Object.assign({},n.headers);return GB(_,e),qB(_,t),HB(_,a),$B(_,i),new zB(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YB(...n){const e=QB();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(r0())return new Blob(n);throw new nn(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WB(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(n){if(typeof atob>"u")throw PB("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class my{constructor(e,t){this.data=e,this.contentType=t||null}}function JB(n,e){switch(n){case jr.RAW:return new my(K1(e));case jr.BASE64:case jr.BASE64URL:return new my(Q1(n,e));case jr.DATA_URL:return new my(eF(e),tF(e))}throw i0()}function K1(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=i,c=n.charCodeAt(++t);i=65536|(a&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function ZB(n){let e;try{e=decodeURIComponent(n)}catch{throw ad(jr.DATA_URL,"Malformed data URL.")}return K1(e)}function Q1(n,e){switch(n){case jr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw ad(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case jr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw ad(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=XB(e)}catch(s){throw s.message.includes("polyfill")?s:ad(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}class Y1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ad(jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=nF(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function eF(n){const e=new Y1(n);return e.base64?Q1(jr.BASE64,e.rest):ZB(e.rest)}function tF(n){return new Y1(n).contentType}function nF(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t){let i=0,s="";XS(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(XS(this.data_)){const i=this.data_,s=WB(i,e,t);return s===null?null:new Es(s)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Es(i,!0)}}static getBlob(...e){if(r0()){const t=e.map(i=>i instanceof Es?i.data_:i);return new Es(YB.apply(null,t))}else{const t=e.map(c=>Lp(c)?JB(jr.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let a=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)s[a++]=c[d]}),new Es(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n){let e;try{e=JSON.parse(n)}catch{return null}return FB(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function rF(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function X1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(n,e){return e}class ui{constructor(e,t,i,s){this.server=e,this.local=t||e,this.writable=!!i,this.xform=s||sF}}let Ff=null;function oF(n){return!Lp(n)||n.length<2?n:X1(n)}function s0(){if(Ff)return Ff;const n=[];n.push(new ui("bucket")),n.push(new ui("generation")),n.push(new ui("metageneration")),n.push(new ui("name","fullPath",!0));function e(a,c){return oF(c)}const t=new ui("name");t.xform=e,n.push(t);function i(a,c){return c!==void 0?Number(c):c}const s=new ui("size");return s.xform=i,n.push(s),n.push(new ui("timeCreated")),n.push(new ui("updated")),n.push(new ui("md5Hash",null,!0)),n.push(new ui("cacheControl",null,!0)),n.push(new ui("contentDisposition",null,!0)),n.push(new ui("contentEncoding",null,!0)),n.push(new ui("contentLanguage",null,!0)),n.push(new ui("contentType",null,!0)),n.push(new ui("metadata","customMetadata",!0)),Ff=n,Ff}function aF(n,e){function t(){const i=n.bucket,s=n.fullPath,a=new Ui(i,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function lF(n,e,t){const i={};i.type="file";const s=t.length;for(let a=0;a<s;a++){const c=t[a];i[c.local]=c.xform(i,e[c.server])}return aF(i,n),i}function J1(n,e,t){const i=W1(e);return i===null?null:lF(n,i,t)}function cF(n,e,t,i){const s=W1(e);if(s===null||!Lp(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const c=encodeURIComponent;return a.split(",").map(p=>{const _=n.bucket,v=n.fullPath,E="/b/"+c(_)+"/o/"+c(v),R=Oc(E,t,i),C=G1({alt:"media",token:p});return R+C})[0]}function Z1(n,e){const t={},i=e.length;for(let s=0;s<i;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Ja{constructor(e,t,i,s){this.url=e,this.method=t,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(n){if(!n)throw i0()}function o0(n,e){function t(i,s){const a=J1(n,s,e);return Rs(a!==null),a}return t}function uF(n,e){function t(i,s){const a=J1(n,s,e);return Rs(a!==null),cF(a,s,n.host,n._protocol)}return t}function ih(n){function e(t,i){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=RB():s=AB():t.getStatus()===402?s=SB(n.bucket):t.getStatus()===403?s=IB(n.path):s=i,s.status=t.getStatus(),s.serverResponse=i.serverResponse,s}return e}function a0(n){const e=ih(n);function t(i,s){let a=e(i,s);return i.getStatus()===404&&(a=CB(n.path)),a.serverResponse=s.serverResponse,a}return t}function dF(n,e,t){const i=e.fullServerUrl(),s=Oc(i,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,d=new Ja(s,a,o0(n,t),c);return d.errorHandler=a0(e),d}function hF(n,e,t){const i=e.fullServerUrl(),s=Oc(i,n.host,n._protocol),a="GET",c=n.maxOperationRetryTime,d=new Ja(s,a,uF(n,t),c);return d.errorHandler=a0(e),d}function fF(n,e){const t=e.fullServerUrl(),i=Oc(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function c(f,p){}const d=new Ja(i,s,c,a);return d.successCodes=[200,204],d.errorHandler=a0(e),d}function mF(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function eN(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=mF(null,e)),i}function tN(n,e,t,i,s){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let D="";for(let F=0;F<2;F++)D=D+Math.random().toString().slice(2);return D}const f=d();c["Content-Type"]="multipart/related; boundary="+f;const p=eN(e,i,s),_=Z1(p,t),v="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+f+"--",R=Es.getBlob(v,i,E);if(R===null)throw q1();const C={name:p.fullPath},k=Oc(a,n.host,n._protocol),O="POST",H=n.maxUploadRetryTime,j=new Ja(k,O,o0(n,t),H);return j.urlParams=C,j.headers=c,j.body=R.uploadData(),j.errorHandler=ih(e),j}class zm{constructor(e,t,i,s){this.current=e,this.total=t,this.finalized=!!i,this.metadata=s||null}}function l0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Rs(!1)}return Rs(!!t&&(e||["active"]).indexOf(t)!==-1),t}function pF(n,e,t,i,s){const a=e.bucketOnlyServerUrl(),c=eN(e,i,s),d={name:c.fullPath},f=Oc(a,n.host,n._protocol),p="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},v=Z1(c,t),E=n.maxUploadRetryTime;function R(k){l0(k);let O;try{O=k.getResponseHeader("X-Goog-Upload-URL")}catch{Rs(!1)}return Rs(Lp(O)),O}const C=new Ja(f,p,R,E);return C.urlParams=d,C.headers=_,C.body=v,C.errorHandler=ih(e),C}function gF(n,e,t,i){const s={"X-Goog-Upload-Command":"query"};function a(p){const _=l0(p,["active","final"]);let v=null;try{v=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Rs(!1)}v||Rs(!1);const E=Number(v);return Rs(!isNaN(E)),new zm(E,i.size(),_==="final")}const c="POST",d=n.maxUploadRetryTime,f=new Ja(t,c,a,d);return f.headers=s,f.errorHandler=ih(e),f}const ZS=256*1024;function _F(n,e,t,i,s,a,c,d){const f=new zm(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw kB();const p=f.total-f.current;let _=p;s>0&&(_=Math.min(_,s));const v=f.current,E=v+_;let R="";_===0?R="finalize":p===_?R="upload, finalize":R="upload";const C={"X-Goog-Upload-Command":R,"X-Goog-Upload-Offset":`${f.current}`},k=i.slice(v,E);if(k===null)throw q1();function O(F,U){const Z=l0(F,["active","final"]),x=f.current+_,A=i.size();let N;return Z==="final"?N=o0(e,a)(F,U):N=null,new zm(x,A,Z==="final",N)}const H="POST",j=e.maxUploadRetryTime,D=new Ja(t,H,O,j);return D.headers=C,D.body=k.uploadData(),D.progressCallback=d||null,D.errorHandler=ih(n),D}const vi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function py(n){switch(n){case"running":case"pausing":case"canceling":return vi.RUNNING;case"paused":return vi.PAUSED;case"success":return vi.SUCCESS;case"canceled":return vi.CANCELED;case"error":return vi.ERROR;default:return vi.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,t,i){if(BB(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class vF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ma.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ma.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ma.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,s,a){if(this.sent_)throw Fu("cannot .send() more than once");if(Vs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class EF extends vF{initXhr(){this.xhr_.responseType="text"}}function bo(){return new EF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=s0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Qt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if($1(s.status,[]))if(a)s=F1();else{this.sleepTime=Math.max(this.sleepTime*2,wB),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Qt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,a)=>{this._resolve=s,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=pF(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,bo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const s=gF(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(s,bo,t,i);this._request=a,a.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ZS*this._chunkMultiplier,t=new zm(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,a)=>{let c;try{c=_F(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){this._error=f,this._transition("error");return}const d=this._ref.storage._makeRequest(c,bo,s,a,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ZS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=dF(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,bo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=tN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,bo,e,t);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=z1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=py(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,s){const a=new yF(t||void 0,i||void 0,s||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(py(this._state)){case vi.SUCCESS:ql(this._resolve.bind(null,this.snapshot))();break;case vi.CANCELED:case vi.ERROR:const t=this._reject;ql(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(py(this._state)){case vi.RUNNING:case vi.PAUSED:e.next&&ql(e.next.bind(e,this.snapshot))();break;case vi.SUCCESS:e.complete&&ql(e.complete.bind(e))();break;case vi.CANCELED:case vi.ERROR:e.error&&ql(e.error.bind(e,this._error))();break;default:e.error&&ql(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this._service=e,t instanceof Ui?this._location=t:this._location=Ui.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ha(e,t)}get root(){const e=new Ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return X1(this._location.path)}get storage(){return this._service}get parent(){const e=iF(this._location.path);if(e===null)return null;const t=new Ui(this._location.bucket,e);return new Ha(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw MB(e)}}function bF(n,e,t){n._throwIfRoot("uploadBytes");const i=tN(n.storage,n._location,s0(),new Es(e,!0),t);return n.storage.makeRequestWithTokens(i,bo).then(s=>({metadata:s,ref:n}))}function wF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new TF(n,new Es(e),t)}function CF(n){n._throwIfRoot("getDownloadURL");const e=hF(n.storage,n._location,s0());return n.storage.makeRequestWithTokens(e,bo).then(t=>{if(t===null)throw DB();return t})}function SF(n){n._throwIfRoot("deleteObject");const e=fF(n.storage,n._location);return n.storage.makeRequestWithTokens(e,bo)}function AF(n,e){const t=rF(n._location.path,e),i=new Ui(n._location.bucket,t);return new Ha(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(n){return/^[A-Za-z]+:\/\//.test(n)}function IF(n,e){return new Ha(n,e)}function nN(n,e){if(n instanceof c0){const t=n;if(t._bucket==null)throw OB();const i=new Ha(t,t._bucket);return e!=null?nN(i,e):i}else return e!==void 0?AF(n,e):n}function xF(n,e){if(e&&RF(e)){if(n instanceof c0)return IF(n,e);throw mv("To use ref(service, url), the first argument must be a Storage instance.")}else return nN(n,e)}function eA(n,e){const t=e==null?void 0:e[B1];return t==null?null:Ui.makeFromBucketSpec(t,n)}function NF(n,e,t,i={}){n.host=`${e}:${t}`;const s=Vs(e);s&&(Qm(`https://${n.host}`),Ym("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:xv(a,n.app.options.projectId))}class c0{constructor(e,t,i,s,a,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=c,this._bucket=null,this._host=j1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TB,this._maxUploadRetryTime=bB,this._requests=new Set,s!=null?this._bucket=Ui.makeFromBucketSpec(s,this._host):this._bucket=eA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ui.makeFromBucketSpec(this._url,e):this._bucket=eA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ei(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ha(this,e)}_makeRequest(e,t,i,s,a=!0){if(this._deleted)return new LB(H1());{const c=KB(e,this._appId,i,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const tA="@firebase/storage",nA="0.13.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="storage";function ld(n,e,t){return n=At(n),bF(n,e,t)}function cd(n,e,t){return n=At(n),wF(n,e,t)}function Ur(n){return n=At(n),CF(n)}function Xl(n){return n=At(n),SF(n)}function Zn(n,e){return n=At(n),xF(n,e)}function ei(n=Zm(),e){n=At(n);const i=Fd(n,iN).getImmediate({identifier:e}),s=Iv("storage");return s&&OF(i,...s),i}function OF(n,e,t,i={}){NF(n,e,t,i)}function kF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new c0(t,i,s,e,Ko)}function DF(){Mo(new xs(iN,kF,"PUBLIC").setMultipleInstances(!0)),Ji(tA,nA,""),Ji(tA,nA,"esm2017")}DF();const ni="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAOVBMVEWzs7P///+vr6/j4+Otra3u7u7Y2Njm5ua3t7f7+/vAwMC6urrU1NTz8/PQ0NDp6enKysrExMTc3NzfYYiMAAAEUUlEQVR4nO2dC4KqMAxFISA/QWH2v9gH4vj8ANo22NvOPSvwWJo0aQtJQgghhBBCCCGEEEIIIYQQQgghX0Uu+P4VOyLF+VxmRd9Eq1mlv3TZkEQpmd5z7uMbybxLH8mayBwlS5/pIhvI04thmtZtTDPyuGA4UkQ0jsuGaX3Kff8yHWTNcJyPEcQcyav2OZbeUwY+HSXZ1LtwClhRqtc8scAh1GGUY/mJ30QfpKL8fOo3koWnmPe1geCYOI6hOX78gN4YQlKUxmwAZwJK/9Jb+I38hKIoSwvtmBTtBceQGoKiDPaCadoGEG6q9xpb4Od+ebsMfYNvgXcYLWQWOYAPouMzOtH7dthEzu6GNfQgNu6CU/vGt8Y6GkOIPYgKs3Di5NtjFSl0DDvYlY1zLvzl6NtkjZXGrzmwazeHJfcjZ1BDMa/rV0CNpmrTME0r3y7LiJpgOvh2WUYpG06AhhpFwx9MQ7VkAdsgjt9QpbD4K4ag85CGNLwDtMynoQGgaxrFfBi/IWinJn5DxZU3aN87fsP102uxGMZf4+c2BzCCMhQ9w8a3yzKKvTZUw4OaIWZbX2Lvl0qr5jfWFhXewlRnc/Q/cKdO3M9gPIMWbBRX3VfAtkm1dn/vwYqnimH0BlYFlesLgvVq9jDE6mQoLrpvYFVQ2tlwAizSqKfDtMbKFonTweBF4Laf1A3RimC9kyZX8A6cKLb0L2DlignF8veCb58FdGMN4q1L1ZnYAQomquEUrTicsb3PtQBcLrySqwUb3yaraG3NIIaZGaVKH/nWzMtrWqzAKiqe0FjZgJ6lubLwJhpT8Bakj7jvIWKV9q84J8UDWOH7iusKHDrMzLglRewwM+OUFNHDzIxL/xs9zFyxT4r4YWbGvrUIufW7hO2hDKydik3sOhqghf0idou3AFLhf2ye04Ce0QnzeBpKHP3F+BUute9fbExu2FzE7K5tYra0wW3NbGByAAW1fbiNQaV4DizKzBh0+ZGba1t8PoQBRpkJg3QRRlX4jFHrNITK/gWzo3xBvTNxxnTtHUxleMO0HxVS5XQhNy6fAssYNn3hoBTtXp0Y0MImt+zsH3z/8I+x3n+qg3hBu+kbkh9p4Z9UaRw3Zg7Qwyh5r3AaIwO8LjMjVaF0FLpsAL97MQ6f5jnorqhyJEmRRv8QdFc0CcZQigzZDgf1LxyKIfH7ESzJq9MOh/QfqMt2SPw8suOzWexwF2iRLjsdvzuY0+CVez2bK9Tn9lsxdgos3xq8Z8uy3/tzJuOf2H978J4o+/1mpcixVT6vbkW9zy3hcep9LbC8R39pJ9vfbPJAqfnVljGp7531bMi0go5I6ze0rKOzJSdaFcMedO7TUQZgv4nW1VD/WqE2jvtWe1yz18X1BEcAho4TkYb+oSENaegfGtKQhv6hIQ1p6B8a0pCG/qEhDeM3TPoyw8b9wpug4ypICCGEEEIIIYQQQgghhBBCCPk7/AOT7UbJ5bD1AAAAAABJRU5ErkJggg==",nm="/assets/default_comunidade-BJpLMTtg.png";function rh({showPopup:n}){const[e,t]=q.useState({show:!1}),i=Us(),s=c=>{t(typeof c=="string"?{message:c,show:!0}:{...c,show:!0})},a=()=>{e.redirect&&i(e.redirectUrl),t({show:!1})};return q.useEffect(()=>{n.current=s},[n]),b.jsx("div",{id:"errorPopupContainer",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:2e3,padding:"1rem",boxSizing:"border-box",display:e.show?"flex":"none"},children:b.jsxs("div",{id:"errorPopup",style:{backgroundColor:"#fff",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",maxWidth:"400px",width:"100%",margin:"auto"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[b.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"2.5rem",height:"2.5rem",backgroundColor:"#16a34a",borderRadius:"0.375rem",color:"#fff",fontSize:"1.5rem",fontWeight:"bold"},"aria-hidden":"true",children:b.jsx("i",{className:"fa-solid fa-xmark","aria-hidden":"true"})}),b.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#374151"},children:e.title})]}),b.jsx("p",{id:"errorPopupMessage",style:{marginBottom:"1.5rem",color:"#4b5563",lineHeight:"1.6"},children:e.message}),b.jsx("button",{onClick:a,style:{width:"100%",padding:"0.75rem 1.5rem",backgroundColor:"#15803d",color:"#fff",fontWeight:"600",border:"none",borderRadius:"0.375rem",cursor:"pointer",transition:"background-color 0.2s ease-in-out, transform 0.2s ease-in-out"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#166534",c.currentTarget.style.transform="scale(1.02)"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#15803d",c.currentTarget.style.transform="scale(1)"},onFocus:c=>{c.currentTarget.style.boxShadow="0 0 0 3px rgba(21, 128, 61, 0.5)"},onBlur:c=>{c.currentTarget.style.boxShadow="none"},children:"Fechar"})]})})}function rN({userPerfilUid:n}){const{db:e,usuarioLogado:t}=gr(),[i,s]=q.useState([]);return q.useEffect(()=>{t&&n!=""&&vs(n?To(ur(e.current,"posts"),ka("userUid","==",n)):ur(e.current,"posts")).then(a=>{s(a.docs.map(c=>{const d=c.data();return{...d,image:rc(d.image)}}))})},[t,n]),b.jsx("div",{id:"feed",children:i.map((a,c)=>b.jsxs("div",{className:"post",children:[b.jsx("img",{className:"image",src:a.image}),b.jsx("div",{className:"text",children:a.description})]},c))})}const PF=(n,e)=>b.jsxs("select",{id:"filtroOrdenacao",value:n,onChange:t=>e(t.target.value),style:{width:"100%",padding:"10px",marginBottom:"10px"},children:[b.jsx("option",{value:"maisNovos",children:"Mais Novos"}),b.jsx("option",{value:"maisAntigos",children:"Mais Antigos"}),b.jsx("option",{value:"maisMembros",children:"Mais Membros"}),b.jsx("option",{value:"menosMembros",children:"Menos Membros"})]});function MF(){const n=Us(),e=q.useRef(null),[t,i]=q.useState(!1),s={createButton:q.useRef(null),listaComunidades:q.useRef(null)},a=()=>{i(!0),s.createButton.current.style.display="none"},c=()=>{const F=document.getElementById("containerFormComunidade");F&&F.remove();const U=document.querySelector('button[onclick="mostrarFormularioCriarComunidade()"]');U.style.display="inline-block"},d=()=>{const F=document.getElementById("nomeComunidade").value.trim(),U=document.getElementById("descricaoComunidade").value.trim(),x=document.getElementById("imagemComunidade").files[0],A=document.getElementById("tipoPrivacidade").value;if(!F){e.current("A comunidade deve ter um nome.");return}if(F.length<3||F.length>50){e.current("O nome da comunidade deve ter entre 3 e 50 caracteres.");return}if(U.length>200){e.current("A descrição deve ter no máximo 200 caracteres.");return}const N=Lo().currentUser;if(!N){e.current("Você não está autenticado.");return}const L=cr(ge(_e(),"comunidades")).key;function V(G){const P=Date.now(),vt={nome:F,descricao:U,imagem:G,privacidade:A,criador:N.uid,membros:{[N.uid]:!0},timestamp:P},Xe={};Xe[`comunidades/${L}`]=vt,Xe[`usuarios/${N.uid}/comunidades/${L}`]=!0,Sd(ge(_e()),Xe).then(()=>{console.log("Comunidade criada com sucesso!"),c()}).catch(oe=>{console.error("Erro ao criar comunidade:",oe),e.current("Erro ao criar comunidade: "+oe.message)})}if(x){const G=x.name.split(".").pop(),P=`comunidades/${L}/imagem.${G}`;ld(Zn(ei(),P),x).then(vt=>Ur(vt.ref)).then(vt=>{V(vt)}).catch(vt=>{console.error("Erro ao fazer upload da imagem:",vt),e.current("Erro ao enviar imagem. A comunidade será criada com imagem padrão."),V(nm)})}else V(nm)},f=F=>F.membros?Object.keys(F.membros).length:0;q.useEffect(()=>{window.navigate=n},[]);const[p,_]=q.useState([]),[v,E]=q.useState(!1),[R,C]=q.useState(""),[k,O]=q.useState("maisNovos");q.useEffect(()=>{const F=_e(),U=ge(F,"comunidades"),Z=xo(U,x=>{const A=[];switch(x.forEach(N=>{const L=N.val();L.id=N.key,L.membroCount=f(L);const V=R.toLowerCase().trim();(V===""||L.nome.toLowerCase().includes(V)||L.descricao&&L.descricao.toLowerCase().includes(V))&&A.push(L)}),k){case"maisNovos":A.sort((N,L)=>(L.timestamp||0)-(N.timestamp||0));break;case"maisAntigos":A.sort((N,L)=>(N.timestamp||0)-(L.timestamp||0));break;case"maisMembros":A.sort((N,L)=>L.membroCount-N.membroCount);break;case"menosMembros":A.sort((N,L)=>N.membroCount-L.membroCount);break}_(A)});return()=>Z()},[R,k]);const H=F=>{if(window.confirm("Tem certeza que deseja excluir esta comunidade?")){const U=_e();Gt(ge(U,"comunidades/"+F)).then(()=>{console.log("Comunidade excluída")}).catch(Z=>{console.error("Erro ao excluir comunidade:",Z)})}},j=Lo().currentUser,D=v?p:p.slice(0,10);return b.jsxs(b.Fragment,{children:[b.jsxs("main",{id:"home",className:"page",children:[b.jsx("div",{id:"novacomunidade",children:t?b.jsx("div",{id:"containerFormComunidade",children:b.jsxs("div",{id:"formCriarComunidade",style:{border:"1px solid #ccc",padding:"20px",marginTop:"10px",borderRadius:"5px"},children:[b.jsx("h3",{children:"Criar Nova Comunidade"}),b.jsxs("form",{id:"comunidadeForm",children:[b.jsxs("div",{style:{marginBottom:"15px"},children:[b.jsx("label",{children:"Nome da comunidade:"}),b.jsx("input",{type:"text",id:"nomeComunidade",required:!0,style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),b.jsxs("div",{style:{marginBottom:"15px"},children:[b.jsx("label",{children:"Descrição:"}),b.jsx("textarea",{id:"descricaoComunidade",rows:3,style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),b.jsxs("div",{style:{marginBottom:"15px"},children:[b.jsx("label",{children:"Imagem da comunidade (opcional):"}),b.jsx("input",{type:"file",id:"imagemComunidade",accept:"image/*",style:{width:"100%",padding:"8px",marginTop:"5px"}})]}),b.jsxs("div",{style:{marginBottom:"15px"},children:[b.jsx("label",{children:"Tipo de privacidade:"}),b.jsxs("select",{id:"tipoPrivacidade",style:{width:"100%",padding:"8px",marginTop:"5px"},children:[b.jsx("option",{value:"publica",children:"Pública"}),b.jsx("option",{value:"privada",children:"Privada"})]})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"spaceBetween"},children:[b.jsx("button",{type:"button",onClick:c,style:{padding:"8px 15px"},children:"Cancelar"}),b.jsx("button",{type:"button",onClick:d,style:{padding:"8px 15px",backgroundColor:"#4CAF50",color:"white",border:"none"},children:"Criar"})]})]})]})}):b.jsx(b.Fragment,{})}),b.jsx("section",{id:"comunidades",children:b.jsxs("div",{children:[b.jsxs("div",{children:[b.jsx("input",{type:"text",placeholder:"Pesquisar comunidades...",value:R,onChange:F=>C(F.target.value),style:{width:"calc(100% - 42px",padding:"10px",marginBottom:"10px"}}),b.jsx("button",{id:"btn-show-form-comunity",ref:s.createButton,onClick:a,children:b.jsx("i",{className:"fa-solid fa-plus"})})]}),PF(k,O),b.jsx("div",{id:"comunity-list",ref:s.listaComunidades,children:D.length===0?b.jsx("p",{children:"Nenhuma comunidade encontrada."}):D.map(F=>b.jsxs(Mn,{to:"/comunidade?id="+F.id,className:"comunity-item",children:[b.jsx("img",{src:F.banner||ni,alt:F.nome,className:"banner"}),b.jsx("img",{className:"photo",src:F.imagem||nm,alt:F.nome}),b.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:F.nome}),b.jsxs("div",{style:{color:"#666",fontSize:"0.8em"},children:["Membros: ",F.membroCount]}),j&&F.criador===j.uid&&b.jsx("button",{style:{marginTop:"10px"},onClick:U=>{U.stopPropagation(),H(F.id)},children:"Excluir"})]},F.id))}),p.length>10&&b.jsx("button",{style:{marginTop:"10px",width:"100%"},onClick:()=>E(!v),children:v?"Mostrar menos":"Mostrar todas as comunidades"})]})}),b.jsx(rN,{userPerfilUid:null})]}),b.jsx(rh,{showPopup:e})]})}function LF(){const{db:n,usuarioLogado:e}=gr(),t=Us(),[i,s]=q.useState([]),[a,c]=q.useState([]),[d,f]=q.useState(0),[p,_]=q.useState(null),v={searchAlunos:q.useRef(null)},E=()=>{It(ge(_e(),`friends/${e.uid}`)).then(async D=>{const F=[];for(const U in D.val()){const x=(await vs(To(ur(n.current,"usuarios"),ka("uid","==",U)))).docs[0].data();F.push({fotoPerfil:x.fotoPerfil?rc(x.fotoPerfil):ni,nome:x.nome,id:U})}s(F)}),xo(ge(_e(),`friendRequests/${e.uid}`),async D=>{if(D.exists()){const F=[];for(const U in D.val()){const x=(await vs(To(ur(n.current,"usuarios"),ka("uid","==",U)))).docs[0].data();F.push({...x,fotoPerfil:rc(x.fotoPerfil)})}c(F)}})},R=async()=>{const D=document.getElementById("searchFriendsInput").value.toLowerCase().trim();if(D===""){E();return}It(ge(_e(),`friends/${e.uid}`)).then(async F=>{const U=[];for(const Z in F.val()){const x=await new Promise((A,N)=>{It(ge(_e(),"usuarios/"+Z)).then(L=>{const V=L.val();V.nome.toLowerCase().includes(D)&&A({fotoPerfil:V.fotoPerfil?V.fotoPerfil:ni,nome:V.nome,id:V.identificador}),A(null)})});x&&U.push(x)}s(U)})};function C(D){if(!e)return;const F=ur(n.current,"usuarios");vs(To(F,ka("uid","in",[e.uid,D]))).then(U=>{U.forEach(Z=>{WS(Z.ref,{nFriends:Z.data().nFriends+1})})}),Gt(ge(_e(),`friends/${e.uid}/${D}`)),Gt(ge(_e(),`friends/${D}/${e.uid}`)).then(()=>{E()})}const k=()=>{if(!e){t("/login");return}const D=v.searchAlunos.current.value.toLowerCase().trim();if(D===""){_(null);return}vs(To(ur(n.current,"usuarios"),aB("name_lower"),lB(D),cB(D+""))).then(async F=>{const U=[];for(const x of F.docs){const A=x.data(),N=A.uid;if(N!=e.uid){var Z="";(await It(ge(_e(),`friends/${e.uid}/${N}`))).exists()?Z="friend":(await It(ge(_e(),`friendRequests/${N}/${e.uid}`))).exists()?Z="sended_request":Z=(await It(ge(_e(),`friendRequests/${e.uid}/${N}`))).exists()?"received_request":"unsolicited",U.push({fotoPerfil:A.fotoPerfil?rc(A.fotoPerfil):ni,nome:A.nome,mode:Z,id:N})}}_(U)})};function O(D){e&&Gt(ge(_e(),`friendRequests/${e.uid}/${D}`)).then(()=>{E()})}function H(D){e&&It(ge(_e(),`friendRequests/${D}/${e.uid}`)).then(F=>{F.exists()||hi(ge(_e(),`friendRequests/${D}/${e.uid}`),!0).then(()=>{E()})})}function j(D,F=null){if(!e)return;hi(ge(_e(),`friends/${e.uid}/${D}`),!0),hi(ge(_e(),`friends/${D}/${e.uid}`),!0);const U=ur(n.current,"usuarios");vs(To(U,ka("uid","in",[e.uid,D]))).then(Z=>{Z.forEach(x=>{WS(x.ref,{nFriends:x.data().nFriends+1})})}),Gt(ge(_e(),`friendRequests/${e.uid}/${D}`)).then(()=>{E(),F&&(F.innerHTML=`<strong>${F.querySelector("strong").textContent}</strong> <span><b>(Amigos)</b></span>`)})}return q.useEffect(()=>{const F=new URLSearchParams(location.search).get("page");e&&F&&["0","1","2"].includes(F)?(E(),f(Number(F))):F||t("/amigos?page=0")},[e,location.search]),b.jsx(b.Fragment,{children:b.jsxs("main",{id:"amigos-page",className:"page",children:[b.jsxs("div",{id:"btns",children:[b.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=0"),children:"amigos"}),b.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=1"),children:"pedidos"}),b.jsx("div",{className:"btn-type",onClick:()=>t("/amigos?page=2"),children:"pesquisar"})]}),b.jsx("div",{id:"amigos-division"}),b.jsxs("div",{id:"mainlists",children:[b.jsxs("section",{id:"lista-amigos",style:{display:d===0?"block":"none"},children:[b.jsx("h2",{children:"Meus Amigos"}),b.jsxs("div",{className:"search-box",style:{display:"flex",alignItems:"center",gap:"8px"},children:[b.jsx("input",{type:"text",id:"searchFriendsInput",placeholder:"Pesquisar amigo",style:{padding:"5px",flex:1}}),b.jsx("button",{id:"searchButton",onClick:R,children:b.jsx("i",{className:"fas fa-search","aria-hidden":"true"})})]}),b.jsx("br",{}),b.jsx("br",{}),b.jsx("div",{id:"friendsList",style:{minHeight:"100px"},children:i.map((D,F)=>b.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[b.jsx("img",{src:D.fotoPerfil,alt:"Foto de "+D.nome,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}}),b.jsx("strong",{children:D.nome}),b.jsx("button",{id:"go-to-friend-perfil",onClick:()=>t(`/perfil?id=${D.id}`),children:"Ver Perfil"}),b.jsx("button",{id:"remove-friend",onClick:()=>C(D.id),children:"Remover"})]},F))})]}),b.jsxs("section",{id:"pedidos",style:{display:d===1?"block":"none"},children:[b.jsx("div",{className:"fqtop",style:{padding:"10px 0"},children:b.jsx("h2",{children:"Pedidos de Amizade"})}),b.jsx("div",{id:"friendRequests",className:"PA",style:{minHeight:"50px"},children:a.map((D,F)=>b.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[b.jsx("img",{src:D.fotoPerfil,alt:"Foto de "+D.nome,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}}),b.jsx("strong",{children:D.nome}),b.jsx("button",{id:"aceitar-pedido",onClick:()=>t(`/perfil?id=${D.uid}`),children:"aceitar"}),b.jsx("button",{id:"rejeitar-pedido",onClick:()=>C(D.id),children:"recusar"})]},F))})]}),b.jsxs("section",{id:"amigos",style:{display:d===2?"block":"none"},children:[b.jsx("input",{ref:v.searchAlunos,onInput:k}),b.jsx("div",{id:"searchResults",children:p?p.length==0?b.jsx("div",{children:"Nenhum usuário encontrado."}):p.map((D,F)=>b.jsxs("div",{className:"friends-item",children:[b.jsxs(Mn,{className:"friends-link",to:"/perfil?id="+D.id,children:[b.jsx("img",{src:D.fotoPerfil,alt:"Foto de "+D.nome}),b.jsx("strong",{children:D.nome})]}),D.mode=="friend"?b.jsx("span",{children:"(Amigos)"}):D.mode=="sended_request"?b.jsx("button",{className:"retirar",onClick:()=>{O(D.uid),_(U=>U.map(Z=>Z.id==D.id?{...Z,mode:"unsolicited"}:Z))},children:"cancelar"}):D.mode=="received_request"?b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"aceitar",onClick:()=>{j(D.id),_(U=>U.map(Z=>Z.id==D.id?{...Z,mode:"friend"}:Z))},children:"aceitar"}),b.jsx("button",{className:"rejeitar",onClick:()=>O(D.id),children:"rejeitar"})]}):b.jsx("i",{className:"fa-solid fa-user-plus",onClick:()=>{H(D.id),_(U=>U.map(Z=>Z.id==D.id?{...Z,mode:"sended_request"}:Z))}})]},F)):b.jsx(b.Fragment,{})})]})]})]})})}function iA(){const{mobile:n,usuarioLogado:e,refs:{respa:t}}=gr(),i=Us(),s=q.useRef(null),a=q.useRef(!1),c=q.useRef([]),d=q.useRef(""),f=q.useRef({audioSeconds:0,audioTimer:null,mediaRecorder:null,audioChunks:[]}),[p,_]=q.useState(!1),v=q.useRef(null),E={fileInput:q.useRef(null),messageInput:q.useRef(null)},R=()=>{if(!e)return;const re=document.getElementById("friendList");if(!re){console.error("Elemento friendList não encontrado");return}re.innerHTML="",It(ge(_e(),`friends/${e.uid}`)).then(Q=>{Q.exists()&&Q.forEach(ye=>{const me=ye.key;It(ge(_e(),"usuarios/"+me)).then(Ue=>{const Re=Ue.val(),ae=document.createElement("div");ae.classList.add("friend-item"),ae.setAttribute("data-uid",me),ae.onclick=()=>C(me);const ke=Re.fotoPerfil||ni;function Et(Ze){let mi="",Ci="";Ze.forEach(hn=>{for(const Dt in hn.val()){const W=hn.val()[Dt];W.texto&&(mi=W.texto.length>10?W.texto.substring(0,10)+"...":W.texto,Ci=od(new Date(W.timestamp)))}});const ht=`badge-${me}`;let Si=`<span id="${ht}" class="notification-badge" style="display: none;"></span>`;ae.innerHTML=`
                                <img src="${ke}" class="friend-avatar">
                                <div class="friend-text">
                                <strong>${Re.nome} ${Si}</strong>
                                <p>${mi} <span>${Ci}</span></p>
                                </div>
                            `,H(me,ht)}It($u(ge(_e(),`chats/${d.current}`))).then(Ze=>{Et(Ze),re.appendChild(ae)}),It($u(ge(_e(),`chats/${d.current}`))).then(Ze=>{Et(Ze)})})})})};function C(re){const Q=[e.uid,re].sort().join("_");i("/chat?id="+Q)}const k=()=>{if(!e||!s.current)return;const re=E.messageInput.current.value;if(re.trim()==="")return;E.messageInput.current&&(E.messageInput.current.addEventListener("keydown",ye=>{s.current&&(ye.key==="Enter"&&(ye.shiftKey||ye.preventDefault()),hi(ge(_e(),`chats/${d.current}/typing/${e.uid}`),!0),clearTimeout(window.typingTimeout),window.typingTimeout=setTimeout(()=>{hi(ge(_e(),`chats/${d.current}/typing/${e.uid}`),!1)},2e3))}),E.messageInput.current.addEventListener("blur",()=>{s.current&&hi(ge(_e(),`chats/${d.current}/typing/${e.uid}`),!1)}));const Q={remetente:e.uid,texto:re,timestamp:Date.now(),lida:!1};cr(ge(_e(),`chats/${d.current}`),Q).then(()=>{E.messageInput.current.value="",setTimeout(()=>{const ye=document.getElementById("chat-messages");ye&&(ye.scrollTop=ye.scrollHeight)},100)}),O()};function O(){!e||!d.current||It($u(ge(_e(),`chats/${d.current}`),Hy("timestamp"))).then(re=>{let Q={};re.forEach(ye=>{const me=ye.val();me.lida===!1&&me.remetente!==e.uid&&(Q[ye.key+"/lida"]=!0)}),Object.keys(Q).length>0&&Sd(ge(_e(),`chats/${d.current}`),Q).then(()=>{hv()})})}function H(re,Q){xo(ge(_e(),`chats/${d.current}`),ye=>{let me=0;ye.forEach(Re=>{const ae=Re.val();ae.remetente===re&&ae.lida===!1&&me++});const Ue=document.getElementById(Q);Ue&&(me>0?(Ue.textContent=me>99?"99+":String(me),Ue.style.display="inline-block"):Ue.style.display="none")})}function j(re,Q){!e||!d.current||confirm("Tem certeza que deseja excluir esta mensagem de áudio?")&&Xl(Zn(ei(),Q)).then(()=>Gt(ge(_e(),`chats/${d.current}/${re}`))).then(()=>{console.log("Mensagem de áudio excluída com sucesso")}).catch(ye=>{console.error("Erro ao excluir mensagem de áudio:",ye),v.current("Não foi possível excluir a mensagem.")})}function D(re,Q){!e||!s.current||confirm("Tem certeza que deseja excluir esta mensagem com imagem?")&&Xl(Zn(ei(),Q)).then(()=>Gt(ge(_e(),`chats/${d.current}/${re}`))).then(()=>{console.log("Mensagem e imagem excluídas com sucesso")}).catch(ye=>{console.error("Erro ao excluir mensagem com imagem:",ye),v.current("Não foi possível excluir a mensagem.")})}function F(re,Q){!e||!d.current||confirm("Tem certeza que deseja excluir esta mensagem com vídeo?")&&Xl(Zn(ei(),Q)).then(()=>Gt(ge(_e(),`chats/${d.current}/${re}`))).then(()=>{console.log("Mensagem e vídeo excluídos com sucesso")}).catch(ye=>{console.error("Erro ao excluir mensagem com vídeo:",ye),v.current("Não foi possível excluir a mensagem.")})}function U(re,Q){!e||!d.current||confirm("Tem certeza que deseja excluir esta mensagem com arquivo?")&&Xl(Zn(ei(),Q)).then(()=>Gt(ge(_e(),`chats/${d.current}/${re}`))).then(()=>{console.log("Mensagem e arquivo excluídos com sucesso")}).catch(ye=>{console.error("Erro ao excluir mensagem com arquivo:",ye),v.current("Não foi possível excluir a mensagem.")})}function Z(){if(!e||!s.current)return;const re=ge(_e(),`chats/${d.current}/typing`);function Q(ye){let me=!1;ye.forEach(ae=>{ae.key!==e.uid&&ae.val()===!0&&(me=!0)});const Ue=document.getElementById("chat-messages");let Re=document.getElementById("typing-indicator");if(me){if(!Re){Re=document.createElement("div"),Re.id="typing-indicator",Re.classList.add("message-bubble"),Re.style.backgroundColor="gray",Re.style.color="white",Re.style.marginRight="auto",Re.style.padding="0px 0px 0px 0px",Re.style.borderRadius="15px",Re.style.maxWidth="fit-content",Re.style.position="relative",Re.style.fontStyle="italic",Re.innerHTML='<img src="static/TD.gif" alt="Digitando..." style="width:40px; height:30px;">';let ae=document.createElement("div");ae.id="typing-container",ae.style.display="flex",ae.style.alignItems="center",ae.style.margin="10px 0",It(ge(_e(),"usuarios/"+s.current)).then(ke=>{const Et=ke.val();let Ze=document.createElement("img");Ze.src=Et.fotoPerfil?Et.fotoPerfil:"static/avatar.png",Ze.style.width="40px",Ze.style.height="40px",Ze.style.borderRadius="50%",Ze.style.objectFit="cover",Ze.style.marginRight="10px",ae.appendChild(Ze),ae.appendChild(Re),Ue.appendChild(ae),Ue.scrollTop=Ue.scrollHeight})}}else Re&&Re.parentElement.remove()}xo(re,Q)}function x(){if(!e||!s.current)return;const re=document.getElementById("chat-messages");if(!re){console.error("Elemento chat-messages não encontrado");return}let Q=document.getElementById("barra-opcoes-selecao");if(!Q){Q=document.createElement("div"),Q.id="barra-opcoes-selecao",Q.style.position="fixed",Q.style.left="0",Q.style.right="0",Q.style.backgroundColor="#333",Q.style.color="white",Q.style.padding="10px",Q.style.display="none",Q.style.justifyContent="space-between",Q.style.alignItems="center";const ye=document.createElement("span");ye.id="contador-selecionadas",ye.textContent="0 selecionadas";const me=document.createElement("button");me.textContent="Excluir",me.style.backgroundColor="red",me.style.color="white",me.style.border="none",me.style.padding="5px 10px",me.style.borderRadius="5px",me.style.cursor="pointer",me.onclick=P;const Ue=document.createElement("button");Ue.textContent="Cancelar",Ue.style.backgroundColor="gray",Ue.style.color="white",Ue.style.border="none",Ue.style.padding="5px 10px",Ue.style.borderRadius="5px",Ue.style.cursor="pointer",Ue.onclick=G,Q.appendChild(ye),Q.appendChild(me),Q.appendChild(Ue),document.body.appendChild(Q)}xo($u(ge(_e(),`chats/${d.current}`),Hy("timestamp")),ye=>{re.innerHTML="";let me=0;ye.forEach(Ue=>{const Re=Ue.key,ae=Ue.val();if(ae.remetente){const ke=document.createElement("div");ke.style.display="flex",ke.style.alignItems="center",ke.style.margin="10px 0";const Et=document.createElement("img");Et.style.width="40px",Et.style.height="40px",Et.style.borderRadius="50%",Et.style.objectFit="cover",Et.style.marginRight="10px";const Ze=document.createElement("div");Ze.classList.add("message-bubble"),Ze.style.padding="8px",Ze.style.borderRadius="15px",Ze.style.maxWidth="fit-content",Ze.style.position="relative";const mi=ae.timestamp,Ci=new Date(mi);if(mi-me>6e5){const ht=document.createElement("div");ht.style.textAlign="center",ht.style.fontWeight="bold",ht.textContent=_B(Ci),re.appendChild(ht)}if(me=mi,ae.remetente===e.uid){const ht=document.createElement("div");ht.style.position="relative",ht.style.display="inline-block",ht.style.marginLeft="auto",ht.classList.add("mensagem-usuario"),Ze.style.backgroundColor="green",Ze.style.color="white",Ze.style.marginLeft="auto";const Si=od(Ci);let hn='<div style="font-weight:bold;">Você</div>';if(ae.imagem&&(hn+=`
                        <div style="margin: 5px 0;">
                            <img src="${ae.imagem}" style="max-width: 250px; max-height: 250px; border-radius: 10px; cursor: pointer;" 
                            onclick="abrirImagemModal('${ae.imagem}')">
                        </div>
                        `),ae.video&&(hn+=`
                        <div style="margin: 5px 0;">
                            <video src="${ae.video}" controls style="max-width: 250px; max-height: 250px; border-radius: 10px;"></video>
                        </div>
                        `),ae.audio&&ae.audio.url){const Se=ae.audio.duracao||0,Ne=Math.floor(Se/60),we=Se%60,se=`${Ne.toString().padStart(2,"0")}:${we.toString().padStart(2,"0")}`;hn+=`
                        <div style="margin: 5px 0; display: flex; align-items: center; background-color: #1b5c2438; border-radius: 10px; padding: 8px;">
                            <audio id="audio-${Re}" src="${ae.audio.url}" preload="auto"></audio>
                            <button onclick="togglePlayPause('audio-${Re}', 'play-btn-${Re}')" 
                            id="play-btn-${Re}" style="background: none; border: none; font-size: 20px; color: green; cursor: pointer;">
                            <i class="fa-solid fa-play"></i>
                            </button>
                            <div style="flex-grow: 1; height: 4px; background-color: #e0e0e0; border-radius: 2px; margin: 0 10px; cursor: pointer;" 
                            onclick="seekAudio('audio-${Re}', this)">
                            <div style="height: 100%; width: 0%; background-color: #248232;"></div>
                            </div>
                            <div style="font-size: 12px; color: white;">${se}</div>
                        </div>
                        `}ae.arquivo&&(hn+=`
                        <div style="margin: 5px 0; display: flex; align-items: center; background-color: #1b5c2438; border-radius: 10px; padding: 8px; cursor: pointer;">
                            <div style="margin-right: 10px; font-size: 24px;">
                            ${vt(ae.arquivo.tipo)}
                            </div>
                            <div>
                            <strong>${ae.arquivo.nome}</strong>
                            <div style="font-size: 12px; color: white;">
                                ${Xe(ae.arquivo.tamanho||0)}
                            </div>
                            </div>
                            <a href="${ae.arquivo.url}" target="_blank" download="${ae.arquivo.nome}" 
                            style="margin-left: auto; color: white; text-decoration: none;">
                            <i class="fa-solid fa-download"></i> Baixar
                            </a>
                        </div>
                        `),ae.texto&&(hn+=`<div style="white-space: pre-wrap;">${ae.texto}</div>`),hn+=`<div style="text-align:right; font-size:small;">${Si}</div>`,Ze.innerHTML=hn;const Dt=document.createElement("div");Dt.innerHTML="⋮",Dt.style.cursor="pointer",Dt.style.fontSize="16px",Dt.style.padding="3px",Dt.style.position="absolute",Dt.style.right="0",Dt.style.bottom="-18px";const W=`menu-${Re}`,$=document.createElement("div");$.id=W,$.className="menu-opcoes",$.style.position="absolute",$.style.right="0",$.style.bottom="-40px",$.style.backgroundColor="white",$.style.boxShadow="0 2px 5px rgba(0,0,0,0.2)",$.style.padding="5px",$.style.borderRadius="3px",$.style.zIndex="1000",$.style.display="none";const ve=document.createElement("div");ve.textContent="Excluir",ve.style.padding="5px 10px",ve.style.cursor="pointer",ve.style.color="red",ve.style.margin="0 auto",ve.onclick=Se=>{Se.stopPropagation(),ae.audio&&ae.audio.url?j(Re,ae.audio.url):ae.arquivo?U(Re,ae.arquivo.url):ae.video?F(Re,ae.video):ae.imagem?D(Re,ae.imagem):A(Re)},Dt.onclick=()=>N(W),$.appendChild(ve),ht.appendChild(Ze),ht.appendChild(Dt),ht.appendChild($),ke.appendChild(ht),ht.addEventListener("dblclick",function(Se){L(this,Re),Se.stopPropagation()}),ht.addEventListener("click",function(Se){a&&(V(this,Re),Se.stopPropagation())})}else Ze.style.backgroundColor="gray",Ze.style.color="white",Ze.style.marginRight="auto",It(ge(_e(),"usuarios/"+s.current)).then(ht=>{const Si=ht.val();Et.src=Si.fotoPerfil?Si.fotoPerfil:"static/avatar.png";const hn=od(Ci);let Dt=`<div style="font-weight:bold;">${Si.nome}</div>`;if(ae.imagem&&(Dt+=`
                            <div style="margin: 5px 0;">
                                <img src="${ae.imagem}" style="max-width: 250px; max-height: 250px; border-radius: 10px; cursor: pointer;" 
                                onclick="abrirImagemModal('${ae.imagem}')">
                            </div>
                            `),ae.video&&(Dt+=`
                            <div style="margin: 5px 0;">
                                <video src="${ae.video}" controls style="max-width: 250px; max-height: 250px; border-radius: 10px;"></video>
                            </div>
                            `),ae.audio&&ae.audio.url){const W=ae.audio.duracao||0,$=Math.floor(W/60),ve=W%60,Se=`${$.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`;Dt+=`
                            <div style="margin: 5px 0; display: flex; align-items: center; background-color: #1b5c2438; border-radius: 10px; padding: 8px;">
                                <audio id="audio-${Re}" src="${ae.audio.url}" preload="auto"></audio>
                                <button onclick="togglePlayPause('audio-${Re}', 'play-btn-${Re}')" 
                                id="play-btn-${Re}" style="background: none; border: none; font-size: 20px; color: green; cursor: pointer;">
                                <i class="fa-solid fa-play"></i>
                                </button>
                                <div style="flex-grow: 1; height: 4px; background-color: #e0e0e0; border-radius: 2px; margin: 0 10px; cursor: pointer;" 
                                onclick="seekAudio('audio-${Re}', this)">
                                <div style="height: 100%; width: 0%; background-color: #248232;"></div>
                                </div>
                                <div style="font-size: 12px; color: white;">${Se}</div>
                            </div>
                            `}ae.arquivo&&(Dt+=`
                            <div style="margin: 5px 0; display: flex; align-items: center; background-color: #1b5c2438; border-radius: 10px; padding: 8px; cursor: pointer;">
                                <div style="margin-right: 10px; font-size: 24px;">
                                ${vt(ae.arquivo.tipo)}
                                </div>
                                <div>
                                <strong>${ae.arquivo.nome}</strong>
                                <div style="font-size: 12px; color: white;">
                                    ${Xe(ae.arquivo.tamanho||0)}
                                </div>
                                </div>
                                <a href="${ae.arquivo.url}" target="_blank" download="${ae.arquivo.nome}" 
                                style="margin-left: auto; color: white; text-decoration: none;">
                                <i class="fa-solid fa-download"></i> Baixar
                                </a>
                            </div>
                            `),ae.texto&&(Dt+=`<div>${ae.texto}</div>`),Dt+=`<div style="text-align:right; font-size:small;">${hn}</div>`,Ze.innerHTML=Dt}),ke.appendChild(Et),ke.appendChild(Ze);re.appendChild(ke)}}),re.scrollTop=re.scrollHeight})}function A(re){confirm("Tem certeza que deseja excluir esta mensagem?")&&Gt(ge(_e(),`chats/${d.current}/${re}`)).then(()=>{console.log("Mensagem excluída com sucesso")}).catch(Q=>{console.error("Erro ao excluir mensagem:",Q)})}function N(re){const Q=document.getElementById(re);Q.style.display==="block"?Q.style.display="none":(document.querySelectorAll(".menu-opcoes").forEach(ye=>{ye.style.display="none"}),Q.style.display="block")}function L(re,Q){if(!a.current){a.current=!0,c.current=[],V(re,Q);const ye=document.getElementById("barra-opcoes-selecao");ye&&(ye.style.display="flex")}}function V(re,Q){if(!a||!re.classList.contains("mensagem-usuario"))return;const ye=c.current.findIndex(Ue=>Ue.messageId===Q);ye===-1?(c.current.push({chatId:d,messageId:Q}),re.style.opacity="0.7",re.querySelector(".message-bubble").style.borderWidth="2px",re.querySelector(".message-bubble").style.borderStyle="solid",re.querySelector(".message-bubble").style.borderColor="yellow"):(c.current.splice(ye,1),re.style.opacity="1",re.querySelector(".message-bubble").style.border="none",c.current.length===0&&G());const me=document.getElementById("contador-selecionadas");me&&(me.textContent=`${c.current.length} selecionada${c.current.length!==1?"s":""}`)}function G(){a.current=!1,document.querySelectorAll(".mensagem-usuario").forEach(Q=>{Q.style.opacity="1",Q.querySelector(".message-bubble").style.border="none"}),c.current=[];const re=document.getElementById("barra-opcoes-selecao");re&&(re.style.display="none")}function P(){c.current.length!==0&&confirm(`Tem certeza que deseja excluir ${c.current.length} mensagem(ns)?`)&&(c.current.forEach(({chatId:re,messageId:Q})=>{Gt(ge(_e(),`chats/${re.current}/${Q}`)).catch(ye=>{console.error("Erro ao excluir mensagem:",ye)})}),G())}function vt(re){return re?re.includes("pdf")?'<i class="fa-solid fa-file-pdf"></i>':re.includes("word")?'<i class="fa-solid fa-file-word"></i>':re.includes("excel")||re.includes("spreadsheet")?'<i class="fa-solid fa-file-excel"></i>':re.includes("zip")||re.includes("rar")?'<i class="fa-solid fa-file-zipper"></i>':re.includes("text")?'<i class="fa-solid fa-file-lines"></i>':'<i class="fa-solid fa-file"></i>':'<i class="fa-solid fa-file"></i>'}function Xe(re){if(!Number.isFinite(re)||re<0)return"Tamanho inválido";if(re===0)return"0 Bytes";const Q=1024,ye=["Bytes","KB","MB","GB","TB"],me=Math.floor(Math.log(re)/Math.log(Q));return`${(re/Math.pow(Q,me)).toFixed(2)} ${ye[me]}`}function oe(){if(!(!e||!s.current)){if(!navigator.mediaDevices||!window.MediaRecorder){v.current("Seu navegador não suporta gravação de áudio.");return}if(p){be();return}navigator.mediaDevices.getUserMedia({audio:!0}).then(re=>{const Q=document.getElementById("gravador-container");Q?Q.style.display="flex":B(),f.current.audioSeconds=0,ct(),f.current.audioTimer=setInterval(ct,1e3),f.current.mediaRecorder=new MediaRecorder(re),f.current.audioChunks=[],f.current.mediaRecorder.ondataavailable=ye=>{ye.data.size>0&&f.current.audioChunks.push(ye.data)},f.current.mediaRecorder.onstop=()=>{const ye=new Blob(f.current.audioChunks,{type:"audio/wav"});fe(ye)},f.current.mediaRecorder.start(),_(!0)}).catch(re=>{console.error("Erro ao acessar o microfone:",re),v.current("Não foi possível acessar o microfone.")})}}function be(){if(!f.current.mediaRecorder||f.current.mediaRecorder.state==="inactive")return;clearInterval(f.current.audioTimer),f.current.mediaRecorder.stop(),_(!1),f.current.mediaRecorder.stream&&f.current.mediaRecorder.stream.getTracks().forEach(Q=>Q.stop());const re=document.getElementById("gravador-container");re&&(re.style.display="none")}function Pe(){if(!f.current.mediaRecorder||f.current.mediaRecorder.state==="inactive")return;f.current.mediaRecorder.onstop=null,clearInterval(f.current.audioTimer),f.current.mediaRecorder.stop(),_(!1),f.current.audioChunks=[],f.current.mediaRecorder.stream&&f.current.mediaRecorder.stream.getTracks().forEach(ye=>ye.stop());const re=document.getElementById("gravador-container");re&&(re.style.display="none");const Q=document.getElementById("audio-record-btn");Q&&(Q.innerHTML='<i class="fa-solid fa-microphone"></i>',Q.classList.remove("recording"),Q.title="Gravar mensagem de voz")}function ct(){f.current.audioSeconds++;const re=Math.floor(f.current.audioSeconds/60),Q=f.current.audioSeconds%60,ye=`${re.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`,me=document.getElementById("tempo-gravacao");me&&(me.textContent=ye),f.current.audioSeconds>=180&&be()}function B(){const re=document.getElementById("chat-container")||document.body,Q=document.createElement("div");Q.id="gravador-container",Q.style.display="flex",Q.style.alignItems="center",Q.style.justifyContent="space-between",Q.style.backgroundColor="#f0f0f0",Q.style.padding="10px 15px",Q.style.borderRadius="10px",Q.style.margin="10px 0",Q.style.gap="10px",Q.style.position="fixed",Q.style.bottom="70px",Q.style.left="50%",Q.style.transform="translateX(-50%)",Q.style.width="80%",Q.style.maxWidth="400px",Q.style.zIndex="100";const ye=document.createElement("div");ye.innerHTML='<i class="fa-solid fa-circle"></i>',ye.style.color="red",ye.style.fontSize="14px",ye.style.animation="pulse 1.5s infinite ease-in-out";const me=document.createElement("div");me.id="tempo-gravacao",me.textContent="00:00",me.style.fontFamily="monospace",me.style.fontSize="16px",me.style.fontWeight="bold";const Ue=document.createElement("div");Ue.textContent="Áudios podem ter no máximo 3 minutos.",Ue.style.fontSize="12px",Ue.style.color="#666",Ue.style.marginTop="5px",Ue.style.textAlign="center",Ue.style.width="100%";const Re=document.createElement("div");Re.style.display="flex",Re.style.gap="15px";const ae=document.createElement("button");ae.innerHTML='<i class="fa-solid fa-check"></i>',ae.style.border="none",ae.style.backgroundColor="#248232",ae.style.color="white",ae.style.borderRadius="50%",ae.style.width="35px",ae.style.height="35px",ae.style.display="flex",ae.style.alignItems="center",ae.style.justifyContent="center",ae.style.cursor="pointer",ae.title="Enviar",ae.onclick=be;const ke=document.createElement("button");ke.innerHTML='<i class="fa-solid fa-times"></i>',ke.style.border="none",ke.style.backgroundColor="#e53935",ke.style.color="white",ke.style.borderRadius="50%",ke.style.width="35px",ke.style.height="35px",ke.style.display="flex",ke.style.alignItems="center",ke.style.justifyContent="center",ke.style.cursor="pointer",ke.title="Cancelar",ke.onclick=Pe,Re.appendChild(ae),Re.appendChild(ke),Q.appendChild(ye),Q.appendChild(me),Q.appendChild(Ue),Q.appendChild(Re),re.appendChild(Q)}function fe(re){if(!e||!s.current||!re)return;const Q=`audio_${e.uid}_${Date.now()}.wav`,ye=Zn(ei(),`chat_audios/${d.current}/${Q}`),me=document.createElement("div");me.style.width="0%",me.style.height="4px",me.style.backgroundColor="#4CAF50",me.style.position="fixed",me.style.top="0",me.style.left="0",me.style.zIndex="1000",document.body.appendChild(me);const Ue=cd(ye,re);Ue.on("state_changed",Re=>{const ae=Re.bytesTransferred/Re.totalBytes*100;me.style.width=`${ae}%`},Re=>{console.error("Erro ao fazer upload do áudio:",Re),v.current("Não foi possível enviar a mensagem de voz."),document.body.removeChild(me)},()=>{Ur(Ue.snapshot.ref).then(Re=>{const ae=E.messageInput.current?E.messageInput.current.value.trim():"",ke={remetente:e.uid,texto:ae,audio:{url:Re,duracao:f.current.audioSeconds},timestamp:Date.now(),lida:!1};return cr(ge(_e(),`chats/${d.current}`),ke)}).then(()=>{E.messageInput.current.value="",document.body.removeChild(me),O()}).catch(Re=>{console.error("Erro ao salvar mensagem de áudio:",Re),v.current("Não foi possível enviar a mensagem de voz."),document.body.contains(me)&&document.body.removeChild(me)})})}const Ce=re=>{const Q=re.target.files[0];if(!Q)return;const ye=["image/jpeg","image/png","image/gif","image/webp"],me=["video/mp4","video/webm","video/ogg"],Ue=20*1024*1024;if(ye.includes(Q.type)){pe(re);return}else if(me.includes(Q.type)){De(re);return}if(Q.size>Ue){v.current("O tamanho do arquivo não pode ser maior que 20MB.");return}const Re=E.messageInput.current?E.messageInput.current.value.trim():"",ae=Zn(ei(),`chat_files/${d.current}/${e.uid}_${Date.now()}_${Q.name}`);ld(ae,Q).then(ke=>Ur(ke.ref)).then(ke=>{const Et={remetente:e.uid,texto:Re,arquivo:{url:ke,nome:Q.name,tipo:Q.type,tamanho:Q.size},timestamp:po()};return cr(ge(_e(),`chats/${d.current}`),Et)}).then(()=>{E.fileInput.current.value="",E.messageInput.current&&(E.messageInput.current.value="")}).catch(ke=>{console.error("Erro no upload do arquivo:",ke),v.current("Não foi possível enviar o arquivo.")})};function pe(re){const Q=re.target.files[0];if(!Q)return;const ye=["image/jpeg","image/png","image/gif","image/webp"],me=5*1024*1024;if(!ye.includes(Q.type)){v.current("Apenas suportamos imagens JPEG, PNG, GIF e WebP.");return}if(Q.size>me){v.current("A imagem não pode ser maior que 5MB.");return}const Ue=E.messageInput.current?E.messageInput.current.value.trim():"",Re=Zn(ei(),`chat_images/${d.current}/${e.uid}_${Date.now()}_${Q.name}`),ae=document.createElement("div");ae.style.width="0%",ae.style.height="4px",ae.style.backgroundColor="#4CAF50",ae.style.position="fixed",ae.style.top="0",ae.style.left="0",ae.style.zIndex="1000",document.body.appendChild(ae),cd(Re,Q).then(ke=>{const Et=ke.bytesTransferred/ke.totalBytes*100;return ae.style.width=`${Et}%`,Ur(ke.ref)}).then(ke=>{const Et={remetente:e.uid,texto:Ue,imagem:ke,timestamp:Date.now(),lida:!1};return cr(ge(_e(),`chats/${d.current}`),Et)}).then(()=>{re.target.value="",E.messageInput.current&&(E.messageInput.current.value=""),document.body.removeChild(ae),O()}).catch(ke=>{console.error("Erro no upload da imagem:",ke),v.current("Não foi possível enviar a imagem."),document.body.contains(ae)&&document.body.removeChild(ae)})}function De(re){const Q=re.target.files[0];if(!Q)return;const ye=20*1024*1024;if(!["video/mp4","video/webm","video/ogg"].includes(Q.type)){v.current("Apenas suportamos vídeos MP4, WebM ou OGG.");return}if(Q.size>ye){v.current("O tamanho do vídeo não pode ser maior que 20MB.");return}const Ue=E.messageInput.current?E.messageInput.current.value.trim():"",Re=Zn(ei(),`chat_videos/${d.current}/${e.uid}_${Date.now()}_${Q.name}`),ae=document.createElement("div");ae.style.width="0%",ae.style.height="4px",ae.style.backgroundColor="#4CAF50",ae.style.position="fixed",ae.style.top="0",ae.style.left="0",ae.style.zIndex="1000",document.body.appendChild(ae),cd(Re,Q).then(ke=>{const Et=ke.bytesTransferred/ke.totalBytes*100;return ae.style.width=`${Et}%`,Ur(ke.ref)}).then(ke=>{const Et={remetente:e.uid,texto:Ue,video:ke,timestamp:Date.now(),lida:!1};return cr(ge(_e(),`chats/${d.current}`),Et)}).then(()=>{re.target.value="",E.messageInput.current&&(E.messageInput.current.value=""),document.body.removeChild(ae),O()}).catch(ke=>{console.error("Erro no upload do vídeo:",ke),v.current("Não foi possível enviar o vídeo."),document.body.contains(ae)&&document.body.removeChild(ae)})}return q.useEffect(()=>{!n&&location.pathname==="/chat"&&R()},[n,location.pathname]),q.useEffect(()=>{if(e)if(location.pathname==="/chat"){const Q=new URLSearchParams(location.search).get("id");if(Q){const ye=Q.split("_");s.current=e.uid===ye[0]?ye[1]:ye[0],d.current=Q;const me=document.getElementById("chat-box");me.style.display="block",x(),O(),Z()}else i("/chats")}else R()},[location.pathname,e]),b.jsxs("div",{id:"chats-page",className:"page",children:[b.jsx("h4",{ref:t,className:"hidden",id:"resultadoPA"}),b.jsxs("div",{className:"chatdiv",style:{display:"flex",justifyContent:"center"},children:[!n||n&&location.pathname=="/chats"?b.jsxs("section",{id:"history",children:[b.jsxs("div",{id:"top-chats",children:[b.jsx("span",{className:"icone","aria-hidden":"true",children:b.jsx("i",{className:"fa-solid fa-comment-dots","aria-hidden":"true",style:{margin:"0 auto"}})}),b.jsx("h2",{id:"label-chats",children:"Conversas"})]}),b.jsx("div",{id:"friendList"})]}):b.jsx(b.Fragment,{}),!n||n&&location.pathname=="/chat"?b.jsxs("section",{id:"chat",children:[b.jsxs("p",{children:[b.jsx("i",{className:"fa-solid fa-lock-open"})," Sem criptografia no momento"]}),b.jsxs("div",{id:"chat-box",children:[b.jsx("div",{id:"chat-messages"}),b.jsx("div",{id:"typingIndicatorContainer",style:{display:"none",textAlign:"center",margin:"10px 0"}}),b.jsxs("div",{id:"chat-input",children:[b.jsx("input",{type:"file",ref:E.fileInput,id:"fileUpload",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar,image/*,video/*",style:{display:"none"},onChange:Ce}),b.jsx("textarea",{ref:E.messageInput,id:"messageInput",placeholder:"Digite sua mensagem..."}),b.jsx("i",{onClick:k,className:"fa-solid fa-paper-plane send-item","aria-hidden":"true"}),b.jsx("i",{onClick:()=>E.fileInput.current.click(),className:"fa-solid fa-paperclip send-item","aria-hidden":"true"}),b.jsx("i",{onClick:oe,id:"audio-record-btn",title:"Gravar mensagem voz",className:"fa-solid  attachment-btn send-item "+(p?"fa-stop recording":"fa-microphone")})]})]})]}):b.jsx(b.Fragment,{})]}),b.jsx(rh,{showPopup:v})]})}function UF(){const{usuarioLogado:n}=gr(),e=Us(),t=q.useRef(null),i=q.useRef(null),s=q.useRef({}),a=q.useRef(null),c=q.useRef(null),d=q.useRef(null),f=q.useRef(null),p=q.useRef(!1),_=q.useRef([]),[v,E]=q.useState([]),[R,C]=q.useState(0),[k,O]=q.useState({show:!1,fotoPerfil:ni,nome:"",isUserCreator:!1,targetIsAdmin:!1,left:"0",top:"0"}),H=q.useRef({audioSeconds:0,audioTimer:null,mediaRecorder:null,audioChunks:[]}),[j,D]=q.useState(!1),F={fileInput:q.useRef(null),menu:q.useRef(null),messageInput:q.useRef(null)},U=W=>{E(W.map($=>({fotoPerfil:$.fotoPerfil,nome:$.nome,isCreator:$.isCreator,id:$.id,isAdmin:$.isAdmin})))},Z=W=>{if(W===i){t.current("Não é possível silenciar o líder da comunidade.");return}if(n.uid!==i.current&&s.current[n.uid]&&s.current[W]){t.current("Você não tem permissão para fazer isso.");return}const $=prompt("Por quanto tempo deseja silenciar este membro? (em horas)");if($===null)return;const ve=parseInt($);if(isNaN(ve)||ve<=0){t.current("Insira um número válido de horas.");return}const Se=new Date,Ne=new Date(Se.getTime()+ve*60*60*1e3);dv(we=>{hi(ge(_e(),`comunidades/${d.current}/membros/${W}/muted`),{until:Ne.getTime(),by:n.uid,reason:"Silenciado por administrador",timestamp:po()}).then(()=>{t.current(`Membro silenciado por ${ve} hora(s).`)}).catch(se=>{console.error("Erro ao silenciar membro:",se),t.current("Não foi possível silenciar o membro.")})})},x=W=>{const $=document.getElementById("membersList");if($.innerHTML="",!W.membros){$.innerHTML='<div class="no-members">Nenhum membro encontrado</div>';return}const ve=Object.keys(W.membros),Se=[];ve.forEach(Ne=>{const we=It(ge(_e(),"usuarios/"+Ne)).then(se=>se.exists()?{id:Ne,...se.val()}:null);Se.push(we)}),Promise.all(Se).then(Ne=>{c.current=Ne.filter(we=>we!==null),c.current.sort((we,se)=>we.id===i?-1:se.id===i?1:s.current[we.id]&&!s.current[se.id]?-1:!s.current[we.id]&&s.current[se.id]?1:(we.nome||"").localeCompare(se.nome||"")),U(c.current),C(c.current.length)}).catch(Ne=>{console.error("Erro ao carregar membros:",Ne),$.innerHTML='<div class="error-message">Erro ao carregar membros</div>'})},A=()=>{It(ge(_e(),"comunidades/"+d.current)).then(W=>{if(W.exists()){const $=W.val();document.getElementById("comunidadeTitulo").innerText=$.nome||"Comunidade",document.getElementById("comunidadeDescricao").innerText=$.descricao||"Sem descrição",$.tags?(document.getElementById("comunidadeTags").style.display="block",document.getElementById("comunidadeTags").querySelector("span").innerText=$.tags):document.getElementById("comunidadeTags").style.display="none",$.imagem?document.getElementById("comunidadeImagem").src=$.imagem:document.getElementById("comunidadeImagem").src="static/default_comunidade.png",i.current=$.criador,$.admins&&(s.current=$.admins),a.current=n.uid===i.current||s&&s.current[String(n.uid)],x($)}else t.current("Comunidade não encontrada."),window.location.href="index.html"}).catch(W=>{console.error("Erro ao carregar comunidade:",W),t.current("Erro ao carregar dados da comunidade.")})};function N(){document.getElementById("bannerModal").style.display="none"}function L(){if(!F.fileInput.current.files||F.fileInput.current.files.length===0){t.current("Selecione uma imagem para o banner.");return}const W=F.fileInput.current.files[0];ld(Zn(ei(),`comunidades/${d.current}/banner/${W.name}`),W).then($=>Ur($.ref)).then($=>Sd(ge(_e(),`comunidades/${d.current}`),{banner:$})).then(()=>{N(),V()}).catch($=>{console.error("Erro ao atualizar banner:",$),t.current("Erro ao atualizar banner.")})}function V(){It(ge(_e(),`comunidades/${d.current}/banner`)).then(W=>{const $=W.val()||"https://via.placeholder.com/300x150";document.getElementById("communityBanner").style.backgroundImage=`url('${$}')`}).catch(W=>{console.error("Erro ao carregar banner:",W)})}function G(){if(!(!n||!d.current)){if(!navigator.mediaDevices||!window.MediaRecorder){t.current("Seu navegador não suporta gravação de áudio.");return}if(j){P();return}navigator.mediaDevices.getUserMedia({audio:!0}).then(W=>{const $=document.getElementById("gravador-container");$?$.style.display="flex":oe(),H.current.audioSeconds=0,Xe(),H.current.audioTimer=setInterval(Xe,1e3),H.current.mediaRecorder=new MediaRecorder(W),H.current.audioChunks=[],H.current.mediaRecorder.ondataavailable=ve=>{ve.data.size>0&&H.current.audioChunks.push(ve.data)},H.current.mediaRecorder.onstop=()=>{const ve=new Blob(H.current.audioChunks,{type:"audio/wav"});be(ve)},H.current.mediaRecorder.start(),D(!0)}).catch(W=>{console.error("Erro ao acessar o microfone:",W),t.current("Não foi possível acessar o microfone.")})}}function P(){if(!H.current.mediaRecorder||H.current.mediaRecorder.state==="inactive")return;clearInterval(H.current.audioTimer),H.current.mediaRecorder.stop(),D(!1),H.current.mediaRecorder.stream&&H.current.mediaRecorder.stream.getTracks().forEach($=>$.stop());const W=document.getElementById("gravador-container");W&&(W.style.display="none")}function vt(){if(!H.current.mediaRecorder||H.current.mediaRecorder.state==="inactive")return;H.current.mediaRecorder.onstop=null,clearInterval(H.current.audioTimer),H.current.mediaRecorder.stop(),D(!1),H.current.audioChunks=[],H.current.mediaRecorder.stream&&H.current.mediaRecorder.stream.getTracks().forEach(ve=>ve.stop());const W=document.getElementById("gravador-container");W&&(W.style.display="none");const $=document.getElementById("audio-record-btn");$&&($.innerHTML='<i class="fa-solid fa-microphone"></i>',$.classList.remove("recording"),$.title="Gravar mensagem de voz")}function Xe(){H.current.audioSeconds++;const W=Math.floor(H.current.audioSeconds/60),$=H.current.audioSeconds%60,ve=`${W.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}`,Se=document.getElementById("tempo-gravacao");Se&&(Se.textContent=ve),H.current.audioSeconds>=180&&P()}function oe(){const W=document.getElementById("chat-container")||document.body,$=document.createElement("div");$.id="gravador-container",$.style.display="flex",$.style.alignItems="center",$.style.justifyContent="space-between",$.style.backgroundColor="#f0f0f0",$.style.padding="10px 15px",$.style.borderRadius="10px",$.style.margin="10px 0",$.style.gap="10px",$.style.position="fixed",$.style.bottom="70px",$.style.left="50%",$.style.transform="translateX(-50%)",$.style.width="80%",$.style.maxWidth="400px",$.style.zIndex="100";const ve=document.createElement("div");ve.innerHTML='<i class="fa-solid fa-circle"></i>',ve.style.color="red",ve.style.fontSize="14px",ve.style.animation="pulse 1.5s infinite ease-in-out";const Se=document.createElement("div");Se.id="tempo-gravacao",Se.textContent="00:00",Se.style.fontFamily="monospace",Se.style.fontSize="16px",Se.style.fontWeight="bold";const Ne=document.createElement("div");Ne.textContent="Áudios podem ter no máximo 3 minutos.",Ne.style.fontSize="12px",Ne.style.color="#666",Ne.style.marginTop="5px",Ne.style.textAlign="center",Ne.style.width="100%";const we=document.createElement("div");we.style.display="flex",we.style.gap="15px";const se=document.createElement("button");se.innerHTML='<i class="fa-solid fa-check"></i>',se.style.border="none",se.style.backgroundColor="#248232",se.style.color="white",se.style.borderRadius="50%",se.style.width="35px",se.style.height="35px",se.style.display="flex",se.style.alignItems="center",se.style.justifyContent="center",se.style.cursor="pointer",se.title="Enviar",se.onclick=P;const xe=document.createElement("button");xe.innerHTML='<i class="fa-solid fa-times"></i>',xe.style.border="none",xe.style.backgroundColor="#e53935",xe.style.color="white",xe.style.borderRadius="50%",xe.style.width="35px",xe.style.height="35px",xe.style.display="flex",xe.style.alignItems="center",xe.style.justifyContent="center",xe.style.cursor="pointer",xe.title="Cancelar",xe.onclick=vt,we.appendChild(se),we.appendChild(xe),$.appendChild(ve),$.appendChild(Se),$.appendChild(Ne),$.appendChild(we),W.appendChild($)}function be(W){if(!n||!d.current||!W)return;const $=`audio_${n.uid}_${Date.now()}.wav`,ve=Zn(ei(),`chat_audios/${d.current}/${$}`),Se=document.createElement("div");Se.style.width="0%",Se.style.height="4px",Se.style.backgroundColor="#4CAF50",Se.style.position="fixed",Se.style.top="0",Se.style.left="0",Se.style.zIndex="1000",document.body.appendChild(Se);const Ne=cd(ve,W);Ne.on("state_changed",we=>{const se=we.bytesTransferred/we.totalBytes*100;Se.style.width=`${se}%`},we=>{console.error("Erro ao fazer upload do áudio:",we),t.current("Não foi possível enviar a mensagem de voz."),document.body.removeChild(Se)},()=>{Ur(Ne.snapshot.ref).then(we=>{const se=F.messageInput.current?F.messageInput.current.value.trim():"",xe={remetente:n.uid,texto:se,audio:{url:we,duracao:H.current.audioSeconds},timestamp:Date.now(),lida:!1};return cr(ge(_e(),`comunidades/${d.current}/mensagens`),xe)}).then(()=>{F.messageInput.current.value="",document.body.removeChild(Se)}).catch(we=>{console.error("Erro ao salvar mensagem de áudio:",we),t.current("Não foi possível enviar a mensagem de voz."),document.body.contains(Se)&&document.body.removeChild(Se)})})}const Pe=W=>{const $=W.target.files[0];if(!$)return;const ve=["image/jpeg","image/png","image/gif","image/webp"],Se=["video/mp4","video/webm","video/ogg"],Ne=20*1024*1024;if(ve.includes($.type)){ct(W);return}else if(Se.includes($.type)){B(W);return}if($.size>Ne){t.current("O tamanho do arquivo não pode ser maior que 20MB.");return}const we=document.getElementById("messageInput"),se=we?we.value.trim():"",xe=Zn(ei(),`chat_files/${d.current}/${n.uid}_${Date.now()}_${$.name}`);ld(xe,$).then(Qe=>Ur(Qe.ref)).then(Qe=>{const ft={remetente:n.uid,texto:se,arquivo:{url:Qe,nome:$.name,tipo:$.type,tamanho:$.size},timestamp:po()};return cr(ge(_e(),`comunidades/${d.current}/mensagens`),ft)}).then(()=>{F.fileInput.current.value="",we&&(we.value="")}).catch(Qe=>{console.error("Erro no upload do arquivo:",Qe),t.current("Não foi possível enviar o arquivo.")})};function ct(W){const $=W.target.files[0];if(!$)return;const ve=["image/jpeg","image/png","image/gif","image/webp"],Se=5*1024*1024;if(!ve.includes($.type)){t.current("Apenas suportamos imagens JPEG, PNG, GIF e WebP.");return}if($.size>Se){t.current("A imagem não pode ser maior que 5MB.");return}const Ne=document.getElementById("messageInput"),we=Ne?Ne.value.trim():"",se=Zn(ei(),`chat_images/${d.current}/${n.uid}_${Date.now()}_${$.name}`);ld(se,$).then(xe=>Ur(xe.ref)).then(xe=>{const Qe={remetente:n.uid,texto:we,imagem:xe,timestamp:po()};return cr(ge(_e(),`comunidades/${d.current}/mensagens`),Qe)}).then(()=>{F.fileInput.current.value="",Ne&&(Ne.value="")}).catch(xe=>{})}function B(W){const $=W.target.files[0];if(!$)return;const ve=20*1024*1024;if(!["video/mp4","video/webm","video/ogg"].includes($.type)){t.current("Apenas suportamos vídeos MP4, WebM ou OGG.");return}if($.size>ve){t.current("O tamanho do vídeo não pode ser maior que 20MB.");return}const Ne=document.getElementById("messageInput"),we=Ne?Ne.value.trim():"",se=Zn(ei(),`chat_videos/${d.current}/${n.uid}_${Date.now()}_${$.name}`),xe=document.createElement("div");xe.style.width="0%",xe.style.height="4px",xe.style.backgroundColor="#4CAF50",xe.style.position="fixed",xe.style.top="0",xe.style.left="0",xe.style.zIndex="1000",document.body.appendChild(xe);const Qe=cd(se,$);Qe.on("state_changed",ft=>{const mt=ft.bytesTransferred/ft.totalBytes*100;xe.style.width=`${mt}%`},ft=>{console.error("Erro no upload do vídeo:",ft),t.current("Não foi possível enviar o vídeo."),document.body.contains(xe)&&document.body.removeChild(xe)},async()=>{const ft=await Ur(Qe.snapshot.ref),mt={remetente:n.uid,texto:we,video:ft,timestamp:po()};return F.fileInput.current.value="",Ne&&(Ne.value=""),document.body.removeChild(xe),cr(ge(_e(),`comunidades/${d.current}/mensagens`),mt)})}function fe(){if(!n||!d.current)return;const W=document.getElementById("messageInput");if(!W){console.error("Elemento messageInput não encontrado");return}const $=W.value.trim();$!==""&&It(ge(_e(),`comunidades/${d.current}/membros/${n.uid}/muted`)).then(ve=>{if(ve.exists()){const Ne=ve.val(),we=new Date().getTime();if(Ne.until>we){const se=new Date(Ne.until-we),xe=Math.floor(se/(60*60*1e3)),Qe=Math.floor(se%(60*60*1e3)/(60*1e3));t.current(`Você está silenciado e não pode enviar mensagens. Tempo restante: ${xe}h ${Qe}m`);return}else Gt(ge(_e(),`comunidades/${d.current}/membros/${n.uid}/muted`))}const Se={remetente:n.uid,texto:$,timestamp:po()};cr(ge(_e(),`comunidades/${d.current}/mensagens`),Se).then(()=>{W.value="";const Ne=document.getElementById("chat-messages");Ne&&(Ne.scrollTop=Ne.scrollHeight)}).catch(Ne=>{console.error("Erro ao enviar mensagem:",Ne),t.current("Não foi possível enviar a mensagem.")})})}function Ce(){return It(ge(_e(),"comunidades/"+d.current)).then(W=>{if(!W.exists())return!1;const $=W.val();return $.privacidade==="publica"?!0:$.criador===n.uid||$.membros&&$.membros[n.uid]}).catch(W=>(console.error("Erro ao verificar acesso:",W),!1))}function pe(W){return new URLSearchParams(window.location.search).get(W)}function De(W){const $=document.getElementById("messageInput"),ve=document.querySelector("#chat-input button");$&&(W?($.removeAttribute("disabled"),$.placeholder="Digite sua mensagem..."):($.setAttribute("disabled","disabled"),$.placeholder="Entre na comunidade para enviar mensagens...")),ve&&(W?(ve.removeAttribute("disabled"),ve.style.opacity="1"):(ve.setAttribute("disabled","disabled"),ve.style.opacity="0.5"))}function re(){!n||!d.current||It(ge(_e(),`comunidades/${d.current}`)).then(W=>{if(!W.exists())return;if(W.val().criador===n.uid){document.getElementById("botao-entrar-container").style.display="none",De(!0);return}It(ge(_e(),`comunidades/${d.current}/membros/${n.uid}`)).then(Se=>{Se.exists()?(document.getElementById("botao-entrar-container").style.display="none",De(!0)):(document.getElementById("botao-entrar-container").style.display="block",De(!1),document.getElementById("botao-entrar").onclick=Q)})})}function Q(){!n||!d.current||hi(ge(_e(),`comunidades/${d.current}/membros/${n.uid}`),{entrou:po()}).then(()=>{document.getElementById("botao-entrar-container").style.display="none",De(!0)}).catch(W=>{console.error("Erro ao entrar na comunidade:",W),t.current("Não foi possível entrar na comunidade.")})}function ye(){const W=document.getElementById("chat-messages");if(!W){console.error("Elemento chat-messages não encontrado");return}let $=document.getElementById("barra-opcoes-selecao");if(!$){$=document.createElement("div"),$.id="barra-opcoes-selecao",$.style.position="fixed",$.style.bottom="0",$.style.left="0",$.style.right="0",$.style.backgroundColor="#333",$.style.color="white",$.style.padding="10px",$.style.display="none",$.style.justifyContent="space-between",$.style.alignItems="center",$.style.zIndex="1000";const Ne=document.createElement("span");Ne.id="contador-selecionadas",Ne.textContent="0 selecionadas";const we=document.createElement("button");we.textContent="Excluir",we.style.backgroundColor="red",we.style.color="white",we.style.border="none",we.style.padding="5px 10px",we.style.borderRadius="5px",we.style.cursor="pointer",we.onclick=mi;const se=document.createElement("button");se.textContent="Cancelar",se.style.backgroundColor="gray",se.style.color="white",se.style.border="none",se.style.padding="5px 10px",se.style.borderRadius="5px",se.style.cursor="pointer",se.onclick=ke,$.appendChild(Ne),$.appendChild(we),$.appendChild(se),document.body.appendChild($)}const ve=ge(_e(),`comunidades/${d.current}/mensagens`),Se=$u(ve,Hy("timestamp"));xo(Se,Ne=>{if(W.innerHTML="",!Ne.exists()){const se=document.createElement("div");se.style.textAlign="center",se.style.padding="20px",se.style.color="#666",se.textContent="Nenhuma mensagem enviada ainda. Seja o primeiro a enviar!",W.appendChild(se);return}const we=[];Ne.forEach(se=>{we.push({id:se.key,...se.val()})}),we.sort((se,xe)=>se.timestamp-xe.timestamp),we.forEach(se=>{const xe=se.id,Qe=document.createElement("div");Qe.style.display="flex",Qe.style.alignItems="flex-start",Qe.style.margin="10px 0",Qe.setAttribute("data-message-id",xe);const ft=document.createElement("img");ft.style.width="40px",ft.style.height="40px",ft.style.borderRadius="50%",ft.style.objectFit="cover",ft.style.marginRight="10px";const mt=document.createElement("div");mt.classList.add("message-bubble"),mt.style.padding="8px",mt.style.borderRadius="15px",mt.style.maxWidth="70%",mt.style.position="relative",mt.style.wordBreak="break-word";const er=se.timestamp,yr=new Date(er);if(se.remetente===n.uid){const Wt=document.createElement("div");Wt.style.position="relative",Wt.style.display="flex",Wt.style.justifyContent="flex-end",Wt.style.width="100%",Wt.classList.add("mensagem-usuario"),Wt.setAttribute("data-message-id",xe),mt.style.backgroundColor="#248232",mt.style.color="white";const Ln=od(yr);if(se.imagem){const Ve=document.createElement("div");Ve.style.maxWidth="250px",Ve.style.margin="5px 0";const Ge=document.createElement("img");Ge.src=se.imagem,Ge.style.maxWidth="100%",Ge.style.borderRadius="10px",Ge.style.cursor="pointer",Ge.onclick=()=>{const ut=document.createElement("div");ut.style.position="fixed",ut.style.top="0",ut.style.left="0",ut.style.width="100%",ut.style.height="100%",ut.style.backgroundColor="rgba(0,0,0,0.8)",ut.style.display="flex",ut.style.justifyContent="center",ut.style.alignItems="center",ut.style.zIndex="1000";const Ct=document.createElement("img");Ct.src=se.imagem,Ct.style.maxWidth="90%",Ct.style.maxHeight="90%",Ct.style.objectFit="contain",ut.onclick=()=>document.body.removeChild(ut),ut.appendChild(Ct),document.body.appendChild(ut)},Ve.appendChild(Ge),mt.appendChild(Ve)}if(se.video){const Ve=document.createElement("div");Ve.style.maxWidth="250px",Ve.style.margin="5px 0",Ve.style.position="relative";const Ge=document.createElement("video");Ge.src=se.video,Ge.style.maxWidth="100%",Ge.style.borderRadius="10px",Ge.controls=!0,Ge.preload="metadata",Ge.onerror=ut=>{console.error("Erro ao carregar vídeo:",ut),console.error("URL do vídeo:",se.video),Ve.innerHTML=`
                        <div style="color:red; text-align:center;">
                            Erro ao carregar vídeo
                            <br>
                            <small>${se.video}</small>
                        </div>
                        `},Ve.appendChild(Ge),mt.appendChild(Ve)}if(se.audio&&se.audio.url){const Ve=document.createElement("div");Ve.style.display="flex",Ve.style.alignItems="center",Ve.style.backgroundColor="#1b5c2438",Ve.style.borderRadius="10px",Ve.style.padding="8px",Ve.style.marginTop="5px";const Ge=document.createElement("div");Ge.style.display="flex",Ge.style.alignItems="center",Ge.style.width="40vh",Ge.style.backgroundColor="#fff",Ge.style.borderRadius="10px",Ge.style.padding="5px";const ut=document.createElement("div");ut.style.flexGrow="1",ut.style.height="4px",ut.style.backgroundColor="#e0e0e0",ut.style.borderRadius="2px",ut.style.marginRight="10px",ut.style.cursor="pointer";const Ct=document.createElement("div");Ct.style.height="100%",Ct.style.width="0%",Ct.style.backgroundColor="#248232",ut.appendChild(Ct);const Un=document.createElement("button");Un.innerHTML='<i class="fa-solid fa-play"></i>',Un.style.backgroundColor="transparent",Un.style.border="none",Un.style.fontSize="20px",Un.style.color="green",Un.style.cursor="pointer";const Vn=document.createElement("input");Vn.type="range",Vn.value="100",Vn.min="0",Vn.max="100",Vn.style.width="60px",Vn.style.marginLeft="10px";const An=new Audio(se.audio.url);An.preload="auto",An.ontimeupdate=()=>{const Rn=An.currentTime/An.duration*100;Ct.style.width=`${Rn}%`},An.onended=()=>{Un.innerHTML='<i class="fa-solid fa-play"></i>'},ut.addEventListener("click",Rn=>{const Fs=ut.getBoundingClientRect(),vr=(Rn.clientX-Fs.left)/Fs.width*An.duration;An.currentTime=vr}),Un.onclick=()=>{An.paused?(An.play(),Un.innerHTML='<i class="fa-solid fa-pause"></i>'):(An.pause(),Un.innerHTML='<i class="fa-solid fa-play"></i>')},Vn.oninput=Rn=>{An.volume=Rn.target.value/100},Ge.appendChild(Un),Ge.appendChild(ut),Ge.appendChild(Vn),Ve.appendChild(Ge);const tr=se.audio.duracao||0,Za=Math.floor(tr/60),Ft=tr%60,an=`${Za.toString().padStart(2,"0")}:${Ft.toString().padStart(2,"0")}`,zt=document.createElement("div");zt.style.marginLeft="10px",zt.style.fontSize="12px",zt.style.color="white",zt.textContent=`${an}`,Ve.appendChild(zt),mt.appendChild(Ve)}if(se.arquivo){const Ve=document.createElement("div");Ve.style.display="flex",Ve.style.alignItems="center",Ve.style.backgroundColor="#1b5c2438",Ve.style.borderRadius="10px",Ve.style.padding="8px",Ve.style.marginTop="5px",Ve.style.cursor="pointer";const Ge=document.createElement("div");switch(Ge.style.marginRight="10px",Ge.style.fontSize="24px",se.arquivo.tipo){case"application/pdf":Ge.innerHTML='<i class="fa-solid fa-file-pdf"></i>';break;case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":Ge.innerHTML='<i class="fa-solid fa-file-word"></i>';break;case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":Ge.innerHTML='<i class="fa-solid fa-chart-simple"></i>';break;case"text/plain":Ge.innerHTML='<i class="fa-solid fa-file-lines"></i>';break;case"application/zip":Ge.innerHTML='<i class="fa-solid fa-file-zipper"></i>';break;case"application/x-rar-compressed":Ge.innerHTML='<i class="fa-solid fa-file-zipper"></i>';break;default:Ge.innerHTML='<i class="fa-solid fa-file"></i>'}const ut=document.createElement("div");ut.innerHTML=`
                            <strong>${se.arquivo.nome}</strong>
                            <div style="font-size: 12px; color: white;">
                            ${Ci(se.arquivo.tamanho||0)}
                            </div>
                        `;const Ct=document.createElement("a");Ct.href=se.arquivo.url,Ct.target="_blank",Ct.download=se.arquivo.nome,Ct.style.marginLeft="auto",Ct.style.color="white",Ct.style.textDecoration="none",Ct.innerHTML='<i class="fa-solid fa-download"></i>&nbsp; Baixar',Ve.appendChild(Ge),Ve.appendChild(ut),Ve.appendChild(Ct),mt.appendChild(Ve)}if(se.texto){const Ve=document.createElement("div");Ve.textContent=se.texto,mt.appendChild(Ve)}const Ai=document.createElement("div");Ai.textContent=Ln,Ai.style.textAlign="right",Ai.style.fontSize="small",mt.appendChild(Ai);const wt=document.createElement("div");wt.innerHTML="⋮",wt.style.cursor="pointer",wt.style.fontSize="20px",wt.style.padding="5px 8px",wt.style.marginLeft="5px",wt.style.alignSelf="flex-start",wt.style.color="#333",wt.style.borderRadius="50%",wt.style.transition="background-color 0.2s",wt.style.position="relative",wt.title="Opções da mensagem",wt.onmouseover=()=>{wt.style.backgroundColor="#f0f0f0"},wt.onmouseout=()=>{wt.style.backgroundColor="transparent"};const jt=`menu-${xe}`,Ye=document.createElement("div");Ye.id=jt,Ye.className="menu-opcoes",Ye.style.position="absolute",Ye.style.right="0",Ye.style.top="25px",Ye.style.backgroundColor="white",Ye.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",Ye.style.padding="5px 0",Ye.style.borderRadius="5px",Ye.style.zIndex="1000",Ye.style.display="none",Ye.style.minWidth="120px";const Bt=document.createElement("div");Bt.textContent="Excluir mensagem",Bt.style.padding="8px 15px",Bt.style.cursor="pointer",Bt.style.color="#E53935",Bt.style.fontSize="14px",Bt.style.transition="background-color 0.2s",Bt.onmouseover=()=>{Bt.style.backgroundColor="#f5f5f5"},Bt.onmouseout=()=>{Bt.style.backgroundColor="transparent"},Bt.onclick=Ve=>{Ve.stopPropagation(),se.arquivo?Ue(xe,se.arquivo.url):se.imagem?me(xe,se.imagem):Re(xe)},wt.onclick=Ve=>{Ve.stopPropagation(),Ze(jt)},Ye.appendChild(Bt),wt.appendChild(Ye),Wt.appendChild(mt),Wt.appendChild(wt),Qe.appendChild(Wt),Wt.addEventListener("dblclick",function(Ve){Et(this,xe),Ve.stopPropagation()}),Wt.addEventListener("click",function(Ve){p.current&&(ae(this,xe),Ve.stopPropagation())})}else mt.style.backgroundColor="#E8E8E8",mt.style.color="#333",mt.style.marginRight="auto",It(ge(_e(),"usuarios/"+se.remetente)).then(Wt=>{const Ln=Wt.val()||{nome:"Usuário"};ft.src=Ln.fotoPerfil?Ln.fotoPerfil:ni,ft.alt=Ln.nome||"Usuário";const Ai=od(yr);if(se.imagem){const jt=document.createElement("img");jt.src=se.imagem,jt.style.maxWidth="100%",jt.style.borderRadius="10px",jt.style.marginBottom="8px",jt.style.cursor="pointer",jt.onclick=()=>{const Ye=document.createElement("div");Ye.style.position="fixed",Ye.style.top="0",Ye.style.left="0",Ye.style.width="100%",Ye.style.height="100%",Ye.style.backgroundColor="rgba(0,0,0,0.8)",Ye.style.display="flex",Ye.style.justifyContent="center",Ye.style.alignItems="center",Ye.style.zIndex="1000";const Bt=document.createElement("img");Bt.src=se.imagem,Bt.style.maxWidth="90%",Bt.style.maxHeight="90%",Bt.style.objectFit="contain",Ye.onclick=()=>document.body.removeChild(Ye),Ye.appendChild(Bt),document.body.appendChild(Ye)},mt.appendChild(jt)}if(se.video){const jt=document.createElement("div");jt.style.maxWidth="250px",jt.style.margin="5px 0",jt.style.position="relative";const Ye=document.createElement("video");Ye.src=se.video,Ye.style.maxWidth="100%",Ye.style.borderRadius="10px",Ye.controls=!0,Ye.preload="metadata",Ye.onerror=Bt=>{console.error("Erro ao carregar vídeo:",Bt),console.error("URL do vídeo:",se.video),jt.innerHTML=`
                                <div style="color:red; text-align:center;">
                                    Erro ao carregar vídeo
                                    <br>
                                    <small>${se.video}</small>
                                </div>
                                `},jt.appendChild(Ye),mt.appendChild(jt)}if(se.texto){const jt=document.createElement("div");jt.textContent=se.texto,mt.appendChild(jt)}const wt=document.createElement("div");wt.textContent=Ai,wt.style.textAlign="right",wt.style.fontSize="small",mt.appendChild(wt)}).catch(Wt=>{console.error("Erro ao buscar informações do remetente:",Wt),ft.src=ni,ft.alt="Usuário"}),Qe.appendChild(ft),Qe.appendChild(mt);W.appendChild(Qe)}),W.scrollTop=W.scrollHeight})}function me(W,$){n&&confirm("Tem certeza que deseja excluir esta mensagem com imagem?")&&Xl(Zn(ei(),$)).then(()=>Gt(ge(_e(),`comunidades/${d.current}/mensagens/${W}`))).then(()=>{console.log("Mensagem e imagem excluídas com sucesso")}).catch(ve=>{console.error("Erro ao excluir mensagem com imagem:",ve),t.current("Não foi possível excluir a mensagem.")})}function Ue(W,$){n&&confirm("Tem certeza que deseja excluir esta mensagem com arquivo?")&&Xl(Zn(ei(),$)).then(()=>Gt(ge(_e(),`comunidades/${d.current}/mensagens/${W}`))).then(()=>{console.log("Mensagem e arquivo excluídos com sucesso")}).catch(ve=>{console.error("Erro ao excluir mensagem com arquivo:",ve),alert("Não foi possível excluir a mensagem.")})}function Re(W){confirm("Tem certeza que deseja excluir esta mensagem?")&&Gt(ge(_e(),`comunidades/${d.current}/mensagens/${W}`)).then(()=>{console.log("Mensagem excluída com sucesso")}).catch($=>{console.error("Erro ao excluir mensagem:",$)})}function ae(W,$){if(!p.current||!W.classList.contains("mensagem-usuario"))return;const ve=_.current.indexOf($);ve===-1?(_.current.push($),W.style.opacity="0.7",W.querySelector(".message-bubble").style.borderWidth="2px",W.querySelector(".message-bubble").style.borderStyle="solid",W.querySelector(".message-bubble").style.borderColor="yellow"):(_.current.splice(ve,1),W.style.opacity="1",W.querySelector(".message-bubble").style.border="none",_.current.length===0&&ke());const Se=document.getElementById("contador-selecionadas");Se&&(Se.textContent=`${_.current.length} selecionada${_.current.length!==1?"s":""}`)}function ke(){p.current=!1,document.querySelectorAll(".mensagem-usuario").forEach($=>{$.style.opacity="1",$.querySelector(".message-bubble").style.border="none"});const W=document.getElementById("barra-opcoes-selecao");W&&(W.style.display="none")}function Et(W,$){if(!p.current){p.current=!0,_.current=[],ae(W,$);const ve=document.getElementById("barra-opcoes-selecao");ve&&(ve.style.display="flex")}}function Ze(W){const $=document.getElementById(W);if(!$)return;document.querySelectorAll(".menu-opcoes").forEach(Se=>{Se.id!==W&&(Se.style.display="none")}),$.style.display=$.style.display==="block"?"none":"block";function ve(Se){const Ne=Se.target.closest(".menu-opcoes"),we=Se.target.closest('div[onclick*="toggleMenuOpcoes"]');(!Ne||Ne.id!==W)&&(!we||!we.contains(document.getElementById(W)))&&($.style.display="none",document.removeEventListener("click",ve))}$.style.display==="block"?setTimeout(()=>{document.addEventListener("click",ve)},10):document.removeEventListener("click",ve)}function mi(){_.current.length!==0&&confirm(`Tem certeza que deseja excluir ${_.current.length} mensagem(ns)?`)&&(_.current.forEach(W=>{Gt(ge(_e(),`comunidades/${d}/mensagens/${W}`)).catch($=>{console.error("Erro ao excluir mensagem:",$)})}),ke())}function Ci(W){if(!Number.isFinite(W)||W<0)return"Tamanho inválido";if(W===0)return"0 Bytes";const $=1024,ve=["Bytes","KB","MB","GB","TB"],Se=Math.floor(Math.log(W)/Math.log($));return`${(W/Math.pow($,Se)).toFixed(2)} ${ve[Se]}`}function ht(W,$){W.preventDefault();const ve=$.id===i.current,Se=n.uid===i.current;if(ve&&!Se)return;const Ne=s.current[$.id],we=Se;var se=`${W.clientX}px`,xe=`${W.clientY}px`;const Qe=F.menu.current.getBoundingClientRect();Qe.right>window.innerWidth&&(se=`${window.innerWidth-Qe.width-10}px`),Qe.bottom>window.innerHeight&&(xe=`${window.innerHeight-Qe.height-10}px`),O({show:!0,isUserCreator:Se,targetIsAdmin:Ne,left:se,top:xe,...$}),we&&F.menu.current.querySelector(".toggle-admin").addEventListener("click",()=>{Si($.id,Ne),O(ft=>({show:!1,...ft}))}),F.menu.current.querySelector(".mute-member").addEventListener("click",()=>{Z($.id),O(ft=>({show:!1,...ft}))}),F.menu.current.querySelector(".kick-member").addEventListener("click",()=>{hn($.id),O(ft=>({show:!1,...ft}))}),F.menu.current.querySelector(".ban-member").addEventListener("click",()=>{Dt($.id),O(ft=>({show:!1,...ft}))}),document.addEventListener("click",function ft(mt){!F.menu.current.contains(mt.target)&&!mt.target.closest(".member-item")&&(O(er=>({show:!1,...er})),document.removeEventListener("click",ft))})}function Si(W,$){W!==i.current&&($?Gt(ge(_e(),`comunidades/${d}/admins/${W}`)).then(()=>{delete s.current[W],U(c)}).catch(ve=>{console.error("Erro ao remover administrador:",ve),alert("Não foi possível remover o administrador.")}):hi(ge(_e(),`comunidades/${d}/admins/${W}`),!0).then(()=>{s.current[W]=!0,U(c)}).catch(ve=>{console.error("Erro ao definir administrador:",ve),alert("Não foi possível definir o administrador.")}))}function hn(W){if(W===i.current){alert("Não é possível expulsar o líder da comunidade.");return}if(n.uid!==i.current&&s.current[n.uid]&&s.current[W]){alert("Você não tem permissão para fazer isso.");return}confirm("Tem certeza que deseja expulsar este membro da comunidade?")&&Gt(ge(_e(),`comunidades/${d}/membros/${W}`)).then(()=>s.current[W]?Gt(ge(_e(),`comunidades/${d}/admins/${W}`)):Promise.resolve()).then(()=>{c.current=c.current.filter($=>$.id!==W),document.getElementById("membersCount").textContent=`(${c.current.length})`,U(c)}).catch($=>{console.error("Erro ao expulsar membro:",$),alert("Não foi possível expulsar o membro.")})}function Dt(W){if(W===i.current){alert("Não é possível banir o líder da comunidade.");return}if(n.uid!==i.current&&s.current[n.uid]&&s.current[W]){alert("Você não tem permissão para fazer isso.");return}confirm("Tem certeza que deseja banir permanentemente este membro da comunidade?")&&hi(ge(_e(),`comunidades/${d}/banidos/${W}`),{by:n.uid,timestamp:po(),reason:"Banido por administrador"}).then(()=>Gt(ge(_e(),`comunidades/${d}/membros/${W}`))).then(()=>s.current[W]?Gt(ge(_e(),`comunidades/${d}/admins/${W}`)):Promise.resolve()).then(()=>{c.current=c.current.filter($=>$.id!==W),document.getElementById("membersCount").textContent=`(${c.current.length})`,U(c)}).catch($=>{console.error("Erro ao banir membro:",$),alert("Não foi possível banir o membro.")})}return q.useEffect(()=>{d.current=pe("id")},[location]),q.useEffect(()=>{dv(ve=>{f.current=ve}),document.addEventListener("click",function(ve){p&&!ve.target.closest(".mensagem-usuario")&&ke()});const W=document.getElementById("memberSearch"),$=document.getElementById("searchButton");if(W&&$){let ve=function(){const Se=W.value.toLowerCase().trim();if(Se===""){U(c.current);return}const Ne=c.current.filter(we=>(we.nome||"").toLowerCase().includes(Se));U(Ne)};$.addEventListener("click",ve),W.addEventListener("keypress",function(Se){Se.key==="Enter"&&(Se.preventDefault(),ve())}),W.addEventListener("input",function(){ve()})}},[]),q.useEffect(()=>{n&&(d.current=pe("id"),d.current?Ce().then(W=>{W?(A(),ye(),re()):(alert("Você não tem permissão para acessar esta comunidade."),e("/"))}):(alert("ID da comunidade não encontrado."),e("/")))},[n]),b.jsxs("div",{id:"com-page",className:"page",children:[b.jsx("div",{id:"bannerOverlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.3)",display:"none",justifyContent:"center",alignItems:"center",color:"white",fontSize:18},children:"Clique para editar o banner"}),b.jsx("main",{children:b.jsxs("div",{className:"community-container",children:[b.jsxs("div",{className:"community-left",children:[b.jsxs("div",{className:"comunidade-info",children:[b.jsx("div",{id:"communityBanner",style:{width:"100%",height:200,backgroundColor:"#f0f0f0",backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer",borderTopRightRadius:30,borderTopLeftRadius:30}}),b.jsx("img",{id:"comunidadeImagem",src:nm,alt:"Imagem da comunidade"}),b.jsx("h2",{id:"comunidadeTitulo",children:"Nome da Comunidade"}),b.jsx("p",{id:"comunidadeDescricao",children:"Descrição da comunidade"}),b.jsxs("p",{id:"comunidadeTags",children:["Tags: ",b.jsx("span",{})]})]}),b.jsx("div",{id:"botao-entrar-container",style:{textAlign:"center",margin:"15px 0",display:"none"},children:b.jsx("button",{id:"botao-entrar",style:{padding:"10px 20px",fontSize:16,background:"#248232",color:"#fff",border:"none",borderRadius:5,cursor:"pointer"},children:"Entrar na Comunidade"})}),b.jsxs("div",{id:"chat-container",children:[b.jsx("h3",{children:"Chat da Comunidade"}),b.jsx("div",{id:"chat-messages"}),b.jsxs("div",{id:"chat-input",children:[b.jsx("input",{type:"file",ref:F.fileInput,id:"fileUpload",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.zip,.rar,image/*,video/*",style:{display:"none"},onChange:Pe}),b.jsx("textarea",{ref:F.messageInput,id:"messageInput",placeholder:"Digite sua mensagem..."}),b.jsx("i",{onClick:fe,className:"fa-solid fa-paper-plane send-item","aria-hidden":"true"}),b.jsx("i",{onClick:()=>F.fileInput.current.click(),className:"fa-solid fa-paperclip send-item","aria-hidden":"true"}),b.jsx("i",{onClick:G,id:"audio-record-btn",title:"Gravar mensagem voz",className:"fa-solid  attachment-btn send-item "+(j?"fa-stop recording":"fa-microphone")})]})]})]}),b.jsx("div",{className:"community-right",children:b.jsxs("div",{className:"members-container",children:[b.jsxs("div",{className:"members-header",children:[b.jsxs("h3",{children:["Membros ",b.jsxs("span",{id:"membersCount",children:["(",R,")"]})]}),b.jsxs("div",{className:"search-box",children:[b.jsx("input",{type:"text",id:"memberSearch",placeholder:"Buscar membro..."}),b.jsx("button",{id:"searchButton",children:b.jsx("i",{className:"fas fa-search"})})]})]}),b.jsx("div",{id:"membersList",children:v.map((W,$)=>b.jsxs(Mn,{to:"/perfil?id="+W.id,className:"member-item",onClick:ve=>{const Se=a&&W.id!==n.uid,Ne=n.uid===i.current;Se&&(Ne||W.id!==i.current)&&ht(ve,W)},children:[b.jsx("img",{src:W.fotoPerfil||ni,alt:W.nome,className:"member-avatar"}),b.jsx("div",{className:"member-info",children:b.jsxs("div",{className:"member-name",children:[b.jsx("div",{children:W.nome||"Usuário"}),W.isCreator?b.jsx("i",{className:"fas fa-crown crown-icon",title:"Líder da comunidade"}):b.jsx(b.Fragment,{}),W.isAdmin&&!W.isCreator?b.jsx("span",{className:"admin-badge",children:"Admin"}):b.jsx(b.Fragment,{})]})})]},$))})]})})]})}),b.jsx("div",{id:"bannerModal",style:{display:"none",position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",zIndex:1e3},children:b.jsxs("div",{style:{background:"white",padding:20,borderRadius:10,width:"90%",maxWidth:500},children:[b.jsx("h3",{children:"Editar Banner da Comunidade"}),b.jsx("input",{type:"file",id:"bannerFileInput",accept:"image/*",style:{margin:"10px 0"}}),b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[b.jsx("button",{onClick:N,style:{padding:"10px 20px",background:"#f44336",color:"white",border:"none",borderRadius:5,cursor:"pointer"},children:"Cancelar"}),b.jsx("button",{onClick:L,style:{padding:"10px 20px",background:"#4CAF50",color:"white",border:"none",borderRadius:5,cursor:"pointer"},children:"Salvar"})]})]})}),b.jsxs("div",{className:"member-options",style:{position:"absolute",display:k.show?"block":"none",left:k.left,top:k.top},ref:F.menu,children:[b.jsxs(Mn,{to:"/perfil?id="+k.id,className:"member-options-header",children:[b.jsx("img",{src:k.fotoPerfil||ni,alt:k.nome}),k.nome||"Usuário"]}),k.isUserCreator&&b.jsx("div",{className:"option-item toggle-admin",children:k.targetIsAdmin?"Remover administrador":"Definir como administrador"}),b.jsx("div",{className:"option-item mute-member",children:"Silenciar membro"}),b.jsx("div",{className:"option-item danger kick-member",children:"Expulsar da comunidade"}),b.jsx("div",{className:"option-item danger ban-member",children:"Banir permanentemente"})]}),b.jsx(rh,{showPopup:t})]})}const Up="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAekAAADgCAYAAAAntp7rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA3fSURBVHgB7d3PchRHngfwzBLseDyH0SNoHoAwN8Int28zwzgC23PwskQgTlqfBuwHkHgAPOKkIyLC2D7srtkIZM/NzQmOBH4B+QlWEzHjWP6oc6sEeCXAlhq1qMyszydCIEFDdNYvs79VmdnVMczQ12fOzG8/eDCaa5p3QkoLKYSToWnm2+/nf3pQjFthMtnsfo8h3NueTG7P/epX4/dv3twKAJCBXPIshkPqGhIePz7fPvEzbSNG4dWN26/1ePz47baBmwEAXqMc8+yVQ7ptzEJ49OgvKcbFPWcWM9A+qfVw/PhlYQ3AUcs5z6YO6e5MIz1+vNI25C/hiAlrAI5KCXk2VUj/xx/+cKaZm7s26zONfWy2XysfbGxcDwAwA6Xk2YFC+nWebfyc9omuvr+xcSkAwCsqLc/2Delurj49evR16Ha29W+zXYh/1/Q3ANMqMc9+MaSfNui79tuFkA9BDcBUSs2znw3pTBv0TJZBfW7t01GKYTmmdLL9/XWuc0whjUNs1m8sXXmlNf4y2tg5XDuZjXL6y276Tm1KzrPm5/5Vxg3qLKSHD7++NhplM+jPrV1aSTG1xyyN8n4xiqN2LWb97NrFlTClctrYefV2Mhtl9Zfd9J3alJxnLw3p//rTn1ZDvg16IsaT87/5zXLIwNm1TxZTjFk8l4OKsVn+aO3i6KCPL7GNnWnbyWyU2l9203fqUHqevRDS//nHPy72uettGimEi902+tCzGOP5UKC5KV5ES21jZ67wsChRyf1lN32nbDXk2Z6Q7ubtY2Gdsmmaa/1Pe6dRKFGKU+xwLLSNnanayWwU3F9203eKVUue7b2SfvSoa9BCKMt8LtPexSlqnfAQhtJOZk/fKVclefZTSO/sfgthMRSomybYufcqAINXU579/5X0k7OOYk0ePChi3QGAI1ZRnu2EdMlnHc/EplnM6S1ZALx+teXZTkhPHj4chfLNz//611XsKAXg1dSWZzsh3VTydonUNL2/HQuA/tSWZ83OJ4KEMAp1GJnyBhimGvOs2X78eBQq8ts333wnADA4NeZZM5dSVaGWUiU3UQBgKjXmWbcmXdcddWJcCAAMUXV51rTz91Wt4cbaigTAgdSYZ011V54x2jgGMEQV5lnTTnrXFmpCGmCIKsyzJgAAWRLSAJCpbk16K9SltvYAcBAV5lkTJpO6GpXSZgBgeCrMsyY2zb1Qk/rOpAA4gBrzrKntyjNNJnUVCYCDqTDPmu0Yb4eKxBjHAYDBqTHPmrljx8ahIn//8ceqigTAwdSYZ837N29uxRDGoQ7jC+OxNWmAAaoxz568TzrGm6EO6wGA4aosz56E9LFj12vYFf1ge9tUN8CQVZZnOyG9M0WQ0nooWGqf/7/+7W+bAYDBqi3Pfrot6P9ub18NBXs4mVwOAAxeTXn2U0h3qZ1CWA0FchUNwDM15dmeD9hojh+/XNxcfkqbrqIB2K2WPNsT0t1c/iSEC6EkMa64igZgt1ry7IWPqvzzrVs3S5kmSJPJ6gcbG9cDADynhjx76edJ70wThJD3PbDbaYEPv/32UgCAn1F6nr00pLtpggfb2+9ne7Py9nk9mEzeDQDwC0rPs+bn/qKbF9/5h7k17GmDrEMDcBAl51nzS/8+u4aldE9AAzCtUvPsF0O60/0HH3zzze/6XnzvFtX//uOPAhqAV1Jinu0b0s98uLFxKaV0oYezkK3JZPJ+t6juE64AOKyS8uzAId358Jtv1rvL8/Sa7ou6c7bxz3/+7s/fflvLp5oAkIFS8uxYmNLTy/MLX/7+95f/pWmWY4yLYba22sasP0zpqqltAI5KCXk2dUg/81zjRk2M59t5/lF4deP2AN3c+sc/rhc3rZ3CVohhPtRsCG0EBinnPHvlkH7maePWu69ro9H8b9988512+mDUNM3JtpHdi/pCCHte3LfadYCt2DT3Jtvbm21Dxu0C+u2i15tjvNem2CgUJ40P/NBi29iZop3AYOWYZ4cO6d2ePrH/fvo1GDGFyyke6qyrH3GnMx7soaW2sTNFOwE6ueTZVBvHeLnPP77STm2ElVCQFCcrN5b+euD7npfYxs607WRGuuUR4NCE9Ix8vvTZ5ZQmF9rLtnHI1c4LZxpPmjT6Yml16o/3LKKNnUO2kxnYWR6pgaUS+hUDwIydW/t0lGL6LpQupkUzMfRpLgDM2P2NO5tvvfd29+0oFKpbKmlnYq4G6JGQBo7E/Vt3bp84feqHGJtnu2Lzt/NWw3R30oTFL5dWXUHTu5dOdz+ZqgrLMaWTKdv3xrZrRbFZv7F0xUCiGMbWsKh3/0qvwQtX0ufWLq20DbkWujPfGN4I2YoL7S9n2jP1+P3G3XGAzBlbw6Le/auhBnuupM+ufbIYnzSoKNtp8u5XH6+OA2TK2BoW9e5fLTXY8xasGOP5UKC5GJcDZMzYGhb17l8tNXjufdKF3vYxxZMBsmZsDYt696+OGsz0tqC9yWQzgE0iVMeHqgyLevfvuRq449iMPNmg0N28IY3yDehOHIWU1s+uXVwJAGRNSM9At0EhFbaWE2Oz/NHaxVEAIFtCegZsEgHgKAjpmbBJBIDZE9JDZpMIQNaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkSkgDQKaENABkam9Ip7AVgNkztoZFvftXSQ32hnSM90KR0jhAzoytYVHv/lVSgz0hHVO4HEoUw3qAjBlbw6Le/aulBntC+vOPr4xjDCuhIClOVm4s/fV6gIwZW8Oi3v2rpQYvbBz7fOmzyylNLrRxPg652llrSONJk0ZfLK2WebbE4Bhbw6Le/auhBjFwaP+29sn/tEdyPhToxr9/pg8AZMpbsGbBJhEAjoCQngGbRAA4CnOBQ7u/cWfzrffe7r4dhUJ0GxTa9Y+rAYBsCekZuX/rzu0Tp0/9EGPTrU0vhBx1GxRiujtpwuKXS6t27QIAAAAAAABHzXtkgSNzbu3TUYphOaZ0MhVzL4E0DrFZv7F0xb4NemfjGHAkzq1dWmmD+VroNlLG8EYoRlxofzlz4vSp+P3G3XGAHrmSBmbu7Noni/FJQBdtO03e/erj1XGAnriZCTBzMcbzoQJzMS4H6NGxl/1hGetI+a0bDeG4lbPGmOe64nDGVhqFGqR4MhyC19L+lV6DF66kn6wjpe+6QZb3i3AchZTWz65dXAkZGMJxK6eNnbz6R8fYKtAh6qTe/auhBntCultHSoVN78TYLH+0dnEUejSE41ZiGzs59I+OsTUs6t2/WmrQ7H1AmetIfa8bDeG4lbzGmMO6orE1LOrdv1pq8Nx0d6HrSIdcN5rBExiFEk113ApeY+y9f3SMrWFR7/7VUYM6dncXc5OEzAzluOkfr86xGxb17t9zNfAWLADIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEwJaQDIlJAGgEztDekUtgLTG8Jx0zcOZ2jHb+j9xXjpXyU12BvSMd4LRUrj0KchHLdi29jpuX90hja2iu4vuw2t/RmMlVmppAZ7QjqmcDmUKIb10KMhHLdi29jpuX/sPIWBja2i+8tuQ2t/BmNlVmqpwdzuH+5v3Nl86723u29HoRApTla+WFq9Gno0hONWYhs7OfSPztDGVqn9ZbehtT+XsTIrtdRg7vkH3b915/aJ06d+iLGZb39cCDnq1hpiujtpwuKXS6vXQwaGcNyKaGMnw/7RGdrYKqa/7Da09mc6VmZFDQAAAAAAAAAAAAAAAAAAAAAAAAAAgFcQX/aH59Y+HaUYlmNKJ9vf50OW0jjEZv3G0pVs7nXquLEffWRY1Lt/pdfghQ/YOLd2aaVtyLXQ3Yw8hjdCtuJC+8uZE6dPxe837o5Dzxw39qOPDIt696+GGuy5kj679slifNKgomynybtffbw6Dj1x3NiPPjIs6t2/WmrQ7P7LGOP5UKC5GJdDjxw39qOPDIt696+WGjR7/zqNQolSPBl65bixH31kWNS7f3XUoAk1yHYzQOYcN/ajjwyLevfvuRrUEdIAUCEhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkCkhDQCZEtIAkKm9IZ3CVmB6jhv70UeGRb37V0kN9oZ0jPdCkdI49MlxYz/6yLCod/8qqcGekI4pXA4limE99MhxYz/6yLCod/9qqcHc7h/ub9zZfOu9t7tvR6EQKU5WvlhavRp65LixH31kWNS7f7XUYO75B92/def2idOnfoixmW9/XAg56tYaYro7acLil0ur10MGHDf2o48Mi3r3r4Ya/B/51/eV9G4kXwAAAABJRU5ErkJggg==";function VF(){const{usuarioLogado:n,setUsuarioLogado:e}=gr(),t=q.useRef(null),i=()=>{const s=document.getElementById("loginEmail").value,a=document.getElementById("loginSenha").value;T2(Lo(),s,a).then(c=>{e(c.user)}).catch(()=>{t.current("E-mail ou senha incorreto.")})};return n?b.jsx(b.Fragment,{}):b.jsxs(b.Fragment,{children:[b.jsx("div",{id:"signin",className:"page",children:b.jsxs("main",{id:"sign-container",children:[b.jsx("img",{id:"logo",src:Up,width:"150px"}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Email:"}),b.jsx("input",{type:"email",id:"loginEmail",required:!0})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Senha:"}),b.jsx("input",{type:"password",id:"loginSenha",required:!0})]}),b.jsxs("p",{children:["Não possui conta? ",b.jsx(Mn,{to:"/registro",children:"Registre-se"})]}),b.jsx("button",{onClick:i,id:"btn-submit",type:"submit",children:"Entrar"})]})}),b.jsx(rh,{showPopup:t})]})}function sN(){const{refs:n,usuarioLogado:e,setNavigate:t,logout:i}=gr(),s=Us(),a=Ls(),[c,d]=q.useState([]),[f,p]=q.useState(null);function _(){It(ge(_e(),`friends/${e.uid}`)).then(j=>{const D=[];j.forEach(F=>{const U=F.key;It(ge(_e(),"usuarios/"+U)).then(Z=>{const x=Z.val();D.push(x)})}),d(D)})}const v=()=>{if(!e){s("/login");return}const j=document.getElementById("searchInput").value.toLowerCase().trim();if(j===""){p(null);return}It(ge(_e(),"usuarios")).then(async D=>{var F=D.val()||{};const U=[];for(const x in F){const A=F[x];var Z="";x!==e.uid&&A.nome.toLowerCase().includes(j)&&((await It(ge(_e(),`friends/${e.uid}/${x}`))).exists()?Z="friend":(await It(ge(_e(),`friendRequests/${x}/${e.uid}`))).exists()?Z="sended_request":Z=(await It(ge(_e(),`friendRequests/${e.uid}/${x}`))).exists()?"received_request":"unsolicited",U.push({fotoPerfil:A.fotoPerfil?A.fotoPerfil:ni,nome:A.nome,mode:Z,id:x}))}p(U)})};function E(j){e&&Gt(ge(_e(),`friendRequests/${e.uid}/${j}`)).then(()=>{O(),_()})}function R(j){e&&It(ge(_e(),`friendRequests/${j}/${e.uid}`)).then(D=>{D.exists()?(n.respa.current.classList.add("erro"),n.respa.current.classList.remove("hidden"),n.respa.current.innerText="Pedido já enviado."):hi(ge(_e(),`friendRequests/${j}/${e.uid}`),!0).then(()=>{n.respa.current.classList.add("sucesso"),n.respa.current.classList.remove("hidden"),n.respa.current.innerText="Pedido enviado!",setTimeout(function(){n.respa.current.classList.add("hidden"),n.respa.current.classList.remove("sucesso"),n.respa.current.innerText=""},3e3);const F=document.querySelector(`button[data-uid="${j}"]`);F&&(F.innerText="Retirar solicitação",F.onclick=()=>C(j)),O()})})}function C(j){e&&Gt(ge(_e(),`friendRequests/${j}/${e.uid}`)).then(()=>{const D=document.querySelector(`button[data-uid="${j}"]`);D&&(D.innerText="Adicionar",D.onclick=()=>R(j)),O()})}function k(j,D=null){e&&(hi(ge(_e(),`friends/${e.uid}/${j}`),!0),hi(ge(_e(),`friends/${j}/${e.uid}`),!0),Gt(ge(_e(),`friendRequests/${e.uid}/${j}`)).then(()=>{O(),_(),D&&(D.innerHTML=`<strong>${D.querySelector("strong").textContent}</strong> <span><b>(Amigos)</b></span>`)}))}function O(){if(!e)return;const j=document.getElementById("friendRequests");if(!j){console.error("Elemento friendRequests não encontrado");return}xo(ge(_e(),`friendRequests/${e.uid}`),D=>{j.innerHTML="",D.exists()?D.forEach(F=>{const U=F.key;It(ge(_e(),"usuarios/"+U)).then(Z=>{const x=Z.val();if(x){const A=document.createElement("div");A.style.display="flex",A.style.alignItems="center",A.style.marginBottom="10px";const N=document.createElement("img");N.src=x.fotoPerfil?x.fotoPerfil:ni,N.alt=`Foto de ${x.nome}`,N.style.width="40px",N.style.height="40px",N.style.borderRadius="50%",N.style.marginRight="10px";const L=document.createElement("strong");L.innerText=x.nome,A.appendChild(N),A.appendChild(L);const V=document.createElement("button");V.textContent="Aceitar",V.classList.add("aceitar"),V.onclick=()=>k(U,A);const G=document.createElement("button");G.textContent="Rejeitar",G.classList.add("rejeitar"),G.onclick=()=>E(U),A.appendChild(V),A.appendChild(G),j.appendChild(A)}})}):j.textContent="Sem pedidos de amizade no momento."})}function H(j){e&&(Gt(ge(_e(),`friends/${e.uid}/${j}`)),Gt(ge(_e(),`friends/${j}/${e.uid}`)).then(()=>{_()}))}return q.useEffect(()=>{window.navigate=s,t(j=>s(j))},[]),q.useEffect(()=>{if(e){hv();const j=document.getElementById("sidebar"),D=document.getElementById("toggleSidebar"),F=document.querySelector("body");D.addEventListener("click",function(){j.classList.toggle("collapsed");const U=document.querySelectorAll("#sidebar .btn-text"),Z=document.getElementById("buscar");j.classList.contains("collapsed")?(j.style.width="50px",D.style.left="60px",F.style.marginLeft="60px",U.forEach(x=>x.style.display="none"),Z&&(Z.style.display="none")):(j.style.width="250px",D.style.left="260px",F.style.marginLeft="260px",U.forEach(x=>x.style.display="inline"),Z&&(Z.style.display="flex"))}),document.getElementById("logoutBtn").addEventListener("click",function(U){U.preventDefault(),Lo().signOut().then(()=>{s("/login")})}),document.addEventListener("DOMContentLoaded",function(){setTimeout(hv,2e3)}),document.addEventListener("DOMContentLoaded",function(){const U=document.querySelector("body");U.style.marginLeft="60px"})}},[e]),e?b.jsxs(b.Fragment,{children:[b.jsx("aside",{id:"sidebar",className:"collapsed",children:b.jsxs("div",{id:"sidebar-content",style:{overflowY:"auto",flexGrow:1},children:[b.jsxs("div",{id:"buscar",style:{display:"none"},children:[b.jsx("input",{type:"text",id:"searchInput",placeholder:"Pesquisar aluno"}),b.jsx("button",{onClick:v,children:b.jsx("i",{className:"fa-solid fa-magnifying-glass","aria-hidden":"true",style:{color:"#9ecc9e"}})})]}),b.jsx("br",{}),b.jsxs("div",{id:"searchResults",children:[f?f.length==0?b.jsx("div",{children:"Nenhum usuário encontrado."}):f.map((j,D)=>b.jsxs("div",{className:"friends-item",children:[b.jsxs(Mn,{className:"friends-link",to:"/perfil?id="+j.id,children:[b.jsx("img",{src:j.fotoPerfil,alt:"Foto de "+j.nome}),b.jsx("strong",{children:j.nome})]}),j.mode=="friend"?b.jsx("span",{children:"(Amigos)"}):j.mode=="sended_request"?b.jsx("button",{className:"retirar",onClick:()=>{E(j.uid),p(F=>F.map(U=>U.id==j.id?{...U,mode:"unsolicited"}:U))},children:"cancelar"}):j.mode=="received_request"?b.jsxs(b.Fragment,{children:[b.jsx("button",{className:"aceitar",onClick:()=>{k(j.id),p(F=>F.map(U=>U.id==j.id?{...U,mode:"friend"}:U))},children:"aceitar"}),b.jsx("button",{className:"rejeitar",onClick:()=>E(j.id),children:"rejeitar"})]}):b.jsx("i",{className:"fa-solid fa-user-plus",onClick:()=>{R(j.id),p(F=>F.map(U=>U.id==j.id?{...U,mode:"sended_request"}:U))}})]},D)):b.jsx(b.Fragment,{}),c.map((j,D)=>b.jsxs("div",{className:"friend-item",style:{display:"flex",alignItems:"center",marginBottom:"10px "},children:[b.jsx("img",{src:j.fotoPerfil,alt:"Foto de "+j.nome,style:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"10px "}}),b.jsx("strong",{children:j.nome}),b.jsx("button",{id:"go-to-friend-perfil",onClick:()=>s(`/perfil?id=${j.id}`),children:"Ver Perfil"}),b.jsx("button",{id:"remove-friend",onClick:()=>H(j.id),children:"Remover"})]},D))]}),b.jsxs("nav",{id:"mainnav",children:[b.jsx("div",{className:"header_logo",children:b.jsx(Mn,{to:"/",children:b.jsx("img",{src:Up,width:"40px",alt:"Logo"})})}),b.jsx(Mn,{to:"/",className:"defbtn"+(a.pathname==="/"?" selected":""),children:b.jsx("i",{className:"fa-solid fa-house"})}),b.jsx(Mn,{to:"/amigos",className:"defbtn"+(a.pathname==="/amigos"?" selected":""),children:b.jsx("i",{className:"fa-solid fa-user-group"})}),b.jsxs(Mn,{to:"/chats",className:"defbtn"+(a.pathname==="/chats"?" selected":""),id:"chatButton",children:[b.jsx("i",{className:"fa-solid fa-comment-dots"}),b.jsx("span",{id:"chatNotification"})]}),b.jsx(Mn,{to:"/perfil",className:"defbtn"+(a.pathname==="/perfil"?" selected":""),children:b.jsx("i",{className:"fas fa-user","aria-hidden":"true"})}),b.jsx(Mn,{to:"/ferramentas",className:"defbtn"+(["/ferramentas","/flashcards","/add-posts"].includes(a.pathname)?" selected":""),children:b.jsx("i",{className:"fa-solid fa-plus"})}),b.jsxs(Mn,{to:"/login",onClick:j=>{j.preventDefault(),i()},className:"defbtn",id:"logoutBtn",children:[b.jsx("i",{className:"fa-solid fa-arrow-right-from-bracket"})," "]})]})]})}),b.jsx("button",{id:"toggleSidebar",children:"☰"})]}):b.jsx(b.Fragment,{})}function oN(n,e){return function(){return n.apply(e,arguments)}}const{toString:jF}=Object.prototype,{getPrototypeOf:u0}=Object,{iterator:Vp,toStringTag:aN}=Symbol,jp=(n=>e=>{const t=jF.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),_r=n=>(n=n.toLowerCase(),e=>jp(e)===n),Bp=n=>e=>typeof e===n,{isArray:kc}=Array,Dd=Bp("undefined");function BF(n){return n!==null&&!Dd(n)&&n.constructor!==null&&!Dd(n.constructor)&&bi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const lN=_r("ArrayBuffer");function FF(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&lN(n.buffer),e}const zF=Bp("string"),bi=Bp("function"),cN=Bp("number"),Fp=n=>n!==null&&typeof n=="object",qF=n=>n===!0||n===!1,im=n=>{if(jp(n)!=="object")return!1;const e=u0(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(aN in n)&&!(Vp in n)},HF=_r("Date"),GF=_r("File"),$F=_r("Blob"),KF=_r("FileList"),QF=n=>Fp(n)&&bi(n.pipe),YF=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||bi(n.append)&&((e=jp(n))==="formdata"||e==="object"&&bi(n.toString)&&n.toString()==="[object FormData]"))},WF=_r("URLSearchParams"),[XF,JF,ZF,e9]=["ReadableStream","Request","Response","Headers"].map(_r),t9=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),kc(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const a=t?Object.getOwnPropertyNames(n):Object.keys(n),c=a.length;let d;for(i=0;i<c;i++)d=a[i],e.call(null,n[d],d,n)}}function uN(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const Da=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,dN=n=>!Dd(n)&&n!==Da;function pv(){const{caseless:n}=dN(this)&&this||{},e={},t=(i,s)=>{const a=n&&uN(e,s)||s;im(e[a])&&im(i)?e[a]=pv(e[a],i):im(i)?e[a]=pv({},i):kc(i)?e[a]=i.slice():e[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&sh(arguments[i],t);return e}const n9=(n,e,t,{allOwnKeys:i}={})=>(sh(e,(s,a)=>{t&&bi(s)?n[a]=oN(s,t):n[a]=s},{allOwnKeys:i}),n),i9=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),r9=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},s9=(n,e,t,i)=>{let s,a,c;const d={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)c=s[a],(!i||i(c,n,e))&&!d[c]&&(e[c]=n[c],d[c]=!0);n=t!==!1&&u0(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},o9=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},a9=n=>{if(!n)return null;if(kc(n))return n;let e=n.length;if(!cN(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},l9=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&u0(Uint8Array)),c9=(n,e)=>{const i=(n&&n[Vp]).call(n);let s;for(;(s=i.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},u9=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},d9=_r("HTMLFormElement"),h9=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),rA=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),f9=_r("RegExp"),hN=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};sh(t,(s,a)=>{let c;(c=e(s,a,n))!==!1&&(i[a]=c||s)}),Object.defineProperties(n,i)},m9=n=>{hN(n,(e,t)=>{if(bi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(bi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},p9=(n,e)=>{const t={},i=s=>{s.forEach(a=>{t[a]=!0})};return kc(n)?i(n):i(String(n).split(e)),t},g9=()=>{},_9=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function y9(n){return!!(n&&bi(n.append)&&n[aN]==="FormData"&&n[Vp])}const v9=n=>{const e=new Array(10),t=(i,s)=>{if(Fp(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const a=kc(i)?[]:{};return sh(i,(c,d)=>{const f=t(c,s+1);!Dd(f)&&(a[d]=f)}),e[s]=void 0,a}}return i};return t(n,0)},E9=_r("AsyncFunction"),T9=n=>n&&(Fp(n)||bi(n))&&bi(n.then)&&bi(n.catch),fN=((n,e)=>n?setImmediate:e?((t,i)=>(Da.addEventListener("message",({source:s,data:a})=>{s===Da&&a===t&&i.length&&i.shift()()},!1),s=>{i.push(s),Da.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",bi(Da.postMessage)),b9=typeof queueMicrotask<"u"?queueMicrotask.bind(Da):typeof process<"u"&&process.nextTick||fN,w9=n=>n!=null&&bi(n[Vp]),ie={isArray:kc,isArrayBuffer:lN,isBuffer:BF,isFormData:YF,isArrayBufferView:FF,isString:zF,isNumber:cN,isBoolean:qF,isObject:Fp,isPlainObject:im,isReadableStream:XF,isRequest:JF,isResponse:ZF,isHeaders:e9,isUndefined:Dd,isDate:HF,isFile:GF,isBlob:$F,isRegExp:f9,isFunction:bi,isStream:QF,isURLSearchParams:WF,isTypedArray:l9,isFileList:KF,forEach:sh,merge:pv,extend:n9,trim:t9,stripBOM:i9,inherits:r9,toFlatObject:s9,kindOf:jp,kindOfTest:_r,endsWith:o9,toArray:a9,forEachEntry:c9,matchAll:u9,isHTMLForm:d9,hasOwnProperty:rA,hasOwnProp:rA,reduceDescriptors:hN,freezeMethods:m9,toObjectSet:p9,toCamelCase:h9,noop:g9,toFiniteNumber:_9,findKey:uN,global:Da,isContextDefined:dN,isSpecCompliantForm:y9,toJSONObject:v9,isAsyncFn:E9,isThenable:T9,setImmediate:fN,asap:b9,isIterable:w9};function We(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}ie.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const mN=We.prototype,pN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{pN[n]={value:n}});Object.defineProperties(We,pN);Object.defineProperty(mN,"isAxiosError",{value:!0});We.from=(n,e,t,i,s,a)=>{const c=Object.create(mN);return ie.toFlatObject(n,c,function(f){return f!==Error.prototype},d=>d!=="isAxiosError"),We.call(c,n.message,e,t,i,s),c.cause=n,c.name=n.name,a&&Object.assign(c,a),c};const C9=null;function gv(n){return ie.isPlainObject(n)||ie.isArray(n)}function gN(n){return ie.endsWith(n,"[]")?n.slice(0,-2):n}function sA(n,e,t){return n?n.concat(e).map(function(s,a){return s=gN(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function S9(n){return ie.isArray(n)&&!n.some(gv)}const A9=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function zp(n,e,t){if(!ie.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,O){return!ie.isUndefined(O[k])});const i=t.metaTokens,s=t.visitor||_,a=t.dots,c=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(s))throw new TypeError("visitor must be a function");function p(C){if(C===null)return"";if(ie.isDate(C))return C.toISOString();if(ie.isBoolean(C))return C.toString();if(!f&&ie.isBlob(C))throw new We("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(C)||ie.isTypedArray(C)?f&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function _(C,k,O){let H=C;if(C&&!O&&typeof C=="object"){if(ie.endsWith(k,"{}"))k=i?k:k.slice(0,-2),C=JSON.stringify(C);else if(ie.isArray(C)&&S9(C)||(ie.isFileList(C)||ie.endsWith(k,"[]"))&&(H=ie.toArray(C)))return k=gN(k),H.forEach(function(D,F){!(ie.isUndefined(D)||D===null)&&e.append(c===!0?sA([k],F,a):c===null?k:k+"[]",p(D))}),!1}return gv(C)?!0:(e.append(sA(O,k,a),p(C)),!1)}const v=[],E=Object.assign(A9,{defaultVisitor:_,convertValue:p,isVisitable:gv});function R(C,k){if(!ie.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+k.join("."));v.push(C),ie.forEach(C,function(H,j){(!(ie.isUndefined(H)||H===null)&&s.call(e,H,ie.isString(j)?j.trim():j,k,E))===!0&&R(H,k?k.concat(j):[j])}),v.pop()}}if(!ie.isObject(n))throw new TypeError("data must be an object");return R(n),e}function oA(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function d0(n,e){this._pairs=[],n&&zp(n,this,e)}const _N=d0.prototype;_N.append=function(e,t){this._pairs.push([e,t])};_N.toString=function(e){const t=e?function(i){return e.call(this,i,oA)}:oA;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function R9(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yN(n,e,t){if(!e)return n;const i=t&&t.encode||R9;ie.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=ie.isURLSearchParams(e)?e.toString():new d0(e,t).toString(i),a){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class aA{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(i){i!==null&&e(i)})}}const vN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},I9=typeof URLSearchParams<"u"?URLSearchParams:d0,x9=typeof FormData<"u"?FormData:null,N9=typeof Blob<"u"?Blob:null,O9={isBrowser:!0,classes:{URLSearchParams:I9,FormData:x9,Blob:N9},protocols:["http","https","file","blob","url","data"]},h0=typeof window<"u"&&typeof document<"u",_v=typeof navigator=="object"&&navigator||void 0,k9=h0&&(!_v||["ReactNative","NativeScript","NS"].indexOf(_v.product)<0),D9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",P9=h0&&window.location.href||"http://localhost",M9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:h0,hasStandardBrowserEnv:k9,hasStandardBrowserWebWorkerEnv:D9,navigator:_v,origin:P9},Symbol.toStringTag,{value:"Module"})),ii={...M9,...O9};function L9(n,e){return zp(n,new ii.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,a){return ii.isNode&&ie.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function U9(n){return ie.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function V9(n){const e={},t=Object.keys(n);let i;const s=t.length;let a;for(i=0;i<s;i++)a=t[i],e[a]=n[a];return e}function EN(n){function e(t,i,s,a){let c=t[a++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),f=a>=t.length;return c=!c&&ie.isArray(s)?s.length:c,f?(ie.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!d):((!s[c]||!ie.isObject(s[c]))&&(s[c]=[]),e(t,i,s[c],a)&&ie.isArray(s[c])&&(s[c]=V9(s[c])),!d)}if(ie.isFormData(n)&&ie.isFunction(n.entries)){const t={};return ie.forEachEntry(n,(i,s)=>{e(U9(i),s,t,0)}),t}return null}function j9(n,e,t){if(ie.isString(n))try{return(e||JSON.parse)(n),ie.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const oh={transitional:vN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,a=ie.isObject(e);if(a&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return s?JSON.stringify(EN(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return L9(e,this.formSerializer).toString();if((d=ie.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return zp(d?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),j9(e)):e}],transformResponse:[function(e){const t=this.transitional||oh.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(i&&!this.responseType||s)){const c=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?We.from(d,We.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ii.classes.FormData,Blob:ii.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],n=>{oh.headers[n]={}});const B9=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),F9=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(c){s=c.indexOf(":"),t=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!t||e[t]&&B9[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},lA=Symbol("internals");function zu(n){return n&&String(n).trim().toLowerCase()}function rm(n){return n===!1||n==null?n:ie.isArray(n)?n.map(rm):String(n)}function z9(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const q9=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function gy(n,e,t,i,s){if(ie.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!ie.isString(e)){if(ie.isString(i))return e.indexOf(i)!==-1;if(ie.isRegExp(i))return i.test(e)}}function H9(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function G9(n,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,a,c){return this[i].call(this,e,s,a,c)},configurable:!0})})}let wi=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function a(d,f,p){const _=zu(f);if(!_)throw new Error("header name must be a non-empty string");const v=ie.findKey(s,_);(!v||s[v]===void 0||p===!0||p===void 0&&s[v]!==!1)&&(s[v||f]=rm(d))}const c=(d,f)=>ie.forEach(d,(p,_)=>a(p,_,f));if(ie.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(ie.isString(e)&&(e=e.trim())&&!q9(e))c(F9(e),t);else if(ie.isObject(e)&&ie.isIterable(e)){let d={},f,p;for(const _ of e){if(!ie.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[p=_[0]]=(f=d[p])?ie.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}c(d,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=zu(e),e){const i=ie.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return z9(s);if(ie.isFunction(t))return t.call(this,s,i);if(ie.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zu(e),e){const i=ie.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||gy(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function a(c){if(c=zu(c),c){const d=ie.findKey(i,c);d&&(!t||gy(i,i[d],d,t))&&(delete i[d],s=!0)}}return ie.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const a=t[i];(!e||gy(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,i={};return ie.forEach(this,(s,a)=>{const c=ie.findKey(i,a);if(c){t[c]=rm(s),delete t[a];return}const d=e?H9(a):String(a).trim();d!==a&&delete t[a],t[d]=rm(s),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&ie.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[lA]=this[lA]={accessors:{}}).accessors,s=this.prototype;function a(c){const d=zu(c);i[d]||(G9(s,c),i[d]=!0)}return ie.isArray(e)?e.forEach(a):a(e),this}};wi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(wi.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});ie.freezeMethods(wi);function _y(n,e){const t=this||oh,i=e||t,s=wi.from(i.headers);let a=i.data;return ie.forEach(n,function(d){a=d.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function TN(n){return!!(n&&n.__CANCEL__)}function Dc(n,e,t){We.call(this,n??"canceled",We.ERR_CANCELED,e,t),this.name="CanceledError"}ie.inherits(Dc,We,{__CANCEL__:!0});function bN(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new We("Request failed with status code "+t.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function $9(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function K9(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,a=0,c;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),_=i[a];c||(c=p),t[s]=f,i[s]=p;let v=a,E=0;for(;v!==s;)E+=t[v++],v=v%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),p-c<e)return;const R=_&&p-_;return R?Math.round(E*1e3/R):void 0}}function Q9(n,e){let t=0,i=1e3/e,s,a;const c=(p,_=Date.now())=>{t=_,s=null,a&&(clearTimeout(a),a=null),n.apply(null,p)};return[(...p)=>{const _=Date.now(),v=_-t;v>=i?c(p,_):(s=p,a||(a=setTimeout(()=>{a=null,c(s)},i-v)))},()=>s&&c(s)]}const qm=(n,e,t=3)=>{let i=0;const s=K9(50,250);return Q9(a=>{const c=a.loaded,d=a.lengthComputable?a.total:void 0,f=c-i,p=s(f),_=c<=d;i=c;const v={loaded:c,total:d,progress:d?c/d:void 0,bytes:f,rate:p||void 0,estimated:p&&d&&_?(d-c)/p:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(v)},t)},cA=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},uA=n=>(...e)=>ie.asap(()=>n(...e)),Y9=ii.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ii.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ii.origin),ii.navigator&&/(msie|trident)/i.test(ii.navigator.userAgent)):()=>!0,W9=ii.hasStandardBrowserEnv?{write(n,e,t,i,s,a){const c=[n+"="+encodeURIComponent(e)];ie.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),ie.isString(i)&&c.push("path="+i),ie.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function X9(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function J9(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function wN(n,e,t){let i=!X9(e);return n&&(i||t==!1)?J9(n,e):e}const dA=n=>n instanceof wi?{...n}:n;function Ga(n,e){e=e||{};const t={};function i(p,_,v,E){return ie.isPlainObject(p)&&ie.isPlainObject(_)?ie.merge.call({caseless:E},p,_):ie.isPlainObject(_)?ie.merge({},_):ie.isArray(_)?_.slice():_}function s(p,_,v,E){if(ie.isUndefined(_)){if(!ie.isUndefined(p))return i(void 0,p,v,E)}else return i(p,_,v,E)}function a(p,_){if(!ie.isUndefined(_))return i(void 0,_)}function c(p,_){if(ie.isUndefined(_)){if(!ie.isUndefined(p))return i(void 0,p)}else return i(void 0,_)}function d(p,_,v){if(v in e)return i(p,_);if(v in n)return i(void 0,p)}const f={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(p,_,v)=>s(dA(p),dA(_),v,!0)};return ie.forEach(Object.keys(Object.assign({},n,e)),function(_){const v=f[_]||s,E=v(n[_],e[_],_);ie.isUndefined(E)&&v!==d||(t[_]=E)}),t}const CN=n=>{const e=Ga({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:d}=e;e.headers=c=wi.from(c),e.url=yN(wN(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let f;if(ie.isFormData(t)){if(ii.hasStandardBrowserEnv||ii.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[p,..._]=f?f.split(";").map(v=>v.trim()).filter(Boolean):[];c.setContentType([p||"multipart/form-data",..._].join("; "))}}if(ii.hasStandardBrowserEnv&&(i&&ie.isFunction(i)&&(i=i(e)),i||i!==!1&&Y9(e.url))){const p=s&&a&&W9.read(a);p&&c.set(s,p)}return e},Z9=typeof XMLHttpRequest<"u",e5=Z9&&function(n){return new Promise(function(t,i){const s=CN(n);let a=s.data;const c=wi.from(s.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:p}=s,_,v,E,R,C;function k(){R&&R(),C&&C(),s.cancelToken&&s.cancelToken.unsubscribe(_),s.signal&&s.signal.removeEventListener("abort",_)}let O=new XMLHttpRequest;O.open(s.method.toUpperCase(),s.url,!0),O.timeout=s.timeout;function H(){if(!O)return;const D=wi.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),U={data:!d||d==="text"||d==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:D,config:n,request:O};bN(function(x){t(x),k()},function(x){i(x),k()},U),O=null}"onloadend"in O?O.onloadend=H:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(H)},O.onabort=function(){O&&(i(new We("Request aborted",We.ECONNABORTED,n,O)),O=null)},O.onerror=function(){i(new We("Network Error",We.ERR_NETWORK,n,O)),O=null},O.ontimeout=function(){let F=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const U=s.transitional||vN;s.timeoutErrorMessage&&(F=s.timeoutErrorMessage),i(new We(F,U.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,n,O)),O=null},a===void 0&&c.setContentType(null),"setRequestHeader"in O&&ie.forEach(c.toJSON(),function(F,U){O.setRequestHeader(U,F)}),ie.isUndefined(s.withCredentials)||(O.withCredentials=!!s.withCredentials),d&&d!=="json"&&(O.responseType=s.responseType),p&&([E,C]=qm(p,!0),O.addEventListener("progress",E)),f&&O.upload&&([v,R]=qm(f),O.upload.addEventListener("progress",v),O.upload.addEventListener("loadend",R)),(s.cancelToken||s.signal)&&(_=D=>{O&&(i(!D||D.type?new Dc(null,n,O):D),O.abort(),O=null)},s.cancelToken&&s.cancelToken.subscribe(_),s.signal&&(s.signal.aborted?_():s.signal.addEventListener("abort",_)));const j=$9(s.url);if(j&&ii.protocols.indexOf(j)===-1){i(new We("Unsupported protocol "+j+":",We.ERR_BAD_REQUEST,n));return}O.send(a||null)})},t5=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const a=function(p){if(!s){s=!0,d();const _=p instanceof Error?p:this.reason;i.abort(_ instanceof We?_:new Dc(_ instanceof Error?_.message:_))}};let c=e&&setTimeout(()=>{c=null,a(new We(`timeout ${e} of ms exceeded`,We.ETIMEDOUT))},e);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),n=null)};n.forEach(p=>p.addEventListener("abort",a));const{signal:f}=i;return f.unsubscribe=()=>ie.asap(d),f}},n5=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},i5=async function*(n,e){for await(const t of r5(n))yield*n5(t,e)},r5=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},hA=(n,e,t,i)=>{const s=i5(n,e);let a=0,c,d=f=>{c||(c=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:p,value:_}=await s.next();if(p){d(),f.close();return}let v=_.byteLength;if(t){let E=a+=v;t(E)}f.enqueue(new Uint8Array(_))}catch(p){throw d(p),p}},cancel(f){return d(f),s.return()}},{highWaterMark:2})},qp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",SN=qp&&typeof ReadableStream=="function",s5=qp&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),AN=(n,...e)=>{try{return!!n(...e)}catch{return!1}},o5=SN&&AN(()=>{let n=!1;const e=new Request(ii.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),fA=64*1024,yv=SN&&AN(()=>ie.isReadableStream(new Response("").body)),Hm={stream:yv&&(n=>n.body)};qp&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Hm[e]&&(Hm[e]=ie.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new We(`Response type '${e}' is not supported`,We.ERR_NOT_SUPPORT,i)})})})(new Response);const a5=async n=>{if(n==null)return 0;if(ie.isBlob(n))return n.size;if(ie.isSpecCompliantForm(n))return(await new Request(ii.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(n)||ie.isArrayBuffer(n))return n.byteLength;if(ie.isURLSearchParams(n)&&(n=n+""),ie.isString(n))return(await s5(n)).byteLength},l5=async(n,e)=>{const t=ie.toFiniteNumber(n.getContentLength());return t??a5(e)},c5=qp&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:a,timeout:c,onDownloadProgress:d,onUploadProgress:f,responseType:p,headers:_,withCredentials:v="same-origin",fetchOptions:E}=CN(n);p=p?(p+"").toLowerCase():"text";let R=t5([s,a&&a.toAbortSignal()],c),C;const k=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let O;try{if(f&&o5&&t!=="get"&&t!=="head"&&(O=await l5(_,i))!==0){let U=new Request(e,{method:"POST",body:i,duplex:"half"}),Z;if(ie.isFormData(i)&&(Z=U.headers.get("content-type"))&&_.setContentType(Z),U.body){const[x,A]=cA(O,qm(uA(f)));i=hA(U.body,fA,x,A)}}ie.isString(v)||(v=v?"include":"omit");const H="credentials"in Request.prototype;C=new Request(e,{...E,signal:R,method:t.toUpperCase(),headers:_.normalize().toJSON(),body:i,duplex:"half",credentials:H?v:void 0});let j=await fetch(C,E);const D=yv&&(p==="stream"||p==="response");if(yv&&(d||D&&k)){const U={};["status","statusText","headers"].forEach(N=>{U[N]=j[N]});const Z=ie.toFiniteNumber(j.headers.get("content-length")),[x,A]=d&&cA(Z,qm(uA(d),!0))||[];j=new Response(hA(j.body,fA,x,()=>{A&&A(),k&&k()}),U)}p=p||"text";let F=await Hm[ie.findKey(Hm,p)||"text"](j,n);return!D&&k&&k(),await new Promise((U,Z)=>{bN(U,Z,{data:F,headers:wi.from(j.headers),status:j.status,statusText:j.statusText,config:n,request:C})})}catch(H){throw k&&k(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,n,C),{cause:H.cause||H}):We.from(H,H&&H.code,n,C)}}),vv={http:C9,xhr:e5,fetch:c5};ie.forEach(vv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const mA=n=>`- ${n}`,u5=n=>ie.isFunction(n)||n===null||n===!1,RN={getAdapter:n=>{n=ie.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let a=0;a<e;a++){t=n[a];let c;if(i=t,!u5(t)&&(i=vv[(c=String(t)).toLowerCase()],i===void 0))throw new We(`Unknown adapter '${c}'`);if(i)break;s[c||"#"+a]=i}if(!i){const a=Object.entries(s).map(([d,f])=>`adapter ${d} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=e?a.length>1?`since :
`+a.map(mA).join(`
`):" "+mA(a[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:vv};function yy(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Dc(null,n)}function pA(n){return yy(n),n.headers=wi.from(n.headers),n.data=_y.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),RN.getAdapter(n.adapter||oh.adapter)(n).then(function(i){return yy(n),i.data=_y.call(n,n.transformResponse,i),i.headers=wi.from(i.headers),i},function(i){return TN(i)||(yy(n),i&&i.response&&(i.response.data=_y.call(n,n.transformResponse,i.response),i.response.headers=wi.from(i.response.headers))),Promise.reject(i)})}const IN="1.10.0",Hp={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Hp[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const gA={};Hp.transitional=function(e,t,i){function s(a,c){return"[Axios v"+IN+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,d)=>{if(e===!1)throw new We(s(c," has been removed"+(t?" in "+t:"")),We.ERR_DEPRECATED);return t&&!gA[c]&&(gA[c]=!0,console.warn(s(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,c,d):!0}};Hp.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function d5(n,e,t){if(typeof n!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const a=i[s],c=e[a];if(c){const d=n[a],f=d===void 0||c(d,a,n);if(f!==!0)throw new We("option "+a+" must be "+f,We.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new We("Unknown option "+a,We.ERR_BAD_OPTION)}}const sm={assertOptions:d5,validators:Hp},Mr=sm.validators;let La=class{constructor(e){this.defaults=e||{},this.interceptors={request:new aA,response:new aA}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ga(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:a}=t;i!==void 0&&sm.assertOptions(i,{silentJSONParsing:Mr.transitional(Mr.boolean),forcedJSONParsing:Mr.transitional(Mr.boolean),clarifyTimeoutError:Mr.transitional(Mr.boolean)},!1),s!=null&&(ie.isFunction(s)?t.paramsSerializer={serialize:s}:sm.assertOptions(s,{encode:Mr.function,serialize:Mr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),sm.assertOptions(t,{baseUrl:Mr.spelling("baseURL"),withXsrfToken:Mr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=a&&ie.merge(a.common,a[t.method]);a&&ie.forEach(["delete","get","head","post","put","patch","common"],C=>{delete a[C]}),t.headers=wi.concat(c,a);const d=[];let f=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(f=f&&k.synchronous,d.unshift(k.fulfilled,k.rejected))});const p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let _,v=0,E;if(!f){const C=[pA.bind(this),void 0];for(C.unshift.apply(C,d),C.push.apply(C,p),E=C.length,_=Promise.resolve(t);v<E;)_=_.then(C[v++],C[v++]);return _}E=d.length;let R=t;for(v=0;v<E;){const C=d[v++],k=d[v++];try{R=C(R)}catch(O){k.call(this,O);break}}try{_=pA.call(this,R)}catch(C){return Promise.reject(C)}for(v=0,E=p.length;v<E;)_=_.then(p[v++],p[v++]);return _}getUri(e){e=Ga(this.defaults,e);const t=wN(e.baseURL,e.url,e.allowAbsoluteUrls);return yN(t,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){La.prototype[e]=function(t,i){return this.request(Ga(i||{},{method:e,url:t,data:(i||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(i){return function(a,c,d){return this.request(Ga(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}La.prototype[e]=t(),La.prototype[e+"Form"]=t(!0)});let h5=class xN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(d=>{i.subscribe(d),a=d}).then(s);return c.cancel=function(){i.unsubscribe(a)},c},e(function(a,c,d){i.reason||(i.reason=new Dc(a,c,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new xN(function(s){e=s}),cancel:e}}};function f5(n){return function(t){return n.apply(null,t)}}function m5(n){return ie.isObject(n)&&n.isAxiosError===!0}const Ev={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ev).forEach(([n,e])=>{Ev[e]=n});function NN(n){const e=new La(n),t=oN(La.prototype.request,e);return ie.extend(t,La.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return NN(Ga(n,s))},t}const tn=NN(oh);tn.Axios=La;tn.CanceledError=Dc;tn.CancelToken=h5;tn.isCancel=TN;tn.VERSION=IN;tn.toFormData=zp;tn.AxiosError=We;tn.Cancel=tn.CanceledError;tn.all=function(e){return Promise.all(e)};tn.spread=f5;tn.isAxiosError=m5;tn.mergeConfig=Ga;tn.AxiosHeaders=wi;tn.formToJSON=n=>EN(ie.isHTMLForm(n)?new FormData(n):n);tn.getAdapter=RN.getAdapter;tn.HttpStatusCode=Ev;tn.default=tn;const{Axios:oz,AxiosError:az,CanceledError:lz,isCancel:cz,CancelToken:uz,VERSION:dz,all:hz,Cancel:fz,isAxiosError:mz,spread:pz,toFormData:gz,AxiosHeaders:_z,HttpStatusCode:yz,formToJSON:vz,getAdapter:Ez,mergeConfig:Tz}=tn,p5=n=>tn.get(n,{headers:{"Content-Type":"application/json"}}),g5=(n,e)=>e instanceof FormData?tn.post(n,e,{headers:{"Content-Type":"multipart/form-data"}}):tn.post(n,e,{headers:{"Content-Type":"application/json"}}),f0={get:p5,post:g5},_5=()=>{const{db:n,server:e,usuarioLogado:t}=gr(),[i,s]=q.useState("Carregando..."),[a,c]=q.useState(0),[d,f]=q.useState(ni),[p,_]=q.useState(!1),[v,E]=q.useState(null),R=Us(),C={avatar:q.useRef(null),fileInput:q.useRef(null),removePhotoBtn:q.useRef(null)};function k(D){const F=new FormData,U=new Date().getTime().toString();F.append("type","update"),F.append("timestamp",U.toString()),F.append("file",D),f0.post(e+"/perfil",F).then(Z=>{Sd(ge(_e(),"usuarios/"+t.uid),{fotoPerfil:Z.data.file_id,timestamp:U}).then(()=>{C.avatar.current.src=rc(Z.data.file_id),C.removePhotoBtn.current.style.display="block"}).catch(x=>{console.error("Erro ao atualizar foto de perfil:",x)})})}q.useEffect(()=>{if(t){let D=function(x){return new URLSearchParams(window.location.search).get(x)},F=function(x){vs(To(ur(n.current,"usuarios"),ka("uid","==",x))).then(A=>{if(A.size>0){const N=A.docs[0].data();s(N.nome||"Usuário"),c(N.nFriends),E({...N,uid:x}),N.fotoPerfil?f(rc(N.fotoPerfil)):f(ni),t&&t.uid===x?(C.avatar.current.style.cursor="pointer",C.removePhotoBtn.current.addEventListener("click",U),C.removePhotoBtn.current.style.display=N.fotoPerfil?"block":"none"):C.removePhotoBtn.current.style.display="none"}else document.getElementById("profileName").textContent="Usuário não encontrado"}).catch(A=>{console.error("Erro ao buscar dados do usuário:",A)})},U=function(){Sd(ge(_e(),"usuarios/"+t.uid),{fotoPerfil:null}).then(()=>{C.avatar.current.src=ni,C.removePhotoBtn.current.style.display="none"}).catch(x=>{console.error("Erro ao remover foto de perfil:",x)})};const Z=D("id");F(Z||t.uid)}else R("/login")},[t]);const O=()=>{const D=document.getElementById("fileInput");D&&D.click()},H=D=>{if(D.target.files&&D.target.files[0]&&t&&t.uid===v.uid){const F=D.target.files[0],U=new FileReader;U.onloadend=()=>{f(U.result),_(!0),k(F)},U.readAsDataURL(F)}},j=D=>{D.preventDefault(),f(ni),_(!1);const F=document.getElementById("fileInput");F&&(F.value="")};return b.jsxs(b.Fragment,{children:[b.jsxs("main",{id:"perfil-page",className:"page",children:[b.jsxs("section",{id:"perfil",children:[b.jsxs("div",{id:"profile-content",children:[b.jsx("div",{className:"avatar-container",children:b.jsxs("div",{className:"avatar-wrapper",children:[b.jsx("img",{onClick:()=>C.fileInput.current.click(),src:d,alt:"Avatar do usuário",id:"avatar"}),b.jsx("div",{className:"edit-icon",id:"editIcon",onClick:O,style:{cursor:"pointer"},children:b.jsx("i",{className:"fas fa-pencil-alt"})})]})}),b.jsxs("div",{id:"profile-info",children:[b.jsx("span",{id:"displayName",children:i}),b.jsxs("div",{id:"n-divs",children:[b.jsxs("div",{id:"n-friends",children:[b.jsx("div",{className:"value",children:a}),b.jsx("div",{className:"label",children:"amigos"})]}),b.jsxs("div",{id:"n-comunitys",children:[b.jsx("div",{className:"value",children:"0"}),b.jsx("div",{className:"label",children:"comunidades"})]})]})]})]}),p&&b.jsx("button",{id:"removePhotoBtn",onClick:j,style:{marginTop:"10px",backgroundColor:"red",color:"white",border:"none",padding:"5px 10px",borderRadius:"5px",cursor:"pointer"},children:"Remover Foto"}),b.jsx("input",{ref:C.fileInput,type:"file",id:"fileInput",style:{display:"none"},accept:"image/*",onChange:H}),b.jsx("div",{}),b.jsx("br",{}),b.jsxs("div",{className:"aluno-tag",children:[b.jsx("i",{className:"fa-solid fa-user"})," Aluno"]})]}),b.jsx(rN,{userPerfilUid:v?v.uid:""})]}),b.jsx(sN,{})]})};function y5(){const{db:n,server:e,usuarioLogado:t,setUsuarioLogado:i}=gr(),[s,a]=q.useState(!1),c={matricula:q.useRef(null)},d=async()=>{if(t!==void 0)return;const f=document.getElementById("regNome").value,p=document.getElementById("regEmail").value,_=document.getElementById("regSenha").value,v="ID-"+Date.now()+"-"+Math.floor(Math.random()*1e3),E=c.matricula.current.value;if(!/^20[0-9]{2}(1|2)(1|2)(1|2)[A-Z]+0(120|1[0-1][0-9]|0[0-9]{2})$/.test(E))return a(!0);const R=await f0.post(e+"/email_check",{matricula:E});R.data.result&&R.data.is_valid?E2(Lo(),p,_).then(C=>{const k=C.user;i(k);const O=new Date().getTime();D1(ur(n.current,"usuarios"),{email:p,id:v,matricula:E,nFriends:0,name_lower:f.toLowerCase(),nome:f,password:_,timestamp:O,uid:k.uid})}):a(!0)};return t?b.jsx(b.Fragment,{}):b.jsx(b.Fragment,{children:b.jsx("div",{id:"signup",className:"page",children:b.jsxs("main",{id:"sign-container",children:[b.jsx("img",{id:"logo",src:Up,width:"150px"}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Nome:"}),b.jsx("input",{type:"text",id:"regNome",required:!0})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Email:"}),b.jsx("input",{type:"email",id:"regEmail",required:!0})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Matricula:"}),b.jsx("input",{ref:c.matricula,type:"text",id:"regMatricula",required:!0}),b.jsx("div",{style:{display:s?"block":"none",color:"red"},children:"matricula incorreta"})]}),b.jsxs("div",{className:"input-group",children:[b.jsx("label",{children:"Senha:"}),b.jsx("input",{type:"password",id:"regSenha",required:!0})]}),b.jsxs("p",{children:["Já possui conta? ",b.jsx(Mn,{to:"/login",children:"Fazer login"})]}),b.jsx("button",{onClick:d,id:"btn-submit",type:"submit",children:"Entrar"})]})})})}var _A;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(_A||(_A={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yA;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(yA||(yA={}));var vA;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(vA||(vA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=["user","model","function","system"];var TA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(TA||(TA={}));var bA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(bA||(bA={}));var wA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(wA||(wA={}));var CA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(CA||(CA={}));var ud;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(ud||(ud={}));var SA;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(SA||(SA={}));var AA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(AA||(AA={}));var RA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(RA||(RA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Hl extends ri{constructor(e,t){super(e),this.response=t}}class ON extends ri{constructor(e,t,i,s){super(e),this.status=t,this.statusText=i,this.errorDetails=s}}class Do extends ri{}class kN extends ri{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="https://generativelanguage.googleapis.com",E5="v1beta",T5="0.24.1",b5="genai-js";var $a;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})($a||($a={}));class w5{constructor(e,t,i,s,a){this.model=e,this.task=t,this.apiKey=i,this.stream=s,this.requestOptions=a}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||E5;let a=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||v5}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function C5(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${b5}/${T5}`),e.join(" ")}async function S5(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",C5(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new Do(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,a]of i.entries()){if(s==="x-goog-api-key")throw new Do(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Do(`Header name ${s} can only be set using the apiClient field`);t.append(s,a)}}return t}async function A5(n,e,t,i,s,a){const c=new w5(n,e,t,i,a);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},N5(a)),{method:"POST",headers:await S5(c),body:s})}}async function ah(n,e,t,i,s,a={},c=fetch){const{url:d,fetchOptions:f}=await A5(n,e,t,i,s,a);return R5(d,f,c)}async function R5(n,e,t=fetch){let i;try{i=await t(n,e)}catch(s){I5(s,n)}return i.ok||await x5(i,n),i}function I5(n,e){let t=n;throw t.name==="AbortError"?(t=new kN(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof ON||n instanceof Do||(t=new ri(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function x5(n,e){let t="",i;try{const s=await n.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new ON(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function N5(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),om(n.candidates[0]))throw new Hl(`${go(n)}`,n);return O5(n)}else if(n.promptFeedback)throw new Hl(`Text not available. ${go(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),om(n.candidates[0]))throw new Hl(`${go(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),IA(n)[0]}else if(n.promptFeedback)throw new Hl(`Function call not available. ${go(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),om(n.candidates[0]))throw new Hl(`${go(n)}`,n);return IA(n)}else if(n.promptFeedback)throw new Hl(`Function call not available. ${go(n)}`,n)},n}function O5(n){var e,t,i,s;const a=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)c.text&&a.push(c.text),c.executableCode&&a.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&a.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function IA(n){var e,t,i,s;const a=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(s=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)c.functionCall&&a.push(c.functionCall);if(a.length>0)return a}const k5=[ud.RECITATION,ud.SAFETY,ud.LANGUAGE];function om(n){return!!n.finishReason&&k5.includes(n.finishReason)}function go(n){var e,t,i;let s="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)s+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const a=n.candidates[0];om(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function Pd(n){return this instanceof Pd?(this.v=n,this):new Pd(n)}function D5(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,a=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(E){i[E]&&(s[E]=function(R){return new Promise(function(C,k){a.push([E,R,C,k])>1||d(E,R)})})}function d(E,R){try{f(i[E](R))}catch(C){v(a[0][3],C)}}function f(E){E.value instanceof Pd?Promise.resolve(E.value.v).then(p,_):v(a[0][2],E)}function p(E){d("next",E)}function _(E){d("throw",E)}function v(E,R){E(R),a.shift(),a.length&&d(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function P5(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=U5(e),[i,s]=t.tee();return{stream:L5(i),response:M5(s)}}async function M5(n){const e=[],t=n.getReader();for(;;){const{done:i,value:s}=await t.read();if(i)return m0(V5(e));e.push(s)}}function L5(n){return D5(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:s}=yield Pd(t.read());if(s)break;yield yield Pd(m0(i))}})}function U5(n){const e=n.getReader();return new ReadableStream({start(i){let s="";return a();function a(){return e.read().then(({value:c,done:d})=>{if(d){if(s.trim()){i.error(new ri("Failed to parse stream"));return}i.close();return}s+=c;let f=s.match(xA),p;for(;f;){try{p=JSON.parse(f[1])}catch{i.error(new ri(`Error parsing JSON response: "${f[1]}"`));return}i.enqueue(p),s=s.substring(f[0].length),f=s.match(xA)}return a()}).catch(c=>{let d=c;throw d.stack=c.stack,d.name==="AbortError"?d=new kN("Request aborted when reading from the stream"):d=new ri("Error reading from the stream"),d})}}})}function V5(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of n){if(i.candidates){let s=0;for(const a of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=a.citationMetadata,t.candidates[s].groundingMetadata=a.groundingMetadata,t.candidates[s].finishReason=a.finishReason,t.candidates[s].finishMessage=a.finishMessage,t.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){t.candidates[s].content||(t.candidates[s].content={role:a.content.role||"user",parts:[]});const c={};for(const d of a.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[s].content.parts.push(c)}s++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(n,e,t,i){const s=await ah(e,$a.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return P5(s)}async function PN(n,e,t,i){const a=await(await ah(e,$a.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:m0(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Md(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return j5(e)}function j5(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,s=!1;for(const a of n)"functionResponse"in a?(t.parts.push(a),s=!0):(e.parts.push(a),i=!0);if(i&&s)throw new ri("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new ri("No content is provided for sending chat message.");return i?e:t}function B5(n,e){var t;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=n.generateContentRequest!=null;if(n.contents){if(s)throw new Do("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(s)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const a=Md(n);i.contents=[a]}return{generateContentRequest:i}}function NA(n){let e;return n.contents?e=n:e={contents:[Md(n)]},n.systemInstruction&&(e.systemInstruction=MN(n.systemInstruction)),e}function F5(n){return typeof n=="string"||Array.isArray(n)?{content:Md(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],z5={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function q5(n){let e=!1;for(const t of n){const{role:i,parts:s}=t;if(!e&&i!=="user")throw new ri(`First content should be with role 'user', got ${i}`);if(!EA.includes(i))throw new ri(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(EA)}`);if(!Array.isArray(s))throw new ri("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new ri("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of s)for(const f of OA)f in d&&(a[f]+=1);const c=z5[i];for(const d of OA)if(!c.includes(d)&&a[d]>0)throw new ri(`Content with role '${i}' can't contain '${d}' part`);e=!0}}function kA(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const i of t.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="SILENT_ERROR";class H5{constructor(e,t,i,s={}){this.model=t,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(q5(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,s,a,c,d,f;await this._sendPromise;const p=Md(e),_={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),t);let E;return this._sendPromise=this._sendPromise.then(()=>PN(this._apiKey,this.model,_,v)).then(R=>{var C;if(kA(R.response)){this._history.push(p);const k=Object.assign({parts:[],role:"model"},(C=R.response.candidates)===null||C===void 0?void 0:C[0].content);this._history.push(k)}else{const k=go(R.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}E=R}).catch(R=>{throw this._sendPromise=Promise.resolve(),R}),await this._sendPromise,E}async sendMessageStream(e,t={}){var i,s,a,c,d,f;await this._sendPromise;const p=Md(e),_={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},v=Object.assign(Object.assign({},this._requestOptions),t),E=DN(this._apiKey,this.model,_,v);return this._sendPromise=this._sendPromise.then(()=>E).catch(R=>{throw new Error(DA)}).then(R=>R.response).then(R=>{if(kA(R)){this._history.push(p);const C=Object.assign({},R.candidates[0].content);C.role||(C.role="model"),this._history.push(C)}else{const C=go(R);C&&console.warn(`sendMessageStream() was unsuccessful. ${C}. Inspect response object for details.`)}}).catch(R=>{R.message!==DA&&console.error(R)}),E}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(n,e,t,i){return(await ah(e,$a.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(n,e,t,i){return(await ah(e,$a.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function K5(n,e,t,i){const s=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await ah(e,$a.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=MN(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const s=NA(e),a=Object.assign(Object.assign({},this._requestOptions),t);return PN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),a)}async generateContentStream(e,t={}){var i;const s=NA(e),a=Object.assign(Object.assign({},this._requestOptions),t);return DN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),a)}startChat(e){var t;return new H5(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=B5(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return G5(this.apiKey,this.model,i,s)}async embedContent(e,t={}){const i=F5(e),s=Object.assign(Object.assign({},this._requestOptions),t);return $5(this.apiKey,this.model,i,s)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return K5(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new ri("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new PA(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new Do("Cached content must contain a `name` field.");if(!e.model)throw new Do("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const c of s)if(t!=null&&t[c]&&e[c]&&(t==null?void 0:t[c])!==e[c]){if(c==="model"){const d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===f)continue}throw new Do(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const a=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new PA(this.apiKey,a,i)}}const Y5="AIzaSyBRTlHd_tDfYYBcyZ8jL0ptc3aGbpahW4E";function W5(){const{usuarioLogado:n}=gr(),e=q.useRef(null),[t,i]=q.useState(!1),[s,a]=q.useState([]),[c,d]=q.useState(""),[f,p]=q.useState(0),[_,v]=q.useState("decks"),[E,R]=q.useState(!1),[C,k]=q.useState(!1),[O,H]=q.useState("0"),j={ask:q.useRef(null)},D={init:function(){this.loadDecks()},loadDecks:function(){const U=localStorage.getItem("flashcardDecks");if(U){const Z=JSON.parse(U);a(Z),this.renderDecks(Z)}},saveDecks:function(U){localStorage.setItem("flashcardDecks",JSON.stringify(U))},toggleDeckForm:function(U){document.getElementById("deckForm").classList.toggle("hidden",!U)},toggleFlashcardForm:function(U){document.getElementById("flashcardForm").classList.toggle("hidden",!U)},resetDeckForm:function(){document.getElementById("deckName").value="",document.getElementById("deckDescription").value=""},resetFlashcardForm:function(){document.getElementById("cardFront").value="",document.getElementById("cardBack").value=""},saveNewDeck:function(){const U=document.getElementById("deckName").value.trim(),Z=document.getElementById("deckDescription").value.trim();if(!U){e.current("Por favor, insira um nome para o deck.");return}const x={id:Date.now().toString(),name:U,description:Z,flashcards:[]},A=[...s,x];a(A),this.saveDecks(A),this.renderDecks(A),this.toggleDeckForm(!1),this.resetDeckForm()},saveNewFlashcard:function(){const U=document.getElementById("cardFront").value.trim(),Z=document.getElementById("cardBack").value.trim();if(!U||!Z){e.current("Por favor, preencha ambos os lados do flashcard.");return}const x=s.find(A=>A.id===c);if(x){x.flashcards.push({id:Date.now().toString(),front:U,back:Z});const A=s.map(N=>N.id===c?x:N);a(A),this.saveDecks(A),this.renderFlashcards(),this.toggleFlashcardForm(!1),this.resetFlashcardForm()}},deleteDeck:function(U){const Z=s.filter(x=>x.id!==U);a(Z),this.saveDecks(Z),this.renderDecks(Z)},deleteFlashcard:function(U){const Z=s.find(x=>x.id===c);if(Z){Z.flashcards=Z.flashcards.filter(A=>A.id!==U);const x=s.map(A=>A.id==c?Z:A);this.saveDecks(x),this.renderFlashcards()}},renderDecks:function(U){i(U.length===0)},showDeck:function(U){s.find(x=>x.id===U)&&(d(U),this.renderFlashcards(U),v("flashcards"))},renderFlashcards:function(U){const Z=s.find(A=>A.id===U);if(!Z)return;const x=Z.flashcards;for(let A=x.length-1;A>0;A--){const N=Math.floor(Math.random()*(A+1));[x[A],x[N]]=[x[N],x[A]]}Z.flashcards=x,a(A=>A.map(N=>N.id==Z.id?Z:N))},startStudyMode:function(){const U=s.find(x=>x.id===c);if(!U||U.flashcards.length===0){e.current("Este deck não possui flashcards para estudar.");return}const Z=0;p(Z),this.updateStudyCard(Z),this.updateProgress(Z),v("study")},updateStudyCard:function(U){const Z=s.find(x=>x.id===c);!Z||!Z.flashcards[U]||k(!1)},updateProgress:function(U){const Z=s.find(A=>A.id===c);if(!Z)return;const x=U/Z.flashcards.length*100;H(`${x}%`)},showNextCard:function(U){const Z=s.find(x=>x.id===c);if(Z)if(U<Z.flashcards.length-1){const x=U+1;p(x),this.updateStudyCard(x),this.updateProgress(x)}else v("flashcards")},showPreviousCard:function(){if(f>0){const U=f-1;this.updateStudyCard(U),this.updateProgress(U)}},toggleStudyCard:function(){k(!0)}},F=async()=>{R(!1);const U=j.ask.current.value,Z=new Q5(Y5);try{const A=Z.getGenerativeModel({model:"gemini-2.5-flash-preview-05-20"}),N=`Gere 3 flashcards sobre o assunto: ${U}. OBS: Sua respoosta dese seguir o seguinte formato: "{Pergunta}"//"{Resposta}"`;var x=(await(await A.generateContent(N)).response).text();console.log(x),x='"'+x.split('"').splice(1).join('"');const G=/"([^"]+)"\/\/\s*"([^"]+)"/g,P=[...x.matchAll(G)].map(Xe=>({front:Xe[1],back:Xe[2],id:Date.now().toString()})),vt=s.map(Xe=>Xe.id==c?{...Xe,flashcards:[...Xe.flashcards,...P]}:Xe);D.saveDecks(vt),a(vt)}catch(A){console.error("Erro ao gerar conteúdo:",A)}};return q.useEffect(()=>{n&&D.init()},[n]),b.jsxs(b.Fragment,{children:[b.jsxs("div",{id:"flash",className:"container page",children:[b.jsx("main",{children:_=="decks"?b.jsx("div",{id:"decksView",children:b.jsxs("div",{className:"card",children:[b.jsx("h2",{children:"Meus decks"}),b.jsxs("button",{id:"createDeckBtn",className:"btn",onClick:()=>D.toggleDeckForm(!0),children:[b.jsx("i",{className:"fas fa-plus"})," Criar novo deck"]}),b.jsxs("div",{id:"deckForm",className:"hidden",children:[b.jsx("div",{className:"flex-row",children:b.jsxs("div",{children:[b.jsx("input",{type:"text",id:"deckName",placeholder:"Nome do deck",required:!0}),b.jsx("textarea",{id:"deckDescription",placeholder:"Descrição (opcional)",rows:3})]})}),b.jsxs("div",{children:[b.jsx("button",{id:"saveDeckBtn",className:"btn btn-success",onClick:()=>D.saveNewDeck(),children:"Criar"}),b.jsx("button",{id:"cancelDeckBtn",className:"btn btn-outline",onClick:()=>{D.toggleDeckForm(!1),D.resetDeckForm()},children:"Cancelar"})]})]}),b.jsx("div",{id:"decksList",className:"decks-container",children:t?b.jsxs("div",{className:"empty-state",children:[b.jsx("i",{className:"fas fa-inbox"}),b.jsx("h3",{children:"Nenhum deck encontrado"}),b.jsx("p",{children:"Crie seu primeiro deck para começar a adicionar flashcards"}),b.jsx("button",{className:"btn",onClick:()=>D.toggleDeckForm(!0),children:"Criar deck"})]}):s.map((U,Z)=>b.jsxs("div",{className:"deck",onClick:()=>D.showDeck(U.id),children:[b.jsx("div",{className:"deck-actions",children:b.jsx("button",{onClick:()=>D.deleteDeck(U.id),children:b.jsx("i",{className:"fas fa-trash"})})}),b.jsx("h3",{children:U.name}),b.jsx("p",{children:U.description||"Sem descrição"}),b.jsxs("p",{children:[b.jsx("strong",{children:U.flashcards.length})," flashcards"]})]},Z))})]})}):_=="flashcards"?b.jsx("div",{id:"flashcardsView",children:b.jsxs("div",{className:"card",children:[b.jsx("h2",{id:"currentDeckName",children:s.filter(U=>U.id==c)[0].name}),b.jsxs("div",{id:"flash-btns",children:[b.jsxs("button",{id:"backToDecksBtn",className:"btn btn-outline",onClick:()=>v("decks"),children:[b.jsx("i",{className:"fas fa-arrow-left"})," Voltar para Decks"]}),b.jsxs("button",{id:"addFlashcardBtn",className:"btn",onClick:()=>D.toggleFlashcardForm(!0),children:[b.jsx("i",{className:"fas fa-plus"})," Adicionar flashcard"]}),b.jsxs("button",{id:"studyDeckBtn",className:"btn btn-success",onClick:()=>D.startStudyMode(),children:[b.jsx("i",{className:"fas fa-graduation-cap"})," Estudar deck"]}),b.jsx("button",{id:"generateFlashCard",onClick:()=>R(!0),children:"Gerar flashcard"})]}),b.jsxs("div",{id:"flashcardForm",children:[b.jsxs("div",{className:"flex-row",children:[b.jsxs("div",{children:[b.jsx("h3",{children:"Frente do card"}),b.jsx("textarea",{id:"cardFront",placeholder:"Pergunta",rows:3,required:!0})]}),b.jsxs("div",{children:[b.jsx("h3",{children:"Verso do card"}),b.jsx("textarea",{id:"cardBack",placeholder:"Resposta",rows:3,required:!0})]})]}),b.jsxs("div",{children:[b.jsx("button",{id:"saveFlashcardBtn",className:"btn btn-success",onClick:()=>D.saveNewFlashcard(),children:"Salvar flashcard"}),b.jsx("button",{id:"cancelFlashcardBtn",className:"btn btn-outline",onClick:()=>{D.toggleFlashcardForm(!1),D.resetFlashcardForm()},children:"Cancelar"})]})]}),b.jsx("div",{id:"flashcardsList",className:"flashcards-container",children:c==""?b.jsxs("div",{className:"empty-state",children:[b.jsx("i",{className:"fas fa-sticky-note"}),b.jsx("h3",{children:"Nenhum flashcard neste deck"}),b.jsx("p",{children:"Adicione seu primeiro flashcard para começar a estudar"}),b.jsx("button",{className:"btn",onClick:()=>D.toggleFlashcardForm(!0),children:"Adicionar flashcard"})]}):s.filter(U=>U.id==c)[0].flashcards.map((U,Z)=>b.jsxs("div",{className:"flashcard",onClick:x=>!x.target.closest(".card-actions")&&x.target.classList.toggle("show-back"),children:[b.jsx("div",{className:"flashcard-front",children:b.jsx("h3",{children:U.front})}),b.jsx("div",{className:"flashcard-back",children:b.jsx("h3",{children:U.back})}),b.jsx("div",{className:"card-actions",children:b.jsx("button",{className:"btn btn-danger",onClick:()=>D.deleteFlashcard(U.id),children:b.jsx("i",{className:"fas fa-trash"})})})]},Z))})]})}):b.jsx("div",{id:"studyView",children:b.jsxs("div",{className:"card study-mode",children:[b.jsxs("h2",{children:["Estudando: ",b.jsx("span",{id:"studyDeckName",children:s.filter(U=>U.id==c)[0].name})]}),b.jsx("div",{className:"progress-bar",children:b.jsx("div",{className:"progress",id:"studyProgress",children:O})}),b.jsxs("p",{children:[" Progresso: ",b.jsx("span",{id:"currentCard",children:f+1})," de ",b.jsx("span",{id:"totalCards",children:s.filter(U=>U.id==c)[0].flashcards.length})]}),b.jsxs("div",{className:"study-card",id:"studyCard",onClick:()=>D.toggleStudyCard(),children:[b.jsxs("div",{className:"study-card-front",style:{display:C?"none":"block"},children:[b.jsx("h3",{id:"studyFront",children:s.filter(U=>U.id==c)[0].flashcards[f].front}),b.jsx("p",{children:"Clique no card para ver a resposta"})]}),b.jsxs("div",{className:"study-card-back",style:{display:C?"block":"none"},children:[b.jsx("h3",{id:"studyBack",children:s.filter(U=>U.id==c)[0].flashcards[f].back}),b.jsx("p",{children:"Clique no card para voltar"})]})]}),b.jsxs("div",{className:"study-controls",children:[b.jsxs("button",{id:"prevCardBtn",className:"btn btn-outline",onClick:()=>D.showPreviousCard(f),children:[b.jsx("i",{className:"fas fa-arrow-left"})," Anterior"]}),b.jsxs("button",{id:"nextCardBtn",className:"btn",onClick:()=>D.showNextCard(f),children:["Próximo ",b.jsx("i",{className:"fas fa-arrow-right"})]}),b.jsxs("button",{id:"endStudyBtn",className:"btn btn-danger",onClick:()=>v("flashcards"),children:[b.jsx("i",{className:"fas fa-times"})," Sair"]})]})]})})}),b.jsxs("div",{style:{display:E?"block":"none"},id:"flashcard-menu",children:[b.jsx("input",{ref:j.ask,placeholder:"Digite o assunto..."}),b.jsxs("div",{id:"fm-btns",children:[b.jsx("div",{id:"fm-ask",onClick:F,children:"Perguntar"}),b.jsx("div",{id:"fm-cancel",onClick:()=>R(!1),children:"Cancelar"})]})]})]}),b.jsx(rh,{showPopup:e})]})}function X5(){return b.jsx("div",{id:"tools",className:"page",children:b.jsxs("div",{id:"tools-list",children:[b.jsx(Mn,{to:"/flashcards",className:"tools-item",children:"FlashCards"}),b.jsx(Mn,{to:"/add-posts",className:"tools-item",children:"Adicionar Posts"})]})})}const J5="/assets/no-image-BguYpm9N.jpg";function Z5(){const{db:n,server:e,usuarioLogado:t}=gr(),[i,s]=q.useState(J5),a={file:q.useRef(null),description:q.useRef(null)},c=()=>{const f=a.file.current.files[0];if(!f)return;const p=new FileReader;p.onload=_=>{typeof _.target.result=="string"&&s(_.target.result)},p.readAsDataURL(f)},d=()=>{if(!t)return;const f=a.file.current.files[0],p=a.description.current.value,_=new Date().getTime(),v=new FormData;v.append("type","upload"),v.append("timestamp",_.toString()),v.append("file",f),f0.post(e+"/posts",v).then(E=>{const R={type:0,userUid:t.uid,user:t.displayName||"",image:E.data.file_id,description:p,description_lower:p.toLowerCase(),timestamp:_};D1(ur(n.current,"posts"),R)})};return b.jsxs("div",{id:"add-post",className:"page",children:[b.jsx("img",{id:"img-view",src:i}),b.jsx("div",{id:"label-description",children:"Descrição:"}),b.jsx("input",{ref:a.description,id:"description"}),b.jsx("div",{id:"add-image",onClick:()=>a.file.current.click(),children:"Adicionar imagem"}),b.jsx("input",{id:"input-file",ref:a.file,onChange:c,type:"file",accept:"image/jpeg"}),b.jsx("div",{id:"btn-submit",onClick:d,children:"Enviar"})]})}const ar=({Element:n})=>b.jsxs(b.Fragment,{children:[b.jsx(n,{}),b.jsx(sN,{}),b.jsx(EB,{})]});function ez(){const[n,e]=q.useState(!1);return q.useEffect(()=>{Lo().onAuthStateChanged(t=>{fv(t)})},[]),b.jsx(vB,{setShow:e,children:n?b.jsx(ND,{children:b.jsxs(oD,{children:[b.jsx(Wi,{path:"/",element:b.jsx(ar,{Element:MF})}),b.jsx(Wi,{path:"/amigos",element:b.jsx(ar,{Element:LF})}),b.jsx(Wi,{path:"/chats",element:b.jsx(ar,{Element:iA})}),b.jsx(Wi,{path:"/chat",element:b.jsx(ar,{Element:iA})}),b.jsx(Wi,{path:"/comunidade",element:b.jsx(ar,{Element:UF})}),b.jsx(Wi,{path:"/login",element:b.jsx(ar,{Element:VF})}),b.jsx(Wi,{path:"/registro",element:b.jsx(ar,{Element:y5})}),b.jsx(Wi,{path:"/perfil",element:b.jsx(ar,{Element:_5})}),b.jsx(Wi,{path:"/ferramentas",element:b.jsx(ar,{Element:X5})}),b.jsx(Wi,{path:"/flashcards",element:b.jsx(ar,{Element:W5})}),b.jsx(Wi,{path:"/add-posts",element:b.jsx(ar,{Element:Z5})})]})}):b.jsx("div",{id:"loading",children:b.jsx("div",{className:"header_logo",children:b.jsx("img",{src:Up,width:"150px"})})})})}pk.createRoot(document.getElementById("root")).render(b.jsx(ez,{}));
